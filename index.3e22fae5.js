function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function i(e){return e&&e.__esModule?e.default:e}var n={},o={},r=t.parcelRequire4f35;function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequire4f35=r),r.register("1XW5B",(function(t,i){var n,o;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var r={};n=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)r[t[i]]=e[t[i]]},o=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("hzoey",(function(e,t){e.exports=r("kVupL")})),r.register("kVupL",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),i=arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY. MM. DD. ";n(this,e),this._now=t,this.isGMT=o,this.dateFormat=r,this.isGMT&&(this._now=this.toDate(this._now).getTime()),this.format={a_few_seconds_ago:"a few seconds ago",seconds_ago:"seconds ago",a_minute_ago:"a minute ago",minutes_ago:"minutes ago",an_hour_ago:"an hour ago",hours_ago:"hours ago",a_day_ago:"a day ago",days_ago:"days ago",a_month_ago:"a month ago",months_ago:"months ago",a_year_ago:"a year ago",years_ago:"years ago"},this.extend(this.format,i)}return i(e,[{key:"extend",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}},{key:"getDateFormat",value:function(e,t,i,n,o,r){var s=this.dateFormat;return-1===this.dateFormat.indexOf("YYYY")&&(e=e.toString().substring(2,4)),s=s.replace("YYYY",e).replace("YY",e).replace("MM",t).replace("DD",i),n&&o&&r&&(s=s+" "+n+":"+o+":"+r),s}},{key:"setDateFormat",value:function(e){this.dateFormat=e}},{key:"toDate",value:function(e){return this.toGMTDate(e,!0)}},{key:"toGMTDate",value:function(e,t){var i=new Date,n=i.getTimezoneOffset();if(!e)return i;t&&(n=0);var o=e.split("T"),r=o[0].split("-"),s=o[1].split(":");return new Date(r[0],parseInt(r[1],10)-1,r[2],s[0],parseInt(s[1],10)-n,s[2].split(".")[0])}},{key:"getNow",value:function(){return new Date(this._now)}},{key:"getNowMilisecond",value:function(){return this._now}},{key:"setNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+new Date;return this._now=e,this._now}},{key:"calculate",value:function(e){var t=Math.abs(this._now-e)/1e3,i=Math.floor(t/31536e3),n=Math.floor(t/2592e3),o=Math.floor(t/86400),r=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,a=Math.floor(t%60);return i>1?""+i+this.format.years_ago:i>0?""+this.format.a_year_ago:n>1?""+n+this.format.months_ago:n>0?""+this.format.a_month_ago:o>1?""+o+this.format.days_ago:o>0?""+this.format.a_day_ago:r>1?""+r+this.format.hours_ago:r>0?""+this.format.an_hour_ago:s>1?""+s+this.format.minutes_ago:s>0?""+this.format.a_minute_ago:a>20&&this.format.seconds_ago?""+a+this.format.seconds_ago:a>0?""+this.format.a_few_seconds_ago:""}},{key:"_format",value:function(e,t){var i=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),s=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2);return t?this.getDateFormat(i,n,o):this.getDateFormat(i,n,o,r,s,a)}},{key:"diffDate",value:function(e,t){return e&&t?Math.abs(t.getTime()-e.getTime())/1e3:0}},{key:"printUntil",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month",i=arguments[2],n=this.printFull(e,!1,!0),o=this.getNow(),r=this.diffDate(n,o),s=Math.floor(r/31536e3),a=Math.floor(r/2592e3),l=Math.floor(r/86400);return s>0&&"year"==t||a>0&&"month"==t||l>0&&"day"==t?this._format(new Date(n),i):this.calculate(new Date(n))}},{key:"printOnlyDate",value:function(e){return this.printFull(e,!0)}},{key:"printFull",value:function(e,t,i){var n,o=new Date,r=void 0,s=o.getTimezoneOffset();if(!e)return o;if(-1==e.indexOf("T"))return this._format(new Date(e));n=(e=e.split("T"))[0].split("-"),r=e[1].split(":");var a=n[0],l=parseInt(n[1],10)-1,c=n[2],d=r[0],u=parseInt(r[1],10)-s,h=r[2].split(".")[0],g=new Date(a,l,c,d,u,h);return i?g:this._format(g,t)}},{key:"print",value:function(e){return e?this.calculate(e):""}}]),e}();e.exports.default=o})),r.register("bypj5",(function(t,i){e(t.exports,"Emitter",(function(){return r("LrwN4").Emitter})),e(t.exports,"MarkerSeverity",(function(){return r("LrwN4").MarkerSeverity})),e(t.exports,"Range",(function(){return r("LrwN4").Range})),e(t.exports,"Uri",(function(){return r("LrwN4").Uri})),e(t.exports,"editor",(function(){return r("LrwN4").editor})),e(t.exports,"languages",(function(){return r("LrwN4").languages})),r("LrwN4")})),r.register("5cHbj",(function(e,t){e.exports=Promise.all([import("./"+r("1XW5B").resolve("cjWZn")),r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("fYdco"))]).then((()=>r("7UzIl")))})),r.register("fHWfA",(function(e,t){var i=r("2eDmX");e.exports=i((function(e){return new Promise((function(t,i){var n=document.getElementsByTagName("link");if([].concat(n).some((function(t){return t.href===e&&t.rel.indexOf("stylesheet")>-1})))t();else{var o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onerror=function(e){o.onerror=o.onload=null,o.remove(),i(e)},o.onload=function(){o.onerror=o.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),r.register("2eDmX",(function(e,t){var i={},n={},o={};function r(e){switch(e){case"preload":return n;case"prefetch":return o;default:return i}}e.exports=function(e,t){return function(i){var n=r(t);return n[i]?n[i]:n[i]=e.apply(null,arguments).catch((function(e){throw delete n[i],e}))}}})),r.register("gUowP",(function(t,i){e(t.exports,"Emitter",(function(){return r("LrwN4").Emitter})),e(t.exports,"MarkerSeverity",(function(){return r("LrwN4").MarkerSeverity})),e(t.exports,"Range",(function(){return r("LrwN4").Range})),e(t.exports,"Uri",(function(){return r("LrwN4").Uri})),e(t.exports,"editor",(function(){return r("LrwN4").editor})),e(t.exports,"languages",(function(){return r("LrwN4").languages})),r("LrwN4")})),r.register("9wlvQ",(function(e,t){e.exports=Promise.all([import("./"+r("1XW5B").resolve("7WUpD")),r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("437Vf"))]).then((()=>r("a5cU9")))})),r.register("iQnxA",(function(t,i){e(t.exports,"Emitter",(function(){return r("LrwN4").Emitter})),e(t.exports,"Range",(function(){return r("LrwN4").Range})),e(t.exports,"Uri",(function(){return r("LrwN4").Uri})),e(t.exports,"editor",(function(){return r("LrwN4").editor})),e(t.exports,"languages",(function(){return r("LrwN4").languages})),r("LrwN4")})),r.register("cPTOK",(function(e,t){e.exports=Promise.all([import("./"+r("1XW5B").resolve("bBDEn")),r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("3kdSN"))]).then((()=>r("7tjkG")))})),r.register("bfvIv",(function(t,i){e(t.exports,"languages",(function(){return r("LrwN4").languages})),r("LrwN4")})),r.register("34guH",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("fLjqF")).then((()=>r("d9gJN")))})),r.register("ejCjy",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("1bkV8")).then((()=>r("8TwGy")))})),r.register("7hQRV",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("5zUwj")).then((()=>r("lXjXG")))})),r.register("ayZlz",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("6BIGk")).then((()=>r("9wRYE")))})),r.register("lPEzf",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("7sxE5")).then((()=>r("01Qj4")))})),r.register("kMDRq",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("ecBHu")).then((()=>r("5iNgP")))})),r.register("k4Yu6",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("3w4FJ")).then((()=>r("a3VqQ")))})),r.register("iPizf",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("2BfYG")).then((()=>r("28Urt")))})),r.register("dxXUc",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("lqSaV")).then((()=>r("7pQEk")))})),r.register("eCqOd",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("c6pZU")).then((()=>r("dN44P")))})),r.register("h8KL5",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("3G1f6")).then((()=>r("8lb0o")))})),r.register("ksI6g",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("bFkCy")).then((()=>r("716Pu")))})),r.register("cTtnR",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("fF5KO")).then((()=>r("4I5OZ")))})),r.register("j9pBO",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("5tzBG")).then((()=>r("7pLA4")))})),r.register("eJHmO",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("7SqeW")).then((()=>r("ZRDiq")))})),r.register("2PBDA",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("41vRb")).then((()=>r("6CjQ1")))})),r.register("ea9Ud",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("g5r81")).then((()=>r("1IBW9")))})),r.register("cRKcg",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("5BXVc")).then((()=>r("i9uwm")))})),r.register("blUKb",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("aLfs2")).then((()=>r("8dhnB")))})),r.register("iHNwe",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("cEIQx"))]).then((()=>r("cI2iq")))})),r.register("6MvXY",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("02hhs")).then((()=>r("gB09c")))})),r.register("6zlRE",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("cy3qy"))]).then((()=>r("8CztR")))})),r.register("85iRx",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("519Qi")).then((()=>r("bXTlG")))})),r.register("4IFqq",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("6enpq")).then((()=>r("lH8KO")))})),r.register("aIGjd",(function(e,t){e.exports=Promise.all([import("./"+r("1XW5B").resolve("7BclP")),r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("2K0lA"))]).then((()=>r("5jqum")))})),r.register("6iH0h",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("lrRLe")).then((()=>r("166dT")))})),r.register("34Pya",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("23WSv")).then((()=>r("jp1Lv")))})),r.register("iMm64",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("7NKQo")).then((()=>r("ckEmZ")))})),r.register("3NbtV",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("hz1ca")).then((()=>r("aWXsX")))})),r.register("c8nR3",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("jTmzd")).then((()=>r("2X7h0")))})),r.register("cGmKu",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("20cGB"))]).then((()=>r("aPB73")))})),r.register("eMAt7",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("isAUG")).then((()=>r("6YUzq")))})),r.register("5MFOt",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("f8o64")).then((()=>r("7wlDJ")))})),r.register("bBuna",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("inBEZ")).then((()=>r("5I89k")))})),r.register("Z4EJl",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("lXs6T")).then((()=>r("5KPPF")))})),r.register("jS8Wp",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("7InWK")).then((()=>r("ePVQG")))})),r.register("2WsEJ",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("rvjUM")).then((()=>r("1Pxm2")))})),r.register("l2MO4",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("eg65b")).then((()=>r("3AEZq")))})),r.register("cMPAB",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("kKvMt")).then((()=>r("5TdzF")))})),r.register("cJAi5",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("2Hy7j")).then((()=>r("at5uC")))})),r.register("fKG6V",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("jDRab")).then((()=>r("a6S1H")))})),r.register("gu7dn",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("79euB")).then((()=>r("gPkCG")))})),r.register("bMJhI",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("cUsby")).then((()=>r("056PC")))})),r.register("3uGXK",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("cp4ld")).then((()=>r("2YUkP")))})),r.register("ixQTS",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("iD4XI")).then((()=>r("8JWA2")))})),r.register("1Pxe4",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("4cUiH")).then((()=>r("39EH9")))})),r.register("d5rFo",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("1hV7g"))]).then((()=>r("bLGDP")))})),r.register("j1kWc",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("e2yWE")).then((()=>r("2vWEi")))})),r.register("1OUFy",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("dbI8J")).then((()=>r("675AQ")))})),r.register("1TQdT",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("1K0Zy"))]).then((()=>r("2cMD4")))})),r.register("7MiP4",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("2UafZ")).then((()=>r("eAYYl")))})),r.register("bvgIG",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("8WaO1")).then((()=>r("ur5Sj")))})),r.register("8xYWw",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("jyAtE")).then((()=>r("dAouq")))})),r.register("4YWKy",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("af5DR")).then((()=>r("fuvMs")))})),r.register("apmJg",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("4zpNH")).then((()=>r("8bkiX")))})),r.register("17vpk",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("fdUPr")).then((()=>r("i5dh0")))})),r.register("i5jjh",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("8xB0F")).then((()=>r("5CgKt")))})),r.register("6H37Y",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("8XIaN")).then((()=>r("caSuc")))})),r.register("cywiB",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("f8aL9")).then((()=>r("j36L6")))})),r.register("gU87W",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("f8NV6")).then((()=>r("hn0HJ")))})),r.register("990o9",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("ihb4M")).then((()=>r("eG3B0")))})),r.register("biqGo",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("hSRJF")).then((()=>r("bFNqa")))})),r.register("b1ZzU",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("fPef1")).then((()=>r("cOoWU")))})),r.register("a6N6b",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("5TXs5")).then((()=>r("bKPAF")))})),r.register("jVI9J",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("j8rFj")).then((()=>r("l3yv1")))})),r.register("bzypJ",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("64xxO")).then((()=>r("5Oqr0")))})),r.register("gyBIR",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("gLiVG")).then((()=>r("knwf3")))})),r.register("lVipP",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("7rl0V")).then((()=>r("2wcLV")))})),r.register("jXN4N",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("bC2qK")).then((()=>r("lN62g")))})),r.register("aThtS",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("7BclP"))]).then((()=>r("irzdT")))})),r.register("g4Oqg",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("kOKnj")).then((()=>r("6pF6F")))})),r.register("ixWSm",(function(e,t){e.exports=Promise.all([r("fHWfA")(new URL(r("1XW5B").resolve("jiDEu"),import.meta.url).toString()),import("./"+r("1XW5B").resolve("gDRIh"))]).then((()=>r("6QXNd")))})),r.register("cce1n",(function(e,t){e.exports=import("./"+r("1XW5B").resolve("ftV2h")).then((()=>r("6CWMP")))})),r.register("5B4aj",(function(e,t){var i,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(i,n){function o(i){e.removeListener(t,r),n(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),i([].slice.call(arguments))}m(e,t,r,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&m(e,"error",t,i)}(e,o,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){var o,r,s,a;if(l(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),s=r[t]),void 0===s)s=r[t]=i,++e._eventsCount;else if("function"==typeof s?s=r[t]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=s.length,a=d,console&&console.warn&&console.warn(a)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},o=u.bind(n);return o.listener=i,n.wrapFn=o,o}function g(e,t,i){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(o):f(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function m(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){n.once&&e.removeEventListener(t,o),i(r)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,d=f(l,c);for(i=0;i<c;++i)o(d[i],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var i,n,o,r,s;if(l(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(o=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){s=i[r].listener,o=r;break}if(o<0)return this;0===o?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,o),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var o,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(o=r[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return g(this,e,!0)},s.prototype.rawListeners=function(e){return g(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}})),r.register("1mlyy",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}})),r.register("kWQRP",(function(e,i){var n,o=r("aLykv");e.exports=E,E.ReadableState=k;r("5B4aj").EventEmitter;var s=function(e,t){return e.listeners(t).length},a=r("lJ9yc"),l=r("1UCgw").Buffer,c=t.Uint8Array||function(){};var d,u=r("8VMHh");d=u&&u.debuglog?u.debuglog("stream"):function(){};var h,g,p,f=r("3GYQH"),m=r("b22r5"),_=r("l5VbN").getHighWaterMark,b=r("iSsKT").codes,v=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,w=b.ERR_METHOD_NOT_IMPLEMENTED,C=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r("1mlyy")(E,a);var x=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(e,t,i){n=n||r("do3oY"),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=_(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r("gzXVr").StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function E(e){if(n=n||r("do3oY"),!(this instanceof E))return new E(e);var t=this instanceof n;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function D(e,t,i,n,o){d("readableAddChunk",t);var r,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(d("onEofChunk"),t.ended)return;if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,M(e)))}(e,s);else if(o||(r=function(e,t){var i;n=t,l.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(i=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return i}(s,t)),r)x(e,r);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n)s.endEmitted?x(e,new C):A(e,s,t,!0);else if(s.ended)x(e,new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!i?(t=s.decoder.write(t),s.objectMode||0!==t.length?A(e,s,t,!1):L(e,s)):A(e,s,t,!1)}else n||(s.reading=!1,L(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function A(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&T(e)),L(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),i=!0),D(this,e,t,!1,i)},E.prototype.unshift=function(e){return D(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){h||(h=r("gzXVr").StringDecoder);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;d("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,o.nextTick(M,e))}function M(e){var t=e._readableState;d("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function L(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(d("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){d("readable nexttick read 0"),e.read(0)}function F(e,t){d("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function z(e){var t=e._readableState;d("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,o.nextTick(W,t,e))}function W(e,t){if(d("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function H(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}E.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&z(this),null;var n,o=t.needReadable;return d("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",o=!0),t.ended||t.reading?d("reading or ended",o=!1):o&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(i,t))),null===(n=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&z(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){x(this,new w("_read()"))},E.prototype.pipe=function(e,t){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,d("pipe count=%d opts=%j",n.pipesCount,t);var r=(!t||!1!==t.end)&&e!==o.stdout&&e!==o.stderr?l:m;function a(t,o){d("onunpipe"),t===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,d("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",c),e.removeListener("error",g),e.removeListener("unpipe",a),i.removeListener("end",l),i.removeListener("end",m),i.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function l(){d("onend"),e.end()}n.endEmitted?o.nextTick(r):i.once("end",r),e.on("unpipe",a);var c=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,B(e))}}(i);e.on("drain",c);var u=!1;function h(t){d("ondata");var o=e.write(t);d("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==H(n.pipes,e))&&!u&&(d("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function g(t){d("onerror",t),m(),e.removeListener("error",g),0===s(e,"error")&&x(e,t)}function p(){e.removeListener("finish",f),m()}function f(){d("onfinish"),e.removeListener("close",p),m()}function m(){d("unpipe"),i.unpipe(e)}return i.on("data",h),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}(e,"error",g),e.once("close",p),e.once("finish",f),e.emit("pipe",i),n.flowing||(d("pipe resume"),i.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this,{hasUnpiped:!1});return this}var s=H(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},E.prototype.on=function(e,t){var i=a.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,d("on readable",n.length,n.reading),n.length?T(this):n.reading||o.nextTick(P,this))),i},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var i=a.prototype.removeListener.call(this,e,t);return"readable"===e&&o.nextTick(O,this),i},E.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||o.nextTick(O,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(F,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,i=this._readableState,n=!1;for(var o in e.on("end",(function(){if(d("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(d("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o)||(i.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var r=0;r<S.length;r++)e.on(S[r],this.emit.bind(this,S[r]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===g&&(g=r("gklWq")),g(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=j,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===p&&(p=r("4R61S")),p(E,e,t)})})),r.register("lJ9yc",(function(e,t){e.exports=r("5B4aj").EventEmitter})),r.register("8VMHh",(function(e,t){})),r.register("3GYQH",(function(e,t){function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r("1UCgw").Buffer,a=r("8VMHh").inspect,l=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,i,n,o=s.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=r.data,i=o,n=a,s.prototype.copy.call(t,i,n),a+=r.data.length,r=r.next;return o}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,r=e>o.length?o.length:e;if(r===o.length?n+=o:n+=o.slice(0,e),0==(e-=r)){r===o.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(r));break}++i}return this.length-=i,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),i=this.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var o=i.data,r=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,r),0==(e-=r)){r===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(r));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()})),r.register("b22r5",(function(e,t){var i=r("aLykv");function n(e,t){s(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(s,this,e)):i.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?i.nextTick(o,r):(r._writableState.errorEmitted=!0,i.nextTick(n,r,e)):i.nextTick(n,r,e):t?(i.nextTick(o,r),t(e)):i.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,n=e._writableState;i&&i.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}})),r.register("l5VbN",(function(e,t){var i=r("iSsKT").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,o){var r=function(e,t,i){return null!=e.highWaterMark?e.highWaterMark:t?e[i]:null}(t,o,n);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new i(o?n:"highWaterMark",r);return Math.floor(r)}return e.objectMode?16:16384}}})),r.register("iSsKT",(function(t,i){var n;e(t.exports,"codes",(function(){return n}),(function(e){return n=e}));var o={};function r(e,t,i){i||(i=Error);var n=function(e){var i,n;function o(i,n,o){return e.call(this,function(e,i,n){return"string"==typeof t?t:t(e,i,n)}(i,n,o))||this}return n=e,(i=o).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n,o}(i);n.prototype.name=i.name,n.prototype.code=e,o[e]=n}function s(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,i){var n,o,r,a;if("string"==typeof t&&(o="not ",t.substr(!r||r<0?0:+r,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(s(t,"type"));else{var l=function(e,t,i){return"number"!=typeof i&&(i=0),!(i+t.length>e.length)&&-1!==e.indexOf(t,i)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(s(t,"type"))}return a+=". Received type ".concat(typeof i)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),n=o})),r.register("do3oY",(function(e,t){var i=r("aLykv"),n=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=d;var o=r("kWQRP"),s=r("5Cf3m");r("1mlyy")(d,o);for(var a=n(s.prototype),l=0;l<a.length;l++){var c=a[l];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||i.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})})),r.register("5Cf3m",(function(e,i){var n,o=r("aLykv");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(i),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=E,E.WritableState=k;var a={deprecate:r("kCmUg")},l=r("lJ9yc"),c=r("1UCgw").Buffer,d=t.Uint8Array||function(){};var u,h=r("b22r5"),g=r("l5VbN").getHighWaterMark,p=r("iSsKT").codes,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,_=p.ERR_MULTIPLE_CALLBACK,b=p.ERR_STREAM_CANNOT_PIPE,v=p.ERR_STREAM_DESTROYED,y=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,C=p.ERR_UNKNOWN_ENCODING,x=h.errorOrDestroy;function S(){}function k(e,t,i){n=n||r("do3oY"),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=g(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,n=i.sync,r=i.writecb;if("function"!=typeof r)throw new _;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,n,r){--t.pendingcb,i?(o.nextTick(r,n),o.nextTick(M,e,t),e._writableState.errorEmitted=!0,x(e,n)):(r(n),e._writableState.errorEmitted=!0,x(e,n),M(e,t))}(e,i,n,t,r);else{var s=R(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||I(e,i),n?o.nextTick(A,e,i,s,r):A(e,i,s,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function E(e){var t=this instanceof(n=n||r("do3oY"));if(!t&&!u.call(E,this))return new E(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function D(e,t,i,n,o,r,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):i?e._writev(o,t.onwrite):e._write(o,r,t.onwrite),t.sync=!1}function A(e,t,i,n){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),M(e,t)}function I(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,o=new Array(n),r=t.corkedRequestsFree;r.entry=i;for(var a=0,l=!0;i;)o[a]=i,i.isBuf||(l=!1),i=i.next,a+=1;o.allBuffers=l,D(e,t,!0,t.length,o,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,u=i.callback;if(D(e,t,!1,t.objectMode?1:c.length,c,d,u),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(i){t.pendingcb--,i&&x(e,i),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var i=R(t);if(i&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,o.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return i}r("1mlyy")(E,l),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===E&&(e&&e._writableState instanceof k)}})):u=function(e){return e instanceof this},E.prototype.pipe=function(){x(this,new b)},E.prototype.write=function(e,t,i){var n,r=this._writableState,s=!1,a=!r.objectMode&&(n=e,c.isBuffer(n)||n instanceof d);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(i=t,t=null),a?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof i&&(i=S),r.ending?function(e,t){var i=new w;x(e,i),o.nextTick(t,i)}(this,i):(a||function(e,t,i,n){var r;return null===i?r=new y:"string"==typeof i||t.objectMode||(r=new f("chunk",["string","Buffer"],i)),!r||(x(e,r),o.nextTick(n,r),!1)}(this,r,e,i))&&(r.pendingcb++,s=function(e,t,i,n,o,r){if(!i){var s=function(e,t,i){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,i));return t}(t,n,o);n!==s&&(i=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:i,callback:r,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else D(e,t,!1,a,n,o,r);return l}(this,r,a,e,t,i)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new C(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,i){i(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,i){var n=this._writableState;return"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,i){t.ending=!0,M(e,t),i&&(t.finished?o.nextTick(i):e.once("finish",i));t.ended=!0,e.writable=!1}(this,n,i),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(e,t){t(e)}})),r.register("kCmUg",(function(e,i){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}})),r.register("gzXVr",(function(t,i){var n;e(t.exports,"StringDecoder",(function(){return n}),(function(e){return n=e}));var o=r("dc3r6").Buffer,s=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=u,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=g,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function h(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n=a,a.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var i=function(e,t,i){var n=t.length-1;if(n<i)return 0;var o=l(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<i||-2===o)return 0;if((o=l(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<i||-2===o)return 0;if((o=l(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),r.register("dc3r6",(function(e,t){var i=r("1UCgw"),n=i.Buffer;function o(e,t){for(var i in e)t[i]=e[i]}function s(e,t,i){return n(e,t,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,e.exports),e.exports.Buffer=s),s.prototype=Object.create(n.prototype),o(n,s),s.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,i)},s.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof i?o.fill(t,i):o.fill(t):o.fill(0),o},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}})),r.register("gklWq",(function(e,t){var i,n=r("aLykv");function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=r("iowWU"),a=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),g=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var i=e[g].read();null!==i&&(e[u]=null,e[a]=null,e[l]=null,t(p(i,!1)))}}function m(e){n.nextTick(f,e)}var _=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((o(i={get stream(){return this[g]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[d])return Promise.resolve(p(void 0,!0));if(this[g].destroyed)return new Promise((function(t,i){n.nextTick((function(){e[c]?i(e[c]):t(p(void 0,!0))}))}));var i,o=this[u];if(o)i=new Promise(function(e,t){return function(i,n){e.then((function(){t[d]?i(p(void 0,!0)):t[h](i,n)}),n)}}(o,this));else{var r=this[g].read();if(null!==r)return Promise.resolve(p(r,!1));i=new Promise(this[h])}return this[u]=i,i}},Symbol.asyncIterator,(function(){return this})),o(i,"return",(function(){var e=this;return new Promise((function(t,i){e[g].destroy(null,(function(e){e?i(e):t(p(void 0,!0))}))}))})),i),_);e.exports=function(e){var t,i=Object.create(b,(o(t={},g,{value:e,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,d,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var n=i[g].read();n?(i[u]=null,i[a]=null,i[l]=null,e(p(n,!1))):(i[a]=e,i[l]=t)},writable:!0}),t));return i[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=i[l];return null!==t&&(i[u]=null,i[a]=null,i[l]=null,t(e)),void(i[c]=e)}var n=i[a];null!==n&&(i[u]=null,i[a]=null,i[l]=null,n(p(void 0,!0))),i[d]=!0})),e.on("readable",m.bind(null,i)),i}})),r.register("iowWU",(function(e,t){var i=r("iSsKT").codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function e(t,o,r){if("function"==typeof o)return e(t,null,o);o||(o={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];e.apply(this,n)}}}(r||n);var s=o.readable||!1!==o.readable&&t.readable,a=o.writable||!1!==o.writable&&t.writable,l=function(){t.writable||d()},c=t._writableState&&t._writableState.finished,d=function(){a=!1,c=!0,s||r.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,u=!0,a||r.call(t)},g=function(e){r.call(t,e)},p=function(){var e;return s&&!u?(t._readableState&&t._readableState.ended||(e=new i),r.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new i),r.call(t,e)):void 0},f=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",d),t.on("abort",p),t.req?f():t.on("request",f)),t.on("end",h),t.on("finish",d),!1!==o.error&&t.on("error",g),t.on("close",p),function(){t.removeListener("complete",d),t.removeListener("abort",p),t.removeListener("request",f),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",g),t.removeListener("close",p)}}})),r.register("4R61S",(function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),r.register("iAWx9",(function(e,t){e.exports=d;var i=r("iSsKT").codes,n=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,l=r("do3oY");function c(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new o);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,i){h(e,t,i)}))}function h(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r("1mlyy")(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,i){i(new n("_transform()"))},d.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}})),r.register("awteF",(function(e,t){e.exports=n;var i=r("iAWx9");function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r("1mlyy")(n,i),n.prototype._transform=function(e,t,i){i(null,e)}})),r.register("4Uzx8",(function(e,t){var i;var n=r("iSsKT").codes,o=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e,t,n,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=r("iowWU")),i(e,{readable:t,writable:n},(function(e){if(e)return o(e);a=!0,o()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function d(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n,r=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,i){var o=i<t.length-1;return l(e,o,i>0,(function(e){n||(n=e),e&&s.forEach(c),o||(s.forEach(c),r(n))}))}));return t.reduce(d)}})),r.register("l0jKv",(function(e,t){var i=r("aLykv");function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o,s,a=r("eCcrX").codes,l=a.ERR_AMBIGUOUS_ARGUMENT,c=a.ERR_INVALID_ARG_TYPE,d=a.ERR_INVALID_ARG_VALUE,u=a.ERR_INVALID_RETURN_VALUE,h=a.ERR_MISSING_ARGS,g=r("fuCzJ"),p=r("lquaG").inspect,f=r("lquaG").types,m=f.isPromise,_=f.isRegExp,b=Object.assign?Object.assign:r("ZEq1F").assign,v=Object.is?Object.is:r("hL2B8");new Map;function y(){var e=r("l9nY2");o=e.isDeepEqual,s=e.isDeepStrictEqual}var w=!1,C=e.exports=E,x={};function S(e){if(e.message instanceof Error)throw e.message;throw new g(e)}function k(e,t,i,n){if(!i){var o=!1;if(0===t)o=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var r=new g({actual:i,expected:!0,message:n,operator:"==",stackStartFn:e});throw r.generatedMessage=o,r}}function E(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];k.apply(void 0,[E,t.length].concat(t))}C.fail=function e(t,n,o,r,s){var a,l=arguments.length;if(0===l)a="Failed";else if(1===l)o=t,t=void 0;else{if(!1===w){w=!0;var c=i.emitWarning?i.emitWarning:console.warn.bind(console);c("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===l&&(r="!=")}if(o instanceof Error)throw o;var d={actual:t,expected:n,operator:void 0===r?"fail":r,stackStartFn:s||e};void 0!==o&&(d.message=o);var u=new g(d);throw a&&(u.message=a,u.generatedMessage=!0),u},C.AssertionError=g,C.ok=E,C.equal=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");t!=i&&S({actual:t,expected:i,message:n,operator:"==",stackStartFn:e})},C.notEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");t==i&&S({actual:t,expected:i,message:n,operator:"!=",stackStartFn:e})},C.deepEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");void 0===o&&y(),o(t,i)||S({actual:t,expected:i,message:n,operator:"deepEqual",stackStartFn:e})},C.notDeepEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");void 0===o&&y(),o(t,i)&&S({actual:t,expected:i,message:n,operator:"notDeepEqual",stackStartFn:e})},C.deepStrictEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");void 0===o&&y(),s(t,i)||S({actual:t,expected:i,message:n,operator:"deepStrictEqual",stackStartFn:e})},C.notDeepStrictEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");void 0===o&&y();s(t,i)&&S({actual:t,expected:i,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},C.strictEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");v(t,i)||S({actual:t,expected:i,message:n,operator:"strictEqual",stackStartFn:e})},C.notStrictEqual=function e(t,i,n){if(arguments.length<2)throw new h("actual","expected");v(t,i)&&S({actual:t,expected:i,message:n,operator:"notStrictEqual",stackStartFn:e})};var D=function e(t,i,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&_(t[e])&&t[e].test(n[e])?o[e]=n[e]:o[e]=t[e])}))};function A(e,t,i,n,o,r){if(!(i in e)||!s(e[i],t[i])){if(!n){var a=new D(e,o),l=new D(t,o,e),c=new g({actual:a,expected:l,operator:"deepStrictEqual",stackStartFn:r});throw c.actual=e,c.expected=t,c.operator=r.name,c}S({actual:e,expected:t,message:n,operator:r.name,stackStartFn:r})}}function I(e,t,i,r){if("function"!=typeof t){if(_(t))return t.test(e);if(2===arguments.length)throw new c("expected",["Function","RegExp"],t);if("object"!==n(e)||null===e){var s=new g({actual:e,expected:t,message:i,operator:"deepStrictEqual",stackStartFn:r});throw s.operator=r.name,s}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(0===a.length)throw new d("error",t,"may not be an empty object");return void 0===o&&y(),a.forEach((function(n){"string"==typeof e[n]&&_(t[n])&&t[n].test(e[n])||A(e,t,n,i,a,r)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function R(e){if("function"!=typeof e)throw new c("fn","Function",e);try{e()}catch(e){return e}return x}function T(e){return m(e)||null!==e&&"object"===n(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function M(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!T(t=e()))throw new u("instance of Promise","promiseFn",t)}else{if(!T(e))throw new c("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return x})).catch((function(e){return e}))}))}function L(e,t,i,o){if("string"==typeof i){if(4===arguments.length)throw new c("error",["Object","Error","Function","RegExp"],i);if("object"===n(t)&&null!==t){if(t.message===i)throw new l("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===i)throw new l("error/message",'The error "'.concat(t,'" is identical to the message.'));o=i,i=void 0}else if(null!=i&&"object"!==n(i)&&"function"!=typeof i)throw new c("error",["Object","Error","Function","RegExp"],i);if(t===x){var r="";i&&i.name&&(r+=" (".concat(i.name,")")),r+=o?": ".concat(o):".";var s="rejects"===e.name?"rejection":"exception";S({actual:void 0,expected:i,operator:e.name,message:"Missing expected ".concat(s).concat(r),stackStartFn:e})}if(i&&!I(t,i,o,e))throw t}function N(e,t,i,n){if(t!==x){if("string"==typeof i&&(n=i,i=void 0),!i||I(t,i)){var o=n?": ".concat(n):".",r="doesNotReject"===e.name?"rejection":"exception";S({actual:t,expected:i,operator:e.name,message:"Got unwanted ".concat(r).concat(o,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function O(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];k.apply(void 0,[O,t.length].concat(t))}C.throws=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];L.apply(void 0,[e,R(t)].concat(n))},C.rejects=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return M(t).then((function(t){return L.apply(void 0,[e,t].concat(n))}))},C.doesNotThrow=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];N.apply(void 0,[e,R(t)].concat(n))},C.doesNotReject=function e(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return M(t).then((function(t){return N.apply(void 0,[e,t].concat(n))}))},C.ifError=function e(t){if(null!=t){var i="ifError got unwanted exception: ";"object"===n(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?i+=t.constructor.name:i+=t.message:i+=p(t);var o=new g({actual:t,expected:null,operator:"ifError",message:i,stackStartFn:e}),r=t.stack;if("string"==typeof r){var s=r.split("\n");s.shift();for(var a=o.stack.split("\n"),l=0;l<s.length;l++){var c=a.indexOf(s[l]);if(-1!==c){a=a.slice(0,c);break}}o.stack="".concat(a.join("\n"),"\n").concat(s.join("\n"))}throw o}},C.strict=b(O,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual}),C.strict.strict=C.strict})),r.register("eCcrX",(function(t,i){var n;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}e(t.exports,"codes",(function(){return n}),(function(e){return n=e}));var c,d,u={};function h(e,t,i){i||(i=Error);var n=function(i){function n(i,o,r){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),l=s(this,a(n).call(this,function(e,i,n){return"string"==typeof t?t:t(e,i,n)}(i,o,r))),l.code=e,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,i),n}(i);u[e]=n}function g(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),h("ERR_INVALID_ARG_TYPE",(function(e,t,i){var n,s,a,l;if(void 0===c&&(c=r("l0jKv")),c("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(!a||a<0?0:+a,s.length)===s)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}(e," argument"))l="The ".concat(e," ").concat(n," ").concat(g(t,"type"));else{var d=function(e,t,i){return"number"!=typeof i&&(i=0),!(i+t.length>e.length)&&-1!==e.indexOf(t,i)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(d," ").concat(n," ").concat(g(t,"type"))}return l+=". Received type ".concat(o(i))}),TypeError),h("ERR_INVALID_ARG_VALUE",(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===d&&(d=r("lquaG"));var n=d.inspect(t);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(i,". Received ").concat(n)}),TypeError,RangeError),h("ERR_INVALID_RETURN_VALUE",(function(e,t,i){var n;return n=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(o(i)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(n,".")}),TypeError),h("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];void 0===c&&(c=r("l0jKv")),c(t.length>0,"At least one arg needs to be specified");var n="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:n+="".concat(t[0]," argument");break;case 2:n+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:n+=t.slice(0,o-1).join(", "),n+=", and ".concat(t[o-1]," arguments")}return"".concat(n," must be specified")}),TypeError),n=u})),r.register("lquaG",(function(e,t){var i=r("aLykv"),n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++)i[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return i},o=/%[sdj%]/g;e.exports.format=function(e){if(!b(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(l(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,r=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(i>=r)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}})),a=n[i];i<r;a=n[++i])m(a)||!w(a)?s+=" "+a:s+=" "+l(a);return s},e.exports.deprecate=function(t,n){if(void 0!==i&&!0===i.noDeprecation)return t;if(void 0===i)return function(){return e.exports.deprecate(t,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),o=!0}return t.apply(this,arguments)}};var s={},a=/^$/;function l(t,i){var n={seen:[],stylize:d};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(i)?n.showHidden=i:i&&e.exports._extend(n,i),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),u(n,t,n.depth)}function c(e,t){var i=l.styles[t];return i?"["+l.colors[i][0]+"m"+e+"["+l.colors[i][1]+"m":e}function d(e,t){return e}function u(t,i,n){if(t.customInspect&&i&&S(i.inspect)&&i.inspect!==e.exports.inspect&&(!i.constructor||i.constructor.prototype!==i)){var o=i.inspect(n,t);return b(o)||(o=u(t,o,n)),o}var r=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(_(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,i);if(r)return r;var s=Object.keys(i),a=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),x(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(i);if(0===s.length){if(S(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(y(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(C(i))return t.stylize(Date.prototype.toString.call(i),"date");if(x(i))return h(i)}var c,d="",w=!1,k=["{","}"];(p(i)&&(w=!0,k=["[","]"]),S(i))&&(d=" [Function"+(i.name?": "+i.name:"")+"]");return y(i)&&(d=" "+RegExp.prototype.toString.call(i)),C(i)&&(d=" "+Date.prototype.toUTCString.call(i)),x(i)&&(d=" "+h(i)),0!==s.length||w&&0!=i.length?n<0?y(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=w?function(e,t,i,n,o){for(var r=[],s=0,a=t.length;s<a;++s)I(t,String(s))?r.push(g(e,t,i,n,String(s),!0)):r.push("");return o.forEach((function(o){o.match(/^\d+$/)||r.push(g(e,t,i,n,o,!0))})),r}(t,i,n,a,s):s.map((function(e){return g(t,i,n,a,e,w)})),t.seen.pop(),function(e,t,i){var n=0;return e.reduce((function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}(c,d,k)):k[0]+d+k[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,i,n,o,r){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),I(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(i)?u(e,l.value,null):u(e,l.value,i-1)).indexOf("\n")>-1&&(a=r?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(r&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function _(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"==typeof e&&null!==e}function C(e){return w(e)&&"[object Date]"===k(e)}function x(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}e.exports.debuglog=function(t){if(t=t.toUpperCase(),!s[t])if(a.test(t)){var n=i.pid;s[t]=function(){var i=e.exports.format.apply(e.exports,arguments);console.error("%s %d: %s",t,n,i)}}else s[t]=function(){};return s[t]},e.exports.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.exports.types=r("9FRVv"),e.exports.isArray=p,e.exports.isBoolean=f,e.exports.isNull=m,e.exports.isNullOrUndefined=function(e){return null==e},e.exports.isNumber=_,e.exports.isString=b,e.exports.isSymbol=function(e){return"symbol"==typeof e},e.exports.isUndefined=v,e.exports.isRegExp=y,e.exports.types.isRegExp=y,e.exports.isObject=w,e.exports.isDate=C,e.exports.types.isDate=C,e.exports.isError=x,e.exports.types.isNativeError=x,e.exports.isFunction=S,e.exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.exports.isBuffer=r("iNz4Q");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.log=function(){console.log("%s - %s",A(),e.exports.format.apply(e.exports,arguments))},e.exports.inherits=r("1mlyy"),e.exports._extend=function(e,t){if(!t||!w(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}e.exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,n=new Promise((function(e,n){t=e,i=n})),o=[],r=0;r<arguments.length;r++)o.push(arguments[r]);o.push((function(e,n){e?i(e):t(n)}));try{e.apply(this,o)}catch(e){i(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},e.exports.promisify.custom=R,e.exports.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var o=t.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var r=this,s=function(){return o.apply(r,arguments)};e.apply(this,t).then((function(e){i.nextTick(s.bind(null,null,e))}),(function(e){i.nextTick(T.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}})),r.register("9FRVv",(function(e,t){var i=r("1FfWz"),n=r("7i6Nb"),o=r("gBsM7"),s=r("61t1A");function a(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,d=a(Object.prototype.toString),u=a(Number.prototype.valueOf),h=a(String.prototype.valueOf),g=a(Boolean.prototype.valueOf);if(l)var p=a(BigInt.prototype.valueOf);if(c)var f=a(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function _(e){return"[object Map]"===d(e)}function b(e){return"[object Set]"===d(e)}function v(e){return"[object WeakMap]"===d(e)}function y(e){return"[object WeakSet]"===d(e)}function w(e){return"[object ArrayBuffer]"===d(e)}function C(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===d(e)}function S(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}e.exports.isArgumentsObject=i,e.exports.isGeneratorFunction=n,e.exports.isTypedArray=s,e.exports.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.exports.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||S(e)},e.exports.isUint8Array=function(e){return"Uint8Array"===o(e)},e.exports.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},e.exports.isUint16Array=function(e){return"Uint16Array"===o(e)},e.exports.isUint32Array=function(e){return"Uint32Array"===o(e)},e.exports.isInt8Array=function(e){return"Int8Array"===o(e)},e.exports.isInt16Array=function(e){return"Int16Array"===o(e)},e.exports.isInt32Array=function(e){return"Int32Array"===o(e)},e.exports.isFloat32Array=function(e){return"Float32Array"===o(e)},e.exports.isFloat64Array=function(e){return"Float64Array"===o(e)},e.exports.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},e.exports.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},_.working="undefined"!=typeof Map&&_(new Map),e.exports.isMap=function(e){return"undefined"!=typeof Map&&(_.working?_(e):e instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),e.exports.isSet=function(e){return"undefined"!=typeof Set&&(b.working?b(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),e.exports.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},y.working="undefined"!=typeof WeakSet&&y(new WeakSet),e.exports.isWeakSet=function(e){return y(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.exports.isArrayBuffer=C,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),e.exports.isDataView=S;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===d(e)}function D(e){return void 0!==k&&(void 0===E.working&&(E.working=E(new k)),E.working?E(e):e instanceof k)}function A(e){return m(e,u)}function I(e){return m(e,h)}function R(e){return m(e,g)}function T(e){return l&&m(e,p)}function M(e){return c&&m(e,f)}e.exports.isSharedArrayBuffer=D,e.exports.isAsyncFunction=function(e){return"[object AsyncFunction]"===d(e)},e.exports.isMapIterator=function(e){return"[object Map Iterator]"===d(e)},e.exports.isSetIterator=function(e){return"[object Set Iterator]"===d(e)},e.exports.isGeneratorObject=function(e){return"[object Generator]"===d(e)},e.exports.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===d(e)},e.exports.isNumberObject=A,e.exports.isStringObject=I,e.exports.isBooleanObject=R,e.exports.isBigIntObject=T,e.exports.isSymbolObject=M,e.exports.isBoxedPrimitive=function(e){return A(e)||I(e)||R(e)||T(e)||M(e)},e.exports.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(C(e)||D(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e.exports,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),r.register("1FfWz",(function(e,t){var i=r("kcpX5")(),n=r("lyBus")("Object.prototype.toString"),o=function(e){return!(i&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===n(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n(e)&&"[object Function]"===n(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s})),r.register("kcpX5",(function(e,t){var i=r("bxVB6");e.exports=function(){return i()&&!!Symbol.toStringTag}})),r.register("bxVB6",(function(e,t){e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),i=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}})),r.register("lyBus",(function(e,t){var i=r("8cOGh"),n=r("7pn04"),o=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n(r):r}})),r.register("8cOGh",(function(e,t){var i,n=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new s},d=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,u=r("gZW3W")(),h=Object.getPrototypeOf||function(e){return e.__proto__},g={},p="undefined"==typeof Uint8Array?i:h(Uint8Array),f={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":u?h([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":g,"%AsyncGenerator%":g,"%AsyncGeneratorFunction%":g,"%AsyncIteratorPrototype%":g,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":g,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?h(h([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?h((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?h((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":u?h(""[Symbol.iterator]()):i,"%Symbol%":u?Symbol:i,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":p,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},m=function e(t){var i;if("%AsyncFunction%"===t)i=a("async function () {}");else if("%GeneratorFunction%"===t)i=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)i=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(i=h(o.prototype))}return f[t]=i,i},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=r("0dEub"),v=r("5XeGX"),y=b.call(Function.call,Array.prototype.concat),w=b.call(Function.apply,Array.prototype.splice),C=b.call(Function.call,String.prototype.replace),x=b.call(Function.call,String.prototype.slice),S=b.call(Function.call,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,D=function(e){var t=x(e,0,1),i=x(e,-1);if("%"===t&&"%"!==i)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var o=[];return C(e,k,(function(e,t,i,n){o[o.length]=i?C(n,E,"$1"):t||e})),o},A=function(e,t){var i,o=e;if(v(_,o)&&(o="%"+(i=_[o])[0]+"%"),v(f,o)){var r=f[o];if(r===g&&(r=m(o)),void 0===r&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:o,value:r}}throw new n("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/g,e))throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=D(e),o=i.length>0?i[0]:"",r=A("%"+o+"%",t),a=r.name,c=r.value,d=!1,u=r.alias;u&&(o=u[0],w(i,y([0,1],u)));for(var h=1,g=!0;h<i.length;h+=1){var p=i[h],m=x(p,0,1),_=x(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===_||"'"===_||"`"===_)&&m!==_)throw new n("property names with quotes must have matching quotes");if("constructor"!==p&&g||(d=!0),v(f,a="%"+(o+="."+p)+"%"))c=f[a];else if(null!=c){if(!(p in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=i.length){var b=l(c,p);c=(g=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:c[p]}else g=v(c,p),c=c[p];g&&!d&&(f[a]=c)}}return c}})),r.register("gZW3W",(function(e,t){var i="undefined"!=typeof Symbol&&Symbol,n=r("bxVB6");e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&n())))}})),r.register("0dEub",(function(e,t){var i=r("hrxUR");e.exports=Function.prototype.bind||i})),r.register("hrxUR",(function(e,t){var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString,r="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==r)throw new TypeError(i+t);for(var s,a=n.call(arguments,1),l=function(){if(this instanceof s){var i=t.apply(this,a.concat(n.call(arguments)));return Object(i)===i?i:this}return t.apply(e,a.concat(n.call(arguments)))},c=Math.max(0,t.length-a.length),d=[],u=0;u<c;u++)d.push("$"+u);if(s=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(l),t.prototype){var h=function(){};h.prototype=t.prototype,s.prototype=new h,h.prototype=null}return s}})),r.register("5XeGX",(function(e,t){var i=r("0dEub");e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)})),r.register("7pn04",(function(e,t){var i=r("0dEub"),n=r("8cOGh"),o=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||i.call(s,o),l=n("%Object.getOwnPropertyDescriptor%",!0),c=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=a(i,s,arguments);if(l&&c){var n=l(t,"length");n.configurable&&c(t,"length",{value:1+d(0,e.length-(arguments.length-1))})}return t};var u=function(){return a(i,o,arguments)};c?c(e.exports,"apply",{value:u}):e.exports.apply=u})),r.register("7i6Nb",(function(e,t){var i,n=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r("kcpX5")(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(s.test(o.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===n.call(e);if(!l)return!1;if(void 0===i){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();i=!!t&&l(t)}return l(e)===i}})),r.register("gBsM7",(function(e,i){var n=r("ebIoq"),o=r("aycxN"),s=r("lyBus"),a=s("Object.prototype.toString"),l=r("kcpX5")(),c="undefined"==typeof globalThis?t:globalThis,d=o(),u=s("String.prototype.slice"),h={},g=r("jDxsw"),p=Object.getPrototypeOf;l&&g&&p&&n(d,(function(e){if("function"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var i=p(t),n=g(i,Symbol.toStringTag);if(!n){var o=p(i);n=g(o,Symbol.toStringTag)}h[e]=n.get}}}));var f=r("61t1A");e.exports=function(e){return!!f(e)&&(l&&Symbol.toStringTag in e?function(e){var t=!1;return n(h,(function(i,n){if(!t)try{var o=i.call(e);o===n&&(t=o)}catch(e){}})),t}(e):u(a(e),8,-1))}})),r.register("ebIoq",(function(e,t){var i=r("knEcz"),n=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=function(e,t,i){for(var n=0,r=e.length;n<r;n++)o.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))},a=function(e,t,i){for(var n=0,o=e.length;n<o;n++)null==i?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)},l=function(e,t,i){for(var n in e)o.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))};e.exports=function(e,t,o){if(!i(t))throw new TypeError("iterator must be a function");var r;arguments.length>=3&&(r=o),"[object Array]"===n.call(e)?s(e,t,r):"string"==typeof e?a(e,t,r):l(e,t,r)}})),r.register("knEcz",(function(e,t){var i,n,o=Function.prototype.toString,r="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof r&&"function"==typeof Object.defineProperty)try{i=Object.defineProperty({},"length",{get:function(){throw n}}),n={},r((function(){throw 42}),null,i)}catch(e){e!==n&&(r=null)}else r=null;var s=/^\s*class\b/,a=function(e){try{var t=o.call(e);return s.test(t)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,d="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=r?function(e){if(e===d)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{r(e,null,i)}catch(e){if(e!==n)return!1}return!a(e)}:function(e){if(e===d)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!a(e)&&(o.call(e),!0)}catch(e){return!1}}(e);if(a(e))return!1;var t=l.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}})),r.register("aycxN",(function(e,i){var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?t:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}})),r.register("jDxsw",(function(e,t){var i=r("8cOGh")("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(e){i=null}e.exports=i})),r.register("61t1A",(function(e,i){var n=r("ebIoq"),o=r("aycxN"),s=r("lyBus"),a=s("Object.prototype.toString"),l=r("kcpX5")(),c="undefined"==typeof globalThis?t:globalThis,d=o(),u=s("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},h=s("String.prototype.slice"),g={},p=r("jDxsw"),f=Object.getPrototypeOf;l&&p&&f&&n(d,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var i=f(t),n=p(i,Symbol.toStringTag);if(!n){var o=f(i);n=p(o,Symbol.toStringTag)}g[e]=n.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l||!(Symbol.toStringTag in e)){var t=h(a(e),8,-1);return u(d,t)>-1}return!!p&&function(e){var t=!1;return n(g,(function(i,n){if(!t)try{t=i.call(e)===n}catch(e){}})),t}(e)}})),r.register("iNz4Q",(function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}})),r.register("fuCzJ",(function(e,t){var i=r("aLykv");function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return d(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},l(e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function d(e,t,i){return d=c()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return i&&u(o,i.prototype),o},d.apply(null,arguments)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var p=r("lquaG").inspect,f=r("eCcrX").codes.ERR_INVALID_ARG_TYPE;function m(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}var _="",b="",v="",y="",w={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function C(e){var t=Object.keys(e),i=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){i[t]=e[t]})),Object.defineProperty(i,"message",{value:e.message}),i}function x(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function S(e,t,n){var o="",r="",s=0,a="",l=!1,c=x(e),d=c.split("\n"),u=x(t).split("\n"),h=0,p="";if("strictEqual"===n&&"object"===g(e)&&"object"===g(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===d.length&&1===u.length&&d[0]!==u[0]){var f=d[0].length+u[0].length;if(f<=10){if(!("object"===g(e)&&null!==e||"object"===g(t)&&null!==t||0===e&&0===t))return"".concat(w[n],"\n\n")+"".concat(d[0]," !== ").concat(u[0],"\n")}else if("strictEqualObject"!==n){if(f<(i.stderr&&i.stderr.isTTY?i.stderr.columns:80)){for(;d[0][h]===u[0][h];)h++;h>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var i=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,i-e.length)}(" ",h),"^"),h=0)}}}for(var C=d[d.length-1],S=u[u.length-1];C===S&&(h++<2?a="\n  ".concat(C).concat(a):o=C,d.pop(),u.pop(),0!==d.length&&0!==u.length);)C=d[d.length-1],S=u[u.length-1];var k=Math.max(d.length,u.length);if(0===k){var E=c.split("\n");if(E.length>30)for(E[26]="".concat(_,"...").concat(y);E.length>27;)E.pop();return"".concat(w.notIdentical,"\n\n").concat(E.join("\n"),"\n")}h>3&&(a="\n".concat(_,"...").concat(y).concat(a),l=!0),""!==o&&(a="\n  ".concat(o).concat(a),o="");var D=0,A=w[n]+"\n".concat(b,"+ actual").concat(y," ").concat(v,"- expected").concat(y),I=" ".concat(_,"...").concat(y," Lines skipped");for(h=0;h<k;h++){var R=h-s;if(d.length<h+1)R>1&&h>2&&(R>4?(r+="\n".concat(_,"...").concat(y),l=!0):R>3&&(r+="\n  ".concat(u[h-2]),D++),r+="\n  ".concat(u[h-1]),D++),s=h,o+="\n".concat(v,"-").concat(y," ").concat(u[h]),D++;else if(u.length<h+1)R>1&&h>2&&(R>4?(r+="\n".concat(_,"...").concat(y),l=!0):R>3&&(r+="\n  ".concat(d[h-2]),D++),r+="\n  ".concat(d[h-1]),D++),s=h,r+="\n".concat(b,"+").concat(y," ").concat(d[h]),D++;else{var T=u[h],M=d[h],L=M!==T&&(!m(M,",")||M.slice(0,-1)!==T);L&&m(T,",")&&T.slice(0,-1)===M&&(L=!1,M+=","),L?(R>1&&h>2&&(R>4?(r+="\n".concat(_,"...").concat(y),l=!0):R>3&&(r+="\n  ".concat(d[h-2]),D++),r+="\n  ".concat(d[h-1]),D++),s=h,r+="\n".concat(b,"+").concat(y," ").concat(M),o+="\n".concat(v,"-").concat(y," ").concat(T),D+=2):(r+=o,o="",1!==R&&0!==h||(r+="\n  ".concat(M),D++))}if(D>20&&h<k-2)return"".concat(A).concat(I,"\n").concat(r,"\n").concat(_,"...").concat(y).concat(o,"\n")+"".concat(_,"...").concat(y)}return"".concat(A).concat(l?I:"","\n").concat(r).concat(o).concat(a).concat(p)}var k=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==g(e)||null===e)throw new f("options","Object",e);var o=e.message,r=e.operator,l=e.stackStartFn,c=e.actual,d=e.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=o)n=s(this,h(t).call(this,String(o)));else if(i.stderr&&i.stderr.isTTY&&(i.stderr&&i.stderr.getColorDepth&&1!==i.stderr.getColorDepth()?(_="[34m",b="[32m",y="[39m",v="[31m"):(_="",b="",y="",v="")),"object"===g(c)&&null!==c&&"object"===g(d)&&null!==d&&"stack"in c&&c instanceof Error&&"stack"in d&&d instanceof Error&&(c=C(c),d=C(d)),"deepStrictEqual"===r||"strictEqual"===r)n=s(this,h(t).call(this,S(c,d,r)));else if("notDeepStrictEqual"===r||"notStrictEqual"===r){var p=w[r],m=x(c).split("\n");if("notStrictEqual"===r&&"object"===g(c)&&null!==c&&(p=w.notStrictEqualObject),m.length>30)for(m[26]="".concat(_,"...").concat(y);m.length>27;)m.pop();n=1===m.length?s(this,h(t).call(this,"".concat(p," ").concat(m[0]))):s(this,h(t).call(this,"".concat(p,"\n\n").concat(m.join("\n"),"\n")))}else{var k=x(c),E="",D=w[r];"notDeepEqual"===r||"notEqual"===r?(k="".concat(w[r],"\n\n").concat(k)).length>1024&&(k="".concat(k.slice(0,1021),"...")):(E="".concat(x(d)),k.length>512&&(k="".concat(k.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===r||"equal"===r?k="".concat(D,"\n\n").concat(k,"\n\nshould equal\n\n"):E=" ".concat(r," ").concat(E)),n=s(this,h(t).call(this,"".concat(k).concat(E)))}return Error.stackTraceLimit=u,n.generatedMessage=!o,Object.defineProperty(a(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=c,n.expected=d,n.operator=r,Error.captureStackTrace&&Error.captureStackTrace(a(n),l),n.stack,n.name="AssertionError",s(n)}var r,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,l=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),o.forEach((function(t){n(e,t,i[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],l&&o(r.prototype,l),c&&o(r,c),t}(l(Error));e.exports=k})),r.register("ZEq1F",(function(e,t){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r=Object.keys(Object(o)),s=0,a=r.length;s<a;s++){var l=r[s],c=Object.getOwnPropertyDescriptor(o,l);void 0!==c&&c.enumerable&&(i[l]=o[l])}}return i}e.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}})),r.register("hL2B8",(function(e,t){var i=r("HojA4"),n=r("7pn04"),o=r("hOxiK"),s=r("35UPk"),a=r("dYv3f"),l=n(s(),Object);i(l,{getPolyfill:s,implementation:o,shim:a}),e.exports=l})),r.register("HojA4",(function(e,t){var i=r("gMbhm"),n="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=Object.defineProperty,l=r("iHWcH")(),c=a&&l,d=function(e,t,i,n){var r;(!(t in e)||"function"==typeof(r=n)&&"[object Function]"===o.call(r)&&n())&&(c?a(e,t,{configurable:!0,enumerable:!1,value:i,writable:!0}):e[t]=i)},u=function(e,t){var o=arguments.length>2?arguments[2]:{},r=i(t);n&&(r=s.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)d(e,r[a],t[r[a]],o[r[a]])};u.supportsDescriptors=!!c,e.exports=u})),r.register("gMbhm",(function(e,t){var i=Array.prototype.slice,n=r("3UOCk"),o=Object.keys,s=o?function(e){return o(e)}:r("1SR03"),a=Object.keys;s.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return n(e)?a(i.call(e)):a(e)})}else Object.keys=s;return Object.keys||s},e.exports=s})),r.register("3UOCk",(function(e,t){var i=Object.prototype.toString;e.exports=function(e){var t=i.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===i.call(e.callee)),n}})),r.register("1SR03",(function(e,t){var i;if(!Object.keys){var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=r("3UOCk"),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),c=a.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&n.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{u(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();i=function(e){var t=null!==e&&"object"==typeof e,i="[object Function]"===o.call(e),r=s(e),a=t&&"[object String]"===o.call(e),h=[];if(!t&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var p=c&&i;if(a&&e.length>0&&!n.call(e,0))for(var f=0;f<e.length;++f)h.push(String(f));if(r&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var _ in e)p&&"prototype"===_||!n.call(e,_)||h.push(String(_));if(l)for(var b=function(e){if("undefined"==typeof window||!g)return u(e);try{return u(e)}catch(e){return!1}}(e),v=0;v<d.length;++v)b&&"constructor"===d[v]||!n.call(e,d[v])||h.push(d[v]);return h}}e.exports=i})),r.register("iHWcH",(function(e,t){var i=r("8cOGh")("%Object.defineProperty%",!0),n=function(){if(i)try{return i({},"a",{value:1}),!0}catch(e){return!1}return!1};n.hasArrayLengthDefineBug=function(){if(!n())return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=n})),r.register("hOxiK",(function(e,t){var i=function(e){return e!=e};e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!i(e)||!i(t))}})),r.register("35UPk",(function(e,t){var i=r("hOxiK");e.exports=function(){return"function"==typeof Object.is?Object.is:i}})),r.register("dYv3f",(function(e,t){var i=r("35UPk"),n=r("HojA4");e.exports=function(){var e=i();return n(Object,{is:e},{is:function(){return Object.is!==e}}),e}})),r.register("l9nY2",(function(e,t){function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=void 0!==/a/g.flags,s=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},a=function(e){var t=[];return e.forEach((function(e,i){return t.push([i,e])})),t},l=Object.is?Object.is:r("hL2B8"),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},d=Number.isNaN?Number.isNaN:r("4rMKq");function u(e){return e.call.bind(e)}var h=u(Object.prototype.hasOwnProperty),g=u(Object.prototype.propertyIsEnumerable),p=u(Object.prototype.toString),f=r("lquaG").types,m=f.isAnyArrayBuffer,_=f.isArrayBufferView,b=f.isDate,v=f.isMap,y=f.isRegExp,w=f.isSet,C=f.isNativeError,x=f.isBoxedPrimitive,S=f.isNumberObject,k=f.isStringObject,E=f.isBooleanObject,D=f.isBigIntObject,A=f.isSymbolObject,I=f.isFloat32Array,R=f.isFloat64Array;function T(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(i<48||i>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function M(e){return Object.keys(e).filter(T).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function L(e,t){if(e===t)return 0;for(var i=e.length,n=t.length,o=0,r=Math.min(i,n);o<r;++o)if(e[o]!==t[o]){i=e[o],n=t[o];break}return i<n?-1:n<i?1:0}function N(e,t,i,r){if(e===t)return 0!==e||(!i||l(e,t));if(i){if("object"!==n(e))return"number"==typeof e&&d(e)&&d(t);if("object"!==n(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==n(e))return(null===t||"object"!==n(t))&&e==t;if(null===t||"object"!==n(t))return!1}var s,a,c,u,h=p(e);if(h!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var g=M(e),f=M(t);return g.length===f.length&&P(e,t,i,r,1,g)}if("[object Object]"===h&&(!v(e)&&v(t)||!w(e)&&w(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(y(e)){if(!y(t)||(c=e,u=t,!(o?c.source===u.source&&c.flags===u.flags:RegExp.prototype.toString.call(c)===RegExp.prototype.toString.call(u))))return!1}else if(C(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(_(e)){if(i||!I(e)&&!R(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===L(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var i=0;i<e.byteLength;i++)if(e[i]!==t[i])return!1;return!0}(e,t))return!1;var T=M(e),N=M(t);return T.length===N.length&&P(e,t,i,r,0,T)}if(w(e))return!(!w(t)||e.size!==t.size)&&P(e,t,i,r,2);if(v(e))return!(!v(t)||e.size!==t.size)&&P(e,t,i,r,3);if(m(e)){if(a=t,(s=e).byteLength!==a.byteLength||0!==L(new Uint8Array(s),new Uint8Array(a)))return!1}else if(x(e)&&!function(e,t){return S(e)?S(t)&&l(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):k(e)?k(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):D(e)?D(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):A(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return P(e,t,i,r,0)}function O(e,t){return t.filter((function(t){return g(e,t)}))}function P(e,t,i,n,o,r){if(5===arguments.length){r=Object.keys(e);var s=Object.keys(t);if(r.length!==s.length)return!1}for(var a=0;a<r.length;a++)if(!h(t,r[a]))return!1;if(i&&5===arguments.length){var l=c(e);if(0!==l.length){var d=0;for(a=0;a<l.length;a++){var u=l[a];if(g(e,u)){if(!g(t,u))return!1;r.push(u),d++}else if(g(t,u))return!1}var p=c(t);if(l.length!==p.length&&O(t,p).length!==d)return!1}else{var f=c(t);if(0!==f.length&&0!==O(t,f).length)return!1}}if(0===r.length&&(0===o||1===o&&0===e.length||0===e.size))return!0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else{var m=n.val1.get(e);if(void 0!==m){var _=n.val2.get(t);if(void 0!==_)return m===_}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var b=H(e,t,i,r,n,o);return n.val1.delete(e),n.val2.delete(t),b}function F(e,t,i,n){for(var o=s(e),r=0;r<o.length;r++){var a=o[r];if(N(t,a,i,n))return e.delete(a),!0}return!1}function B(e){switch(n(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(d(e))return!1}return!0}function j(e,t,i){var n=B(i);return null!=n?n:t.has(n)&&!e.has(n)}function z(e,t,i,n,o){var r=B(i);if(null!=r)return r;var s=t.get(r);return!(void 0===s&&!t.has(r)||!N(n,s,!1,o))&&(!e.has(r)&&N(n,s,!1,o))}function W(e,t,i,n,o,r){for(var a=s(e),l=0;l<a.length;l++){var c=a[l];if(N(i,c,o,r)&&N(n,t.get(c),o,r))return e.delete(c),!0}return!1}function H(e,t,o,r,l,c){var d=0;if(2===c){if(!function(e,t,i,o){for(var r=null,a=s(e),l=0;l<a.length;l++){var c=a[l];if("object"===n(c)&&null!==c)null===r&&(r=new Set),r.add(c);else if(!t.has(c)){if(i)return!1;if(!j(e,t,c))return!1;null===r&&(r=new Set),r.add(c)}}if(null!==r){for(var d=s(t),u=0;u<d.length;u++){var h=d[u];if("object"===n(h)&&null!==h){if(!F(r,h,i,o))return!1}else if(!i&&!e.has(h)&&!F(r,h,i,o))return!1}return 0===r.size}return!0}(e,t,o,l))return!1}else if(3===c){if(!function(e,t,o,r){for(var s=null,l=a(e),c=0;c<l.length;c++){var d=i(l[c],2),u=d[0],h=d[1];if("object"===n(u)&&null!==u)null===s&&(s=new Set),s.add(u);else{var g=t.get(u);if(void 0===g&&!t.has(u)||!N(h,g,o,r)){if(o)return!1;if(!z(e,t,u,h,r))return!1;null===s&&(s=new Set),s.add(u)}}}if(null!==s){for(var p=a(t),f=0;f<p.length;f++){var m=i(p[f],2),_=(u=m[0],m[1]);if("object"===n(u)&&null!==u){if(!W(s,e,u,_,o,r))return!1}else if(!(o||e.has(u)&&N(e.get(u),_,!1,r)||W(s,e,u,_,!1,r)))return!1}return 0===s.size}return!0}(e,t,o,l))return!1}else if(1===c)for(;d<e.length;d++){if(!h(e,d)){if(h(t,d))return!1;for(var u=Object.keys(e);d<u.length;d++){var g=u[d];if(!h(t,g)||!N(e[g],t[g],o,l))return!1}return u.length===Object.keys(t).length}if(!h(t,d)||!N(e[d],t[d],o,l))return!1}for(d=0;d<r.length;d++){var p=r[d];if(!N(e[p],t[p],o,l))return!1}return!0}e.exports={isDeepEqual:function(e,t){return N(e,t,false)},isDeepStrictEqual:function(e,t){return N(e,t,true)}}})),r.register("4rMKq",(function(e,t){var i=r("7pn04"),n=r("HojA4"),o=r("atzNo"),s=r("htwv1"),a=r("bV854"),l=i(s(),Number);n(l,{getPolyfill:s,implementation:o,shim:a}),e.exports=l})),r.register("atzNo",(function(e,t){e.exports=function(e){return e!=e}})),r.register("htwv1",(function(e,t){var i=r("atzNo");e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:i}})),r.register("bV854",(function(e,t){var i=r("HojA4"),n=r("htwv1");e.exports=function(){var e=n();return i(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}})),r("1XW5B").register(JSON.parse('{"8eITT":"index.3e22fae5.js","fYdco":"cssMode.6550b16e.js","jiDEu":"index.62813297.css","cjWZn":"cssMode.9933e515.js","437Vf":"jsonMode.38bfa019.js","7WUpD":"jsonMode.f40f9b50.js","3kdSN":"htmlMode.b557ae76.js","bBDEn":"htmlMode.a4c40420.js","fLjqF":"abap.a7e9e356.js","1bkV8":"apex.ac06c33d.js","5zUwj":"azcli.a4ae4deb.js","6BIGk":"bat.534e9bd1.js","7sxE5":"bicep.6e5d9fda.js","ecBHu":"cameligo.47ae601b.js","3w4FJ":"clojure.0ceda6e9.js","2BfYG":"coffee.74cd4091.js","lqSaV":"cpp.b9dc9a15.js","c6pZU":"csharp.7cda402b.js","3G1f6":"csp.2678c3eb.js","bFkCy":"css.57e2525f.js","fF5KO":"dart.8859a80b.js","5tzBG":"dockerfile.29347ce4.js","7SqeW":"ecl.3404aa0d.js","41vRb":"elixir.a02649c9.js","g5r81":"fsharp.6448916a.js","5BXVc":"go.9c022c81.js","aLfs2":"graphql.5ddcc8bd.js","cEIQx":"handlebars.a135fd7f.js","02hhs":"hcl.7d993ef3.js","cy3qy":"html.72cd57f1.js","519Qi":"ini.8189f1fb.js","6enpq":"java.91474653.js","2K0lA":"javascript.e876087c.js","7BclP":"typescript.d0a4148c.js","lrRLe":"julia.92c4979d.js","23WSv":"kotlin.5fffdf27.js","7NKQo":"less.0566dd9f.js","hz1ca":"lexon.4bf20fae.js","jTmzd":"lua.8e25e7e5.js","20cGB":"liquid.8fdbdda5.js","isAUG":"m3.5db14fd0.js","f8o64":"markdown.a7028192.js","inBEZ":"mips.7850dd55.js","lXs6T":"msdax.a987bff0.js","7InWK":"mysql.9af66973.js","rvjUM":"objective-c.61cdce0b.js","eg65b":"pascal.315bade4.js","kKvMt":"pascaligo.33735b8e.js","2Hy7j":"perl.4a89dcd4.js","jDRab":"pgsql.839ef3a0.js","79euB":"php.ef73e599.js","cUsby":"postiats.6d5a5851.js","cp4ld":"powerquery.c2409fae.js","iD4XI":"powershell.de53650a.js","4cUiH":"pug.b3787f93.js","1hV7g":"python.a64af940.js","e2yWE":"qsharp.f1bc0201.js","dbI8J":"r.2e439c2a.js","1K0Zy":"razor.2d23870d.js","2UafZ":"redis.910f10ec.js","8WaO1":"redshift.bf512f30.js","jyAtE":"restructuredtext.18c16ca0.js","af5DR":"ruby.8458af63.js","4zpNH":"rust.d885b485.js","fdUPr":"sb.01a06d29.js","8xB0F":"scala.939b0ee9.js","8XIaN":"scheme.6cad646a.js","f8aL9":"scss.fecc3aae.js","f8NV6":"shell.a42ab705.js","ihb4M":"solidity.dc72e3de.js","hSRJF":"sophia.e3bae7a8.js","fPef1":"sparql.79ff274d.js","5TXs5":"sql.6c77f9bd.js","j8rFj":"st.ca5141a5.js","64xxO":"swift.80324e84.js","gLiVG":"systemverilog.f954a3dd.js","7rl0V":"tcl.61940c96.js","bC2qK":"twig.7dd9655b.js","kOKnj":"vb.2e8916f1.js","gDRIh":"xml.87abb37c.js","ftV2h":"yaml.9ea08918.js","g87fF":"json.worker.6b579a73.js","29eaV":"json.worker.ec27a671.js","gOoED":"css.worker.44161835.js","w0UBV":"html.worker.b0f87b37.js","3OEga":"ts.worker.767c3934.js","02Z1g":"editor.worker.0bbcec9c.js","70dpY":"index.1d26c8a0.js"}'));var a=function(){return a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function l(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t,d=Object.keys,u=Array.isArray;function h(e,t){return"object"!=typeof t||d(t).forEach((function(i){e[i]=t[i]})),e}"undefined"==typeof Promise||c.Promise||(c.Promise=Promise);var g=Object.getPrototypeOf,p={}.hasOwnProperty;function f(e,t){return p.call(e,t)}function m(e,t){"function"==typeof t&&(t=t(g(e))),("undefined"==typeof Reflect?d:Reflect.ownKeys)(t).forEach((function(i){b(e,i,t[i])}))}var _=Object.defineProperty;function b(e,t,i,n){_(e,t,h(i&&f(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},n))}function v(e){return{from:function(t){return e.prototype=Object.create(t.prototype),b(e.prototype,"constructor",e),{extend:m.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor;function w(e,t){var i;return y(e,t)||(i=g(e))&&w(i,t)}var C=[].slice;function x(e,t,i){return C.call(e,t,i)}function S(e,t){return t(e)}function k(e){if(!e)throw new Error("Assertion Failed")}function E(e){c.setImmediate?setImmediate(e):setTimeout(e,0)}function D(e,t){return e.reduce((function(e,i,n){var o=t(i,n);return o&&(e[o[0]]=o[1]),e}),{})}function A(e,t){if(f(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var i=[],n=0,o=t.length;n<o;++n){var r=A(e,t[n]);i.push(r)}return i}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:A(a,t.substr(s+1))}}function I(e,t,i){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){k("string"!=typeof i&&"length"in i);for(var n=0,o=t.length;n<o;++n)I(e,t[n],i[n])}else{var r=t.indexOf(".");if(-1!==r){var s=t.substr(0,r),a=t.substr(r+1);if(""===a)void 0===i?u(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=i;else{var l=e[s];l&&f(e,s)||(l=e[s]={}),I(l,a,i)}}else void 0===i?u(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function R(e){var t={};for(var i in e)f(e,i)&&(t[i]=e[i]);return t}var T=[].concat;function M(e){return T.apply([],e)}var L="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(M([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return c[e]})),N=L.map((function(e){return c[e]}));D(L,(function(e){return[e,!0]}));var O=null;function P(e){O="undefined"!=typeof WeakMap&&new WeakMap;var t=F(e);return O=null,t}function F(e){if(!e||"object"!=typeof e)return e;var t=O&&O.get(e);if(t)return t;if(u(e)){t=[],O&&O.set(e,t);for(var i=0,n=e.length;i<n;++i)t.push(F(e[i]))}else if(N.indexOf(e.constructor)>=0)t=e;else{var o=g(e);for(var r in t=o===Object.prototype?{}:Object.create(o),O&&O.set(e,t),e)f(e,r)&&(t[r]=F(e[r]))}return t}var B={}.toString;function j(e){return B.call(e).slice(8,-1)}var z="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",W="symbol"==typeof z?function(e){var t;return null!=e&&(t=e[z])&&t.apply(e)}:function(){return null},H={};function K(e){var t,i,n,o;if(1===arguments.length){if(u(e))return e.slice();if(this===H&&"string"==typeof e)return[e];if(o=W(e)){for(i=[];!(n=o.next()).done;)i.push(n.value);return i}if(null==e)return[e];if("number"==typeof(t=e.length)){for(i=new Array(t);t--;)i[t]=e[t];return i}return[e]}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var U="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},V="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $(e,t){V=e,q=t}var q=function(){return!0},G=!new Error("").stack;function Z(){if(G)try{throw Z.arguments,new Error}catch(e){return e}return new Error}function J(e,t){var i=e.stack;return i?(t=t||0,0===i.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),i.split("\n").slice(t).filter(q).map((function(e){return"\n"+e})).join("")):""}var Y=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],X=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Y),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ee(e,t){this._e=Z(),this.name=e,this.message=t}function te(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,i){return i.indexOf(e)===t})).join("\n")}function ie(e,t,i,n){this._e=Z(),this.failures=t,this.failedKeys=n,this.successCount=i,this.message=te(e,t)}function ne(e,t){this._e=Z(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=te(e,t)}v(ee).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+J(this._e,2))}},toString:function(){return this.name+": "+this.message}}),v(ie).from(ee),v(ne).from(ee);var oe=X.reduce((function(e,t){return e[t]=t+"Error",e}),{}),re=ee,se=X.reduce((function(e,t){var i=t+"Error";function n(e,n){this._e=Z(),this.name=i,e?"string"==typeof e?(this.message=e+(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Q[t]||i,this.inner=null)}return v(n).from(re),e[t]=n,e}),{});se.Syntax=SyntaxError,se.Type=TypeError,se.Range=RangeError;var ae=Y.reduce((function(e,t){return e[t+"Error"]=se[t],e}),{});var le=X.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=se[t]),e}),{});function ce(){}function de(e){return e}function ue(e,t){return null==e||e===de?t:function(i){return t(e(i))}}function he(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ge(e,t){return e===ce?t:function(){var i=e.apply(this,arguments);void 0!==i&&(arguments[0]=i);var n=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var r=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?he(n,this.onsuccess):n),o&&(this.onerror=this.onerror?he(o,this.onerror):o),void 0!==r?r:i}}function pe(e,t){return e===ce?t:function(){e.apply(this,arguments);var i=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?he(i,this.onsuccess):i),n&&(this.onerror=this.onerror?he(n,this.onerror):n)}}function fe(e,t){return e===ce?t:function(i){var n=e.apply(this,arguments);h(i,n);var o=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?he(o,this.onsuccess):o),r&&(this.onerror=this.onerror?he(r,this.onerror):r),void 0===n?void 0===s?void 0:s:h(n,s)}}function me(e,t){return e===ce?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function _e(e,t){return e===ce?t:function(){var i=e.apply(this,arguments);if(i&&"function"==typeof i.then){for(var n=this,o=arguments.length,r=new Array(o);o--;)r[o]=arguments[o];return i.then((function(){return t.apply(n,r)}))}return t.apply(this,arguments)}}le.ModifyError=ie,le.DexieError=ee,le.BulkError=ne;var be={},ve="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,g(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,g(t),e]}(),ye=ve[0],we=ve[1],Ce=ve[2],xe=we&&we.then,Se=ye&&ye.constructor,ke=!!Ce,Ee=!1,De=Ce?function(){Ce.then(Je)}:c.setImmediate?setImmediate.bind(null,Je):c.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Je(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Je,0)},Ae=function(e,t){Fe.push([e,t]),Re&&(De(),Re=!1)},Ie=!0,Re=!0,Te=[],Me=[],Le=null,Ne=de,Oe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:yt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{yt(e[0],e[1])}catch(e){}}))}},Pe=Oe,Fe=[],Be=0,je=[];function ze(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ce,this._lib=!1;var t=this._PSD=Pe;if(V&&(this._stackHolder=Z(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ue(this,this._value))}this._state=null,this._value=null,++t.ref,Ke(this,e)}var We={get:function(){var e=Pe,t=st;function i(i,n){var o=this,r=!e.global&&(e!==Pe||t!==st),s=r&&!dt(),a=new ze((function(t,a){$e(o,new He(bt(i,e,r,s),bt(n,e,r,s),t,a,e))}));return V&&Ze(a,this),a}return i.prototype=be,i},set:function(e){b(this,"then",e&&e.prototype===be?We:{get:function(){return e},set:We.set})}};function He(e,t,i,n,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=n,this.psd=o}function Ke(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&Ye();t&&"function"==typeof t.then?Ke(e,(function(e,i){t instanceof ze?t._then(e,i):t.then(e,i)})):(e._state=!0,e._value=t,Ve(e)),i&&Xe()}}),Ue.bind(null,e))}catch(t){Ue(e,t)}}function Ue(e,t){if(Me.push(t),null===e._state){var i=e._lib&&Ye();t=Ne(t),e._state=!1,e._value=t,V&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,i){try{e.apply(null,i)}catch(e){t&&t(e)}}((function(){var i=w(t,"stack");t._promise=e,b(t,"stack",{get:function(){return Ee?i&&(i.get?i.get.apply(t):i.value):e.stack}})})),function(e){Te.some((function(t){return t._value===e._value}))||Te.push(e)}(e),Ve(e),i&&Xe()}}function Ve(e){var t=e._listeners;e._listeners=[];for(var i=0,n=t.length;i<n;++i)$e(e,t[i]);var o=e._PSD;--o.ref||o.finalize(),0===Be&&(++Be,Ae((function(){0==--Be&&Qe()}),[]))}function $e(e,t){if(null!==e._state){var i=e._state?t.onFulfilled:t.onRejected;if(null===i)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Be,Ae(qe,[i,e,t])}else e._listeners.push(t)}function qe(e,t,i){try{Le=t;var n,o=t._value;t._state?n=e(o):(Me.length&&(Me=[]),n=e(o),-1===Me.indexOf(o)&&function(e){var t=Te.length;for(;t;)if(Te[--t]._value===e._value)return void Te.splice(t,1)}(t)),i.resolve(n)}catch(e){i.reject(e)}finally{Le=null,0==--Be&&Qe(),--i.psd.ref||i.psd.finalize()}}function Ge(e,t,i){if(t.length===i)return t;var n="";if(!1===e._state){var o,r,s=e._value;null!=s?(o=s.name||"Error",r=s.message||s,n=J(s,0)):(o=s,r=""),t.push(o+(r?": "+r:"")+n)}return V&&((n=J(e._stackHolder,2))&&-1===t.indexOf(n)&&t.push(n),e._prev&&Ge(e._prev,t,i)),t}function Ze(e,t){var i=t?t._numPrev+1:0;i<100&&(e._prev=t,e._numPrev=i)}function Je(){Ye()&&Xe()}function Ye(){var e=Ie;return Ie=!1,Re=!1,e}function Xe(){var e,t,i;do{for(;Fe.length>0;)for(e=Fe,Fe=[],i=e.length,t=0;t<i;++t){var n=e[t];n[0].apply(null,n[1])}}while(Fe.length>0);Ie=!0,Re=!0}function Qe(){var e=Te;Te=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=je.slice(0),i=t.length;i;)t[--i]()}function et(e){return new ze(be,!1,e)}function tt(e,t){var i=Pe;return function(){var n=Ye(),o=Pe;try{return pt(i,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{pt(o,!1),n&&Xe()}}}m(ze.prototype,{then:We,_then:function(e,t){$e(this,new He(null,null,e,t,Pe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],i=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?i(e):et(e)})):this.then(null,(function(e){return e&&e.name===t?i(e):et(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),et(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Ee=!0;var e=Ge(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ee=!1}}},timeout:function(e,t){var i=this;return e<1/0?new ze((function(n,o){var r=setTimeout((function(){return o(new se.Timeout(t))}),e);i.then(n,o).finally(clearTimeout.bind(null,r))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&b(ze.prototype,Symbol.toStringTag,"Dexie.Promise"),Oe.env=ft(),m(ze,{all:function(){var e=K.apply(null,arguments).map(ut);return new ze((function(t,i){0===e.length&&t([]);var n=e.length;e.forEach((function(o,r){return ze.resolve(o).then((function(i){e[r]=i,--n||t(e)}),i)}))}))},resolve:function(e){if(e instanceof ze)return e;if(e&&"function"==typeof e.then)return new ze((function(t,i){e.then(t,i)}));var t=new ze(be,!0,e);return Ze(t,Le),t},reject:et,race:function(){var e=K.apply(null,arguments).map(ut);return new ze((function(t,i){e.map((function(e){return ze.resolve(e).then(t,i)}))}))},PSD:{get:function(){return Pe},set:function(e){return Pe=e}},totalEchoes:{get:function(){return st}},newPSD:lt,usePSD:mt,scheduler:{get:function(){return Ae},set:function(e){Ae=e}},rejectionMapper:{get:function(){return Ne},set:function(e){Ne=e}},follow:function(e,t){return new ze((function(i,n){return lt((function(t,i){var n=Pe;n.unhandleds=[],n.onunhandled=i,n.finalize=he((function(){var e=this;!function(e){function t(){e(),je.splice(je.indexOf(t),1)}je.push(t),++Be,Ae((function(){0==--Be&&Qe()}),[])}((function(){0===e.unhandleds.length?t():i(e.unhandleds[0])}))}),n.finalize),e()}),t,i,n)}))}}),Se&&(Se.allSettled&&b(ze,"allSettled",(function(){var e=K.apply(null,arguments).map(ut);return new ze((function(t){0===e.length&&t([]);var i=e.length,n=new Array(i);e.forEach((function(e,o){return ze.resolve(e).then((function(e){return n[o]={status:"fulfilled",value:e}}),(function(e){return n[o]={status:"rejected",reason:e}})).then((function(){return--i||t(n)}))}))}))})),Se.any&&"undefined"!=typeof AggregateError&&b(ze,"any",(function(){var e=K.apply(null,arguments).map(ut);return new ze((function(t,i){0===e.length&&i(new AggregateError([]));var n=e.length,o=new Array(n);e.forEach((function(e,r){return ze.resolve(e).then((function(e){return t(e)}),(function(e){o[r]=e,--n||i(new AggregateError(o))}))}))}))})));var it={awaits:0,echoes:0,id:0},nt=0,ot=[],rt=0,st=0,at=0;function lt(e,t,i,n){var o=Pe,r=Object.create(o);r.parent=o,r.ref=0,r.global=!1,r.id=++at;var s=Oe.env;r.env=ke?{Promise:ze,PromiseProp:{value:ze,configurable:!0,writable:!0},all:ze.all,race:ze.race,allSettled:ze.allSettled,any:ze.any,resolve:ze.resolve,reject:ze.reject,nthen:vt(s.nthen,r),gthen:vt(s.gthen,r)}:{},t&&h(r,t),++o.ref,r.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=mt(r,e,i,n);return 0===r.ref&&r.finalize(),a}function ct(){return it.id||(it.id=++nt),++it.awaits,it.echoes+=100,it.id}function dt(){return!!it.awaits&&(0==--it.awaits&&(it.id=0),it.echoes=100*it.awaits,!0)}function ut(e){return it.echoes&&e&&e.constructor===Se?(ct(),e.then((function(e){return dt(),e}),(function(e){return dt(),wt(e)}))):e}function ht(e){++st,it.echoes&&0!=--it.echoes||(it.echoes=it.id=0),ot.push(Pe),pt(e,!0)}function gt(){var e=ot[ot.length-1];ot.pop(),pt(e,!1)}function pt(e,t){var i=Pe;if((t?!it.echoes||rt++&&e===Pe:!rt||--rt&&e===Pe)||_t(t?ht.bind(null,e):gt),e!==Pe&&(Pe=e,i===Oe&&(Oe.env=ft()),ke)){var n=Oe.env.Promise,o=e.env;we.then=o.nthen,n.prototype.then=o.gthen,(i.global||e.global)&&(Object.defineProperty(c,"Promise",o.PromiseProp),n.all=o.all,n.race=o.race,n.resolve=o.resolve,n.reject=o.reject,o.allSettled&&(n.allSettled=o.allSettled),o.any&&(n.any=o.any))}}function ft(){var e=c.Promise;return ke?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:we.then,gthen:e.prototype.then}:{}}function mt(e,t,i,n,o){var r=Pe;try{return pt(e,!0),t(i,n,o)}finally{pt(r,!1)}}function _t(e){xe.call(ye,e)}function bt(e,t,i,n){return"function"!=typeof e?e:function(){var o=Pe;i&&ct(),pt(t,!0);try{return e.apply(this,arguments)}finally{pt(o,!1),n&&_t(dt)}}}function vt(e,t){return function(i,n){return e.call(this,bt(i,t),bt(n,t))}}-1===(""+xe).indexOf("[native code]")&&(ct=dt=ce);function yt(e,t){var i;try{i=t.onuncatched(e)}catch(e){}if(!1!==i)try{var n,o={promise:t,reason:e};if(c.document&&document.createEvent?((n=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),h(n,o)):c.CustomEvent&&h(n=new CustomEvent("unhandledrejection",{detail:o}),o),n&&c.dispatchEvent&&(dispatchEvent(n),!c.PromiseRejectionEvent&&c.onunhandledrejection))try{c.onunhandledrejection(n)}catch(e){}V&&n&&!n.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var wt=ze.reject;function Ct(e,t,i,n){if(e.idbdb&&(e._state.openComplete||Pe.letThrough||e._vip)){var o=e._createTransaction(t,i,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===oe.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return Ct(e,t,i,n)}))):wt(o)}return o._promise(t,(function(e,t){return lt((function(){return Pe.trans=o,n(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(e._state.openComplete)return wt(new se.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return wt(new se.DatabaseClosed);e.open().catch(ce)}return e._state.dbReadyPromise.then((function(){return Ct(e,t,i,n)}))}var xt=String.fromCharCode(65535),St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kt=[],Et="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Dt=Et,At=Et,It=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};function Rt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Tt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Mt(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}var Lt=function(){function e(){}return e.prototype._trans=function(e,t,i){var n=this._tx||Pe.trans,o=this.name;function r(e,i,n){if(!n.schema[o])throw new se.NotFound("Table "+o+" not part of transaction");return t(n.idbtrans,n)}var s=Ye();try{return n&&n.db===this.db?n===Pe.trans?n._promise(e,r,i):lt((function(){return n._promise(e,r,i)}),{trans:n,transless:Pe.transless||Pe}):Ct(this.db,e,[this.name],r)}finally{s&&Xe()}},e.prototype.get=function(e,t){var i=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return i.core.get({trans:t,key:e}).then((function(e){return i.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(u(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=d(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(i&&this.db._maxKey!==xt)return this.where(i.name).equals(i.keyPath.map((function(t){return e[t]})));!i&&V&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var n=this.schema.idxByName,o=this.db._deps.indexedDB;function r(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}var s=t.reduce((function(t,i){var o=t[0],s=t[1],a=n[i],l=e[i];return[o||a,o||!a?Rt(s,a&&a.multi?function(e){var t=A(e,i);return u(t)&&t.some((function(e){return r(l,e)}))}:function(e){return r(l,A(e,i))}):s]}),[null,null]),a=s[0],l=s[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(l):i?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,u(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var i=Object.create(e.prototype);for(var n in t)if(f(t,n))try{i[n]=t[n]}catch(e){}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){h(this,e)}))},e.prototype.add=function(e,t){var i=this,n=this.schema.primKey,o=n.auto,r=n.keyPath,s=e;return r&&o&&(s=Mt(r)(e)),this._trans("readwrite",(function(e){return i.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})})).then((function(e){return e.numFailures?ze.reject(e.failures[0]):e.lastResult})).then((function(t){if(r)try{I(e,r,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof e||u(e))return this.where(":id").equals(e).modify(t);var i=A(e,this.schema.primKey.keyPath);if(void 0===i)return wt(new se.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?d(t).forEach((function(i){I(e,i,t[i])})):t(e,{value:e,primKey:i})}catch(e){}return this.where(":id").equals(i).modify(t)},e.prototype.put=function(e,t){var i=this,n=this.schema.primKey,o=n.auto,r=n.keyPath,s=e;return r&&o&&(s=Mt(r)(e)),this._trans("readwrite",(function(e){return i.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?ze.reject(e.failures[0]):e.lastResult})).then((function(t){if(r)try{I(e,r,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(i){return t.core.mutate({trans:i,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?ze.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Tt})})).then((function(e){return e.numFailures?ze.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(i){return t.core.getMany({keys:e,trans:i}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,i){var n=this,o=Array.isArray(t)?t:void 0,r=(i=i||(o?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(function(t){var i=n.schema.primKey,s=i.auto,a=i.keyPath;if(a&&o)throw new se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&s?e.map(Mt(a)):e;return n.core.mutate({trans:t,type:"add",keys:o,values:c,wantResults:r}).then((function(e){var t=e.numFailures,i=e.results,o=e.lastResult,s=e.failures;if(0===t)return r?i:o;throw new ne(n.name+".bulkAdd(): "+t+" of "+l+" operations failed",s)}))}))},e.prototype.bulkPut=function(e,t,i){var n=this,o=Array.isArray(t)?t:void 0,r=(i=i||(o?void 0:t))?i.allKeys:void 0;return this._trans("readwrite",(function(t){var i=n.schema.primKey,s=i.auto,a=i.keyPath;if(a&&o)throw new se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=a&&s?e.map(Mt(a)):e;return n.core.mutate({trans:t,type:"put",keys:o,values:c,wantResults:r}).then((function(e){var t=e.numFailures,i=e.results,o=e.lastResult,s=e.failures;if(0===t)return r?i:o;throw new ne(n.name+".bulkPut(): "+t+" of "+l+" operations failed",s)}))}))},e.prototype.bulkDelete=function(e){var t=this,i=e.length;return this._trans("readwrite",(function(i){return t.core.mutate({trans:i,type:"delete",keys:e})})).then((function(e){var n=e.numFailures,o=e.lastResult,r=e.failures;if(0===n)return o;throw new ne(t.name+".bulkDelete(): "+n+" of "+i+" operations failed",r)}))},e}();function Nt(e){var t={},i=function(i,n){if(n){for(var o=arguments.length,r=new Array(o-1);--o;)r[o-1]=arguments[o];return t[i].subscribe.apply(null,r),e}if("string"==typeof i)return t[i]};i.addEventType=r;for(var n=1,o=arguments.length;n<o;++n)r(arguments[n]);return i;function r(e,n,o){if("object"==typeof e)return s(e);n||(n=me),o||(o=ce);var r={subscribers:[],fire:o,subscribe:function(e){-1===r.subscribers.indexOf(e)&&(r.subscribers.push(e),r.fire=n(r.fire,e))},unsubscribe:function(e){r.subscribers=r.subscribers.filter((function(t){return t!==e})),r.fire=r.subscribers.reduce(n,o)}};return t[e]=i[e]=r,r}function s(e){d(e).forEach((function(t){var i=e[t];if(u(i))r(t,e[t][0],e[t][1]);else{if("asap"!==i)throw new se.InvalidArgument("Invalid event config");var n=r(t,de,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){E((function(){e.apply(null,t)}))}))}))}}))}}function Ot(e,t){return v(t).from({prototype:e}),t}function Pt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ft(e,t){e.filter=Rt(e.filter,t)}function Bt(e,t,i){var n=e.replayFilter;e.replayFilter=n?function(){return Rt(n(),t())}:t,e.justLimit=i&&!n}function jt(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new se.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function zt(e,t,i){var n=jt(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Wt(e,t,i,n){var o=e.replayFilter?Rt(e.filter,e.replayFilter()):e.filter;if(e.or){var r={},s=function(e,i,n){if(!o||o(i,n,(function(e){return i.stop(e)}),(function(e){return i.fail(e)}))){var s=i.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),f(r,a)||(r[a]=!0,t(e,i,n))}};return Promise.all([e.or._iterate(s,i),Ht(zt(e,n,i),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Ht(zt(e,n,i),Rt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Ht(e,t,i,n){var o=tt(n?function(e,t,o){return i(n(e),t,o)}:i);return e.then((function(e){if(e)return e.start((function(){var i=function(){return e.continue()};t&&!t(e,(function(e){return i=e}),(function(t){e.stop(t),i=ce}),(function(t){e.fail(t),i=ce}))||o(e.value,e,(function(e){return i=e})),i()}))}))}function Kt(e,t){try{var i=Ut(e),n=Ut(t);if(i!==n)return"Array"===i?1:"Array"===n?-1:"binary"===i?1:"binary"===n?-1:"string"===i?1:"string"===n?-1:"Date"===i?1:"Date"!==n?NaN:-1;switch(i){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var i=e.length,n=t.length,o=i<n?i:n,r=0;r<o;++r)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return i===n?0:i<n?-1:1}(Vt(e),Vt(t));case"Array":return function(e,t){for(var i=e.length,n=t.length,o=i<n?i:n,r=0;r<o;++r){var s=Kt(e[r],t[r]);if(0!==s)return s}return i===n?0:i<n?-1:1}(e,t)}}catch(e){}return NaN}function Ut(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var i=j(e);return"ArrayBuffer"===i?"binary":i}function Vt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var $t=function(){function e(){}return e.prototype._read=function(e,t){var i=this._ctx;return i.error?i.table._trans(null,wt.bind(null,i.error)):i.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,wt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Rt(t.algorithm,e)},e.prototype._iterate=function(e,t){return Wt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&h(i,e),t._ctx=i,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(i){return Wt(t,e,i,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var i=t._ctx,n=i.table.core;if(Pt(i,!0))return n.count({trans:e,query:{index:jt(i,n.schema),range:i.range}}).then((function(e){return Math.min(e,i.limit)}));var o=0;return Wt(i,(function(){return++o,!1}),e,n).then((function(){return o}))})).then(e)},e.prototype.sortBy=function(e,t){var i=e.split(".").reverse(),n=i[0],o=i.length-1;function r(e,t){return t?r(e[i[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var i=r(e,o),n=r(t,o);return i<n?-s:i>n?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var i=t._ctx;if("next"===i.dir&&Pt(i,!0)&&i.limit>0){var n=i.valueMapper,o=jt(i,i.table.core.schema);return i.table.core.query({trans:e,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then((function(e){var t=e.result;return n?t.map(n):t}))}var r=[];return Wt(i,(function(e){return r.push(e)}),e,i.table.core).then((function(){return r}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Pt(t)?Bt(t,(function(){var t=e;return function(e,i){return 0===t||(1===t?(--t,!1):(i((function(){e.advance(t),t=0})),!1))}})):Bt(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Bt(this._ctx,(function(){var t=e;return function(e,i,n){return--t<=0&&i(n),t>=0}}),!0),this},e.prototype.until=function(e,t){return Ft(this._ctx,(function(i,n,o){return!e(i.value)||(n(o),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,i;return Ft(this._ctx,(function(t){return e(t.value)})),t=this._ctx,i=e,t.isMatch=Rt(t.isMatch,i),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.key,i)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,i){e(i.primaryKey,i)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.key)})).then((function(){return i})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Pt(t,!0)&&t.limit>0)return this._read((function(e){var i=jt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:i,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var i=[];return this.each((function(e,t){i.push(t.primaryKey)})).then((function(){return i})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var i={};return Ft(this._ctx,(function(e){var t=e.primaryKey.toString(),n=f(i,t);return i[t]=!0,!n})),this},e.prototype.modify=function(e){var t=this,i=this._ctx;return this._write((function(n){var o;if("function"==typeof e)o=e;else{var r=d(e),s=r.length;o=function(t){for(var i=!1,n=0;n<s;++n){var o=r[n],a=e[o];A(t,o)!==a&&(I(t,o,a),i=!0)}return i}}var a=i.table.core,l=a.schema.primaryKey,c=l.outbound,u=l.extractKey,h=t.db._options.modifyChunkSize||200,g=[],p=0,f=[],m=function(e,t){var i=t.failures,n=t.numFailures;p+=e-n;for(var o=0,r=d(i);o<r.length;o++){var s=r[o];g.push(i[s])}};return t.clone().primaryKeys().then((function(t){var r=function(s){var l=Math.min(h,t.length-s);return a.getMany({trans:n,keys:t.slice(s,s+l),cache:"immutable"}).then((function(d){for(var g=[],p=[],f=c?[]:null,_=[],b=0;b<l;++b){var v=d[b],y={value:P(v),primKey:t[s+b]};!1!==o.call(y,y.value,y)&&(null==y.value?_.push(t[s+b]):c||0===Kt(u(v),u(y.value))?(p.push(y.value),c&&f.push(t[s+b])):(_.push(t[s+b]),g.push(y.value)))}var w=Pt(i)&&i.limit===1/0&&("function"!=typeof e||e===qt)&&{index:i.index,range:i.range};return Promise.resolve(g.length>0&&a.mutate({trans:n,type:"add",values:g}).then((function(e){for(var t in e.failures)_.splice(parseInt(t),1);m(g.length,e)}))).then((function(){return(p.length>0||w&&"object"==typeof e)&&a.mutate({trans:n,type:"put",keys:f,values:p,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return m(p.length,e)}))})).then((function(){return(_.length>0||w&&e===qt)&&a.mutate({trans:n,type:"delete",keys:_,criteria:w}).then((function(e){return m(_.length,e)}))})).then((function(){return t.length>s+l&&r(s+h)}))}))};return r(0).then((function(){if(g.length>0)throw new ie("Error modifying one or more objects",g,p,f);return t.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Pt(e)&&(e.isPrimKey&&!At||3===t.type)?this._write((function(i){var n=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:i,query:{index:n,range:o}}).then((function(t){return e.table.core.mutate({trans:i,type:"deleteRange",range:o}).then((function(e){var i=e.failures;e.lastResult,e.results;var n=e.numFailures;if(n)throw new ie("Could not delete some values",Object.keys(i).map((function(e){return i[e]})),t-n);return t-n}))}))})):this.modify(qt)},e}(),qt=function(e,t){return t.value=null};function Gt(e,t){return e<t?-1:e===t?0:1}function Zt(e,t){return e>t?-1:e===t?0:1}function Jt(e,t,i){var n=e instanceof ii?new e.Collection(e):e;return n._ctx.error=i?new i(t):new TypeError(t),n}function Yt(e){return new e.Collection(e,(function(){return ti("")})).limit(0)}function Xt(e,t,i,n,o,r){for(var s=Math.min(e.length,n.length),a=-1,l=0;l<s;++l){var c=t[l];if(c!==n[l])return o(e[l],i[l])<0?e.substr(0,l)+i[l]+i.substr(l+1):o(e[l],n[l])<0?e.substr(0,l)+n[l]+i.substr(l+1):a>=0?e.substr(0,a)+t[a]+i.substr(a+1):null;o(e[l],c)<0&&(a=l)}return s<n.length&&"next"===r?e+i.substr(e.length):s<e.length&&"prev"===r?e.substr(0,i.length):a<0?null:e.substr(0,a)+n[a]+i.substr(a+1)}function Qt(e,t,i,n){var o,r,s,a,l,c,d,u=i.length;if(!i.every((function(e){return"string"==typeof e})))return Jt(e,"String expected.");function h(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),r=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),s="next"===e?Gt:Zt;var t=i.map((function(e){return{lower:r(e),upper:o(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,d="next"===e?"":n}h("next");var g=new e.Collection(e,(function(){return ei(a[0],l[u-1]+n)}));g._ondirectionchange=function(e){h(e)};var p=0;return g._addAlgorithm((function(e,i,n){var o=e.key;if("string"!=typeof o)return!1;var h=r(o);if(t(h,l,p))return!0;for(var g=null,f=p;f<u;++f){var m=Xt(o,h,a[f],l[f],s,c);null===m&&null===g?p=f+1:(null===g||s(g,m)>0)&&(g=m)}return i(null!==g?function(){e.continue(g+d)}:n),!1})),g}function ei(e,t,i,n){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:n}}function ti(e){return{type:1,lower:e,upper:e}}var ii=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,i,n){i=!1!==i,n=!0===n;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(i||n)&&(!i||!n)?Yt(this):new this.Collection(this,(function(){return ei(e,t,!i,!n)}))}catch(e){return Jt(this,St)}},e.prototype.equals=function(e){return null==e?Jt(this,St):new this.Collection(this,(function(){return ti(e)}))},e.prototype.above=function(e){return null==e?Jt(this,St):new this.Collection(this,(function(){return ei(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Jt(this,St):new this.Collection(this,(function(){return ei(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Jt(this,St):new this.Collection(this,(function(){return ei(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Jt(this,St):new this.Collection(this,(function(){return ei(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?Jt(this,"String expected."):this.between(e,e+xt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Qt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],xt)},e.prototype.equalsIgnoreCase=function(e){return Qt(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=K.apply(H,arguments);return 0===e.length?Yt(this):Qt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=K.apply(H,arguments);return 0===e.length?Yt(this):Qt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,xt)},e.prototype.anyOf=function(){var e=this,t=K.apply(H,arguments),i=this._cmp;try{t.sort(i)}catch(e){return Jt(this,St)}if(0===t.length)return Yt(this);var n=new this.Collection(this,(function(){return ei(t[0],t[t.length-1])}));n._ondirectionchange=function(n){i="next"===n?e._ascending:e._descending,t.sort(i)};var o=0;return n._addAlgorithm((function(e,n,r){for(var s=e.key;i(s,t[o])>0;)if(++o===t.length)return n(r),!1;return 0===i(s,t[o])||(n((function(){e.continue(t[o])})),!1)})),n},e.prototype.notEqual=function(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=K.apply(H,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Jt(this,St)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var i=this,n=this._cmp,o=this._ascending,r=this._descending,s=this._min,a=this._max;if(0===e.length)return Yt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0})))return Jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",se.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var d,u=o;function h(e,t){return u(e[0],t[0])}try{d=e.reduce((function(e,t){for(var i=0,o=e.length;i<o;++i){var r=e[i];if(n(t[0],r[1])<0&&n(t[1],r[0])>0){r[0]=s(r[0],t[0]),r[1]=a(r[1],t[1]);break}}return i===o&&e.push(t),e}),[]),d.sort(h)}catch(e){return Jt(this,St)}var g=0,p=c?function(e){return o(e,d[g][1])>0}:function(e){return o(e,d[g][1])>=0},f=l?function(e){return r(e,d[g][0])>0}:function(e){return r(e,d[g][0])>=0};var m=p,_=new this.Collection(this,(function(){return ei(d[0][0],d[d.length-1][1],!l,!c)}));return _._ondirectionchange=function(e){"next"===e?(m=p,u=o):(m=f,u=r),d.sort(h)},_._addAlgorithm((function(e,t,n){for(var r=e.key;m(r);)if(++g===d.length)return t(n),!1;return!!function(e){return!p(e)&&!f(e)}(r)||(0===i._cmp(r,d[g][1])||0===i._cmp(r,d[g][0])||t((function(){u===o?e.continue(d[g][0]):e.continue(d[g][1])})),!1)})),_},e.prototype.startsWithAnyOf=function(){var e=K.apply(H,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Yt(this):this.inAnyRange(e.map((function(e){return[e,e+xt]}))):Jt(this,"startsWithAnyOf() only works with strings")},e}();function ni(e){return tt((function(t){return oi(t),e(t.target.error),!1}))}function oi(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ri=Nt(null,"storagemutated"),si=function(){function e(){}return e.prototype._lock=function(){return k(!Pe.global),++this._reculock,1!==this._reculock||Pe.global||(Pe.lockOwnerFor=this),this},e.prototype._unlock=function(){if(k(!Pe.global),0==--this._reculock)for(Pe.global||(Pe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{mt(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Pe.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var i=this.db.idbdb,n=this.db._state.dbOpenError;if(k(!this.idbtrans),!e&&!i)switch(n&&n.name){case"DatabaseClosedError":throw new se.DatabaseClosed(n);case"MissingAPIError":throw new se.MissingAPI(n.message,n);default:throw new se.OpenFailed(n)}if(!this.active)throw new se.TransactionInactive;return k(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):i.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=tt((function(i){oi(i),t._reject(e.error)})),e.onabort=tt((function(i){oi(i),t.active&&t._reject(new se.Abort(e.error)),t.active=!1,t.on("abort").fire(i)})),e.oncomplete=tt((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&ri.storagemutated.fire(e.mutatedParts)})),this},e.prototype._promise=function(e,t,i){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return wt(new se.ReadOnly("Transaction is readonly"));if(!this.active)return wt(new se.TransactionInactive);if(this._locked())return new ze((function(o,r){n._blockedFuncs.push([function(){n._promise(e,t,i).then(o,r)},Pe])}));if(i)return lt((function(){var e=new ze((function(e,i){n._lock();var o=t(e,i,n);o&&o.then&&o.then(e,i)}));return e.finally((function(){return n._unlock()})),e._lib=!0,e}));var o=new ze((function(e,i){var o=t(e,i,n);o&&o.then&&o.then(e,i)}));return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),i=ze.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return i}));else{t._waitingFor=i,t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(n.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new ze((function(e,n){i.then((function(i){return t._waitingQueue.push(tt(e.bind(null,i)))}),(function(e){return t._waitingQueue.push(tt(n.bind(null,e)))})).finally((function(){t._waitingFor===o&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new se.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(f(t,e))return t[e];var i=this.schema[e];if(!i)throw new se.NotFound("Table "+e+" not part of transaction");var n=new this.db.Table(e,i,this);return n.core=this.db.core.table(e),t[e]=n,n},e}();function ai(e,t,i,n,o,r,s){return{name:e,keyPath:t,unique:i,multi:n,auto:o,compound:r,src:(i&&!s?"&":"")+(n?"*":"")+(o?"++":"")+li(t)}}function li(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function ci(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:D(i,(function(e){return[e.name,e]}))}}var di=function(e){try{return e.only([[]]),di=function(){return[[]]},[[]]}catch(e){return di=function(){return xt},xt}};function ui(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return A(t,e)}}(e):function(t){return A(t,e)}}function hi(e){return[].slice.call(e)}var gi=0;function pi(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function fi(e,t,i){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var i=e.lower,n=e.upper,o=e.lowerOpen,r=e.upperOpen;return void 0===i?void 0===n?null:t.upperBound(n,!!r):void 0===n?t.lowerBound(i,!!o):t.bound(i,n,!!o,!!r)}var o=function(e,t){var i=hi(e.objectStoreNames);return{schema:{name:e.name,tables:i.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,i=e.autoIncrement,n=u(t),o=null==t,r={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:n,keyPath:t,autoIncrement:i,unique:!0,extractKey:ui(t)},indexes:hi(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,i=e.unique,n=e.multiEntry,o=e.keyPath,s={name:t,compound:u(o),keyPath:o,unique:i,multiEntry:n,extractKey:ui(o)};return r[pi(o)]=s,s})),getIndexByKeyPath:function(e){return r[pi(e)]}};return r[":id"]=s.primaryKey,null!=t&&(r[pi(t)]=s.primaryKey),s}))},hasGetAll:i.length>0&&"getAll"in t.objectStore(i[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,i),r=o.schema,s=o.hasGetAll,a=r.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var i=e.trans,o=e.type,r=e.keys,s=e.values,a=e.range;return new Promise((function(e,l){e=tt(e);var c=i.objectStore(t),d=null==c.keyPath,u="put"===o||"add"===o;if(!u&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var h,g=(r||s||{length:1}).length;if(r&&s&&r.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===g)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],f=[],m=0,_=function(e){++m,oi(e)};if("deleteRange"===o){if(4===a.type)return e({numFailures:m,failures:f,results:[],lastResult:void 0});3===a.type?p.push(h=c.clear()):p.push(h=c.delete(n(a)))}else{var b=u?d?[s,r]:[s,null]:[r,null],v=b[0],y=b[1];if(u)for(var w=0;w<g;++w)p.push(h=y&&void 0!==y[w]?c[o](v[w],y[w]):c[o](v[w])),h.onerror=_;else for(w=0;w<g;++w)p.push(h=c[o](v[w])),h.onerror=_}var C=function(t){var i=t.target.result;p.forEach((function(e,t){return null!=e.error&&(f[t]=e.error)})),e({numFailures:m,failures:f,results:"delete"===o?r:p.map((function(e){return e.result})),lastResult:i})};h.onerror=function(e){_(e),C(e)},h.onsuccess=C}))},getMany:function(e){var i=e.trans,n=e.keys;return new Promise((function(e,o){e=tt(e);for(var r,s=i.objectStore(t),a=n.length,l=new Array(a),c=0,d=0,u=function(t){var i=t.target;l[i._pos]=i.result,++d===c&&e(l)},h=ni(o),g=0;g<a;++g)null!=n[g]&&((r=s.get(n[g]))._pos=g,r.onsuccess=u,r.onerror=h,++c);0===c&&e(l)}))},get:function(e){var i=e.trans,n=e.key;return new Promise((function(e,o){e=tt(e);var r=i.objectStore(t).get(n);r.onsuccess=function(t){return e(t.target.result)},r.onerror=ni(o)}))},query:function(e){return function(i){return new Promise((function(o,r){o=tt(o);var s=i.trans,a=i.values,l=i.limit,c=i.query,d=l===1/0?void 0:l,u=c.index,h=c.range,g=s.objectStore(t),p=u.isPrimaryKey?g:g.index(u.name),f=n(h);if(0===l)return o({result:[]});if(e){var m=a?p.getAll(f,d):p.getAllKeys(f,d);m.onsuccess=function(e){return o({result:e.target.result})},m.onerror=ni(r)}else{var _=0,b=a||!("openKeyCursor"in p)?p.openCursor(f):p.openKeyCursor(f),v=[];b.onsuccess=function(e){var t=b.result;return t?(v.push(a?t.value:t.primaryKey),++_===l?o({result:v}):void t.continue()):o({result:v})},b.onerror=ni(r)}}))}}(s),openCursor:function(e){var i=e.trans,o=e.values,r=e.query,s=e.reverse,a=e.unique;return new Promise((function(e,l){e=tt(e);var c=r.index,d=r.range,u=i.objectStore(t),h=c.isPrimaryKey?u:u.index(c.name),g=s?a?"prevunique":"prev":a?"nextunique":"next",p=o||!("openKeyCursor"in h)?h.openCursor(n(d),g):h.openKeyCursor(n(d),g);p.onerror=ni(l),p.onsuccess=tt((function(t){var n=p.result;if(n){n.___id=++gi,n.done=!1;var o=n.continue.bind(n),r=n.continuePrimaryKey;r&&(r=r.bind(n));var s=n.advance.bind(n),a=function(){throw new Error("Cursor not stopped")};n.trans=i,n.stop=n.continue=n.continuePrimaryKey=n.advance=function(){throw new Error("Cursor not started")},n.fail=tt(l),n.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},n.start=function(e){var t=new Promise((function(e,t){e=tt(e),p.onerror=ni(t),n.fail=t,n.stop=function(t){n.stop=n.continue=n.continuePrimaryKey=n.advance=a,e(t)}})),i=function(){if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=function(){throw new Error("Cursor behind last entry")},n.stop()};return p.onsuccess=tt((function(e){p.onsuccess=i,i()})),n.continue=o,n.continuePrimaryKey=r,n.advance=s,i(),t},e(n)}else e(null)}),l)}))},count:function(e){var i=e.query,o=e.trans,r=i.index,s=i.range;return new Promise((function(e,i){var a=o.objectStore(t),l=r.isPrimaryKey?a:a.index(r.name),c=n(s),d=c?l.count(c):l.count();d.onsuccess=tt((function(t){return e(t.target.result)})),d.onerror=ni(i)}))}}}(e)})),l={};return a.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '"+e+"' not found");return l[e]},MIN_KEY:-1/0,MAX_KEY:di(t),schema:r}}function mi(e,t,i,n){var o=i.IDBKeyRange;i.indexedDB;var r=function(e,t){return t.reduce((function(e,t){var i=t.create;return a(a({},e),i(e))}),e)}(fi(t,o,n),e.dbcore);return{dbcore:r}}function _i(e,t){var i=e._novip,n=t.db,o=mi(i._middlewares,n,i._deps,t);i.core=o.dbcore,i.tables.forEach((function(e){var t=e.name;i.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=i.core.table(t),i[t]instanceof i.Table&&(i[t].core=e.core))}))}function bi(e,t,i,n){var o=e._novip;i.forEach((function(e){var i=n[e];t.forEach((function(t){var n=w(t,e);(!n||"value"in n&&void 0===n.value)&&(t===o.Transaction.prototype||t instanceof o.Transaction?b(t,e,{get:function(){return this.table(e)},set:function(t){_(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new o.Table(e,i))}))}))}function vi(e,t){var i=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof i.Table&&delete e[t]}))}function yi(e,t){return e._cfg.version-t._cfg.version}function wi(e,t,i,n){var o=e._dbSchema,r=e._createTransaction("readwrite",e._storeNames,o);r.create(i),r._completion.catch(n);var s=r._reject.bind(r),a=Pe.transless||Pe;lt((function(){Pe.trans=r,Pe.transless=a,0===t?(d(o).forEach((function(e){xi(i,e,o[e].primKey,o[e].indexes)})),_i(e,i),ze.follow((function(){return e.on.populate.fire(r)})).catch(s)):function(e,t,i,n){var o=e._novip,r=[],s=o._versions,a=o._dbSchema=ki(o,o.idbdb,n),l=!1;function c(){return r.length?ze.resolve(r.shift()(i.idbtrans)).then(c):ze.resolve()}return s.filter((function(e){return e._cfg.version>=t})).forEach((function(e){r.push((function(){var r=a,s=e._cfg.dbschema;Ei(o,r,n),Ei(o,s,n),a=o._dbSchema=s;var c=Ci(r,s);c.add.forEach((function(e){xi(n,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new se.Upgrade("Not yet support for changing primary key");var t=n.objectStore(e.name);e.add.forEach((function(e){return Si(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Si(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){_i(o,n),i._memoizedTables={},l=!0;var h=R(s);c.del.forEach((function(e){h[e]=r[e]})),vi(o,[o.Transaction.prototype]),bi(o,[o.Transaction.prototype],d(h),h),i.schema=h;var g,p=U(u);p&&ct();var f=ze.follow((function(){if((g=u(i))&&p){var e=dt.bind(null,null);g.then(e,e)}}));return g&&"function"==typeof g.then?ze.resolve(g):f.then((function(){return g}))}})),r.push((function(t){l&&Dt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(i){return null==e[i]&&t.db.deleteObjectStore(i)}))}(e._cfg.dbschema,t);vi(o,[o.Transaction.prototype]),bi(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),i.schema=o._dbSchema}))})),c().then((function(){var e,t;t=n,d(e=a).forEach((function(i){t.db.objectStoreNames.contains(i)||xi(t,i,e[i].primKey,e[i].indexes)}))}))}(e,t,r,i).catch(s)}))}function Ci(e,t){var i,n={del:[],add:[],change:[]};for(i in e)t[i]||n.del.push(i);for(i in t){var o=e[i],r=t[i];if(o){var s={name:i,def:r,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(r.primKey.keyPath||"")||o.primKey.auto!==r.primKey.auto&&!Et)s.recreate=!0,n.change.push(s);else{var a=o.idxByName,l=r.idxByName,c=void 0;for(c in a)l[c]||s.del.push(c);for(c in l){var d=a[c],u=l[c];d?d.src!==u.src&&s.change.push(u):s.add.push(u)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([i,r])}return n}function xi(e,t,i,n){var o=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return n.forEach((function(e){return Si(o,e)})),o}function Si(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function ki(e,t,i){var n={};return x(t.objectStoreNames,0).forEach((function(e){for(var t=i.objectStore(e),o=t.keyPath,r=ai(li(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),s=[],a=0;a<t.indexNames.length;++a){var l=t.index(t.indexNames[a]);o=l.keyPath;var c=ai(l.name,o,!!l.unique,!!l.multiEntry,!1,o&&"string"!=typeof o,!1);s.push(c)}n[e]=ci(e,r,s)})),n}function Ei(e,t,i){for(var n=e._novip,o=i.db.objectStoreNames,r=0;r<o.length;++r){var s=o[r],a=i.objectStore(s);n._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var d=a.indexNames[l],u=a.index(d).keyPath,h="string"==typeof u?u:"["+x(u).join("+")+"]";if(t[s]){var g=t[s].idxByName[h];g&&(g.name=d,delete t[s].idxByName[h],t[s].idxByName[d]=g)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}var Di=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){d(e).forEach((function(i){if(null!==e[i]){var n=e[i].split(",").map((function(e,t){var i=(e=e.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return ai(i,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),u(n),0===t)})),o=n.shift();if(o.multi)throw new se.Schema("Primary key cannot be multi-valued");n.forEach((function(e){if(e.auto)throw new se.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new se.Schema("Index must have a name and cannot be an empty string")})),t[i]=ci(i,o,n)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,e):e;var i=t._versions,n={},o={};return i.forEach((function(e){h(n,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(n,o)})),t._dbSchema=o,vi(t,[t._allTables,t,t.Transaction.prototype]),bi(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],d(o),o),t._storeNames=d(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||ce,e),this},e}();function Ai(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Xi("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ii(e){return e&&"function"==typeof e.databases}function Ri(e,t){var i=e.indexedDB,n=e.IDBKeyRange;!Ii(i)&&"__dbnames"!==t&&Ai(i,n).delete(t).catch(ce)}function Ti(e){return lt((function(){return Pe.letThrough=!0,e()}))}function Mi(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?wt(t.dbOpenError):e}));V&&(t.openCanceller._stackHolder=Z()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller;function o(){if(t.openCanceller!==n)throw new se.DatabaseClosed("db.open() was cancelled")}var r,s=t.dbReadyResolve,a=null,l=!1;return ze.race([n,("undefined"==typeof navigator?ze.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var t=function(){return indexedDB.databases().finally(e)};r=setInterval(t,100),t()})).finally((function(){return clearInterval(r)})):Promise.resolve()).then((function(){return new ze((function(n,r){if(o(),!i)throw new se.MissingAPI;var s=e.name,c=t.autoSchema?i.open(s):i.open(s,Math.round(10*e.verno));if(!c)throw new se.MissingAPI;c.onerror=ni(r),c.onblocked=tt(e._fireOnBlocked),c.onupgradeneeded=tt((function(n){if(a=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=oi,a.abort(),c.result.close();var o=i.deleteDatabase(s);o.onsuccess=o.onerror=tt((function(){r(new se.NoSuchDatabase("Database "+s+" doesnt exist"))}))}else{a.onerror=ni(r);var d=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;l=d<1,e._novip.idbdb=c.result,wi(e,d/10,a,r)}}),r),c.onsuccess=tt((function(){a=null;var i,o=e._novip.idbdb=c.result,r=x(o.objectStoreNames);if(r.length>0)try{var u=o.transaction(1===(i=r).length?i[0]:i,"readonly");t.autoSchema?function(e,t,i){var n=e._novip;n.verno=t.version/10;var o=n._dbSchema=ki(0,t,i);n._storeNames=x(t.objectStoreNames,0),bi(n,[n._allTables],d(o),o)}(e,o,u):(Ei(e,e._dbSchema,u),function(e,t){var i=Ci(ki(0,e.idbdb,t),e._dbSchema);return!(i.add.length||i.change.some((function(e){return e.add.length||e.change.length})))}(e,u)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),_i(e,u)}catch(e){}kt.push(e),o.onversionchange=tt((function(i){t.vcFired=!0,e.on("versionchange").fire(i)})),o.onclose=tt((function(t){e.on("close").fire(t)})),l&&function(e,t){var i=e.indexedDB,n=e.IDBKeyRange;!Ii(i)&&"__dbnames"!==t&&Ai(i,n).put({name:t}).catch(ce)}(e._deps,s),n()}),r)}))}))]).then((function(){return o(),t.onReadyBeingFired=[],ze.resolve(Ti((function(){return e.on.ready.fire(e.vip)}))).then((function i(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(_e,ce);return t.onReadyBeingFired=[],ze.resolve(Ti((function(){return n(e.vip)}))).then(i)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(i){t.dbOpenError=i;try{a&&a.abort()}catch(e){}return n===t.openCanceller&&e._close(),wt(i)})).finally((function(){t.openComplete=!0,s()}))}function Li(e){var t=function(t){return e.next(t)},i=o(t),n=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),r=o.value;return o.done?r:r&&"function"==typeof r.then?r.then(i,n):u(r)?Promise.all(r).then(i,n):i(r)}}return o(t)()}function Ni(e,t,i){var n=arguments.length;if(n<2)throw new se.InvalidArgument("Too few arguments");for(var o=new Array(n-1);--n;)o[n-1]=arguments[n];i=o.pop();var r=M(o);return[e,r,i]}function Oi(e,t,i,n,o){return ze.resolve().then((function(){var r=Pe.transless||Pe,s=e._createTransaction(t,i,e._dbSchema,n),a={trans:s,transless:r};if(n)s.idbtrans=n.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(n){return n.name===oe.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return Oi(e,t,i,null,o)}))):wt(n)}var l,c=U(o);c&&ct();var d=ze.follow((function(){if(l=o.call(s,s))if(c){var e=dt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Li(l))}),a);return(l&&"function"==typeof l.then?ze.resolve(l).then((function(e){return s.active?e:wt(new se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):d.then((function(){return l}))).then((function(e){return n&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),wt(e)}))}))}function Pi(e,t,i){for(var n=u(e)?e.slice():[e],o=0;o<i;++o)n.push(t);return n}var Fi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return a(a({},e),{table:function(t){var i=e.table(t),n=i.schema,o={},r=[];function s(e,t,i){var n=pi(e),l=o[n]=o[n]||[],c=null==e?0:"string"==typeof e?1:e.length,d=t>0,u=a(a({},i),{isVirtual:d,keyTail:t,keyLength:c,extractKey:ui(e),unique:!d&&i.unique});(l.push(u),u.isPrimaryKey||r.push(u),c>1)&&s(2===c?e[0]:e.slice(0,c-1),t+1,i);return l.sort((function(e,t){return e.keyTail-t.keyTail})),u}var l=s(n.primaryKey.keyPath,0,n.primaryKey);o[":id"]=[l];for(var c=0,d=n.indexes;c<d.length;c++){var u=d[c];s(u.keyPath,0,u)}function h(t){var i,n,o=t.query.index;return o.isVirtual?a(a({},t),{query:{index:o,range:(i=t.query.range,n=o.keyTail,{type:1===i.type?2:i.type,lower:Pi(i.lower,i.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Pi(i.upper,i.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0})}}):t}var g=a(a({},i),{schema:a(a({},n),{primaryKey:l,indexes:r,getIndexByKeyPath:function(e){var t=o[pi(e)];return t&&t[0]}}),count:function(e){return i.count(h(e))},query:function(e){return i.query(h(e))},openCursor:function(t){var n=t.query.index,o=n.keyTail,r=n.isVirtual,s=n.keyLength;if(!r)return i.openCursor(t);return i.openCursor(h(t)).then((function(i){return i&&function(i){var n=Object.create(i,{continue:{value:function(n){null!=n?i.continue(Pi(n,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?i.continue(i.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):i.continue()}},continuePrimaryKey:{value:function(t,n){i.continuePrimaryKey(Pi(t,e.MAX_KEY,o),n)}},primaryKey:{get:function(){return i.primaryKey}},key:{get:function(){var e=i.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return i.value}}});return n}(i)}))}});return g}})}};function Bi(e,t,i,n){return i=i||{},n=n||"",d(e).forEach((function(o){if(f(t,o)){var r=e[o],s=t[o];if("object"==typeof r&&"object"==typeof s&&r&&s){var a=j(r);a!==j(s)?i[n+o]=t[o]:"Object"===a?Bi(r,s,i,n+o+"."):r!==s&&(i[n+o]=t[o])}else r!==s&&(i[n+o]=t[o])}else i[n+o]=void 0})),d(t).forEach((function(o){f(e,o)||(i[n+o]=t[o])})),i}var ji={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return a(a({},e),{table:function(t){var i=e.table(t),n=i.schema.primaryKey;return a(a({},i),{mutate:function(e){var o=Pe.trans,r=o.table(t).hook,s=r.deleting,c=r.creating,d=r.updating;switch(e.type){case"add":if(c.fire===ce)break;return o._promise("readwrite",(function(){return u(e)}),!0);case"put":if(c.fire===ce&&d.fire===ce)break;return o._promise("readwrite",(function(){return u(e)}),!0);case"delete":if(s.fire===ce)break;return o._promise("readwrite",(function(){return u(e)}),!0);case"deleteRange":if(s.fire===ce)break;return o._promise("readwrite",(function(){return function(e){return h(e.trans,e.range,1e4)}(e)}),!0)}return i.mutate(e);function u(e){var t=Pe.trans,o=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(n,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?a(a({},e),{keys:o}):a({},e)).type&&(e.values=l([],e.values,!0)),e.keys&&(e.keys=l([],e.keys,!0)),function(e,t,i){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:i,cache:"immutable"})}(i,e,o).then((function(r){var a=o.map((function(i,o){var a=r[o],l={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(l,i,a,t);else if("add"===e.type||void 0===a){var u=c.fire.call(l,i,e.values[o],t);null==i&&null!=u&&(i=u,e.keys[o]=i,n.outbound||I(e.values[o],n.keyPath,i))}else{var h=Bi(a,e.values[o]),g=d.fire.call(l,h,i,a,t);if(g){var p=e.values[o];Object.keys(g).forEach((function(e){f(p,e)?p[e]=g[e]:I(p,e,g[e])}))}}return l}));return i.mutate(e).then((function(t){for(var i=t.failures,n=t.results,s=t.numFailures,l=t.lastResult,c=0;c<o.length;++c){var d=n?n[c]:o[c],u=a[c];null==d?u.onerror&&u.onerror(i[c]):u.onsuccess&&u.onsuccess("put"===e.type&&r[c]?e.values[c]:d)}return{failures:i,results:n,numFailures:s,lastResult:l}})).catch((function(e){return a.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function h(e,t,o){return i.query({trans:e,values:!1,query:{index:n,range:t},limit:o}).then((function(i){var n=i.result;return u({type:"delete",keys:n,trans:e}).then((function(i){return i.numFailures>0?Promise.reject(i.failures[0]):n.length<o?{failures:[],numFailures:0,lastResult:void 0}:h(e,a(a({},t),{lower:n[n.length-1],lowerOpen:!0}),o)}))}))}}})}})}};function zi(e,t,i){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],o=0,r=0;o<t.keys.length&&r<e.length;++o)0===Kt(t.keys[o],e[r])&&(n.push(i?P(t.values[o]):t.values[o]),++r);return n.length===e.length?n:null}catch(e){return null}}var Wi,Hi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return a(a({},i),{getMany:function(e){if(!e.cache)return i.getMany(e);var t=zi(e.keys,e.trans._cache,"clone"===e.cache);return t?ze.resolve(t):i.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),i.mutate(e)}})}}}};function Ki(e){return!("from"in e)}var Ui=function(e,t){if(!this){var i=new Ui;return e&&"d"in e&&h(i,e),i}h(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Vi(e,t,i){var n=Kt(t,i);if(!isNaN(n)){if(n>0)throw RangeError();if(Ki(e))return h(e,{from:t,to:i,d:1});var o=e.l,r=e.r;if(Kt(i,e.from)<0)return o?Vi(o,t,i):e.l={from:t,to:i,d:1,l:null,r:null},Gi(e);if(Kt(t,e.to)>0)return r?Vi(r,t,i):e.r={from:t,to:i,d:1,l:null,r:null},Gi(e);Kt(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),Kt(i,e.to)>0&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;o&&!e.l&&$i(e,o),r&&s&&$i(e,r)}}function $i(e,t){Ki(t)||function e(t,i){var n=i.from,o=i.to,r=i.l,s=i.r;Vi(t,n,o),r&&e(t,r),s&&e(t,s)}(e,t)}function qi(e){var t=Ki(e)?null:{s:0,n:e};return{next:function(e){for(var i=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&Kt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||Kt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Gi(e){var t,i,n=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(i=e.l)||void 0===i?void 0:i.d)||0),o=n>1?"r":n<-1?"l":"";if(o){var r="r"===o?"l":"r",s=a({},e),l=e[o];e.from=l.from,e.to=l.to,e[o]=l[o],s[o]=l[r],e[r]=s,s.d=Zi(s)}e.d=Zi(e)}function Zi(e){var t=e.r,i=e.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}m(Ui.prototype,((Wi={add:function(e){return $i(this,e),this},addKey:function(e){return Vi(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return Vi(t,e,e)})),this}})[z]=function(){return qi(this)},Wi));var Ji={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,i=new Ui(e.MIN_KEY,e.MAX_KEY);return a(a({},e),{table:function(n){var o=e.table(n),r=o.schema,s=r.primaryKey,l=s.extractKey,c=s.outbound,h=a(a({},o),{mutate:function(e){var s=e.trans,a=s.mutatedParts||(s.mutatedParts={}),l=function(e){var i="idb://"+t+"/"+n+"/"+e;return a[i]||(a[i]=new Ui)},c=l(""),d=l(":dels"),h=e.type,g="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],p=g[0],f=g[1],m=e.trans._cache;return o.mutate(e).then((function(e){if(u(p)){"delete"!==h&&(p=e.results),c.addKeys(p);var t=zi(p,m);t||"add"===h||d.addKeys(p),(t||f)&&function(e,t,i,n){function o(t){var o=e(t.name||"");function r(e){return null!=e?t.extractKey(e):null}var s=function(e){return t.multiEntry&&u(e)?e.forEach((function(e){return o.addKey(e)})):o.addKey(e)};(i||n).forEach((function(e,t){var o=i&&r(i[t]),a=n&&r(n[t]);0!==Kt(o,a)&&(null!=o&&s(o),null!=a&&s(a))}))}t.indexes.forEach(o)}(l,r,t,f)}else if(p){var n={from:p.lower,to:p.upper};d.add(n),c.add(n)}else c.add(i),d.add(i),r.indexes.forEach((function(e){return l(e.name).add(i)}));return e}))}}),g=function(t){var i,n,o=t.query,r=o.index,s=o.range;return[r,new Ui(null!==(i=s.lower)&&void 0!==i?i:e.MIN_KEY,null!==(n=s.upper)&&void 0!==n?n:e.MAX_KEY)]},p={get:function(e){return[s,new Ui(e.key)]},getMany:function(e){return[s,(new Ui).addKeys(e.keys)]},count:g,query:g,openCursor:g};return d(p).forEach((function(e){h[e]=function(r){var s=Pe.subscr;if(s){var d=function(e){var i="idb://"+t+"/"+n+"/"+e;return s[i]||(s[i]=new Ui)},u=d(""),h=d(":dels"),g=p[e](r),f=g[0],m=g[1];if(d(f.name||"").add(m),!f.isPrimaryKey){if("count"!==e){var _="query"===e&&c&&r.values&&o.query(a(a({},r),{values:!1}));return o[e].apply(this,arguments).then((function(t){if("query"===e){if(c&&r.values)return _.then((function(e){var i=e.result;return u.addKeys(i),t}));var i=r.values?t.result.map(l):t.result;r.values?u.addKeys(i):h.addKeys(i)}else if("openCursor"===e){var n=t,o=r.values;return n&&Object.create(n,{key:{get:function(){return h.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return h.addKey(e),e}},value:{get:function(){return o&&u.addKey(n.primaryKey),n.value}}})}return t}))}h.add(i)}}return o[e].apply(this,arguments)}})),h}})}};var Yi,Xi=function(){function e(t,i){var n=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=i=a({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var r=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ce,dbReadyPromise:null,cancelOpen:ce,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};l.dbReadyPromise=new ze((function(e){l.dbReadyResolve=e})),l.openCanceller=new ze((function(e,t){l.cancelOpen=t})),this._state=l,this.name=t,this.on=Nt(this,"populate","blocked","versionchange","close",{ready:[_e,ce]}),this.on.ready.subscribe=S(this.on.ready.subscribe,(function(t){return function(i,o){e.vip((function(){var e=n._state;if(e.openComplete)e.dbOpenError||ze.resolve().then(i),o&&t(i);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(i),o&&t(i);else{t(i);var r=n;o||t((function e(){r.on.ready.unsubscribe(i),r.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(s=this,Ot($t.prototype,(function(e,t){this.db=s;var i=Tt,n=null;if(t)try{i=t()}catch(e){n=e}var o=e._ctx,r=o.table,a=r.hook.reading.fire;this._ctx={table:r,index:o.index,isPrimKey:!o.index||r.schema.primKey.keyPath&&o.index===r.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:o.or,valueMapper:a!==de?a:null}}))),this.Table=function(e){return Ot(Lt.prototype,(function(t,i,n){this.db=e,this._tx=n,this.name=t,this.schema=i,this.hook=e._allTables[t]?e._allTables[t].hook:Nt(null,{creating:[ge,ce],reading:[ue,de],updating:[fe,ce],deleting:[pe,ce]})}))}(this),this.Transaction=function(e){return Ot(si.prototype,(function(t,i,n,o,r){var s=this;this.db=e,this.mode=t,this.storeNames=i,this.schema=n,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Nt(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ze((function(e,t){s._resolve=e,s._reject=t})),this._completion.then((function(){s.active=!1,s.on.complete.fire()}),(function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),wt(e)}))}))}(this),this.Version=function(e){return Ot(Di.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Ot(ii.prototype,(function(t,i,n){this.db=e,this._ctx={table:t,index:":id"===i?null:i,or:n};var o=e._deps.indexedDB;if(!o)throw new se.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(e,t){return o.cmp(t,e)},this._max=function(e,t){return o.cmp(e,t)>0?e:t},this._min=function(e,t){return o.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+n.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+n.name+"'. Closing db now to resume the delete request."),n.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+n.name+"') was blocked"):console.warn("Upgrade '"+n.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=di(i.IDBKeyRange),this._createTransaction=function(e,t,i,o){return new n.Transaction(e,t,i,n._options.chromeTransactionDurability,o)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),kt.filter((function(e){return e.name===n.name&&e!==n&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Fi),this.use(ji),this.use(Ji),this.use(Hi),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((function(e){return e(n)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new se.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,i=t.filter((function(t){return t._cfg.version===e}))[0];return i||(i=new this.Version(e),t.push(i),t.sort(yi),i.stores({}),this._state.autoSchema=!1,i)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Pe.letThrough||this._vip)?e():new ze((function(e,i){if(t._state.openComplete)return i(new se.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void i(new se.DatabaseClosed);t.open().catch(ce)}t._state.dbReadyPromise.then(e,i)})).then(e)},e.prototype.use=function(e){var t=e.stack,i=e.create,n=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var r=this._middlewares[t]||(this._middlewares[t]=[]);return r.push({stack:t,create:i,level:null==n?10:n,name:o}),r.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,i=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return n?e.create!==n:!!i&&e.name!==i}))),this},e.prototype.open=function(){return Mi(this)},e.prototype._close=function(){var e=this._state,t=kt.indexOf(this);if(t>=0&&kt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new ze((function(t){e.dbReadyResolve=t})),e.openCanceller=new ze((function(t,i){e.cancelOpen=i}))},e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new se.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},e.prototype.delete=function(){var e=this,t=arguments.length>0,i=this._state;return new ze((function(n,o){var r=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=tt((function(){Ri(e._deps,e.name),n()})),t.onerror=ni(o),t.onblocked=e._fireOnBlocked};if(t)throw new se.InvalidArgument("Arguments not allowed in db.delete()");i.isBeingOpened?i.dbReadyPromise.then(r):r()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Ni.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,i){var n=this,o=Pe.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var r,s,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map((function(e){var t=e instanceof n.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)r="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new se.InvalidArgument("Invalid transaction mode: "+e);r="readwrite"}if(o){if("readonly"===o.mode&&"readwrite"===r){if(!a)throw new se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&s.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!a)throw new se.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),a&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,(function(t,i){i(e)})):wt(e)}var l=Oi.bind(null,this,r,s,o,i);return o?o._promise(r,l,"lock"):Pe.trans?mt(Pe.transless,(function(){return n._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!f(this._allTables,e))throw new se.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Qi="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",en=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,i){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:i})},e.prototype[Qi]=function(){return this},e}();function tn(e,t){return d(t).forEach((function(i){$i(e[i]||(e[i]=new Ui),t[i])})),e}try{Yi={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch(e){Yi={indexedDB:null,IDBKeyRange:null}}var nn=Xi;function on(e){var t=rn;try{rn=!0,ri.storagemutated.fire(e)}finally{rn=t}}m(nn,a(a({},le),{delete:function(e){return new nn(e,{addons:[]}).delete()},exists:function(e){return new nn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,i=e.IDBKeyRange;return Ii(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return"__dbnames"!==e}))})):Ai(t,i).toCollection().primaryKeys()}(nn.dependencies).then(e)}catch(e){return wt(new se.MissingAPI)}},defineClass:function(){return function(e){h(this,e)}},ignoreTransaction:function(e){return Pe.trans?mt(Pe.transless,e):e()},vip:Ti,async:function(e){return function(){try{var t=Li(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ze.resolve(t)}catch(e){return wt(e)}}},spawn:function(e,t,i){try{var n=Li(e.apply(i,t||[]));return n&&"function"==typeof n.then?n:ze.resolve(n)}catch(e){return wt(e)}},currentTransaction:{get:function(){return Pe.trans||null}},waitFor:function(e,t){var i=ze.resolve("function"==typeof e?nn.ignoreTransaction(e):e).timeout(t||6e4);return Pe.trans?Pe.trans.waitFor(i):i},Promise:ze,debug:{get:function(){return V},set:function(e){$(e,"dexie"===e?function(){return!0}:It)}},derive:v,extend:h,props:m,override:S,Events:Nt,on:ri,liveQuery:function(e){return new en((function(t){var i=U(e);var n=!1,o={},r={},s={get closed(){return n},unsubscribe:function(){n=!0,ri.storagemutated.unsubscribe(u)}};t.start&&t.start(s);var a=!1,l=!1;function c(){return d(r).some((function(e){return o[e]&&function(e,t){var i=qi(t),n=i.next();if(n.done)return!1;for(var o=n.value,r=qi(e),s=r.next(o.from),a=s.value;!n.done&&!s.done;){if(Kt(a.from,o.to)<=0&&Kt(a.to,o.from)>=0)return!0;Kt(o.from,a.from)<0?o=(n=i.next(a.from)).value:a=(s=r.next(o.from)).value}return!1}(o[e],r[e])}))}var u=function(e){tn(o,e),c()&&h()},h=function(){if(!a&&!n){o={};var d={},g=function(t){i&&ct();var n=function(){return lt(e,{subscr:t,trans:null})},o=Pe.trans?mt(Pe.transless,n):n();return i&&o.then(dt,dt),o}(d);l||(ri("storagemutated",u),l=!0),a=!0,Promise.resolve(g).then((function(e){a=!1,n||(c()?h():(o={},r=d,t.next&&t.next(e)))}),(function(e){a=!1,t.error&&t.error(e),s.unsubscribe()}))}};return h(),s}))},extendObservabilitySet:tn,getByKeyPath:A,setByKeyPath:I,delByKeyPath:function(e,t){"string"==typeof t?I(e,t,void 0):"length"in t&&[].map.call(t,(function(t){I(e,t,void 0)}))},shallowClone:R,deepClone:P,getObjectDiff:Bi,cmp:Kt,asap:E,minKey:-(1/0),addons:[],connections:kt,errnames:oe,dependencies:Yi,semVer:"3.2.2",version:"3.2.2".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,i){return e+t/Math.pow(10,2*i)}))})),nn.maxKey=di(nn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(ri("storagemutated",(function(e){var t;rn||(Et?(t=document.createEvent("CustomEvent")).initCustomEvent("x-storagemutated-1",!0,!0,e):t=new CustomEvent("x-storagemutated-1",{detail:e}),rn=!0,dispatchEvent(t),rn=!1)})),addEventListener("x-storagemutated-1",(function(e){var t=e.detail;rn||on(t)})));var rn=!1;if("undefined"!=typeof BroadcastChannel){var sn=new BroadcastChannel("x-storagemutated-1");ri("storagemutated",(function(e){rn||sn.postMessage(e)})),sn.onmessage=function(e){e.data&&on(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){ri("storagemutated",(function(e){try{rn||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&l([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach((function(t){return t.postMessage({type:"x-storagemutated-1",changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if("x-storagemutated-1"===e.key){var t=JSON.parse(e.newValue);t&&on(t.changedParts)}}));var an=self.document&&navigator.serviceWorker;an&&an.addEventListener("message",(function(e){var t=e.data;t&&"x-storagemutated-1"===t.type&&on(t.changedParts)}))}ze.rejectionMapper=function(e,t){if(!e||e instanceof ee||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ae[e.name])return e;var i=new ae[e.name](t||e.message,e);return"stack"in e&&b(i,"stack",{get:function(){return this.inner.stack}}),i},$(V,It);class ln{getAll(){return this.db.data.orderBy("timestamp").desc().toArray()}async maybeInit(e){if(e.length>8){await this.exists(e)||this.put(e,{title:""})}}async exists(e){return!!this.get(e)}async get(e){return await this.db.data.get(e)}async put(e,t){if(e.length>8){const i=await this.get(e);i&&(t={...i.meta,...t}),await this.db.data.put({id:e,timestamp:Date.now(),meta:t})}}drop(e){this.db.data.delete(e)}constructor(){this.db=new Xi("LiveEditor"),this.db.version(1).stores({data:"\n            &id,\n            timestamp,\n            meta"})}}function cn(e=16,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){let i="";for(let n=0;n<e;n++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}function dn(e){return window.location.origin+window.location.pathname+"?/"+e.join("/")}class un{loadConfig(){const e=localStorage.getItem("config");e?(this.config=JSON.parse(e),this.config.credentials||(this.config.credentials={},this.storeConfig())):this.storeConfig()}storeConfig(){localStorage.setItem("config",JSON.stringify(this.config))}setTitle(e){document.title=e}init(){}async getHtml(e){e&&(e.innerHTML="")}constructor(e,t){s(this,"params",{}),s(this,"config",{lights:!1,mode:2,user:{name:cn(),color:"#"+cn(6,"0123456789ABCDEF")},credentials:{}}),this.index=new ln,this.params=e}}var hn=r("hzoey");const gn=new(i(hn))((new Date).getTime());function pn(e){var t,i,n,o,r,s,a,l;return` \n          <div class="col-12 p-2 col-sm-6 col-md-6 col-lg-4 col-xl-3" style="height: inherit">\n\n            <div class="card shadow bg-body rounded">\n            \n              <div class="card-body"style="margin-bottom: -26px">\n                <div class="d-flex justify-content-between">\n                  <h6 class="h6 text-truncate" style="margin-right: 10px">\n                    ${(null===(t=e.meta)||void 0===t?void 0:t.title)?null===(i=e.meta)||void 0===i?void 0:i.title:"Untitled"}\n                  </h6>\n                  <button type="button" class="btn btn-close btn-sm" aria-label="Delete" onclick="window.LIA.delete('${e.id}')"></button>\n                </div>\n              </div>\n              <hr>\n              <div class="card-body pt-0" style="height: 12rem; overflow: auto">\n                <img src="${null===(n=e.meta)||void 0===n?void 0:n.logo}"\n                  style="width:100%"\n                ${(null===(o=e.meta)||void 0===o?void 0:o.logo)?"":'hidden="true"'} >\n              \n                <p class="mb-0"><small>${(null===(r=e.meta)||void 0===r||null===(s=r.macro)||void 0===s?void 0:s.comment)||""}</small></p>\n\n                <hr ${(null===(a=e.meta)||void 0===a||null===(l=a.macro)||void 0===l?void 0:l.comment)?"":'hidden="true"'}>\n                <p class="mb-0 text-muted"><small>ID: ${e.id}</small></p>\n              </div>\n\n              <div class="row m-1">\n              <p class="col-9 card-text my-2 text-truncate"><small class="text-muted">[v ${e.meta.version}] - ${function(e){const t=new Date(e);return gn.print(t)}(e.timestamp)}</small></p>\n                <div class="col gap-2 d-sm-flex justify-content-end p-1">\n                  <a href="./?/edit/${e.id}" class="btn btn-primary btn-sm">Edit</a>\n                </div>\n              </div>\n            </div>\n          </div>\n`}class fn extends un{async init(){const e=document.getElementById("card-container");if(e){const t=await this.index.getAll();e.innerHTML=t.map((e=>pn(e))).join("")}const t=this.index;window.LIA.delete=e=>{t.drop(e),window.indexedDB.deleteDatabase(e),window.location=window.location}}body(){return'\n    <div\n      class="container mx-0 px-0 pb-5"\n      style="max-width: 100vw !important; height:100%; overflow: scroll"\n      >\n      <div\n        id="card-container"\n        class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-8 m-5"\n        \n      >\n      </div>\n    </div>\n    '}navigation(){return'\n      <nav class="navbar navbar-expand-lg navbar-light bg-light">\n        <div class="container-fluid">\n          <a class="navbar-brand" href="./" data-link>\n            Lia[Index]\n          </a>\n\n          <a class="navbar-brand" href="./examples.html">\n            Lia[Examples]\n          </a>\n            \n          <a type="button" class="btn btn-primary" href="./?/edit">\n            New note\n          </a>\n        </div>\n      </nav>'}async getHtml(e){e.innerHTML=this.navigation()+this.body(),this.init()}constructor(e,t){super(e),this.setTitle("Index")}}var mn;mn=JSON.parse('{"responsiveVoiceKey":"blVZszUw","proxy":"https://api.allorigins.win/get?url=","github":{"clientId":"3d2b318591719ae93686","clientSecret":"9b80a52fe67262798490d10e7a48d4e248bfa628"}}');const _n=()=>new Map,bn=e=>{const t=_n();return e.forEach(((e,i)=>{t.set(i,e)})),t},vn=(e,t,i)=>{let n=e.get(t);return void 0===n&&e.set(t,n=i()),n},yn=()=>new Set,wn=e=>e[e.length-1],Cn=(e,t)=>{for(let i=0;i<t.length;i++)e.push(t[i])},xn=Array.from;Array.isArray;class Sn{on(e,t){vn(this._observers,e,yn).add(t)}once(e,t){const i=(...n)=>{this.off(e,i),t(...n)};this.on(e,i)}off(e,t){const i=this._observers.get(e);void 0!==i&&(i.delete(t),0===i.size&&this._observers.delete(e))}emit(e,t){return xn((this._observers.get(e)||_n()).values()).forEach((e=>e(...t)))}destroy(){this._observers=_n()}constructor(){this._observers=_n()}}const kn=Math.floor,En=(Math.ceil,Math.abs),Dn=(Math.imul,Math.round,Math.log10),An=(Math.log2,Math.log,Math.sqrt,(e,t)=>e<t?e:t),In=(e,t)=>e>t?e:t,Rn=(Number.isNaN,Math.pow,Math.sign,e=>0!==e?e<0:1/e<0),Tn=String.fromCharCode,Mn=(String.fromCodePoint,/^\s*/g),Ln=/([A-Z])/g,Nn=(e,t)=>(e=>e.replace(Mn,""))(e.replace(Ln,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),On="undefined"!=typeof TextEncoder?new TextEncoder:null,Pn=On?e=>On.encode(e):e=>{const t=unescape(encodeURIComponent(e)),i=t.length,n=new Uint8Array(i);for(let e=0;e<i;e++)n[e]=t.codePointAt(e);return n};let Fn="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Fn&&1===Fn.decode(new Uint8Array).length&&(Fn=null);const Bn=e=>void 0===e?null:e;let jn=new class{setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}constructor(){this.map=new Map}},zn=!0;try{"undefined"!=typeof localStorage&&(jn=localStorage,zn=!1)}catch(e){}const Wn=jn;const Hn=void 0!==(ic=r("aLykv"))&&ic.release&&/node|io\.js/.test(ic.release.name),Kn="undefined"!=typeof window&&!Hn;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let Un;const Vn=[],$n=()=>{if(void 0===Un)if(Hn){Un=_n();const e=ic.argv;let t=null;for(let i=0;i<e.length;i++){const n=e[i];"-"===n[0]?(null!==t&&Un.set(t,""),t=n):null!==t?(Un.set(t,n),t=null):Vn.push(n)}null!==t&&Un.set(t,"")}else"object"==typeof location?(Un=_n(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,i]=e.split("=");Un.set(`--${Nn(t,"-")}`,i),Un.set(`-${Nn(t,"-")}`,i)}}))):Un=_n();return Un},qn=e=>Bn(Hn?ic.env[e.toUpperCase()]:Wn.getItem(e));(e=>$n().has(e))("--"+(Gn="production"))||qn(Gn);var Gn;const Zn=Number.MAX_SAFE_INTEGER,Jn=(Number.MIN_SAFE_INTEGER,Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&kn(e)===e));Number.isNaN,Number.parseInt;class Yn{constructor(e){this.arr=e,this.pos=0}}const Xn=e=>new Yn(e),Qn=e=>e.pos!==e.arr.length,eo=(e,t)=>{const i=mo(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,i},to=e=>eo(e,no(e)),io=e=>e.arr[e.pos++],no=e=>{let t=0,i=1;for(;;){const n=e.arr[e.pos++];if(t+=(127&n)*i,i*=128,n<128)return t;if(t>Zn)throw new Error("Integer out of range!")}},oo=e=>{let t=e.arr[e.pos++],i=63&t,n=64;const o=(64&t)>0?-1:1;if(0==(128&t))return o*i;for(;;){if(t=e.arr[e.pos++],i+=(127&t)*n,n*=128,t<128)return o*i;if(i>Zn)throw new Error("Integer out of range!")}},ro=Fn?e=>Fn.decode(to(e)):e=>{let t=no(e);if(0===t)return"";{let i=String.fromCodePoint(io(e));if(--t<100)for(;t--;)i+=String.fromCodePoint(io(e));else for(;t>0;){const n=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,i+=String.fromCodePoint.apply(null,o),t-=n}return decodeURIComponent(escape(i))}},so=(e,t)=>{const i=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,i},ao=[e=>{},e=>null,oo,e=>so(e,4).getFloat32(0,!1),e=>so(e,8).getFloat64(0,!1),e=>so(e,8).getBigInt64(0,!1),e=>!1,e=>!0,ro,e=>{const t=no(e),i={};for(let n=0;n<t;n++){i[ro(e)]=lo(e)}return i},e=>{const t=no(e),i=[];for(let n=0;n<t;n++)i.push(lo(e));return i},to],lo=e=>ao[127-io(e)](e);class co extends Yn{read(){return 0===this.count&&(this.s=this.reader(this),Qn(this)?this.count=no(this)+1:this.count=-1),this.count--,this.s}constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}}class uo extends Yn{read(){if(0===this.count){this.s=oo(this);const e=Rn(this.s);this.count=1,e&&(this.s=-this.s,this.count=no(this)+2)}return this.count--,this.s}constructor(e){super(e),this.s=0,this.count=0}}class ho extends Yn{read(){if(0===this.count){const e=oo(this),t=1&e;this.diff=kn(e/2),this.count=1,t&&(this.count=no(this)+2)}return this.s+=this.diff,this.count--,this.s}constructor(e){super(e),this.s=0,this.count=0,this.diff=0}}class go{read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}constructor(e){this.decoder=new uo(e),this.str=ro(this.decoder),this.spos=0}}var po=r("1UCgw").Buffer;const fo=e=>new Uint8Array(e),mo=(e,t,i)=>new Uint8Array(e,t,i),_o=Kn?e=>{let t="";for(let i=0;i<e.byteLength;i++)t+=Tn(e[i]);return btoa(t)}:e=>po.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),bo=Kn?e=>{const t=atob(e),i=fo(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}:e=>{const t=po.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};class vo{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const yo=()=>new vo,wo=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let i=0;i<e.bufs.length;i++)t+=e.bufs[i].length;return t})(e));let i=0;for(let n=0;n<e.bufs.length;n++){const o=e.bufs[n];t.set(o,i),i+=o.length}return t.set(mo(e.cbuf.buffer,0,e.cpos),i),t},Co=(e,t)=>{const i=e.cbuf.length;e.cpos===i&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*i),e.cpos=0),e.cbuf[e.cpos++]=t},xo=Co,So=(e,t)=>{for(;t>127;)Co(e,128|127&t),t=kn(t/128);Co(e,127&t)},ko=(e,t)=>{const i=Rn(t);for(i&&(t=-t),Co(e,(t>63?128:0)|(i?64:0)|63&t),t=kn(t/64);t>0;)Co(e,(t>127?128:0)|127&t),t=kn(t/128)},Eo=new Uint8Array(3e4),Do=Eo.length/3,Ao=On?(e,t)=>{if(t.length<Do){const i=On.encodeInto(t,Eo).written||0;So(e,i);for(let t=0;t<i;t++)Co(e,Eo[t])}else Ro(e,Pn(t))}:(e,t)=>{const i=unescape(encodeURIComponent(t)),n=i.length;So(e,n);for(let t=0;t<n;t++)Co(e,i.codePointAt(t))},Io=(e,t)=>{const i=e.cbuf.length,n=e.cpos,o=An(i-n,t.length),r=t.length-o;e.cbuf.set(t.subarray(0,o),n),e.cpos+=o,r>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(In(2*i,r)),e.cbuf.set(t.subarray(o)),e.cpos=r)},Ro=(e,t)=>{So(e,t.byteLength),Io(e,t)},To=(e,t)=>{((e,t)=>{const i=e.cbuf.length;i-e.cpos<t&&(e.bufs.push(mo(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*In(i,t)),e.cpos=0)})(e,t);const i=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,i},Mo=new DataView(new ArrayBuffer(4)),Lo=(e,t)=>{switch(typeof t){case"string":Co(e,119),Ao(e,t);break;case"number":Jn(t)&&En(t)<=2147483647?(Co(e,125),ko(e,t)):(i=t,Mo.setFloat32(0,i),Mo.getFloat32(0)===i?(Co(e,124),((e,t)=>{To(e,4).setFloat32(0,t,!1)})(e,t)):(Co(e,123),((e,t)=>{To(e,8).setFloat64(0,t,!1)})(e,t)));break;case"bigint":Co(e,122),((e,t)=>{To(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)Co(e,126);else if(t instanceof Array){Co(e,117),So(e,t.length);for(let i=0;i<t.length;i++)Lo(e,t[i])}else if(t instanceof Uint8Array)Co(e,116),Ro(e,t);else{Co(e,118);const i=Object.keys(t);So(e,i.length);for(let n=0;n<i.length;n++){const o=i[n];Ao(e,o),Lo(e,t[o])}}break;case"boolean":Co(e,t?120:121);break;default:Co(e,127)}var i};class No extends vo{write(e){this.s===e?this.count++:(this.count>0&&So(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}constructor(e){super(),this.w=e,this.s=null,this.count=0}}const Oo=e=>{e.count>0&&(ko(e.encoder,1===e.count?e.s:-e.s),e.count>1&&So(e.encoder,e.count-2))};class Po{write(e){this.s===e?this.count++:(Oo(this),this.count=1,this.s=e)}toUint8Array(){return Oo(this),wo(this.encoder)}constructor(){this.encoder=new vo,this.s=0,this.count=0}}const Fo=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);ko(e.encoder,t),e.count>1&&So(e.encoder,e.count-2)}};class Bo{write(e){this.diff===e-this.s?(this.s=e,this.count++):(Fo(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Fo(this),wo(this.encoder)}constructor(){this.encoder=new vo,this.s=0,this.count=0,this.diff=0}}class jo{write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new vo;return this.sarr.push(this.s),this.s="",Ao(e,this.sarr.join("")),Io(e,this.lensE.toUint8Array()),wo(e)}constructor(){this.sarr=[],this.s="",this.lensE=new Po}}"undefined"==typeof window||void 0!==window.performance&&window.performance;const zo="undefined"==typeof crypto?null:crypto,Wo=null!==zo?e=>{const t=new ArrayBuffer(e),i=new Uint8Array(t);return zo.getRandomValues(i),t}:e=>{const t=new ArrayBuffer(e),i=new Uint8Array(t);for(let t=0;t<e;t++)i[t]=Math.ceil(4294967295*Math.random()>>>0);return t},Ho=Math.random,Ko=()=>new Uint32Array(Wo(4))[0],Uo=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^Ko()&15>>e/4).toString(16))),Vo=Date.now,$o=e=>new Promise(e),qo=e=>Promise.resolve(e),Go=e=>new Error(e),Zo=()=>{throw Go("Method unimplemented")},Jo=()=>{throw Go("Unexpected case")},Yo=(Object.assign,Object.keys),Xo=e=>Yo(e).length,Qo=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),er=(e,t)=>e===t||Xo(e)===Xo(t)&&((e,t)=>{for(const i in e)if(!t(e[i],i))return!1;return!0})(e,((e,i)=>(void 0!==e||Qo(t,i))&&t[i]===e)),tr=(e,t,i=0)=>{try{for(;i<e.length;i++)e[i](...t)}finally{i<e.length&&tr(e,t,i+1)}},ir=()=>{},nr=(e,t)=>{if(null==e||null==t)return((e,t)=>e===t)(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;break;case Set:if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;break;case Map:if(e.size!==t.size)return!1;for(const i of e.keys())if(!t.has(i)||!nr(e.get(i),t.get(i)))return!1;break;case Object:if(Xo(e)!==Xo(t))return!1;for(const i in e)if(!Qo(e,i)||!nr(e[i],t[i]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!nr(e[i],t[i]))return!1;break;default:return!1}return!0},or=Symbol;class rr{constructor(e,t){this.left=e,this.right=t}}const sr=(e,t)=>new rr(e,t),ar="undefined"!=typeof document?document:{},lr=("undefined"!=typeof DOMParser&&new DOMParser,e=>((e,t)=>{const i=[];for(const[n,o]of e)i.push(t(o,n));return i})(e,((e,t)=>`${t}:${e};`)).join(""));ar.ELEMENT_NODE,ar.TEXT_NODE,ar.CDATA_SECTION_NODE,ar.COMMENT_NODE,ar.DOCUMENT_NODE,ar.DOCUMENT_TYPE_NODE,ar.DOCUMENT_FRAGMENT_NODE,JSON.stringify,JSON.parse;const cr=e=>class{destroy(){e(this._)}constructor(e){this._=e}},dr=(cr(clearTimeout),cr(clearInterval),cr((e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e))),cr((e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e))),or()),ur=or(),hr=or(),gr=or(),pr=or(),fr=or(),mr=or(),_r=or(),br=or(),vr={[dr]:sr("font-weight","bold"),[ur]:sr("font-weight","normal"),[hr]:sr("color","blue"),[pr]:sr("color","green"),[gr]:sr("color","grey"),[fr]:sr("color","red"),[mr]:sr("color","purple"),[_r]:sr("color","orange"),[br]:sr("color","black")},yr={[dr]:"[1m",[ur]:"[2m",[hr]:"[34m",[pr]:"[32m",[gr]:"[37m",[fr]:"[31m",[mr]:"[35m",[_r]:"[38;5;208m",[br]:"[0m"},wr=Hn?e=>{const t=[],i=[];let n=0;for(;n<e.length;n++){const i=e[n],o=yr[i];if(void 0!==o)t.push(o);else{if(i.constructor!==String&&i.constructor!==Number)break;t.push(i)}}for(n>0&&(t.push("[0m"),i.push(t.join("")));n<e.length;n++){const t=e[n];t instanceof Symbol||i.push(t)}return i}:e=>{const t=[],i=[],n=_n();let o=[],r=0;for(;r<e.length;r++){const o=e[r],s=vr[o];if(void 0!==s)n.set(s.left,s.right);else{if(o.constructor!==String&&o.constructor!==Number)break;{const e=lr(n);r>0||e.length>0?(t.push("%c"+o),i.push(e)):t.push(o)}}}for(r>0&&(o=i,o.unshift(t.join("")));r<e.length;r++){const t=e[r];t instanceof Symbol||o.push(t)}return o},Cr=(...e)=>{console.log(...wr(e)),xr.forEach((t=>t.print(e)))},xr=new Set;const Sr=[pr,mr,_r,hr];let kr=0,Er=Vo();const Dr=e=>({[Symbol.iterator](){return this},next:e}),Ar=(e,t)=>Dr((()=>{const{done:i,value:n}=e.next();return{done:i,value:i?void 0:t(n)}}));class Ir{constructor(e,t){this.clock=e,this.len=t}}class Rr{constructor(){this.clients=new Map}}const Tr=(e,t,i)=>t.clients.forEach(((t,n)=>{const o=e.doc.store.clients.get(n);for(let n=0;n<t.length;n++){const r=t[n];Ns(e,o,r.clock,r.len,i)}})),Mr=(e,t)=>{const i=e.clients.get(t.client);return void 0!==i&&null!==((e,t)=>{let i=0,n=e.length-1;for(;i<=n;){const o=kn((i+n)/2),r=e[o],s=r.clock;if(s<=t){if(t<s+r.len)return o;i=o+1}else n=o-1}return null})(i,t.clock)},Lr=e=>{e.clients.forEach((e=>{let t,i;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,i=1;t<e.length;t++){const n=e[i-1],o=e[t];n.clock+n.len>=o.clock?n.len=In(n.len,o.clock+o.len-n.clock):(i<t&&(e[i]=o),i++)}e.length=i}))},Nr=e=>{const t=new Rr;for(let i=0;i<e.length;i++)e[i].clients.forEach(((n,o)=>{if(!t.clients.has(o)){const r=n.slice();for(let t=i+1;t<e.length;t++)Cn(r,e[t].clients.get(o)||[]);t.clients.set(o,r)}}));return Lr(t),t},Or=(e,t,i,n)=>{vn(e.clients,t,(()=>[])).push(new Ir(i,n))},Pr=()=>new Rr,Fr=e=>{const t=Pr();return e.clients.forEach(((e,i)=>{const n=[];for(let t=0;t<e.length;t++){const i=e[t];if(i.deleted){const o=i.id.clock;let r=i.length;if(t+1<e.length)for(let i=e[t+1];t+1<e.length&&i.deleted;i=e[1+ ++t])r+=i.length;n.push(new Ir(o,r))}}n.length>0&&t.clients.set(i,n)})),t},Br=(e,t)=>{So(e.restEncoder,t.clients.size),t.clients.forEach(((t,i)=>{e.resetDsCurVal(),So(e.restEncoder,i);const n=t.length;So(e.restEncoder,n);for(let i=0;i<n;i++){const n=t[i];e.writeDsClock(n.clock),e.writeDsLen(n.len)}}))},jr=e=>{const t=new Rr,i=no(e.restDecoder);for(let n=0;n<i;n++){e.resetDsCurVal();const i=no(e.restDecoder),n=no(e.restDecoder);if(n>0){const o=vn(t.clients,i,(()=>[]));for(let t=0;t<n;t++)o.push(new Ir(e.readDsClock(),e.readDsLen()))}}return t},zr=(e,t,i)=>{const n=new Rr,o=no(e.restDecoder);for(let r=0;r<o;r++){e.resetDsCurVal();const o=no(e.restDecoder),r=no(e.restDecoder),s=i.clients.get(o)||[],a=Ds(i,o);for(let i=0;i<r;i++){const i=e.readDsClock(),r=i+e.readDsLen();if(i<a){a<r&&Or(n,o,a,r-a);let e=Is(s,i),l=s[e];for(!l.deleted&&l.id.clock<i&&(s.splice(e+1,0,ml(t,l,i-l.id.clock)),e++);e<s.length&&(l=s[e++],l.id.clock<r);)l.deleted||(r<l.id.clock+l.length&&s.splice(e,0,ml(t,l,r-l.id.clock)),l.delete(t))}else Or(n,o,i,r-i)}}if(n.clients.size>0){const e=new Jr;return So(e.restEncoder,0),Br(e,n),e.toUint8Array()}return null},Wr=Ko;class Hr extends Sn{load(){const e=this._item;null===e||this.shouldLoad||Hs(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map((e=>e.guid)))}transact(e,t=null){Hs(this,e,t)}get(e,t=la){const i=vn(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),n=i.constructor;if(t!==la&&n!==t){if(n===la){const n=new t;n._map=i._map,i._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=n})),n._start=i._start;for(let e=n._start;null!==e;e=e.right)e.parent=n;return n._length=i._length,this.share.set(e,n),n._integrate(this,null),n}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return i}getArray(e=""){return this.get(e,Ea)}getText(e=""){return this.get(e,Ha)}getMap(e=""){return this.get(e,Aa)}getXmlFragment(e=""){return this.get(e,Ua)}toJSON(){const e={};return this.share.forEach(((t,i)=>{e[i]=t.toJSON()})),e}destroy(){xn(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Hr({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Hs(e.parent.doc,(i=>{const n=t.doc;e.deleted||i.subdocsAdded.add(n),i.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}constructor({guid:e=Uo(),collectionid:t=null,gc:i=!0,gcFilter:n=(()=>!0),meta:o=null,autoLoad:r=!1,shouldLoad:s=!0}={}){super(),this.gc=i,this.gcFilter=n,this.clientID=Wr(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new ks,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=r,this.meta=o,this.isLoaded=!1,this.whenLoaded=$o((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}))}}class Kr{resetDsCurVal(){}readDsClock(){return no(this.restDecoder)}readDsLen(){return no(this.restDecoder)}constructor(e){this.restDecoder=e}}class Ur extends Kr{readLeftID(){return ps(no(this.restDecoder),no(this.restDecoder))}readRightID(){return ps(no(this.restDecoder),no(this.restDecoder))}readClient(){return no(this.restDecoder)}readInfo(){return io(this.restDecoder)}readString(){return ro(this.restDecoder)}readParentInfo(){return 1===no(this.restDecoder)}readTypeRef(){return no(this.restDecoder)}readLen(){return no(this.restDecoder)}readAny(){return lo(this.restDecoder)}readBuf(){return(e=>{const t=fo(e.byteLength);return t.set(e),t})(to(this.restDecoder))}readJSON(){return JSON.parse(ro(this.restDecoder))}readKey(){return ro(this.restDecoder)}}class Vr{resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=no(this.restDecoder),this.dsCurrVal}readDsLen(){const e=no(this.restDecoder)+1;return this.dsCurrVal+=e,e}constructor(e){this.dsCurrVal=0,this.restDecoder=e}}class $r extends Vr{readLeftID(){return new hs(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new hs(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return lo(this.restDecoder)}readBuf(){return to(this.restDecoder)}readJSON(){return lo(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const e=this.stringDecoder.read();return this.keys.push(e),e}}constructor(e){super(e),this.keys=[],no(e),this.keyClockDecoder=new ho(to(e)),this.clientDecoder=new uo(to(e)),this.leftClockDecoder=new ho(to(e)),this.rightClockDecoder=new ho(to(e)),this.infoDecoder=new co(to(e),io),this.stringDecoder=new go(to(e)),this.parentInfoDecoder=new co(to(e),io),this.typeRefDecoder=new uo(to(e)),this.lenDecoder=new uo(to(e))}}class qr{toUint8Array(){return wo(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){So(this.restEncoder,e)}writeDsLen(e){So(this.restEncoder,e)}constructor(){this.restEncoder=yo()}}class Gr extends qr{writeLeftID(e){So(this.restEncoder,e.client),So(this.restEncoder,e.clock)}writeRightID(e){So(this.restEncoder,e.client),So(this.restEncoder,e.clock)}writeClient(e){So(this.restEncoder,e)}writeInfo(e){xo(this.restEncoder,e)}writeString(e){Ao(this.restEncoder,e)}writeParentInfo(e){So(this.restEncoder,e?1:0)}writeTypeRef(e){So(this.restEncoder,e)}writeLen(e){So(this.restEncoder,e)}writeAny(e){Lo(this.restEncoder,e)}writeBuf(e){Ro(this.restEncoder,e)}writeJSON(e){Ao(this.restEncoder,JSON.stringify(e))}writeKey(e){Ao(this.restEncoder,e)}}class Zr{toUint8Array(){return wo(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,So(this.restEncoder,t)}writeDsLen(e){0===e&&Jo(),So(this.restEncoder,e-1),this.dsCurrVal+=e}constructor(){this.restEncoder=yo(),this.dsCurrVal=0}}class Jr extends Zr{toUint8Array(){const e=yo();return So(e,0),Ro(e,this.keyClockEncoder.toUint8Array()),Ro(e,this.clientEncoder.toUint8Array()),Ro(e,this.leftClockEncoder.toUint8Array()),Ro(e,this.rightClockEncoder.toUint8Array()),Ro(e,wo(this.infoEncoder)),Ro(e,this.stringEncoder.toUint8Array()),Ro(e,wo(this.parentInfoEncoder)),Ro(e,this.typeRefEncoder.toUint8Array()),Ro(e,this.lenEncoder.toUint8Array()),Io(e,wo(this.restEncoder)),wo(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Lo(this.restEncoder,e)}writeBuf(e){Ro(this.restEncoder,e)}writeJSON(e){Lo(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Bo,this.clientEncoder=new Po,this.leftClockEncoder=new Bo,this.rightClockEncoder=new Bo,this.infoEncoder=new No(xo),this.stringEncoder=new jo,this.parentInfoEncoder=new No(xo),this.typeRefEncoder=new Po,this.lenEncoder=new Po}}const Yr=(e,t,i)=>{const n=new Map;i.forEach(((e,i)=>{Ds(t,i)>e&&n.set(i,e)})),Es(t).forEach(((e,t)=>{i.has(t)||n.set(t,0)})),So(e.restEncoder,n.size),Array.from(n.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([i,n])=>{((e,t,i,n)=>{n=In(n,t[0].id.clock);const o=Is(t,n);So(e.restEncoder,t.length-o),e.writeClient(i),So(e.restEncoder,n);const r=t[o];r.write(e,n-r.id.clock);for(let i=o+1;i<t.length;i++)t[i].write(e,0)})(e,t.clients.get(i),i,n)}))},Xr=(e,t,i,n=new $r(e))=>Hs(t,(e=>{e.local=!1;let t=!1;const i=e.doc,o=i.store,r=((e,t)=>{const i=_n(),n=no(e.restDecoder);for(let o=0;o<n;o++){const n=no(e.restDecoder),o=new Array(n),r=e.readClient();let s=no(e.restDecoder);i.set(r,{i:0,refs:o});for(let i=0;i<n;i++){const n=e.readInfo();switch(31&n){case 0:{const t=e.readLen();o[i]=new Ja(ps(r,s),t),s+=t;break}case 10:{const t=no(e.restDecoder);o[i]=new yl(ps(r,s),t),s+=t;break}default:{const a=0==(192&n),l=new _l(ps(r,s),null,128==(128&n)?e.readLeftID():null,null,64==(64&n)?e.readRightID():null,a?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,a&&32==(32&n)?e.readString():null,bl(e,n));o[i]=l,s+=l.length}}}}return i})(n,i),s=((e,t,i)=>{const n=[];let o=Array.from(i.keys()).sort(((e,t)=>e-t));if(0===o.length)return null;const r=()=>{if(0===o.length)return null;let e=i.get(o[o.length-1]);for(;e.refs.length===e.i;){if(o.pop(),!(o.length>0))return null;e=i.get(o[o.length-1])}return e};let s=r();if(null===s&&0===n.length)return null;const a=new ks,l=new Map,c=(e,t)=>{const i=l.get(e);(null==i||i>t)&&l.set(e,t)};let d=s.refs[s.i++];const u=new Map,h=()=>{for(const e of n){const t=e.id.client,n=i.get(t);n?(n.i--,a.clients.set(t,n.refs.slice(n.i)),i.delete(t),n.i=0,n.refs=[]):a.clients.set(t,[e]),o=o.filter((e=>e!==t))}n.length=0};for(;;){if(d.constructor!==yl){const o=vn(u,d.id.client,(()=>Ds(t,d.id.client)))-d.id.clock;if(o<0)n.push(d),c(d.id.client,d.id.clock-1),h();else{const r=d.getMissing(e,t);if(null!==r){n.push(d);const e=i.get(r)||{refs:[],i:0};if(e.refs.length!==e.i){d=e.refs[e.i++];continue}c(r,Ds(t,r)),h()}else(0===o||o<d.length)&&(d.integrate(e,o),u.set(d.id.client,d.id.clock+d.length))}}if(n.length>0)d=n.pop();else if(null!==s&&s.i<s.refs.length)d=s.refs[s.i++];else{if(s=r(),null===s)break;d=s.refs[s.i++]}}if(a.clients.size>0){const e=new Jr;return Yr(e,a,new Map),So(e.restEncoder,0),{missing:l,update:e.toUint8Array()}}return null})(e,o,r),a=o.pendingStructs;if(a){for(const[e,i]of a.missing)if(i<Ds(o,e)){t=!0;break}if(s){for(const[e,t]of s.missing){const i=a.missing.get(e);(null==i||i>t)&&a.missing.set(e,t)}a.update=qs([a.update,s.update])}}else o.pendingStructs=s;const l=zr(n,e,o);if(o.pendingDs){const t=new $r(Xn(o.pendingDs));no(t.restDecoder);const i=zr(t,e,o);o.pendingDs=l&&i?qs([l,i]):l||i}else o.pendingDs=l;if(t){const t=o.pendingStructs.update;o.pendingStructs=null,Qr(e.doc,t)}}),i,!1),Qr=(e,t,i,n=$r)=>{const o=Xn(t);Xr(o,e,i,new n(o))},es=(e,t,i)=>Qr(e,t,i,Ur),ts=(e,t=new Uint8Array([0]),i=new Jr)=>{((e,t,i=new Map)=>{Yr(e,t.store,i),Br(e,Fr(t.store))})(i,e,os(t));const n=[i.toUint8Array()];if(e.store.pendingDs&&n.push(e.store.pendingDs),e.store.pendingStructs&&n.push(Gs(e.store.pendingStructs.update,t)),n.length>1){if(i.constructor===Gr)return Vs(n.map(((e,t)=>0===t?e:Qs(e))));if(i.constructor===Jr)return qs(n)}return n[0]},is=(e,t)=>ts(e,t,new Gr),ns=e=>{const t=new Map,i=no(e.restDecoder);for(let n=0;n<i;n++){const i=no(e.restDecoder),n=no(e.restDecoder);t.set(i,n)}return t},os=e=>ns(new Kr(Xn(e))),rs=(e,t)=>(So(e.restEncoder,t.size),Array.from(t.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,i])=>{So(e.restEncoder,t),So(e.restEncoder,i)})),e),ss=(e,t=new Zr)=>(e instanceof Map?rs(t,e):((e,t)=>{rs(e,Es(t.store))})(t,e),t.toUint8Array());class as{constructor(){this.l=[]}}const ls=()=>new as,cs=(e,t)=>e.l.push(t),ds=(e,t)=>{const i=e.l,n=i.length;e.l=i.filter((e=>t!==e)),n===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},us=(e,t,i)=>tr(e.l,[t,i]);class hs{constructor(e,t){this.client=e,this.clock=t}}const gs=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,ps=(e,t)=>new hs(e,t),fs=e=>{for(const[t,i]of e.doc.share.entries())if(i===e)return t;throw Jo()};class ms{constructor(e,t,i,n=0){this.type=e,this.tname=t,this.item=i,this.assoc=n}}class _s{constructor(e,t,i=0){this.type=e,this.index=t,this.assoc=i}}const bs=(e,t,i)=>{let n=null,o=null;return null===e._item?o=fs(e):n=ps(e._item.id.client,e._item.id.clock),new ms(n,o,t,i)},vs=(e,t,i=0)=>{let n=e._start;if(i<0){if(0===t)return bs(e,null,i);t--}for(;null!==n;){if(!n.deleted&&n.countable){if(n.length>t)return bs(e,ps(n.id.client,n.id.clock+t),i);t-=n.length}if(null===n.right&&i<0)return bs(e,n.lastId,i);n=n.right}return bs(e,null,i)},ys=(e,t)=>{const i=t.store,n=e.item,o=e.type,r=e.tname,s=e.assoc;let a=null,l=0;if(null!==n){if(Ds(i,n.client)<=n.clock)return null;const e=fl(i,n),t=e.item;if(!(t instanceof _l))return null;if(a=t.parent,null===a._item||!a._item.deleted){l=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let i=t.left;for(;null!==i;)!i.deleted&&i.countable&&(l+=i.length),i=i.left}}else{if(null!==r)a=t.get(r);else{if(null===o)throw Jo();{if(Ds(i,o.client)<=o.clock)return null;const{item:e}=fl(i,o);if(!(e instanceof _l&&e.content instanceof pl))return null;a=e.content.type}}l=s>=0?a._length:0}return((e,t,i=0)=>new _s(e,t,i))(a,l,e.assoc)};class ws{constructor(e,t){this.ds=e,this.sv=t}}const Cs=(e,t)=>new ws(e,t),xs=(Cs(Pr(),new Map),(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Mr(t.ds,e.id)),Ss=(e,t)=>{const i=vn(e.meta,Ss,yn),n=e.doc.store;i.has(t)||(t.sv.forEach(((t,i)=>{t<Ds(n,i)&&Ms(e,ps(i,t))})),Tr(e,t.ds,(e=>{})),i.add(t))};class ks{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Es=e=>{const t=new Map;return e.clients.forEach(((e,i)=>{const n=e[e.length-1];t.set(i,n.id.clock+n.length)})),t},Ds=(e,t)=>{const i=e.clients.get(t);if(void 0===i)return 0;const n=i[i.length-1];return n.id.clock+n.length},As=(e,t)=>{let i=e.clients.get(t.id.client);if(void 0===i)i=[],e.clients.set(t.id.client,i);else{const e=i[i.length-1];if(e.id.clock+e.length!==t.id.clock)throw Jo()}i.push(t)},Is=(e,t)=>{let i=0,n=e.length-1,o=e[n],r=o.id.clock;if(r===t)return n;let s=kn(t/(r+o.length-1)*n);for(;i<=n;){if(o=e[s],r=o.id.clock,r<=t){if(t<r+o.length)return s;i=s+1}else n=s-1;s=kn((i+n)/2)}throw Jo()},Rs=(e,t)=>{const i=e.clients.get(t.client);return i[Is(i,t.clock)]},Ts=(e,t,i)=>{const n=Is(t,i),o=t[n];return o.id.clock<i&&o instanceof _l?(t.splice(n+1,0,ml(e,o,i-o.id.clock)),n+1):n},Ms=(e,t)=>{const i=e.doc.store.clients.get(t.client);return i[Ts(e,i,t.clock)]},Ls=(e,t,i)=>{const n=t.clients.get(i.client),o=Is(n,i.clock),r=n[o];return i.clock!==r.id.clock+r.length-1&&r.constructor!==Ja&&n.splice(o+1,0,ml(e,r,i.clock-r.id.clock+1)),r},Ns=(e,t,i,n,o)=>{if(0===n)return;const r=i+n;let s,a=Ts(e,t,i);do{s=t[a++],r<s.id.clock+s.length&&Ts(e,t,r),o(s)}while(a<t.length&&t[a].id.clock<r)};class Os{constructor(e,t,i){this.doc=e,this.deleteSet=new Rr,this.beforeState=Es(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Ps=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[i,n]of e)if(t(n,i))return!0;return!1})(t.afterState,((e,i)=>t.beforeState.get(i)!==e)))&&(Lr(t.deleteSet),((e,t)=>{Yr(e,t.doc.store,t.beforeState)})(e,t),Br(e,t.deleteSet),!0),Fs=(e,t,i)=>{const n=t._item;(null===n||n.id.clock<(e.beforeState.get(n.id.client)||0)&&!n.deleted)&&vn(e.changed,t,yn).add(i)},Bs=(e,t)=>{const i=e[t-1],n=e[t];i.deleted===n.deleted&&i.constructor===n.constructor&&i.mergeWith(n)&&(e.splice(t,1),n instanceof _l&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,i))},js=(e,t,i)=>{for(const[n,o]of e.clients.entries()){const e=t.clients.get(n);for(let n=o.length-1;n>=0;n--){const r=o[n],s=r.clock+r.len;for(let n=Is(e,r.clock),o=e[n];n<e.length&&o.id.clock<s;o=e[++n]){const o=e[n];if(r.clock+r.len<=o.id.clock)break;o instanceof _l&&o.deleted&&!o.keep&&i(o)&&o.gc(t,!1)}}}},zs=(e,t)=>{e.clients.forEach(((e,i)=>{const n=t.clients.get(i);for(let t=e.length-1;t>=0;t--){const i=e[t];for(let e=An(n.length-1,1+Is(n,i.clock+i.len-1)),t=n[e];e>0&&t.id.clock>=i.clock;t=n[--e])Bs(n,e)}}))},Ws=(e,t)=>{if(t<e.length){const i=e[t],n=i.doc,o=n.store,r=i.deleteSet,s=i._mergeStructs;try{Lr(r),i.afterState=Es(i.doc.store),n._transaction=null,n.emit("beforeObserverCalls",[i,n]);const a=[];i.changed.forEach(((e,t)=>a.push((()=>{null!==t._item&&t._item.deleted||t._callObserver(i,e)})))),a.push((()=>{i.changedParentTypes.forEach(((e,t)=>a.push((()=>{null!==t._item&&t._item.deleted||((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t})),e.sort(((e,t)=>e.path.length-t.path.length)),us(t._dEH,e,i))})))),a.push((()=>n.emit("afterTransaction",[i,n])))})),tr(a,[])}finally{n.gc&&js(r,o,n.gcFilter),zs(r,o),i.afterState.forEach(((e,t)=>{const n=i.beforeState.get(t)||0;if(n!==e){const e=o.clients.get(t),i=In(Is(e,n),1);for(let t=e.length-1;t>=i;t--)Bs(e,t)}}));for(let e=0;e<s.length;e++){const{client:t,clock:i}=s[e].id,n=o.clients.get(t),r=Is(n,i);r+1<n.length&&Bs(n,r+1),r>0&&Bs(n,r)}if(i.local||i.afterState.get(n.clientID)===i.beforeState.get(n.clientID)||(Cr(_r,dr,"[yjs] ",ur,fr,"Changed the client-id because another client seems to be using it."),n.clientID=Wr()),n.emit("afterTransactionCleanup",[i,n]),n._observers.has("update")){const e=new Gr;Ps(e,i)&&n.emit("update",[e.toUint8Array(),i.origin,n,i])}if(n._observers.has("updateV2")){const e=new Jr;Ps(e,i)&&n.emit("updateV2",[e.toUint8Array(),i.origin,n,i])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=i;(a.size>0||c.size>0||l.size>0)&&(a.forEach((e=>{e.clientID=n.clientID,null==e.collectionid&&(e.collectionid=n.collectionid),n.subdocs.add(e)})),c.forEach((e=>n.subdocs.delete(e))),n.emit("subdocs",[{loaded:l,added:a,removed:c},n,i]),c.forEach((e=>e.destroy()))),e.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,e])):Ws(e,t+1)}}},Hs=(e,t,i=null,n=!0)=>{const o=e._transactionCleanups;let r=!1;null===e._transaction&&(r=!0,e._transaction=new Os(e,i,n),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{r&&o[0]===e._transaction&&Ws(o,0)}};class Ks{next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===yl);return this.curr}constructor(e,t){this.gen=function*(e){const t=no(e.restDecoder);for(let i=0;i<t;i++){const t=no(e.restDecoder),i=e.readClient();let n=no(e.restDecoder);for(let o=0;o<t;o++){const t=e.readInfo();if(10===t){const t=no(e.restDecoder);yield new yl(ps(i,n),t),n+=t}else if(0!=(31&t)){const o=0==(192&t),r=new _l(ps(i,n),null,128==(128&t)?e.readLeftID():null,null,64==(64&t)?e.readRightID():null,o?e.readParentInfo()?e.readString():e.readLeftID():null,o&&32==(32&t)?e.readString():null,bl(e,t));yield r,n+=r.length}else{const t=e.readLen();yield new Ja(ps(i,n),t),n+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}}class Us{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Vs=e=>qs(e,Ur,Gr),$s=(e,t)=>{if(e.constructor===Ja){const{client:i,clock:n}=e.id;return new Ja(ps(i,n+t),e.length-t)}if(e.constructor===yl){const{client:i,clock:n}=e.id;return new yl(ps(i,n+t),e.length-t)}{const i=e,{client:n,clock:o}=i.id;return new _l(ps(n,o+t),null,ps(n,o+t-1),null,i.rightOrigin,i.parent,i.parentSub,i.content.splice(t))}},qs=(e,t=$r,i=Jr)=>{if(1===e.length)return e[0];const n=e.map((e=>new t(Xn(e))));let o=n.map((e=>new Ks(e,!0))),r=null;const s=new i,a=new Us(s);for(;o=o.filter((e=>null!==e.curr)),o.sort(((e,t)=>{if(e.curr.id.client===t.curr.id.client){const i=e.curr.id.clock-t.curr.id.clock;return 0===i?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===yl?1:-1:i}return t.curr.id.client-e.curr.id.client})),0!==o.length;){const e=o[0],t=e.curr.id.client;if(null!==r){let i=e.curr,n=!1;for(;null!==i&&i.id.clock+i.length<=r.struct.id.clock+r.struct.length&&i.id.client>=r.struct.id.client;)i=e.next(),n=!0;if(null===i||i.id.client!==t||n&&i.id.clock>r.struct.id.clock+r.struct.length)continue;if(t!==r.struct.id.client)Js(a,r.struct,r.offset),r={struct:i,offset:0},e.next();else if(r.struct.id.clock+r.struct.length<i.id.clock)if(r.struct.constructor===yl)r.struct.length=i.id.clock+i.length-r.struct.id.clock;else{Js(a,r.struct,r.offset);const e=i.id.clock-r.struct.id.clock-r.struct.length;r={struct:new yl(ps(t,r.struct.id.clock+r.struct.length),e),offset:0}}else{const t=r.struct.id.clock+r.struct.length-i.id.clock;t>0&&(r.struct.constructor===yl?r.struct.length-=t:i=$s(i,t)),r.struct.mergeWith(i)||(Js(a,r.struct,r.offset),r={struct:i,offset:0},e.next())}}else r={struct:e.curr,offset:0},e.next();for(let i=e.curr;null!==i&&i.id.client===t&&i.id.clock===r.struct.id.clock+r.struct.length&&i.constructor!==yl;i=e.next())Js(a,r.struct,r.offset),r={struct:i,offset:0}}null!==r&&(Js(a,r.struct,r.offset),r=null),Ys(a);const l=n.map((e=>jr(e))),c=Nr(l);return Br(s,c),s.toUint8Array()},Gs=(e,t,i=$r,n=Jr)=>{const o=os(t),r=new n,s=new Us(r),a=new i(Xn(e)),l=new Ks(a,!1);for(;l.curr;){const e=l.curr,t=e.id.client,i=o.get(t)||0;if(l.curr.constructor!==yl)if(e.id.clock+e.length>i)for(Js(s,e,In(i-e.id.clock,0)),l.next();l.curr&&l.curr.id.client===t;)Js(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===t&&l.curr.id.clock+l.curr.length<=i;)l.next();else l.next()}Ys(s);const c=jr(a);return Br(r,c),r.toUint8Array()},Zs=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:wo(e.encoder.restEncoder)}),e.encoder.restEncoder=yo(),e.written=0)},Js=(e,t,i)=>{e.written>0&&e.currClient!==t.id.client&&Zs(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),So(e.encoder.restEncoder,t.id.clock+i)),t.write(e.encoder,i),e.written++},Ys=e=>{Zs(e);const t=e.encoder.restEncoder;So(t,e.clientStructs.length);for(let i=0;i<e.clientStructs.length;i++){const n=e.clientStructs[i];So(t,n.written),Io(t,n.restEncoder)}},Xs=(e,t,i)=>{const n=new t(Xn(e)),o=new Ks(n,!1),r=new i,s=new Us(r);for(let e=o.curr;null!==e;e=o.next())Js(s,e,0);Ys(s);const a=jr(n);return Br(r,a),r.toUint8Array()},Qs=e=>Xs(e,$r,Gr);class ea{get path(){return ta(this.currentTarget,this.target)}deletes(e){return Mr(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((i=>{if(null!==i){const n=t._map.get(i);let o,r;if(this.adds(n)){let e=n.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(n)){if(null===e||!this.deletes(e))return;o="delete",r=wn(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",r=wn(e.content.getContent())):(o="add",r=void 0)}else{if(!this.deletes(n))return;o="delete",r=wn(n.content.getContent())}e.set(i,{action:o,oldValue:r})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){const t=this.target,i=yn(),n=yn(),o=[];e={added:i,deleted:n,delta:o,keys:this.keys};if(this.transaction.changed.get(t).has(null)){let e=null;const r=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==e&&void 0!==e.delete||(r(),e={delete:0}),e.delete+=o.length,n.add(o)):this.adds(o)?(null!==e&&void 0!==e.insert||(r(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),i.add(o)):(null!==e&&void 0!==e.retain||(r(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&r()}this._changes=e}return e}constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null}}const ta=(e,t)=>{const i=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)i.unshift(t._item.parentSub);else{let e=0,n=t._item.parent._start;for(;n!==t._item&&null!==n;)n.deleted||e++,n=n.right;i.unshift(e)}t=t._item.parent}return i};let ia=0;class na{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=ia++}}const oa=(e,t,i)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=i,e.timestamp=ia++},ra=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const i=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,i)=>En(t-e.index)<En(t-i.index)?e:i));let n=e._start,o=0;for(null!==i&&(n=i.p,o=i.index,(e=>{e.timestamp=ia++})(i));null!==n.right&&o<t;){if(!n.deleted&&n.countable){if(t<o+n.length)break;o+=n.length}n=n.right}for(;null!==n.left&&o>t;)n=n.left,!n.deleted&&n.countable&&(o-=n.length);for(;null!==n.left&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(o-=n.length);return null!==i&&En(i.index-o)<n.parent.length/80?(oa(i,n,o),i):((e,t,i)=>{if(e.length>=80){const n=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return oa(n,t,i),n}{const n=new na(t,i);return e.push(n),n}})(e._searchMarker,n,o)},sa=(e,t,i)=>{for(let n=e.length-1;n>=0;n--){const o=e[n];if(i>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(n,1);continue}o.p=t,t.marker=!0}(t<o.index||i>0&&t===o.index)&&(o.index=In(t,o.index+i))}},aa=(e,t,i)=>{const n=e,o=t.changedParentTypes;for(;vn(o,e,(()=>[])).push(i),null!==e._item;)e=e._item.parent;us(n._eH,i,t)};class la{get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw Zo()}clone(){throw Zo()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){cs(this._eH,e)}observeDeep(e){cs(this._dEH,e)}unobserve(e){ds(this._eH,e)}unobserveDeep(e){ds(this._dEH,e)}toJSON(){}constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ls(),this._dEH=ls(),this._searchMarker=null}}const ca=(e,t,i)=>{t<0&&(t=e._length+t),i<0&&(i=e._length+i);let n=i-t;const o=[];let r=e._start;for(;null!==r&&n>0;){if(r.countable&&!r.deleted){const e=r.content.getContent();if(e.length<=t)t-=e.length;else{for(let i=t;i<e.length&&n>0;i++)o.push(e[i]),n--;t=0}}r=r.right}return o},da=e=>{const t=[];let i=e._start;for(;null!==i;){if(i.countable&&!i.deleted){const e=i.content.getContent();for(let i=0;i<e.length;i++)t.push(e[i])}i=i.right}return t},ua=(e,t)=>{let i=0,n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const o=n.content.getContent();for(let n=0;n<o.length;n++)t(o[n],i++,e)}n=n.right}},ha=(e,t)=>{const i=[];return ua(e,((n,o)=>{i.push(t(n,o,e))})),i},ga=e=>{let t=e._start,i=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(null===i){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};i=t.content.getContent(),n=0,t=t.right}const e=i[n++];return i.length<=n&&(i=null),{done:!1,value:e}}}},pa=(e,t)=>{const i=ra(e,t);let n=e._start;for(null!==i&&(n=i.p,t-=i.index);null!==n;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},fa=(e,t,i,n)=>{let o=i;const r=e.doc,s=r.clientID,a=r.store,l=null===i?t._start:i.right;let c=[];const d=()=>{c.length>0&&(o=new _l(ps(s,Ds(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new ol(c)),o.integrate(e,0),c=[])};n.forEach((i=>{if(null===i)c.push(i);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(i);break;default:switch(d(),i.constructor){case Uint8Array:case ArrayBuffer:o=new _l(ps(s,Ds(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new Ya(new Uint8Array(i))),o.integrate(e,0);break;case Hr:o=new _l(ps(s,Ds(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new el(i)),o.integrate(e,0);break;default:if(!(i instanceof la))throw new Error("Unexpected content type in insert operation");o=new _l(ps(s,Ds(a,s)),o,o&&o.lastId,l,l&&l.id,t,null,new pl(i)),o.integrate(e,0)}}})),d()},ma=Go("Length exceeded!"),_a=(e,t,i,n)=>{if(i>t._length)throw ma;if(0===i)return t._searchMarker&&sa(t._searchMarker,i,n.length),fa(e,t,null,n);const o=i,r=ra(t,i);let s=t._start;for(null!==r&&(s=r.p,0===(i-=r.index)&&(s=s.prev,i+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(i<=s.length){i<s.length&&Ms(e,ps(s.id.client,s.id.clock+i));break}i-=s.length}return t._searchMarker&&sa(t._searchMarker,o,n.length),fa(e,t,s,n)},ba=(e,t,i,n)=>{if(0===n)return;const o=i,r=n,s=ra(t,i);let a=t._start;for(null!==s&&(a=s.p,i-=s.index);null!==a&&i>0;a=a.right)!a.deleted&&a.countable&&(i<a.length&&Ms(e,ps(a.id.client,a.id.clock+i)),i-=a.length);for(;n>0&&null!==a;)a.deleted||(n<a.length&&Ms(e,ps(a.id.client,a.id.clock+n)),a.delete(e),n-=a.length),a=a.right;if(n>0)throw ma;t._searchMarker&&sa(t._searchMarker,o,-r+n)},va=(e,t,i)=>{const n=t._map.get(i);void 0!==n&&n.delete(e)},ya=(e,t,i,n)=>{const o=t._map.get(i)||null,r=e.doc,s=r.clientID;let a;if(null==n)a=new ol([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:a=new ol([n]);break;case Uint8Array:a=new Ya(n);break;case Hr:a=new el(n);break;default:if(!(n instanceof la))throw new Error("Unexpected content type");a=new pl(n)}new _l(ps(s,Ds(r.store,s)),o,o&&o.lastId,null,null,t,i,a).integrate(e,0)},wa=(e,t)=>{const i=e._map.get(t);return void 0===i||i.deleted?void 0:i.content.getContent()[i.length-1]},Ca=e=>{const t={};return e._map.forEach(((e,i)=>{e.deleted||(t[i]=e.content.getContent()[e.length-1])})),t},xa=(e,t)=>{const i=e._map.get(t);return void 0!==i&&!i.deleted},Sa=e=>{return t=e.entries(),i=e=>!e[1].deleted,Dr((()=>{let e;do{e=t.next()}while(!e.done&&!i(e.value));return e}));var t,i};class ka extends ea{constructor(e,t){super(e,t),this._transaction=t}}class Ea extends la{static from(e){const t=new Ea;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ea}clone(){const e=new Ea;return e.insert(0,this.toArray().map((e=>e instanceof la?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),aa(this,e,new ka(this,e))}insert(e,t){null!==this.doc?Hs(this.doc,(i=>{_a(i,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?Hs(this.doc,(t=>{((e,t,i)=>{let n=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(n)for(;n.right;)n=n.right;fa(e,t,n,i)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?Hs(this.doc,(i=>{ba(i,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return pa(this,e)}toArray(){return da(this)}slice(e=0,t=this.length){return ca(this,e,t)}toJSON(){return this.map((e=>e instanceof la?e.toJSON():e))}map(e){return ha(this,e)}forEach(e){ua(this,e)}[Symbol.iterator](){return ga(this)}_write(e){e.writeTypeRef(al)}constructor(){super(),this._prelimContent=[],this._searchMarker=[]}}class Da extends ea{constructor(e,t,i){super(e,t),this.keysChanged=i}}class Aa extends la{_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Aa}clone(){const e=new Aa;return this.forEach(((t,i)=>{e.set(i,t instanceof la?t.clone():t)})),e}_callObserver(e,t){aa(this,e,new Da(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,i)=>{if(!t.deleted){const n=t.content.getContent()[t.length-1];e[i]=n instanceof la?n.toJSON():n}})),e}get size(){return[...Sa(this._map)].length}keys(){return Ar(Sa(this._map),(e=>e[0]))}values(){return Ar(Sa(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return Ar(Sa(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){return this._map.forEach(((t,i)=>{t.deleted||e(t.content.getContent()[t.length-1],i,this)})),{}}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?Hs(this.doc,(t=>{va(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?Hs(this.doc,(i=>{ya(i,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return wa(this,e)}has(e){return xa(this,e)}clear(){null!==this.doc?Hs(this.doc,(e=>{this.forEach((function(t,i,n){va(e,n,i)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(ll)}constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}}const Ia=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&er(e,t);class Ra{forward(){if(null===this.right&&Jo(),this.right.content.constructor===il)this.right.deleted||Na(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}constructor(e,t,i,n){this.left=e,this.right=t,this.index=i,this.currentAttributes=n}}const Ta=(e,t,i)=>{for(;null!==t.right&&i>0;){if(t.right.content.constructor===il)t.right.deleted||Na(t.currentAttributes,t.right.content);else t.right.deleted||(i<t.right.length&&Ms(e,ps(t.right.id.client,t.right.id.clock+i)),t.index+=t.right.length,i-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Ma=(e,t,i)=>{const n=new Map,o=ra(t,i);if(o){const t=new Ra(o.p.left,o.p,o.index,n);return Ta(e,t,i-o.index)}{const o=new Ra(null,t._start,0,n);return Ta(e,o,i)}},La=(e,t,i,n)=>{for(;null!==i.right&&(!0===i.right.deleted||i.right.content.constructor===il&&Ia(n.get(i.right.content.key),i.right.content.value));)i.right.deleted||n.delete(i.right.content.key),i.forward();const o=e.doc,r=o.clientID;n.forEach(((n,s)=>{const a=i.left,l=i.right,c=new _l(ps(r,Ds(o.store,r)),a,a&&a.lastId,l,l&&l.id,t,null,new il(s,n));c.integrate(e,0),i.right=c,i.forward()}))},Na=(e,t)=>{const{key:i,value:n}=t;null===n?e.delete(i):e.set(i,n)},Oa=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===il&&Ia(t[e.right.content.key]||null,e.right.content.value));)e.forward()},Pa=(e,t,i,n)=>{const o=e.doc,r=o.clientID,s=new Map;for(const a in n){const l=n[a],c=i.currentAttributes.get(a)||null;if(!Ia(c,l)){s.set(a,c);const{left:n,right:d}=i;i.right=new _l(ps(r,Ds(o.store,r)),n,n&&n.lastId,d,d&&d.id,t,null,new il(a,l)),i.right.integrate(e,0),i.forward()}}return s},Fa=(e,t,i,n,o)=>{i.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const r=e.doc,s=r.clientID;Oa(i,o);const a=Pa(e,t,i,o),l=n.constructor===String?new rl(n):n instanceof la?new pl(n):new tl(n);let{left:c,right:d,index:u}=i;t._searchMarker&&sa(t._searchMarker,i.index,l.getLength()),d=new _l(ps(s,Ds(r.store,s)),c,c&&c.lastId,d,d&&d.id,t,null,l),d.integrate(e,0),i.right=d,i.index=u,i.forward(),La(e,t,i,a)},Ba=(e,t,i,n,o)=>{const r=e.doc,s=r.clientID;Oa(i,o);const a=Pa(e,t,i,o);e:for(;null!==i.right&&(n>0||a.size>0&&(i.right.deleted||i.right.content.constructor===il));){if(!i.right.deleted)switch(i.right.content.constructor){case il:{const{key:t,value:r}=i.right.content,s=o[t];if(void 0!==s){if(Ia(s,r))a.delete(t);else{if(0===n)break e;a.set(t,r)}i.right.delete(e)}else i.currentAttributes.set(t,r);break}default:n<i.right.length&&Ms(e,ps(i.right.id.client,i.right.id.clock+n)),n-=i.right.length}i.forward()}if(n>0){let o="";for(;n>0;n--)o+="\n";i.right=new _l(ps(s,Ds(r.store,s)),i.left,i.left&&i.left.lastId,i.right,i.right&&i.right.id,t,null,new rl(o)),i.right.integrate(e,0),i.forward()}La(e,t,i,a)},ja=(e,t,i,n,o)=>{let r=i;const s=bn(o);for(;r&&(!r.countable||r.deleted);)r.deleted||r.content.constructor!==il||Na(s,r.content),r=r.right;let a=0,l=!1;for(;t!==r;){if(i===t&&(l=!0),!t.deleted){const i=t.content;switch(i.constructor){case il:{const{key:r,value:c}=i;(s.get(r)||null)===c&&(n.get(r)||null)!==c||(t.delete(e),a++,l||(o.get(r)||null)!==c||(n.get(r)||null)===c||o.delete(r));break}}}t=t.right}return a},za=(e,t,i)=>{const n=i,o=bn(t.currentAttributes),r=t.right;for(;i>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case pl:case tl:case rl:i<t.right.length&&Ms(e,ps(t.right.id.client,t.right.id.clock+i)),i-=t.right.length,t.right.delete(e)}t.forward()}r&&ja(e,r,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&sa(s._searchMarker,t.index,-n+i),t};class Wa extends ea{get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];Hs(e,(e=>{const i=new Map,n=new Map;let o=this.target._start,r=null;const s={};let a="",l=0,c=0;const d=()=>{if(null!==r){let e;switch(r){case"delete":e={delete:c},c=0;break;case"insert":e={insert:a},i.size>0&&(e.attributes={},i.forEach(((t,i)=>{null!==t&&(e.attributes[i]=t)}))),a="";break;case"retain":if(e={retain:l},Object.keys(s).length>0){e.attributes={};for(const t in s)e.attributes[t]=s[t]}l=0}t.push(e),r=null}};for(;null!==o;){switch(o.content.constructor){case pl:case tl:this.adds(o)?this.deletes(o)||(d(),r="insert",a=o.content.getContent()[0],d()):this.deletes(o)?("delete"!==r&&(d(),r="delete"),c+=1):o.deleted||("retain"!==r&&(d(),r="retain"),l+=1);break;case rl:this.adds(o)?this.deletes(o)||("insert"!==r&&(d(),r="insert"),a+=o.content.str):this.deletes(o)?("delete"!==r&&(d(),r="delete"),c+=o.length):o.deleted||("retain"!==r&&(d(),r="retain"),l+=o.length);break;case il:{const{key:t,value:a}=o.content;if(this.adds(o)){if(!this.deletes(o)){const l=i.get(t)||null;Ia(l,a)?null!==a&&o.delete(e):("retain"===r&&d(),Ia(a,n.get(t)||null)?delete s[t]:s[t]=a)}}else if(this.deletes(o)){n.set(t,a);const e=i.get(t)||null;Ia(e,a)||("retain"===r&&d(),s[t]=e)}else if(!o.deleted){n.set(t,a);const i=s[t];void 0!==i&&(Ia(i,a)?null!==i&&o.delete(e):("retain"===r&&d(),null===a?delete s[t]:s[t]=a))}o.deleted||("insert"===r&&d(),Na(i,o.content));break}}o=o.right}for(d();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}constructor(e,t,i){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,i.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}}class Ha extends la{get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new Ha}clone(){const e=new Ha;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const i=new Wa(this,e,t),n=e.doc;if(aa(this,e,i),!e.local){let t=!1;for(const[i,o]of e.afterState.entries()){const r=e.beforeState.get(i)||0;if(o!==r&&(Ns(e,n.store.clients.get(i),r,o,(e=>{e.deleted||e.content.constructor!==il||(t=!0)})),t))break}t||Tr(e,e.deleteSet,(e=>{e instanceof Ja||t||e.parent===this&&e.content.constructor===il&&(t=!0)})),Hs(n,(e=>{t?(e=>{let t=0;Hs(e.doc,(i=>{let n=e._start,o=e._start,r=_n();const s=bn(r);for(;o;)!1===o.deleted&&(o.content.constructor===il?Na(s,o.content):(t+=ja(i,n,o,r,s),r=bn(s),n=o)),o=o.right}))})(this):Tr(e,e.deleteSet,(t=>{t instanceof Ja||t.parent===this&&((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const i=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===il){const n=t.content.key;i.has(n)?t.delete(e):i.add(n)}t=t.left}})(e,t)}))}))}}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===rl&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?Hs(this.doc,(i=>{const n=new Ra(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const r=e[o];if(void 0!==r.insert){const s=t||"string"!=typeof r.insert||o!==e.length-1||null!==n.right||"\n"!==r.insert.slice(-1)?r.insert:r.insert.slice(0,-1);("string"!=typeof s||s.length>0)&&Fa(i,this,n,s,r.attributes||{})}else void 0!==r.retain?Ba(i,this,n,r.retain,r.attributes||{}):void 0!==r.delete&&za(i,n,r.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,i){const n=[],o=new Map,r=this.doc;let s="",a=this._start;function l(){if(s.length>0){const e={};let t=!1;o.forEach(((i,n)=>{t=!0,e[n]=i}));const i={insert:s};t&&(i.attributes=e),n.push(i),s=""}}return Hs(r,(r=>{for(e&&Ss(r,e),t&&Ss(r,t);null!==a;){if(xs(a,e)||void 0!==t&&xs(a,t))switch(a.content.constructor){case rl:{const n=o.get("ychange");void 0===e||xs(a,e)?void 0===t||xs(a,t)?void 0!==n&&(l(),o.delete("ychange")):void 0!==n&&n.user===a.id.client&&"added"===n.state||(l(),o.set("ychange",i?i("added",a.id):{type:"added"})):void 0!==n&&n.user===a.id.client&&"removed"===n.state||(l(),o.set("ychange",i?i("removed",a.id):{type:"removed"})),s+=a.content.str;break}case pl:case tl:{l();const e={insert:a.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,i)=>{t[i]=e}))}n.push(e);break}case il:xs(a,e)&&(l(),Na(o,a.content))}a=a.right}l()}),Ss),n}insert(e,t,i){if(t.length<=0)return;const n=this.doc;null!==n?Hs(n,(n=>{const o=Ma(n,this,e);i||(i={},o.currentAttributes.forEach(((e,t)=>{i[t]=e}))),Fa(n,this,o,t,i)})):this._pending.push((()=>this.insert(e,t,i)))}insertEmbed(e,t,i={}){const n=this.doc;null!==n?Hs(n,(n=>{const o=Ma(n,this,e);Fa(n,this,o,t,i)})):this._pending.push((()=>this.insertEmbed(e,t,i)))}delete(e,t){if(0===t)return;const i=this.doc;null!==i?Hs(i,(i=>{za(i,Ma(i,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,i){if(0===t)return;const n=this.doc;null!==n?Hs(n,(n=>{const o=Ma(n,this,e);null!==o.right&&Ba(n,this,o,t,i)})):this._pending.push((()=>this.format(e,t,i)))}removeAttribute(e){null!==this.doc?Hs(this.doc,(t=>{va(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?Hs(this.doc,(i=>{ya(i,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return wa(this,e)}getAttributes(e){return Ca(this)}_write(e){e.writeTypeRef(cl)}constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[]}}class Ka{[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Va&&t.constructor!==Ua||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}}class Ua extends la{get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ua}clone(){const e=new Ua;return e.insert(0,this.toArray().map((e=>e instanceof la?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Ka(this,e)}querySelector(e){e=e.toUpperCase();const t=new Ka(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Array.from(new Ka(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){aa(this,e,new $a(this,t,e))}toString(){return ha(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},i){const n=e.createDocumentFragment();return void 0!==i&&i._createAssociation(n,this),ua(this,(o=>{n.insertBefore(o.toDOM(e,t,i),null)})),n}insert(e,t){null!==this.doc?Hs(this.doc,(i=>{_a(i,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)Hs(this.doc,(i=>{const n=e&&e instanceof la?e._item:e;fa(i,this,n,t)}));else{const i=this._prelimContent,n=null===e?0:i.findIndex((t=>t===e))+1;if(0===n&&null!==e)throw Go("Reference item not found");i.splice(n,0,...t)}}delete(e,t=1){null!==this.doc?Hs(this.doc,(i=>{ba(i,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return da(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return pa(this,e)}slice(e=0,t=this.length){return ca(this,e,t)}forEach(e){ua(this,e)}_write(e){e.writeTypeRef(ul)}constructor(){super(),this._prelimContent=[]}}class Va extends Ua{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new Va(this.nodeName)}clone(){const e=new Va(this.nodeName),t=this.getAttributes();for(const i in t)e.setAttribute(i,t[i]);return e.insert(0,this.toArray().map((e=>e instanceof la?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],i=[];for(const t in e)i.push(t);i.sort();const n=i.length;for(let o=0;o<n;o++){const n=i[o];t.push(n+'="'+e[n]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?Hs(this.doc,(t=>{va(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?Hs(this.doc,(i=>{ya(i,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return wa(this,e)}hasAttribute(e){return xa(this,e)}getAttributes(e){return Ca(this)}toDOM(e=document,t={},i){const n=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o)n.setAttribute(e,o[e]);return ua(this,(o=>{n.appendChild(o.toDOM(e,t,i))})),void 0!==i&&i._createAssociation(n,this),n}_write(e){e.writeTypeRef(dl),e.writeKey(this.nodeName)}constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}}class $a extends ea{constructor(e,t,i){super(e,i),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class qa extends Aa{_copy(){return new qa(this.hookName)}clone(){const e=new qa(this.hookName);return this.forEach(((t,i)=>{e.set(i,t)})),e}toDOM(e=document,t={},i){const n=t[this.hookName];let o;return o=void 0!==n?n.createDom(this):document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),void 0!==i&&i._createAssociation(o,this),o}_write(e){e.writeTypeRef(hl),e.writeKey(this.hookName)}constructor(e){super(),this.hookName=e}}class Ga extends Ha{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Ga}clone(){const e=new Ga;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,i){const n=e.createTextNode(this.toString());return void 0!==i&&i._createAssociation(n,this),n}toString(){return this.toDelta().map((e=>{const t=[];for(const i in e.attributes){const n=[];for(const t in e.attributes[i])n.push({key:t,value:e.attributes[i][t]});n.sort(((e,t)=>e.key<t.key?-1:1)),t.push({nodeName:i,attrs:n})}t.sort(((e,t)=>e.nodeName<t.nodeName?-1:1));let i="";for(let e=0;e<t.length;e++){const n=t[e];i+=`<${n.nodeName}`;for(let e=0;e<n.attrs.length;e++){const t=n.attrs[e];i+=` ${t.key}="${t.value}"`}i+=">"}i+=e.insert;for(let e=t.length-1;e>=0;e--)i+=`</${t[e].nodeName}>`;return i})).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(gl)}}class Za{get deleted(){throw Zo()}mergeWith(e){return!1}write(e,t,i){throw Zo()}integrate(e,t){throw Zo()}constructor(e,t){this.id=e,this.length=t}}class Ja extends Za{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),As(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class Ya{getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ya(this.content)}splice(e){throw Zo()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}constructor(e){this.content=e}}class Xa{getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Xa(this.len)}splice(e){const t=new Xa(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){Or(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}constructor(e){this.len=e}}const Qa=(e,t)=>new Hr({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class el{getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new el(Qa(this.doc.guid,this.opts))}splice(e){throw Zo()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}}class tl{getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new tl(this.embed)}splice(e){throw Zo()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}constructor(e){this.embed=e}}class il{getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new il(this.key,this.value)}splice(e){throw Zo()}mergeWith(e){return!1}integrate(e,t){t.parent._searchMarker=null}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}constructor(e,t){this.key=e,this.value=t}}class nl{getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new nl(this.arr)}splice(e){const t=new nl(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let n=t;n<i;n++){const t=this.arr[n];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}constructor(e){this.arr=e}}class ol{getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ol(this.arr)}splice(e){const t=new ol(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const i=this.arr.length;e.writeLen(i-t);for(let n=t;n<i;n++){const t=this.arr[n];e.writeAny(t)}}getRef(){return 8}constructor(e){this.arr=e}}class rl{getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new rl(this.str)}splice(e){const t=new rl(this.str.slice(e));this.str=this.str.slice(0,e);const i=this.str.charCodeAt(e-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}constructor(e){this.str=e}}const sl=[e=>new Ea,e=>new Aa,e=>new Ha,e=>new Va(e.readKey()),e=>new Ua,e=>new qa(e.readKey()),e=>new Ga],al=0,ll=1,cl=2,dl=3,ul=4,hl=5,gl=6;class pl{getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new pl(this.type._copy())}splice(e){throw Zo()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}constructor(e){this.type=e}}const fl=(e,t)=>{let i,n=t,o=0;do{o>0&&(n=ps(n.client,n.clock+o)),i=Rs(e,n),o=n.clock-i.id.clock,n=i.redone}while(null!==n&&i instanceof _l);return{item:i,diff:o}},ml=(e,t,i)=>{const{client:n,clock:o}=t.id,r=new _l(ps(n,o+i),t,ps(n,o+i-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(i));return t.deleted&&r.markDeleted(),t.keep&&(r.keep=!0),null!==t.redone&&(r.redone=ps(t.redone.client,t.redone.clock+i)),t.right=r,null!==r.right&&(r.right.left=r),e._mergeStructs.push(r),null!==r.parentSub&&null===r.right&&r.parent._map.set(r.parentSub,r),t.length=i,r};class _l extends Za{set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ds(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ds(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===hs&&this.id.client!==this.parent.client&&this.parent.clock>=Ds(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ls(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ms(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Ja||this.right&&this.right.constructor===Ja)&&(this.parent=null),this.parent){if(this.parent.constructor===hs){const e=Rs(t,this.parent);e.constructor===Ja?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===_l&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===_l&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Ls(e,e.doc.store,ps(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,i=this.left;if(null!==i)t=i.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const n=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),n.add(t),gs(this.origin,t.origin)){if(t.id.client<this.id.client)i=t,n.clear();else if(gs(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Rs(e.doc.store,t.origin)))break;n.has(Rs(e.doc.store,t.origin))||(i=t,n.clear())}t=t.right}this.left=i}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),As(e.doc.store,this),this.content.integrate(e,this),Fs(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Ja(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:ps(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&gs(e.origin,this.lastId)&&this.right===e&&gs(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),Or(e.deleteSet,this.id.client,this.id.clock,this.length),Fs(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw Jo();this.content.gc(e),t?((e,t,i)=>{const n=e.clients.get(t.id.client);n[Is(n,t.id.clock)]=i})(e,this,new Ja(this.id,this.length)):this.content=new Xa(this.length)}write(e,t){const i=t>0?ps(this.id.client,this.id.clock+t-1):this.origin,n=this.rightOrigin,o=this.parentSub,r=31&this.content.getRef()|(null===i?0:128)|(null===n?0:64)|(null===o?0:32);if(e.writeInfo(r),null!==i&&e.writeLeftID(i),null!==n&&e.writeRightID(n),null===i&&null===n){const t=this.parent;if(void 0!==t._item){const i=t._item;if(null===i){const i=fs(t);e.writeParentInfo(!0),e.writeString(i)}else e.writeParentInfo(!1),e.writeLeftID(i.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===hs?(e.writeParentInfo(!1),e.writeLeftID(t)):Jo();null!==o&&e.writeString(o)}this.content.write(e,t)}constructor(e,t,i,n,o,r,s,a){super(e,a.getLength()),this.origin=i,this.left=t,this.right=n,this.rightOrigin=o,this.parent=r,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}}const bl=(e,t)=>vl[31&t](e),vl=[()=>{Jo()},e=>new Xa(e.readLen()),e=>{const t=e.readLen(),i=[];for(let n=0;n<t;n++){const t=e.readString();"undefined"===t?i.push(void 0):i.push(JSON.parse(t))}return new nl(i)},e=>new Ya(e.readBuf()),e=>new rl(e.readString()),e=>new tl(e.readJSON()),e=>new il(e.readKey(),e.readJSON()),e=>new pl(sl[e.readTypeRef()](e)),e=>{const t=e.readLen(),i=[];for(let n=0;n<t;n++)i.push(e.readAny());return new ol(i)},e=>new el(Qa(e.readString(),e.readAny())),()=>{Jo()}];class yl extends Za{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){Jo()}write(e,t){e.writeInfo(10),So(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const wl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:{};!0===wl["__ $YJS$ __"]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),wl["__ $YJS$ __"]=!0;const Cl=e=>$o(((t,i)=>{e.onerror=e=>i(new Error(e.target.error)),e.onblocked=()=>location.reload(),e.onsuccess=e=>t(e.target.result)})),xl=e=>Cl(indexedDB.deleteDatabase(e)),Sl=(e,t,i="readwrite")=>{const n=e.transaction(t,i);return t.map((e=>Ml(n,e)))},kl=(e,t)=>Cl(e.count(t)),El=(e,t)=>Cl(e.delete(t)),Dl=(e,t)=>Cl(e.add(t)),Al=(e,t)=>Cl(e.getAll(t)),Il=(e,t,i)=>{let n=null;return Tl(e,t,(e=>(n=e,!1)),i).then((()=>n))},Rl=(e,t)=>$o(((i,n)=>{e.onerror=n,e.onsuccess=e=>{const n=e.target.result;if(null===n||!1===t(n))return i();n.continue()}})),Tl=(e,t,i,n="next")=>Rl(e.openKeyCursor(t,n),(e=>i(e.key))),Ml=(e,t)=>e.objectStore(t),Ll=()=>{let e=!0;return(t,i)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==i&&i()}},Nl=e=>{const[t]=Sl(e.db,["updates"]);return Al(t,(i=e._dbref,n=!1,IDBKeyRange.lowerBound(i,n))).then((t=>Hs(e.doc,(()=>{t.forEach((t=>es(e.doc,t)))}),e,!1))).then((()=>((e,t=null)=>Il(e,t,"prev"))(t).then((t=>{e._dbref=t+1})))).then((()=>kl(t).then((t=>{e._dbsize=t})))).then((()=>t));var i,n},Ol=(e,t=!0)=>Nl(e).then((i=>{(t||e._dbsize>=500)&&Dl(i,is(e.doc)).then((()=>{return El(i,(t=e._dbref,n=!0,IDBKeyRange.upperBound(t,n)));var t,n})).then((()=>kl(i).then((t=>{e._dbsize=t}))))}));class Pl extends Sn{destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then((e=>{e.close()}))}clearData(){return this.destroy().then((()=>{xl(this.name)}))}get(e){return this._db.then((t=>{const[i]=Sl(t,["custom"],"readonly");return((e,t)=>Cl(e.get(t)))(i,e)}))}set(e,t){return this._db.then((i=>{const[n]=Sl(i,["custom"]);return((e,t,i)=>Cl(e.put(t,i)))(n,t,e)}))}del(e){return this._db.then((t=>{const[i]=Sl(t,["custom"]);return El(i,e)}))}constructor(e,t){super(),this.doc=t,this.name=e,this._mux=Ll(),this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=((e,t)=>$o(((i,n)=>{const o=indexedDB.open(e);o.onupgradeneeded=e=>t(e.target.result),o.onerror=e=>n(Go(e.target.error)),o.onblocked=()=>location.reload(),o.onsuccess=e=>{const t=e.target.result;t.onversionchange=()=>{t.close()},"undefined"!=typeof addEventListener&&addEventListener("unload",(()=>t.close())),i(t)}})))(e,(e=>((e,t)=>t.forEach((t=>e.createObjectStore.apply(e,t))))(e,[["updates",{autoIncrement:!0}],["custom"]]))),this.whenSynced=this._db.then((e=>{this.db=e;const i=is(t);return Nl(this).then((e=>Dl(e,i))).then((()=>(this._destroyed||(this.emit("synced",[this]),this.synced=!0),this)))})),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){const[t]=Sl(this.db,["updates"]);Dl(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout((()=>{Ol(this,!1),this._storeTimeoutId=null}),this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}}const Fl=e=>{if(e.shouldConnect&&null===e.ws){const t=new WebSocket(e.url),i=e.binaryType;let n=null;i&&(t.binaryType=i),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=t=>{e.lastMessageReceived=Vo();const i=t.data,o="string"==typeof i?JSON.parse(i):i;o&&"pong"===o.type&&(clearTimeout(n),n=setTimeout(r,15e3)),e.emit("message",[o,e])};const o=t=>{null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(Fl,An(1200*Dn(e.unsuccessfulReconnects+1),2500),e)),clearTimeout(n)},r=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>o(null),t.onerror=e=>o(e),t.onopen=()=>{e.lastMessageReceived=Vo(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),n=setTimeout(r,15e3)}}};class Bl extends Sn{send(e){this.ws&&this.ws.send(JSON.stringify(e))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.connected||null!==this.ws||Fl(this)}constructor(e,{binaryType:t}={}){super(),this.url=e,this.ws=null,this.binaryType=t||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval((()=>{this.connected&&3e4<Vo()-this.lastMessageReceived&&this.ws.close()}),15e3),Fl(this)}}const jl=new Map;const zl="undefined"==typeof BroadcastChannel?class{postMessage(e){Wn.setItem(this.room,_o(new Uint8Array(e)))}constructor(e){var t;this.room=e,this.onmessage=null,t=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:bo(t.newValue||"")}),zn||addEventListener("storage",t)}}:BroadcastChannel,Wl=e=>vn(jl,e,(()=>{const t=new Set,i=new zl(e);return i.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:i,subs:t}}));var Hl,Kl,Ul,Vl={};Hl=Math.floor,Kl=Math.abs,Ul=Math.pow,Vl=function(){function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,(function(e){return o(t[s][1][e]||e)}),d,d.exports,e,t,i,n)}return i[s].exports}for(var r=void 0,s=0;s<n.length;s++)o(n[s]);return o}return e}()({1:[function(e,t,i){function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function o(e,t,i){return 3*(t+i)/4-i}function r(e){var t,i,r=n(e),s=r[0],a=r[1],l=new u(o(e,s,a)),c=0,h=0<a?s-4:s;for(i=0;i<h;i+=4)t=d[e.charCodeAt(i)]<<18|d[e.charCodeAt(i+1)]<<12|d[e.charCodeAt(i+2)]<<6|d[e.charCodeAt(i+3)],l[c++]=255&t>>16,l[c++]=255&t>>8,l[c++]=255&t;return 2===a&&(t=d[e.charCodeAt(i)]<<2|d[e.charCodeAt(i+1)]>>4,l[c++]=255&t),1===a&&(t=d[e.charCodeAt(i)]<<10|d[e.charCodeAt(i+1)]<<4|d[e.charCodeAt(i+2)]>>2,l[c++]=255&t>>8,l[c++]=255&t),l}function s(e){return c[63&e>>18]+c[63&e>>12]+c[63&e>>6]+c[63&e]}function a(e,t,i){for(var n,o=[],r=t;r<i;r+=3)n=(16711680&e[r]<<16)+(65280&e[r+1]<<8)+(255&e[r+2]),o.push(s(n));return o.join("")}function l(e){for(var t,i=e.length,n=i%3,o=[],r=16383,s=0,l=i-n;s<l;s+=r)o.push(a(e,s,s+r>l?l:s+r));return 1===n?(t=e[i-1],o.push(c[t>>2]+c[63&t<<4]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],o.push(c[t>>10]+c[63&t>>4]+c[63&t<<2]+"=")),o.join("")}i.byteLength=function(e){var t=n(e),i=t[0],o=t[1];return 3*(i+o)/4-o},i.toByteArray=r,i.fromByteArray=l;for(var c=[],d=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,p=h.length;g<p;++g)c[g]=h[g],d[h.charCodeAt(g)]=g;d[45]=62,d[95]=63},{}],2:[function(){},{}],3:[function(e,t,i){(function(){(function(){var t=String.fromCharCode,n=Math.min;function o(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=r.prototype,t}function r(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,i)}function s(e,t,i){if("string"==typeof e)return d(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return h(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return r.from(n,t,i);var o=g(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return r.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e,t,i){return a(e),0>=e||void 0===t?o(e):"string"==typeof i?o(e).fill(t,i):o(e).fill(t)}function c(e){return a(e),o(0>e?0:0|p(e))}function d(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!r.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|f(e,t),n=o(i),s=n.write(e,t);return s!==i&&(n=n.slice(0,s)),n}function u(e){for(var t=0>e.length?0:0|p(e.length),i=o(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function h(e,t,i){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i)).__proto__=r.prototype,n}function g(e){if(r.isBuffer(e)){var t=0|p(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||$(e.length)?o(0):u(e)}function p(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function f(e,t){if(r.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===i)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return K(e).length;default:if(o)return n?-1:z(e).length;t=(""+t).toLowerCase(),o=!0}}function m(e,t,i){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),0>=i)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,i);case"utf8":case"utf-8":return D(this,t,i);case"ascii":return I(this,t,i);case"latin1":case"binary":return R(this,t,i);case"base64":return E(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function _(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function b(e,t,i,n,o){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:-2147483648>i&&(i=-2147483648),$(i=+i)&&(i=o?0:e.length-1),0>i&&(i=e.length+i),i>=e.length){if(o)return-1;i=e.length-1}else if(0>i){if(!o)return-1;i=0}if("string"==typeof t&&(t=r.from(t,n)),r.isBuffer(t))return 0===t.length?-1:v(e,t,i,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):v(e,[t],i,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,i,n,o){function r(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var s,a=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=(n+"").toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;a=2,l/=2,c/=2,i/=2}if(o){var d=-1;for(s=i;s<l;s++)if(r(e,s)!==r(t,-1===d?0:s-d))-1!==d&&(s-=s-d),d=-1;else if(-1===d&&(d=s),s-d+1===c)return d*a}else for(i+c>l&&(i=l-c),s=i;0<=s;s--){for(var u=!0,h=0;h<c;h++)if(r(e,s+h)!==r(t,h)){u=!1;break}if(u)return s}return-1}function y(e,t,i,n){i=+i||0;var o=e.length-i;n?(n=+n)>o&&(n=o):n=o;var r=t.length;n>r/2&&(n=r/2);for(var s,a=0;a<n;++a){if($(s=parseInt(t.substr(2*a,2),16)))return a;e[i+a]=s}return a}function w(e,t,i,n){return U(z(t,e.length-i),e,i,n)}function C(e,t,i,n){return U(W(t),e,i,n)}function x(e,t,i,n){return C(e,t,i,n)}function S(e,t,i,n){return U(K(t),e,i,n)}function k(e,t,i,n){return U(H(t,e.length-i),e,i,n)}function E(e,t,i){return 0===t&&i===e.length?q.fromByteArray(e):q.fromByteArray(e.slice(t,i))}function D(e,t,i){i=n(e.length,i);for(var o=[],r=t;r<i;){var s,a,l,c,d=e[r],u=null,h=239<d?4:223<d?3:191<d?2:1;r+h<=i&&(1===h?128>d&&(u=d):2===h?128==(192&(s=e[r+1]))&&127<(c=(31&d)<<6|63&s)&&(u=c):3===h?(s=e[r+1],a=e[r+2],128==(192&s)&&128==(192&a)&&2047<(c=(15&d)<<12|(63&s)<<6|63&a)&&(55296>c||57343<c)&&(u=c)):4===h&&(s=e[r+1],a=e[r+2],l=e[r+3],128==(192&s)&&128==(192&a)&&128==(192&l)&&65535<(c=(15&d)<<18|(63&s)<<12|(63&a)<<6|63&l)&&1114112>c&&(u=c))),null===u?(u=65533,h=1):65535<u&&(u-=65536,o.push(55296|1023&u>>>10),u=56320|1023&u),o.push(u),r+=h}return A(o)}function A(e){var i=e.length;if(i<=4096)return t.apply(String,e);for(var n="",o=0;o<i;)n+=t.apply(String,e.slice(o,o+=4096));return n}function I(e,i,o){var r="";o=n(e.length,o);for(var s=i;s<o;++s)r+=t(127&e[s]);return r}function R(e,i,o){var r="";o=n(e.length,o);for(var s=i;s<o;++s)r+=t(e[s]);return r}function T(e,t,i){var n=e.length;(!t||0>t)&&(t=0),(!i||0>i||i>n)&&(i=n);for(var o="",r=t;r<i;++r)o+=j(e[r]);return o}function M(e,i,n){for(var o=e.slice(i,n),r="",s=0;s<o.length;s+=2)r+=t(o[s]+256*o[s+1]);return r}function L(e,t,i){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,i,n,o,s){if(!r.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function O(e,t,i,n){if(i+n>e.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("Index out of range")}function P(e,t,i,n,o){return t=+t,i>>>=0,o||O(e,t,i,4,34028234663852886e22,-34028234663852886e22),G.write(e,t,i,n,23,4),i+4}function F(e,t,i,n,o){return t=+t,i>>>=0,o||O(e,t,i,8,17976931348623157e292,-17976931348623157e292),G.write(e,t,i,n,52,8),i+8}function B(e){if(2>(e=(e=e.split("=")[0]).trim().replace(Z,"")).length)return"";for(;0!=e.length%4;)e+="=";return e}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var i,n=e.length,o=null,r=[],s=0;s<n;++s){if(55295<(i=e.charCodeAt(s))&&57344>i){if(!o){if(56319<i){-1<(t-=3)&&r.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&r.push(239,191,189);continue}o=i;continue}if(56320>i){-1<(t-=3)&&r.push(239,191,189),o=i;continue}i=65536+(o-55296<<10|i-56320)}else o&&-1<(t-=3)&&r.push(239,191,189);if(o=null,128>i){if(0>(t-=1))break;r.push(i)}else if(2048>i){if(0>(t-=2))break;r.push(192|i>>6,128|63&i)}else if(65536>i){if(0>(t-=3))break;r.push(224|i>>12,128|63&i>>6,128|63&i)}else{if(!(1114112>i))throw new Error("Invalid code point");if(0>(t-=4))break;r.push(240|i>>18,128|63&i>>12,128|63&i>>6,128|63&i)}}return r}function W(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function H(e,t){for(var i,n,o,r=[],s=0;s<e.length&&!(0>(t-=2));++s)n=(i=e.charCodeAt(s))>>8,o=i%256,r.push(o),r.push(n);return r}function K(e){return q.toByteArray(B(e))}function U(e,t,i,n){for(var o=0;o<n&&!(o+i>=t.length||o>=e.length);++o)t[o+i]=e[o];return o}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}var q=e("base64-js"),G=e("ieee754");i.Buffer=r,i.SlowBuffer=function(e){return+e!=e&&(e=0),r.alloc(+e)},i.INSPECT_MAX_BYTES=50,i.kMaxLength=2147483647,r.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),r.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){return r.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){return r.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(e,t,i){return s(e,t,i)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(e,t,i){return l(e,t,i)},r.allocUnsafe=function(e){return c(e)},r.allocUnsafeSlow=function(e){return c(e)},r.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==r.prototype},r.compare=function(e,t){if(V(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=r.from(t,t.offset,t.byteLength)),!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,o=t.length,s=0,a=n(i,o);s<a;++s)if(e[s]!==t[s]){i=e[s],o=t[s];break}return i<o?-1:o<i?1:0},r.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return r.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=r.allocUnsafe(t),o=0;for(i=0;i<e.length;++i){var s=e[i];if(V(s,Uint8Array)&&(s=r.from(s)),!r.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},r.byteLength=f,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},r.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},r.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},r.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):m.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r.prototype.compare=function(e,t,i,o,s){if(V(e,Uint8Array)&&(e=r.from(e,e.offset,e.byteLength)),!r.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===o&&(o=0),void 0===s&&(s=this.length),0>t||i>e.length||0>o||s>this.length)throw new RangeError("out of range index");if(o>=s&&t>=i)return 0;if(o>=s)return-1;if(t>=i)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(o>>>=0),l=(i>>>=0)-(t>>>=0),c=n(a,l),d=this.slice(o,s),u=e.slice(t,i),h=0;h<c;++h)if(d[h]!==u[h]){a=d[h],l=u[h];break}return a<l?-1:l<a?1:0},r.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},r.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},r.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},r.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var o=this.length-t;if((void 0===i||i>o)&&(i=o),0<e.length&&(0>i||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return y(this,e,t,i);case"utf8":case"utf-8":return w(this,e,t,i);case"ascii":return C(this,e,t,i);case"latin1":case"binary":return x(this,e,t,i);case"base64":return S(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var i=this.length;0>(e=~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),0>(t=void 0===t?i:~~t)?0>(t+=i)&&(t=0):t>i&&(t=i),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=r.prototype,n},r.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n},r.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},r.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=this[e],o=1,r=0;++r<t&&(o*=256);)n+=this[e+r]*o;return n>=(o*=128)&&(n-=Ul(2,8*t)),n},r.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||L(e,t,this.length);for(var n=t,o=1,r=this[e+--n];0<n&&(o*=256);)r+=this[e+--n]*o;return r>=(o*=128)&&(r-=Ul(2,8*t)),r},r.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},r.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),G.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),G.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),G.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),G.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||N(this,e,t,i,Ul(2,8*i)-1,0);var o=1,r=0;for(this[t]=255&e;++r<i&&(o*=256);)this[t+r]=255&e/o;return t+i},r.prototype.writeUIntBE=function(e,t,i,n){e=+e,t>>>=0,i>>>=0,n||N(this,e,t,i,Ul(2,8*i)-1,0);var o=i-1,r=1;for(this[t+o]=255&e;0<=--o&&(r*=256);)this[t+o]=255&e/r;return t+i},r.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,1,255,0),this[t]=255&e,t+1},r.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},r.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var o=Ul(2,8*i-1);N(this,e,t,i,o-1,-o)}var r=0,s=1,a=0;for(this[t]=255&e;++r<i&&(s*=256);)0>e&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=255&(e/s>>0)-a;return t+i},r.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t>>>=0,!n){var o=Ul(2,8*i-1);N(this,e,t,i,o-1,-o)}var r=i-1,s=1,a=0;for(this[t+r]=255&e;0<=--r&&(s*=256);)0>e&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=255&(e/s>>0)-a;return t+i},r.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},r.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},r.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},r.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},r.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},r.prototype.writeFloatLE=function(e,t,i){return P(this,e,t,!0,i)},r.prototype.writeFloatBE=function(e,t,i){return P(this,e,t,!1,i)},r.prototype.writeDoubleLE=function(e,t,i){return F(this,e,t,!0,i)},r.prototype.writeDoubleBE=function(e,t,i){return F(this,e,t,!1,i)},r.prototype.copy=function(e,t,i,n){if(!r.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>i||i>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var o=n-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,n);else if(this===e&&i<t&&t<n)for(var s=o-1;0<=s;--s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,n),t);return o},r.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!r.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&128>o||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var s;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(s=t;s<i;++s)this[s]=e;else{var a=r.isBuffer(e)?e:r.from(e,n),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-t;++s)this[s+t]=a[s%l]}return this};var Z=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,i){(function(n){(function(){function o(){let e;try{e=i.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}i.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;e.splice(1,0,i,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"===e||(n++,"%c"===e&&(o=n))})),e.splice(o,0,i)},i.save=function(e){try{e?i.storage.setItem("debug",e):i.storage.removeItem("debug")}catch(e){}},i.load=o,i.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},i.storage=function(){try{return localStorage}catch(e){}}(),i.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(i);const{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){function i(e){function t(...e){if(!t.enabled)return;const n=t,r=+new Date,s=r-(o||r);n.diff=s,n.prev=o,n.curr=r,o=r,e[0]=i.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,o)=>{if("%%"===t)return"%";a++;const r=i.formatters[o];if("function"==typeof r){const i=e[a];t=r.call(n,i),e.splice(a,1),a--}return t})),i.formatArgs.call(n,e),(n.log||i.log).apply(n,e)}let o,r=null;return t.namespace=e,t.useColors=i.useColors(),t.color=i.selectColor(e),t.extend=n,t.destroy=i.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?i.enabled(e):r,set:e=>{r=e}}),"function"==typeof i.init&&i.init(t),t}function n(e,t){const n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){const e=[...i.names.map(o),...i.skips.map(o).map((e=>"-"+e))].join(",");return i.enable(""),e},i.enable=function(e){let t;i.save(e),i.names=[],i.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((e=>{i[e]=t[e]})),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return i.colors[Kl(t)%i.colors.length]},i.enable(i.load()),i}},{ms:11}],6:[function(e,t){function i(e,t){for(const i in t)Object.defineProperty(e,i,{value:t[i],enumerable:!0,configurable:!0});return e}t.exports=function(e,t,n){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof t&&(n=t,t=""),t&&(n.code=t);try{return i(e,n)}catch(t){n.message=e.message,n.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),i(new o,n)}}},{}],7:[function(e,t){function i(e){console&&console.warn&&console.warn(e)}function n(){n.init.call(this)}function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function r(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function s(e,t,n,s){var a,l,c;if(o(n),void 0===(l=e._events)?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),c=l[t]),void 0===c)c=l[t]=n,++e._eventsCount;else if("function"==typeof c?c=l[t]=s?[n,c]:[c,n]:s?c.unshift(n):c.push(n),0<(a=r(e))&&c.length>a&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=c.length,i(d)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},o=a.bind(n);return o.listener=i,n.wrapFn=o,o}function c(e,t,i){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?i?[o.listener||o]:[o]:i?g(o):u(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function u(e,t){for(var i=Array(t),n=0;n<t;++n)i[n]=e[n];return i}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function g(e){for(var t=Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}function p(e,t,i){"function"==typeof e.on&&f(e,"error",t,i)}function f(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){n.once&&e.removeEventListener(t,o),i(r)}))}}var m,_="object"==typeof Reflect?Reflect:null,b=_&&"function"==typeof _.apply?_.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};m=_&&"function"==typeof _.ownKeys?_.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var v=Number.isNaN||function(e){return e!=e};t.exports=n,t.exports.once=function(e,t){return new Promise((function(i,n){function o(i){e.removeListener(t,r),n(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",o),i([].slice.call(arguments))}f(e,t,r,{once:!0}),"error"!==t&&p(e,o,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var y=10;Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(e){if("number"!=typeof e||0>e||v(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");y=e}}),n.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||v(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var r;if(0<t.length&&(r=t[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var a=o[e];if(void 0===a)return!1;if("function"==typeof a)b(a,this,t);else{var l=a.length,c=u(a,l);for(i=0;i<l;++i)b(c[i],this,t)}return!0},n.prototype.addListener=function(e,t){return s(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return s(this,e,t,!0)},n.prototype.once=function(e,t){return o(t),this.on(e,l(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,l(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,n,r,s,a;if(o(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,s=i.length-1;0<=s;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,r=s;break}if(0>r)return this;0===r?i.shift():h(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var o,r=Object.keys(i);for(n=0;n<r.length;++n)"removeListener"!==(o=r[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;0<=n;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return c(this,e,!0)},n.prototype.rawListeners=function(e){return c(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return 0<this._eventsCount?m(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,t,i){i.read=function(e,t,i,n,o){var r,s,a=8*o-n-1,l=(1<<a)-1,c=l>>1,d=-7,u=i?o-1:0,h=i?-1:1,g=e[t+u];for(u+=h,r=g&(1<<-d)-1,g>>=-d,d+=a;0<d;r=256*r+e[t+u],u+=h,d-=8);for(s=r&(1<<-d)-1,r>>=-d,d+=n;0<d;s=256*s+e[t+u],u+=h,d-=8);if(0===r)r=1-c;else{if(r===l)return s?NaN:1/0*(g?-1:1);s+=Ul(2,n),r-=c}return(g?-1:1)*s*Ul(2,r-n)},i.write=function(e,t,i,n,o,r){var s,a,l,c=Math.LN2,d=Math.log,u=8*r-o-1,h=(1<<u)-1,g=h>>1,p=23===o?Ul(2,-24)-Ul(2,-77):0,f=n?0:r-1,m=n?1:-1,_=0>t||0===t&&0>1/t?1:0;for(t=Kl(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Hl(d(t)/c),1>t*(l=Ul(2,-s))&&(s--,l*=2),2<=(t+=1<=s+g?p/l:p*Ul(2,1-g))*l&&(s++,l/=2),s+g>=h?(a=0,s=h):1<=s+g?(a=(t*l-1)*Ul(2,o),s+=g):(a=t*Ul(2,g-1)*Ul(2,o),s=0));8<=o;e[i+f]=255&a,f+=m,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[i+f]=255&s,f+=m,s/=256,u-=8);e[i+f-m]|=128*_}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},{}],11:[function(e,t){var i=Math.round;function n(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();return"years"===n||"year"===n||"yrs"===n||"yr"===n||"y"===n?315576e5*i:"weeks"===n||"week"===n||"w"===n?6048e5*i:"days"===n||"day"===n||"d"===n?864e5*i:"hours"===n||"hour"===n||"hrs"===n||"hr"===n||"h"===n?36e5*i:"minutes"===n||"minute"===n||"mins"===n||"min"===n||"m"===n?6e4*i:"seconds"===n||"second"===n||"secs"===n||"sec"===n||"s"===n?1e3*i:"milliseconds"===n||"millisecond"===n||"msecs"===n||"msec"===n||"ms"===n?i:void 0}}}function o(e){var t=Kl(e);return 864e5<=t?i(e/864e5)+"d":36e5<=t?i(e/36e5)+"h":6e4<=t?i(e/6e4)+"m":1e3<=t?i(e/1e3)+"s":e+"ms"}function r(e){var t=Kl(e);return 864e5<=t?s(e,t,864e5,"day"):36e5<=t?s(e,t,36e5,"hour"):6e4<=t?s(e,t,6e4,"minute"):1e3<=t?s(e,t,1e3,"second"):e+" ms"}function s(e,t,n,o){return i(e/n)+" "+o+(t>=1.5*n?"s":"")}t.exports=function(e,t){t=t||{};var i=typeof e;if("string"==i&&0<e.length)return n(e);if("number"===i&&isFinite(e))return t.long?r(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(d===setTimeout)return setTimeout(e,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function r(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function s(){f&&g&&(f=!1,g.length?p=g.concat(p):m=-1,p.length&&a())}function a(){if(!f){var e=o(s);f=!0;for(var t=p.length;t;){for(g=p,p=[];++m<t;)g&&g[m].run();m=-1,t=p.length}g=null,f=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,u,h=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(e){d=i}try{u="function"==typeof clearTimeout?clearTimeout:n}catch(e){u=n}}();var g,p=[],f=!1,m=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new l(e,t)),1!==p.length||f||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(){return[]},h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],13:[function(e,i){(function(e){(function(){let t;i.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):e=>(t||(t=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}).call(this)}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],14:[function(e,i){(function(t,n){(function(){var o=e("safe-buffer").Buffer,r=n.crypto||n.msCrypto;i.exports=r&&r.getRandomValues?function(e,i){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(e);if(0<e)if(65536<e)for(var s=0;s<e;s+=65536)r.getRandomValues(n.slice(s,s+65536));else r.getRandomValues(n);return"function"==typeof i?t.nextTick((function(){i(null,n)})):n}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{_process:12,"safe-buffer":30}],15:[function(e,t){function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function n(e,t,n){function o(e,i,n){return"string"==typeof t?t:t(e,i,n)}n||(n=Error);var r=function(e){function t(t,i,n){return e.call(this,o(t,i,n))||this}return i(t,e),t}(n);r.prototype.name=n.name,r.prototype.code=e,l[e]=r}function o(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return e+""})),2<i?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function r(e,t,i){return e.substr(!i||0>i?0:+i,t.length)===t}function s(e,t,i){return(void 0===i||i>e.length)&&(i=e.length),e.substring(i-t.length,i)===t}function a(e,t,i){return"number"!=typeof i&&(i=0),!(i+t.length>e.length)&&-1!==e.indexOf(t,i)}var l={};n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,i){var n,l;if("string"==typeof t&&r(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be",s(e," argument"))l="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var c=a(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(o(t,"type"))}return l+=". Received type ".concat(typeof i)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=l},{}],16:[function(e,t){(function(i){(function(){function n(e){return this instanceof n?(a.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",o))))):new n(e)}function o(){this._writableState.ended||i.nextTick(r,this)}function r(e){e.end()}var s=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};t.exports=n;var a=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(n,a);for(var c,d=s(l.prototype),u=0;u<d.length;u++)c=d[u],n.prototype[c]||(n.prototype[c]=l.prototype[c]);Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){function i(e){return this instanceof i?void n.call(this,e):new i(e)}t.exports=i;var n=e("./_stream_transform");e("inherits")(i,n),i.prototype._transform=function(e,t,i){i(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,i){(function(t,n){(function(){function o(e){return L.from(e)}function r(e){return L.isBuffer(e)||e instanceof N}function s(e,t,i){return"function"==typeof e.prependListener?e.prependListener(t,i):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i))}function a(t,i,n){I=I||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=i instanceof I),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=W(this,t,"readableHighWaterMark",n),this.buffer=new j,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!P&&(P=e("string_decoder/").StringDecoder),this.decoder=new P(t.encoding),this.encoding=t.encoding)}function l(t){if(I=I||e("./_stream_duplex"),!(this instanceof l))return new l(t);var i=this instanceof I;this._readableState=new a(t,this,i),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),M.call(this)}function c(e,t,i,n,r){R("readableAddChunk",t);var s,a=e._readableState;if(null===t)a.reading=!1,p(e,a);else if(r||(s=u(a,t)),s)q(e,s);else if(a.objectMode||t&&0<t.length)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=o(t)),n)a.endEmitted?q(e,new $):d(e,a,t,!0);else if(a.ended)q(e,new U);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(t=a.decoder.write(t),a.objectMode||0!==t.length?d(e,a,t,!1):_(e,a)):d(e,a,t,!1)}else n||(a.reading=!1,_(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function d(e,t,i,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,n?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&f(e)),_(e,t)}function u(e,t){var i;return r(t)||"string"==typeof t||void 0===t||e.objectMode||(i=new K("chunk",["string","Buffer","Uint8Array"],t)),i}function h(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function g(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function p(e,t){if(R("onEofChunk"),!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?f(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,m(e)))}}function f(e){var i=e._readableState;R("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(R("emitReadable",i.flowing),i.emittedReadable=!0,t.nextTick(m,e))}function m(e){var t=e._readableState;R("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,S(e)}function _(e,i){i.readingMore||(i.readingMore=!0,t.nextTick(b,e,i))}function b(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(R("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function v(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T(e,"data")&&(t.flowing=!0,S(e))}}function y(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function w(e){R("readable nexttick read 0"),e.read(0)}function C(e,i){i.resumeScheduled||(i.resumeScheduled=!0,t.nextTick(x,e,i))}function x(e,t){R("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(R("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function E(e){var i=e._readableState;R("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,t.nextTick(D,i,e))}function D(e,t){if(R("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function A(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1}var I;i.exports=l,l.ReadableState=a,e("events").EventEmitter;var R,T=function(e,t){return e.listeners(t).length},M=e("./internal/streams/stream"),L=e("buffer").Buffer,N=n.Uint8Array||function(){},O=e("util");R=O&&O.debuglog?O.debuglog("stream"):function(){};var P,F,B,j=e("./internal/streams/buffer_list"),z=e("./internal/streams/destroy"),W=e("./internal/streams/state").getHighWaterMark,H=e("../errors").codes,K=H.ERR_INVALID_ARG_TYPE,U=H.ERR_STREAM_PUSH_AFTER_EOF,V=H.ERR_METHOD_NOT_IMPLEMENTED,$=H.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(l,M);var q=z.errorOrDestroy,G=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=z.destroy,l.prototype._undestroy=z.undestroy,l.prototype._destroy=function(e,t){t(e)},l.prototype.push=function(e,t){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=L.from(e,t),t=""),i=!0),c(this,e,t,!1,i)},l.prototype.unshift=function(e){return c(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){P||(P=e("string_decoder/").StringDecoder);var i=new P(t);this._readableState.decoder=i,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=i.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this},l.prototype.read=function(e){R("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):f(this),null;if(0===(e=g(e,t))&&t.ended)return 0===t.length&&E(this),null;var n,o=t.needReadable;return R("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&R("length less than watermark",o=!0),t.ended||t.reading?R("reading or ended",o=!1):o&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=g(i,t))),null===(n=0<e?k(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),i!==e&&t.ended&&E(this)),null!==n&&this.emit("data",n),n},l.prototype._read=function(){q(this,new V("_read()"))},l.prototype.pipe=function(e,i){function n(e,t){R("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,r())}function o(){R("onend"),e.end()}function r(){R("cleanup"),e.removeListener("close",c),e.removeListener("finish",d),e.removeListener("drain",f),e.removeListener("error",l),e.removeListener("unpipe",n),h.removeListener("end",o),h.removeListener("end",u),h.removeListener("data",a),m=!0,g.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}function a(t){R("ondata");var i=e.write(t);R("dest.write",i),!1===i&&((1===g.pipesCount&&g.pipes===e||1<g.pipesCount&&-1!==A(g.pipes,e))&&!m&&(R("false write response, pause",g.awaitDrain),g.awaitDrain++),h.pause())}function l(t){R("onerror",t),u(),e.removeListener("error",l),0===T(e,"error")&&q(e,t)}function c(){e.removeListener("finish",d),u()}function d(){R("onfinish"),e.removeListener("close",c),u()}function u(){R("unpipe"),h.unpipe(e)}var h=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=e;break;case 1:g.pipes=[g.pipes,e];break;default:g.pipes.push(e)}g.pipesCount+=1,R("pipe count=%d opts=%j",g.pipesCount,i);var p=i&&!1===i.end||e===t.stdout||e===t.stderr?u:o;g.endEmitted?t.nextTick(p):h.once("end",p),e.on("unpipe",n);var f=v(h);e.on("drain",f);var m=!1;return h.on("data",a),s(e,"error",l),e.once("close",c),e.once("finish",d),e.emit("pipe",h),g.flowing||(R("pipe resume"),h.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<o;r++)n[r].emit("unpipe",this,{hasUnpiped:!1});return this}var s=A(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},l.prototype.on=function(e,i){var n=M.prototype.on.call(this,e,i),o=this._readableState;return"data"===e?(o.readableListening=0<this.listenerCount("readable"),!1!==o.flowing&&this.resume()):"readable"==e&&!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,R("on readable",o.length,o.reading),o.length?f(this):!o.reading&&t.nextTick(w,this)),n},l.prototype.addListener=l.prototype.on,l.prototype.removeListener=function(e,i){var n=M.prototype.removeListener.call(this,e,i);return"readable"===e&&t.nextTick(y,this),n},l.prototype.removeAllListeners=function(e){var i=M.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&t.nextTick(y,this),i},l.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!e.readableListening,C(this,e)),e.paused=!1,this},l.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},l.prototype.wrap=function(e){var t=this,i=this._readableState,n=!1;for(var o in e.on("end",(function(){if(R("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){R("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o||!(i.objectMode||o&&o.length)||t.push(o)||(n=!0,e.pause())})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var r=0;r<G.length;r++)e.on(G[r],this.emit.bind(this,G[r]));return this._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){return void 0===F&&(F=e("./internal/streams/async_iterator")),F(this)}),Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),l._fromList=k,Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(l.from=function(t,i){return void 0===B&&(B=e("./internal/streams/from")),B(l,t,i)})}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){function i(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new l);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function n(e){return this instanceof n?(u.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",o)):new n(e)}function o(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush((function(t,i){r(e,t,i)}))}function r(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new d;if(e._transformState.transforming)throw new c;return e.push(null)}t.exports=n;var s=e("../errors").codes,a=s.ERR_METHOD_NOT_IMPLEMENTED,l=s.ERR_MULTIPLE_CALLBACK,c=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=s.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");e("inherits")(n,u),n.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},n.prototype._transform=function(e,t,i){i(new a("_transform()"))},n.prototype._write=function(e,t,i){var n=this._transformState;if(n.writecb=i,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},n.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},n.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,i){(function(t,n){(function(){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){E(t,e)}}function r(e){return T.from(e)}function s(e){return T.isBuffer(e)||e instanceof M}function a(){}function l(t,i,n){D=D||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=i instanceof D),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=N(this,t,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=!1===t.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function c(t){var i=this instanceof(D=D||e("./_stream_duplex"));return i||A.call(c,this)?(this._writableState=new l(t,this,i),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void R.call(this)):new c(t)}function d(e,i){var n=new H;U(e,n),t.nextTick(i,n)}function u(e,i,n,o){var r;return null===n?r=new W:"string"!=typeof n&&!i.objectMode&&(r=new P("chunk",["string","Buffer"],n)),!r||(U(e,r),t.nextTick(o,r),!1)}function h(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=T.from(t,i)),t}function g(e,t,i,n,o,r){if(!i){var s=h(t,n,o);n!==s&&(i=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:i,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,a,n,o,r);return l}function p(e,t,i,n,o,r,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new z("write")):i?e._writev(o,t.onwrite):e._write(o,r,t.onwrite),t.sync=!1}function f(e,i,n,o,r){--i.pendingcb,n?(t.nextTick(r,o),t.nextTick(S,e,i),e._writableState.errorEmitted=!0,U(e,o)):(r(o),e._writableState.errorEmitted=!0,U(e,o),S(e,i))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,i){var n=e._writableState,o=n.sync,r=n.writecb;if("function"!=typeof r)throw new B;if(m(n),i)f(e,n,o,i,r);else{var s=w(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),o?t.nextTick(b,e,n,s,r):b(e,n,s,r)}}function b(e,t,i,n){i||v(e,t),t.pendingcb--,n(),S(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var n=t.bufferedRequestCount,r=Array(n),s=t.corkedRequestsFree;s.entry=i;for(var a=0,l=!0;i;)r[a]=i,i.isBuf||(l=!1),i=i.next,a+=1;r.allBuffers=l,p(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,u=i.callback;if(p(e,t,!1,t.objectMode?1:c.length,c,d,u),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(i){t.pendingcb--,i&&U(e,i),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function x(e,i){i.prefinished||i.finalCalled||("function"!=typeof e._final||i.destroyed?(i.prefinished=!0,e.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,t.nextTick(C,e,i)))}function S(e,t){var i=w(t);if(i&&(x(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return i}function k(e,i,n){i.ending=!0,S(e,i),n&&(i.finished?t.nextTick(n):e.once("finish",n)),i.ended=!0,e.writable=!1}function E(e,t,i){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(i),n=n.next}t.corkedRequestsFree.next=e}var D;i.exports=c,c.WritableState=l;var A,I={deprecate:e("util-deprecate")},R=e("./internal/streams/stream"),T=e("buffer").Buffer,M=n.Uint8Array||function(){},L=e("./internal/streams/destroy"),N=e("./internal/streams/state").getHighWaterMark,O=e("../errors").codes,P=O.ERR_INVALID_ARG_TYPE,F=O.ERR_METHOD_NOT_IMPLEMENTED,B=O.ERR_MULTIPLE_CALLBACK,j=O.ERR_STREAM_CANNOT_PIPE,z=O.ERR_STREAM_DESTROYED,W=O.ERR_STREAM_NULL_VALUES,H=O.ERR_STREAM_WRITE_AFTER_END,K=O.ERR_UNKNOWN_ENCODING,U=L.errorOrDestroy;e("inherits")(c,R),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:I.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(e){return!!A.call(this,e)||!(this!==c)&&e&&e._writableState instanceof l}})):A=function(e){return e instanceof this},c.prototype.pipe=function(){U(this,new j)},c.prototype.write=function(e,t,i){var n=this._writableState,o=!1,l=!n.objectMode&&s(e);return l&&!T.isBuffer(e)&&(e=r(e)),"function"==typeof t&&(i=t,t=null),l?t="buffer":!t&&(t=n.defaultEncoding),"function"!=typeof i&&(i=a),n.ending?d(this,i):(l||u(this,n,e,i))&&(n.pendingcb++,o=g(this,n,l,e,t,i)),o},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&y(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new K(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(e,t,i){i(new F("_write()"))},c.prototype._writev=null,c.prototype.end=function(e,t,i){var n=this._writableState;return"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||k(this,n,i),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=L.destroy,c.prototype._undestroy=L.undestroy,c.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(i){(function(){function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){return{value:e,done:t}}function r(e){var t=e[d];if(null!==t){var i=e[m].read();null!==i&&(e[p]=null,e[d]=null,e[u]=null,t(o(i,!1)))}}function s(e){i.nextTick(r,e)}function a(e,t){return function(i,n){e.then((function(){return t[g]?void i(o(void 0,!0)):void t[f](i,n)}),n)}}var l,c=e("./end-of-stream"),d=Symbol("lastResolve"),u=Symbol("lastReject"),h=Symbol("error"),g=Symbol("ended"),p=Symbol("lastPromise"),f=Symbol("handlePromise"),m=Symbol("stream"),_=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((l={get stream(){return this[m]},next:function(){var e=this,t=this[h];if(null!==t)return Promise.reject(t);if(this[g])return Promise.resolve(o(void 0,!0));if(this[m].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[h]?n(e[h]):t(o(void 0,!0))}))}));var n,r=this[p];if(r)n=new Promise(a(r,this));else{var s=this[m].read();if(null!==s)return Promise.resolve(o(s,!1));n=new Promise(this[f])}return this[p]=n,n}},n(l,Symbol.asyncIterator,(function(){return this})),n(l,"return",(function(){var e=this;return new Promise((function(t,i){e[m].destroy(null,(function(e){return e?void i(e):void t(o(void 0,!0))}))}))})),l),_);t.exports=function(e){var t,i=Object.create(b,(n(t={},m,{value:e,writable:!0}),n(t,d,{value:null,writable:!0}),n(t,u,{value:null,writable:!0}),n(t,h,{value:null,writable:!0}),n(t,g,{value:e._readableState.endEmitted,writable:!0}),n(t,f,{value:function(e,t){var n=i[m].read();n?(i[p]=null,i[d]=null,i[u]=null,e(o(n,!1))):(i[d]=e,i[u]=t)},writable:!0}),t));return i[p]=null,c(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=i[u];return null!==t&&(i[p]=null,i[d]=null,i[u]=null,t(e)),void(i[h]=e)}var n=i[d];null!==n&&(i[p]=null,i[d]=null,i[u]=null,n(o(void 0,!0))),i[g]=!0})),e.on("readable",s.bind(null,i)),i}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){function i(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function n(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?i(Object(t),!0).forEach((function(i){o(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}));return e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function a(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function l(e,t,i){c.prototype.copy.call(e,t,i)}var c=e("buffer").Buffer,d=e("util").inspect,u=d&&d.custom||"inspect";t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return a(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t=c.allocUnsafe(e>>>0),i=this.head,n=0;i;)l(i.data,t,n),n+=i.data.length,i=i.next;return t}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,r=e>o.length?o.length:e;if(n+=r===o.length?o:o.slice(0,e),0==(e-=r)){r===o.length?(++i,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=o.slice(r));break}++i}return this.length-=i,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),i=this.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var o=i.data,r=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,r),0==(e-=r)){r===o.length?(++n,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=o.slice(r));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return d(this,n({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){function i(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}t.exports={destroy:function(t,r){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(r?r(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(o,this,t)):e.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(i,s,t)):e.nextTick(i,s,t):r?(e.nextTick(n,s),r(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,n=e._writableState;i&&i.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){function i(e){var t=!1;return function(){if(!t){t=!0;for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];e.apply(this,n)}}}function n(){}function o(e){return e.setHeader&&"function"==typeof e.abort}function r(e,t,a){if("function"==typeof t)return r(e,null,t);t||(t={}),a=i(a||n);var l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,d=function(){e.writable||h()},u=e._writableState&&e._writableState.finished,h=function(){c=!1,u=!0,l||a.call(e)},g=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,g=!0,c||a.call(e)},f=function(t){a.call(e,t)},m=function(){var t;return l&&!g?(e._readableState&&e._readableState.ended||(t=new s),a.call(e,t)):c&&!u?(e._writableState&&e._writableState.ended||(t=new s),a.call(e,t)):void 0},_=function(){e.req.on("finish",h)};return o(e)?(e.on("complete",h),e.on("abort",m),e.req?_():e.on("request",_)):c&&!e._writableState&&(e.on("end",d),e.on("close",d)),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",f),e.on("close",m),function(){e.removeListener("complete",h),e.removeListener("abort",m),e.removeListener("request",_),e.req&&e.req.removeListener("finish",h),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",f),e.removeListener("close",m)}}var s=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=r},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function n(e){if(e)throw e}function o(e){return e.setHeader&&"function"==typeof e.abort}function r(t,n,r,s){s=i(s);var a=!1;t.on("close",(function(){a=!0})),void 0===c&&(c=e("./end-of-stream")),c(t,{readable:n,writable:r},(function(e){return e?s(e):(a=!0,void s())}));var l=!1;return function(e){if(!a)return l?void 0:(l=!0,o(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new h("pipe")))}}function s(e){e()}function a(e,t){return e.pipe(t)}function l(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():n}var c,d=e("../../../errors").codes,u=d.ERR_MISSING_ARGS,h=d.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=l(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new u("streams");var o,c=t.map((function(e,i){var a=i<t.length-1;return r(e,a,0<i,(function(e){o||(o=e),e&&c.forEach(s),a||(c.forEach(s),n(o))}))}));return t.reduce(a)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,t){function i(e,t,i){return null==e.highWaterMark?t?e[i]:null:e.highWaterMark}var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,o,r){var s=i(t,r,o);if(null!=s){if(!isFinite(s)||Hl(s)!==s||0>s)throw new n(r?o:"highWaterMark",s);return Hl(s)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,i){(i=t.exports=e("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=e("./lib/_stream_writable.js"),i.Duplex=e("./lib/_stream_duplex.js"),i.Transform=e("./lib/_stream_transform.js"),i.PassThrough=e("./lib/_stream_passthrough.js"),i.finished=e("./lib/internal/streams/end-of-stream.js"),i.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,i){function n(e,t){for(var i in e)t[i]=e[i]}function o(e,t,i){return s(e,t,i)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r=e("buffer"),s=r.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,i),i.Buffer=o),o.prototype=Object.create(s.prototype),n(s,o),o.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},o.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0===t?n.fill(0):"string"==typeof i?n.fill(t,i):n.fill(t),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,i){function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=n(e);if("string"!=typeof t&&(m.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function r(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=d,this.end=u,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=h,this.end=g,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function s(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function a(e,t,i){var n=t.length-1;if(n<i)return 0;var o=s(t[n]);return 0<=o?(0<o&&(e.lastNeed=o-1),o):--n<i||-2===o?0:0<=(o=s(t[n]))?(0<o&&(e.lastNeed=o-2),o):--n<i||-2===o?0:0<=(o=s(t[n]))?(0<o&&(2===o?o=0:e.lastNeed=o-3),o):0}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}function c(e){var t=this.lastTotal-this.lastNeed,i=l(this,e,t);return void 0===i?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):i}function d(e,t){if(0==(e.length-t)%2){var i=e.toString("utf16le",t);if(i){var n=i.charCodeAt(i.length-1);if(55296<=n&&56319>=n)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function h(e,t){var i=(e.length-t)%3;return 0==i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1==i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}var m=e("safe-buffer").Buffer,_=m.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};i.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var i=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var n=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},r.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,i){(function(e){(function(){function t(t){try{if(!e.localStorage)return!1}catch(e){return!1}var i=e.localStorage[t];return null!=i&&"true"===(i+"").toLowerCase()}i.exports=function(e,i){function n(){if(!o){if(t("throwDeprecation"))throw new Error(i);t("traceDeprecation")?console.trace(i):console.warn(i),o=!0}return e.apply(this,arguments)}if(t("noDeprecation"))return e;var o=!1;return n}}).call(this)}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],"/":[function(e,t){function i(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function n(e){console.warn(e)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const o=e("debug")("simple-peer"),r=e("get-browser-rtc"),s=e("randombytes"),a=e("readable-stream"),l=e("queue-microtask"),c=e("err-code"),{Buffer:d}=e("buffer"),u=65536;class h extends a.Duplex{get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{!t.address||t.address.endsWith(".local")?n("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const i=this._senderMap.get(e)||new Map;let n=i.get(t);if(n)throw n.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),i.set(t,n),this._senderMap.set(e,i),this._needsNegotiation()}replaceTrack(e,t,i){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const n=this._senderMap.get(e),o=n?n.get(i):null;if(!o)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null==o.replaceTrack?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):o.replaceTrack(t)}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const i=this._senderMap.get(e),n=i?i.get(t):null;if(!n)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,l((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),l((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=u),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error(`Datachannel error: ${e.message} ${e.filename}:${e.lineno}:${e.colno}`);this.destroy(c(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,i){if(this.destroyed)return i(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>u?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(!this.destroyed){const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=i(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=i(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((i=>{const n=[];i.forEach((e=>{n.push(t(e))})),e(null,n)}),(t=>e(t))):0<this._pc.getStats.length?this._pc.getStats((i=>{if(this.destroyed)return;const n=[];i.result().forEach((e=>{const i={};e.names().forEach((t=>{i[t]=e.stat(t)})),i.id=e.id,i.type=e.type,i.timestamp=e.timestamp,n.push(t(i))})),e(null,n)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,i)=>{if(this.destroyed)return;t&&(i=[]);const n={},o={},r={};let s=!1;i.forEach((e=>{("remotecandidate"===e.type||"remote-candidate"===e.type)&&(n[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(o[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(r[e.id]=e)}));const a=e=>{s=!0;let t=o[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=+t.port):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=+t.portNumber):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=+t[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let i=n[e.remoteCandidateId];i&&(i.ip||i.address)?(this.remoteAddress=i.ip||i.address,this.remotePort=+i.port):i&&i.ipAddress?(this.remoteAddress=i.ipAddress,this.remotePort=+i.portNumber):"string"==typeof e.googRemoteAddress&&(i=e.googRemoteAddress.split(":"),this.remoteAddress=i[0],this.remotePort=+i[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(r[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)})),s||Object.keys(r).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>u)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=d.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),l((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],o.apply(null,e)}constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||h.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},h.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:r(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void this.destroy(c(e,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"==typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(c(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}}h.WEBRTC_SUPPORT=!!r(),h.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},h.channelConfig={},t.exports=h},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/");const $l=(e,t)=>{So(e,0);const i=(e=>ss(e,new qr))(t);Ro(e,i)},ql=(e,t,i)=>{So(e,1),Ro(e,is(t,i))},Gl=(e,t,i)=>{try{es(t,to(e),i)}catch(e){console.error("Caught error while handling a Yjs update",e)}},Zl=Gl,Jl=(e,t,i,n)=>{const o=no(e);switch(o){case 0:((e,t,i)=>{ql(t,i,to(e))})(e,t,i);break;case 1:Gl(e,i,n);break;case 2:Zl(e,i,n);break;default:throw new Error("Unknown message type")}return o};class Yl extends Sn{destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,i=this.meta.get(t),n=void 0===i?0:i.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:Vo()});const r=[],s=[],a=[],l=[];null===e?l.push(t):null==o?null!=e&&r.push(t):(s.push(t),nr(o,e)||a.push(t)),(r.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:r,updated:a,removed:l},"local"]),this.emit("update",[{added:r,updated:s,removed:l},"local"])}setLocalStateField(e,t){const i=this.getLocalState();null!==i&&this.setLocalState({...i,[e]:t})}getStates(){return this.states}constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=Vo();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((i,n)=>{n!==this.clientID&&3e4<=e-i.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&Xl(this,t,"timeout")}),kn(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}}const Xl=(e,t,i)=>{const n=[];for(let i=0;i<t.length;i++){const o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:Vo()})}n.push(o)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},i]),e.emit("update",[{added:[],updated:[],removed:n},i]))},Ql=(e,t,i=e.states)=>{const n=t.length,o=yo();So(o,n);for(let r=0;r<n;r++){const n=t[r],s=i.get(n)||null,a=e.meta.get(n).clock;So(o,n),So(o,a),Ao(o,JSON.stringify(s))}return wo(o)},ec=(e,t)=>{if(!t)return qo(e);const i=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:i},t,e).then((e=>{const t=yo();return Ao(t,"AES-GCM"),Ro(t,i),Ro(t,new Uint8Array(e)),wo(t)}))},tc=(e,t)=>{if(!t)return qo(e);const i=Xn(e);var n;"AES-GCM"!==ro(i)&&(n=Go("Unknown encryption algorithm"),Promise.reject(n));const o=to(i),r=to(i);return crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,r).then((e=>new Uint8Array(e)))};var ic=r("aLykv");const nc=(e=>{const t=Sr[kr],i=qn("log"),n=null!==i&&("*"===i||"true"===i||new RegExp(i,"gi").test(e));return kr=(kr+1)%Sr.length,e+=": ",n?(...i)=>{const n=Vo(),o=n-Er;Er=n,Cr(t,e,br,...i.map((e=>"string"==typeof e||"symbol"==typeof e?e:JSON.stringify(e))),t," +"+o+"ms")}:ir})("y-webrtc"),oc=new Map,rc=new Map,sc=e=>{let t=!0;e.webrtcConns.forEach((e=>{e.synced||(t=!1)})),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),nc("synced ",dr,e.name,ur," with all peers"))},ac=(e,t,i)=>{const n=Xn(t),o=yo(),r=no(n);if(void 0===e)return null;const s=e.awareness,a=e.doc;let l=!1;switch(r){case 0:{So(o,0);const t=Jl(n,o,a,e);1!==t||e.synced||i(),0===t&&(l=!0);break}case 3:So(o,1),Ro(o,Ql(s,Array.from(s.getStates().keys()))),l=!0;break;case 1:((e,t,i)=>{const n=Xn(t),o=Vo(),r=[],s=[],a=[],l=[],c=no(n);for(let t=0;t<c;t++){const t=no(n);let i=no(n);const c=JSON.parse(ro(n)),d=e.meta.get(t),u=e.states.get(t),h=void 0===d?0:d.clock;(h<i||h===i&&null===c&&e.states.has(t))&&(null===c?t===e.clientID&&null!=e.getLocalState()?i++:e.states.delete(t):e.states.set(t,c),e.meta.set(t,{clock:i,lastUpdated:o}),void 0===d&&null!==c?r.push(t):void 0!==d&&null===c?l.push(t):null!==c&&(nr(c,u)||a.push(t),s.push(t)))}(r.length>0||a.length>0||l.length>0)&&e.emit("change",[{added:r,updated:a,removed:l},i]),(r.length>0||s.length>0||l.length>0)&&e.emit("update",[{added:r,updated:s,removed:l},i])})(s,to(n),e);break;case 4:{const t=1===io(n),i=ro(n);if(i!==e.peerId&&(e.bcConns.has(i)&&!t||!e.bcConns.has(i)&&t)){const n=[],o=[];t?(e.bcConns.add(i),o.push(i)):(e.bcConns.delete(i),n.push(i)),e.provider.emit("peers",[{added:o,removed:n,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),gc(e)}break}default:return console.error("Unable to compute message"),o}return l?o:null},lc=(e,t)=>{nc("send message to ",dr,e.remotePeerId,ur,gr," (",e.room.name,")",br);try{e.peer.send(wo(t))}catch(e){}};class cc{destroy(){this.peer.destroy()}constructor(e,t,n,o){nc("establishing connection to ",dr,n),this.room=o,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new(i(Vl))({initiator:t,...o.provider.peerOpts}),this.peer.on("signal",(t=>{fc(e,o,{to:n,from:o.peerId,type:"signal",signal:t})})),this.peer.on("connect",(()=>{nc("connected to ",dr,n),this.connected=!0;const e=o.provider.doc,t=o.awareness,i=yo();So(i,0),$l(i,e),lc(this,i);const r=t.getStates();if(r.size>0){const e=yo();So(e,1),Ro(e,Ql(t,Array.from(r.keys()))),lc(this,e)}})),this.peer.on("close",(()=>{this.connected=!1,this.closed=!0,o.webrtcConns.has(this.remotePeerId)&&(o.webrtcConns.delete(this.remotePeerId),o.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),sc(o),this.peer.destroy(),nc("closed connection to ",dr,n),hc(o)})),this.peer.on("error",(e=>{nc("Error in connection to ",dr,n,": ",e),hc(o)})),this.peer.on("data",(e=>{const t=((e,t)=>{const i=e.room;return nc("received message from ",dr,e.remotePeerId,gr," (",i.name,")",ur,br),ac(i,t,(()=>{e.synced=!0,nc("synced ",dr,i.name,ur," with ",dr,e.remotePeerId),sc(i)}))})(this,e);null!==t&&lc(this,t)}))}}const dc=(e,t)=>ec(t,e.key).then((t=>e.mux((()=>((e,t,i=null)=>{const n=Wl(e);n.bc.postMessage(t),n.subs.forEach((e=>e(t,i)))})(e.name,t))))),uc=(e,t)=>{e.bcconnected&&dc(e,t),((e,t)=>{nc("broadcast message in ",dr,e.name,ur),e.webrtcConns.forEach((e=>{try{e.peer.send(t)}catch(e){}}))})(e,t)},hc=e=>{oc.forEach((t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&fc(t,e,{type:"announce",from:e.peerId}))}))},gc=e=>{if(e.provider.filterBcConns){const t=yo();So(t,4),xo(t,1),Ao(t,e.peerId),dc(e,wo(t))}};class pc{connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),hc(this);const e=this.name;var t,i;t=e,i=this._bcSubscriber,Wl(t).subs.add(i),this.bcconnected=!0,gc(this);const n=yo();So(n,0),$l(n,this.doc),dc(this,wo(n));const o=yo();So(o,0),ql(o,this.doc),dc(this,wo(o));const r=yo();So(r,3),dc(this,wo(r));const s=yo();So(s,1),Ro(s,Ql(this.awareness,[this.doc.clientID])),dc(this,wo(s))}disconnect(){oc.forEach((e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})})),Xl(this.awareness,[this.doc.clientID],"disconnect");const e=yo();var t,i;So(e,4),xo(e,0),Ao(e,this.peerId),dc(this,wo(e)),t=this.name,i=this._bcSubscriber,Wl(t).subs.delete(i),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((e=>e.destroy()))}destroy(){this.disconnect(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):void 0!==ic&&ic.off("exit",this._beforeUnloadHandler)}constructor(e,t,i,n){this.peerId=Uo(),this.doc=e,this.awareness=t.awareness,this.provider=t,this.synced=!1,this.name=i,this.key=n,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Ll(),this.bcconnected=!1,this._bcSubscriber=e=>tc(new Uint8Array(e),n).then((e=>this.mux((()=>{const t=ac(this,e,(()=>{}));t&&dc(this,wo(t))})))),this._docUpdateHandler=(e,t)=>{const i=yo();So(i,0),((e,t)=>{So(e,2),Ro(e,t)})(i,e),uc(this,wo(i))},this._awarenessUpdateHandler=({added:e,updated:t,removed:i},n)=>{const o=e.concat(t).concat(i),r=yo();So(r,1),Ro(r,Ql(this.awareness,o)),uc(this,wo(r))},this._beforeUnloadHandler=()=>{Xl(this.awareness,[e.clientID],"window unload"),rc.forEach((e=>{e.disconnect()}))},"undefined"!=typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):void 0!==ic&&ic.on("exit",this._beforeUnloadHandler)}}const fc=(e,t,i)=>{t.key?((e,t)=>{const i=yo();return Lo(i,e),ec(wo(i),t)})(i,t.key).then((i=>{e.send({type:"publish",topic:t.name,data:_o(i)})})):e.send({type:"publish",topic:t.name,data:i})};class mc extends Bl{constructor(e){super(e),this.providers=new Set,this.on("connect",(()=>{nc(`connected (${e})`);const t=Array.from(rc.keys());this.send({type:"subscribe",topics:t}),rc.forEach((e=>fc(this,e,{type:"announce",from:e.peerId})))})),this.on("message",(e=>{if("publish"===e.type){const n=e.topic,o=rc.get(n);if(null==o||"string"!=typeof n)return;const r=e=>{const t=o.webrtcConns,i=o.peerId;if(null==e||e.from===i||void 0!==e.to&&e.to!==i||o.bcConns.has(e.from))return;const n=t.has(e.from)?()=>{}:()=>o.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}]);switch(e.type){case"announce":t.size<o.provider.maxConns&&(vn(t,e.from,(()=>new cc(this,!0,e.from,o))),n());break;case"signal":e.to===i&&(vn(t,e.from,(()=>new cc(this,!1,e.from,o))).peer.signal(e.signal),n())}};o.key?"string"==typeof e.data&&(t=bo(e.data),i=o.key,tc(t,i).then((e=>lo(Xn(new Uint8Array(e)))))).then(r):r(e.data)}var t,i})),this.on("disconnect",(()=>nc(`disconnect (${e})`)))}}class _c extends Sn{get connected(){return null!==this.room&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach((e=>{const t=vn(oc,e,(()=>new mc(e)));this.signalingConns.push(t),t.providers.add(this)})),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach((e=>{e.providers.delete(this),0===e.providers.size&&(e.destroy(),oc.delete(e.url))})),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then((()=>{this.room.destroy(),rc.delete(this.roomName)})),super.destroy()}constructor(e,t,{signaling:i=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],password:n=null,awareness:o=new Yl(t),maxConns:r=20+kn(15*Ho()),filterBcConns:s=!0,peerOpts:a={}}={}){super(),this.roomName=e,this.doc=t,this.filterBcConns=s,this.awareness=o,this.shouldConnect=!1,this.signalingUrls=i,this.signalingConns=[],this.maxConns=r,this.peerOpts=a,this.key=n?((e,t)=>{const i=Pn(e).buffer,n=Pn(t).buffer;return crypto.subtle.importKey("raw",i,"PBKDF2",!1,["deriveKey"]).then((e=>crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])))})(n,e):qo(null),this.room=null,this.key.then((i=>{this.room=((e,t,i,n)=>{if(rc.has(i))throw Go(`A Yjs Doc connected to room "${i}" already exists!`);const o=new pc(e,t,i,n);return rc.set(i,o),o})(t,this,e,i),this.shouldConnect?this.room.connect():this.room.disconnect()})),this.connect(),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}}r("9F5Nt"),r("LrwN4"),r("bypj5");var bc=r("LrwN4"),vc=function(){function e(e,t,i){this._onDidChange=new(0,bc.Emitter),this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diagnosticsOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),e.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},e.prototype.setDiagnosticsOptions=function(e){this.setOptions(e)},e.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},e}(),yc={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},wc={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},Cc=new vc("css",yc,wc),xc=new vc("scss",yc,wc),Sc=new vc("less",yc,wc);function kc(){return r("5cHbj")}bc.languages.css={cssDefaults:Cc,lessDefaults:Sc,scssDefaults:xc},bc.languages.onLanguage("less",(function(){kc().then((function(e){return e.setupMode(Sc)}))})),bc.languages.onLanguage("scss",(function(){kc().then((function(e){return e.setupMode(xc)}))})),bc.languages.onLanguage("css",(function(){kc().then((function(e){return e.setupMode(Cc)}))})),r("LrwN4"),r("gUowP");bc=r("LrwN4");var Ec=new(function(){function e(e,t,i){this._onDidChange=new(0,bc.Emitter),this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(i)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),e.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},e.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},e}())("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});bc.languages.json={jsonDefaults:Ec},bc.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),bc.languages.onLanguage("json",(function(){r("9wlvQ").then((function(e){return e.setupMode(Ec)}))})),r("LrwN4"),r("iQnxA");bc=r("LrwN4");var Dc=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},Ac=function(e,t){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(o=2&r[0]?n.return:r[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,r[1])).done)return o;switch(n=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,n=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],n=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Ic=function(){function e(e,t,i){this._onDidChange=new(0,bc.Emitter),this._languageId=e,this.setOptions(t),this.setModeConfiguration(i)}return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),e.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},e.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},e}(),Rc={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:null,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function Tc(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===Mc,documentFormattingEdits:e===Mc,documentRangeFormattingEdits:e===Mc}}var Mc="html",Lc=jc(Mc,Rc,Tc(Mc)),Nc=Lc.defaults,Oc=jc("handlebars",Rc,Tc("handlebars")),Pc=Oc.defaults,Fc=jc("razor",Rc,Tc("razor")),Bc=Fc.defaults;function jc(e,t,i){var n=this;void 0===t&&(t=Rc),void 0===i&&(i=Tc(e));var o,s=new Ic(e,t,i),a=bc.languages.onLanguage(e,(function(){return Dc(n,void 0,void 0,(function(){return Ac(this,(function(e){switch(e.label){case 0:return[4,r("cPTOK")];case 1:return o=e.sent().setupMode(s),[2]}}))}))}));return{defaults:s,dispose:function(){a.dispose(),null==o||o.dispose(),o=void 0}}}bc.languages.html={htmlDefaults:Nc,razorDefaults:Bc,handlebarDefaults:Pc,htmlLanguageService:Lc,handlebarLanguageService:Oc,razorLanguageService:Fc,registerHTMLLanguageService:jc},r("LrwN4"),r("bfvIv");bc=r("LrwN4");var zc={},Wc={},Hc=function(){function e(e){var t=this;this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((function(e,i){t._lazyLoadPromiseResolve=e,t._lazyLoadPromiseReject=i}))}return e.getOrCreate=function(t){return Wc[t]||(Wc[t]=new e(t)),Wc[t]},e.prototype.whenLoaded=function(){return this._lazyLoadPromise},e.prototype.load=function(){var e=this;return this._loadingTriggered||(this._loadingTriggered=!0,zc[this._languageId].loader().then((function(t){return e._lazyLoadPromiseResolve(t)}),(function(t){return e._lazyLoadPromiseReject(t)}))),this._lazyLoadPromise},e}();function Kc(e){var t=e.id;zc[t]=e,bc.languages.register(e);var i=Hc.getOrCreate(t);bc.languages.setMonarchTokensProvider(t,i.whenLoaded().then((function(e){return e.language}))),bc.languages.onLanguage(t,(function(){i.load().then((function(e){bc.languages.setLanguageConfiguration(t,e.conf)}))}))}Kc({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:function(){return r("34guH")}}),Kc({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return r("ejCjy")}}),Kc({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return r("7hQRV")}}),Kc({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return r("ayZlz")}}),Kc({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:function(){return r("lPEzf")}}),Kc({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:function(){return r("kMDRq")}}),Kc({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return r("k4Yu6")}}),Kc({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return r("iPizf")}}),Kc({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return r("dxXUc")}}),Kc({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return r("dxXUc")}}),Kc({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return r("eCqOd")}}),Kc({id:"csp",extensions:[],aliases:["CSP","csp"],loader:function(){return r("h8KL5")}}),Kc({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return r("ksI6g")}}),Kc({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:function(){return r("cTtnR")}}),Kc({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return r("j9pBO")}}),Kc({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:function(){return r("eJHmO")}}),Kc({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:function(){return r("2PBDA")}}),Kc({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return r("ea9Ud")}}),Kc({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return r("cRKcg")}}),Kc({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return r("blUKb")}}),Kc({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:function(){return r("iHNwe")}}),Kc({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:function(){return r("6MvXY")}}),Kc({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return r("6zlRE")}}),Kc({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return r("85iRx")}}),Kc({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return r("4IFqq")}}),Kc({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return r("aIGjd")}}),Kc({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:function(){return r("6iH0h")}}),Kc({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return r("34Pya")}}),Kc({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return r("iMm64")}}),Kc({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:function(){return r("3NbtV")}}),Kc({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return r("c8nR3")}}),Kc({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:function(){return r("cGmKu")}}),Kc({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:function(){return r("eMAt7")}}),Kc({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return r("5MFOt")}}),Kc({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:function(){return r("bBuna")}}),Kc({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return r("Z4EJl")}}),Kc({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return r("jS8Wp")}}),Kc({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return r("2WsEJ")}}),Kc({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return r("l2MO4")}}),Kc({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:function(){return r("cMPAB")}}),Kc({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:function(){return r("cJAi5")}}),Kc({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return r("fKG6V")}}),Kc({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return r("gu7dn")}}),Kc({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return r("bMJhI")}}),Kc({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return r("3uGXK")}}),Kc({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return r("ixQTS")}}),Kc({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return r("1Pxe4")}}),Kc({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return r("d5rFo")}}),Kc({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:function(){return r("j1kWc")}}),Kc({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:function(){return r("1OUFy")}}),Kc({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return r("1TQdT")}}),Kc({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return r("7MiP4")}}),Kc({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return r("bvgIG")}}),Kc({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:function(){return r("8xYWw")}}),Kc({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:function(){return r("4YWKy")}}),Kc({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return r("apmJg")}}),Kc({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return r("17vpk")}}),Kc({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:function(){return r("i5jjh")}}),Kc({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return r("6H37Y")}}),Kc({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return r("cywiB")}}),Kc({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return r("gU87W")}}),Kc({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return r("990o9")}}),Kc({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:function(){return r("biqGo")}}),Kc({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:function(){return r("b1ZzU")}}),Kc({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return r("a6N6b")}}),Kc({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:function(){return r("jVI9J")}}),Kc({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return r("bzypJ")}}),Kc({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:function(){return r("gyBIR")}}),Kc({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:function(){return r("gyBIR")}}),Kc({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return r("lVipP")}}),Kc({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:function(){return r("jXN4N")}}),Kc({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return r("aThtS")}}),Kc({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return r("g4Oqg")}}),Kc({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return r("ixWSm")}}),Kc({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:function(){return r("cce1n")}}),r("caAgA"),r("im5V4"),r("kabdV"),r("dmCIY");var Uc=r("kO85n"),Vc=r("kMb12"),$c=r("jb8ay"),qc=r("do14f"),Gc=r("8NQur"),Zc=r("c5sLr"),Jc=r("8bVMi"),Yc=r("eCoyX");class Xc{appendText(e,t=0){var i;return this.value+=(i=this.supportThemeIcons?(0,Yc.escapeIcons)(e):e,i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")).replace(/([ \t]+)/g,((e,t)=>"&nbsp;".repeat(t.length))).replace(/^>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+="\n",this.value+=t,this.value+="\n```\n",this}constructor(e="",t=!1){var i,n;if(this.value=e,"string"!=typeof this.value)throw(0,Jc.illegalArgument)("value");"boolean"==typeof t?(this.isTrusted=t,this.supportThemeIcons=!1):(this.isTrusted=null!==(i=t.isTrusted)&&void 0!==i?i:void 0,this.supportThemeIcons=null!==(n=t.supportThemeIcons)&&void 0!==n&&n)}}function Qc(e){return function(e){if(e instanceof Xc)return!0;if(e&&"object"==typeof e)return!("string"!=typeof e.value||"boolean"!=typeof e.isTrusted&&void 0!==e.isTrusted||"boolean"!=typeof e.supportThemeIcons&&void 0!==e.supportThemeIcons);return!1}(e)?!e.value:!Array.isArray(e)||e.every(Qc)}function ed(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1"):e}function td(e){const t=[],i=e.split("|").map((e=>e.trim()));e=i[0];const n=i[1];if(n){const e=/height=(\d+)/.exec(n),i=/width=(\d+)/.exec(n),o=e?e[1]:"",r=i?i[1]:"",s=isFinite(parseInt(r)),a=isFinite(parseInt(o));s&&t.push(`width="${r}"`),a&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}var id=r("gF77M"),nd=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},od=function(e,t){return function(i,n){t(i,n,e)}},rd=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const sd=new(0,Zc.RawContextKey)("selectionAnchorSet",!1);let ad=class e{static get(t){return t.getContribution(e.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],i=this.editor.deltaDecorations(t,[{range:qc.Selection.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:(new Xc).appendText((0,Vc.localize)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=i[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,id.alert)((0,Vc.localize)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(qc.Selection.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=sd.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}};ad.ID="editor.contrib.selectionAnchorController",ad=nd([od(1,Zc.IContextKeyService)],ad);class ld extends Uc.EditorAction{run(e,t){return rd(this,void 0,void 0,(function*(){ad.get(t).setSelectionAnchor()}))}constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,Vc.localize)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2080),weight:100}})}}class cd extends Uc.EditorAction{run(e,t){return rd(this,void 0,void 0,(function*(){ad.get(t).goToSelectionAnchor()}))}constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,Vc.localize)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:sd})}}class dd extends Uc.EditorAction{run(e,t){return rd(this,void 0,void 0,(function*(){ad.get(t).selectFromAnchorToCursor()}))}constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,Vc.localize)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:sd,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2089),weight:100}})}}class ud extends Uc.EditorAction{run(e,t){return rd(this,void 0,void 0,(function*(){ad.get(t).cancelSelectionAnchor()}))}constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,Vc.localize)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:sd,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:9,weight:100}})}}(0,Uc.registerEditorContribution)(ad.ID,ad),(0,Uc.registerEditorAction)(ld),(0,Uc.registerEditorAction)(cd),(0,Uc.registerEditorAction)(dd),(0,Uc.registerEditorAction)(ud);Vc=r("kMb12");var hd=r("hsQau"),gd=r("ky1to"),pd=(Uc=r("kO85n"),r("dLnDZ")),fd=r("2KJrz"),md=(qc=r("do14f"),$c=r("jb8ay"),r("gSqSV")),_d=r("gHDnG"),bd=r("ewsQ6"),vd=r("02ibr"),yd=r("fmM7j"),wd=r("4Nnjr");const Cd=(0,vd.registerColor)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},Vc.localize("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class xd extends Uc.EditorAction{run(e,t){let i=Ed.get(t);i&&i.jumpToBracket()}constructor(){super({id:"editor.action.jumpToBracket",label:Vc.localize("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3160,weight:100}})}}class Sd extends Uc.EditorAction{run(e,t,i){const n=Ed.get(t);if(!n)return;let o=!0;i&&!1===i.selectBrackets&&(o=!1),n.selectToBracket(o)}constructor(){super({id:"editor.action.selectToBracket",label:Vc.localize("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}}class kd{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class Ed extends gd.Disposable{static get(e){return e.getContribution(Ed.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const i=t.getStartPosition(),n=e.matchBracket(i);let o=null;if(n)n[0].containsPosition(i)?o=n[1].getStartPosition():n[1].containsPosition(i)&&(o=n[0].getStartPosition());else{const t=e.findEnclosingBrackets(i);if(t)o=t[0].getStartPosition();else{const t=e.findNextBracket(i);t&&t.range&&(o=t.range.getStartPosition())}}return o?new(0,qc.Selection)(o.lineNumber,o.column,o.lineNumber,o.column):new(0,qc.Selection)(i.lineNumber,i.column,i.lineNumber,i.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach((n=>{const o=n.getStartPosition();let r=t.matchBracket(o);if(!r&&(r=t.findEnclosingBrackets(o),!r)){const e=t.findNextBracket(o);e&&e.range&&(r=t.matchBracket(e.range.getStartPosition()))}let s=null,a=null;if(r){r.sort(fd.Range.compareRangesUsingStarts);const[t,i]=r;if(s=e?t.getStartPosition():t.getEndPosition(),a=e?i.getEndPosition():i.getStartPosition(),i.containsPosition(o)){const e=s;s=a,a=e}}s&&a&&i.push(new(0,qc.Selection)(s.lineNumber,s.column,a.lineNumber,a.column))})),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();let e=[],t=0;for(const i of this._lastBracketsData){let n=i.brackets;n&&(e[t++]={range:n[0],options:i.options},e[t++]={range:n[1],options:i.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),i=t.getVersionId();let n=[];this._lastVersionId===i&&(n=this._lastBracketsData);let o=[],r=0;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.isEmpty()&&(o[r++]=i.getStartPosition())}o.length>1&&o.sort(pd.Position.compare);let s=[],a=0,l=0,c=n.length;for(let e=0,i=o.length;e<i;e++){let i=o[e];for(;l<c&&n[l].position.isBefore(i);)l++;if(l<c&&n[l].position.equals(i))s[a++]=n[l];else{let e=t.matchBracket(i),n=Ed._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;e||"always"!==this._matchBrackets||(e=t.findEnclosingBrackets(i,20),n=Ed._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),s[a++]=new kd(i,e,n)}}this._lastBracketsData=s,this._lastVersionId=i}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new(0,hd.RunOnceScheduler)((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})))}}Ed.ID="editor.contrib.bracketMatchingController",Ed._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=_d.ModelDecorationOptions.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,yd.themeColorFromId)(Cd),position:md.OverviewRulerLane.Center}}),Ed._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=_d.ModelDecorationOptions.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,Uc.registerEditorContribution)(Ed.ID,Ed),(0,Uc.registerEditorAction)(Sd),(0,Uc.registerEditorAction)(xd),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(bd.editorBracketMatchBackground);i&&t.addRule(`.monaco-editor .bracket-match { background-color: ${i}; }`);const n=e.getColor(bd.editorBracketMatchBorder);n&&t.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)})),wd.MenuRegistry.appendMenuItem(wd.MenuId.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:Vc.localize({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});Vc=r("kMb12"),Uc=r("kO85n"),$c=r("jb8ay"),fd=r("2KJrz"),qc=r("do14f");class Dd{getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,n=this._selection.startColumn,o=this._selection.endColumn;if((!this._isMovingLeft||1!==n)&&(this._isMovingLeft||o!==e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new(0,fd.Range)(i,n-1,i,n),s=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new(0,fd.Range)(i,o,i,o),s)}else{const r=new(0,fd.Range)(i,o,i,o+1),s=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new(0,fd.Range)(i,n,i,n),s)}}computeCursorState(e,t){return this._isMovingLeft?new(0,qc.Selection)(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new(0,qc.Selection)(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}constructor(e,t){this._selection=e,this._isMovingLeft=t}}class Ad extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;let i=[],n=t.getSelections();for(const e of n)i.push(new Dd(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}constructor(e,t){super(t),this.left=e}}(0,Uc.registerEditorAction)(class extends Ad{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:Vc.localize("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorAction)(class extends Ad{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:Vc.localize("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:$c.EditorContextKeys.writable})}});Vc=r("kMb12"),Uc=r("kO85n");var Id=r("jTJ7G"),Rd=(fd=r("2KJrz"),$c=r("jb8ay"),r("dQUT7"));class Td extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;let i=t.getModel(),n=[],o=t.getSelections();for(let e of o){if(!e.isEmpty())continue;let t=e.startLineNumber,o=e.startColumn,r=i.getLineMaxColumn(t);if(1===t&&(1===o||2===o&&2===r))continue;let s=o===r?e.getPosition():Rd.MoveOperations.rightPosition(i,e.getPosition().lineNumber,e.getPosition().column),a=Rd.MoveOperations.leftPosition(i,s),l=Rd.MoveOperations.leftPosition(i,a),c=i.getValueInRange(fd.Range.fromPositions(l,a)),d=i.getValueInRange(fd.Range.fromPositions(a,s)),u=fd.Range.fromPositions(l,s);n.push(new(0,Id.ReplaceCommand)(u,d+c))}n.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop())}constructor(){super({id:"editor.action.transposeLetters",label:Vc.localize("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:306},weight:100}})}}(0,Uc.registerEditorAction)(Td);Vc=r("kMb12");var Md=r("gDqjO"),Ld=r("drE9L"),Nd=r("fXtZ4"),Od=(Uc=r("kO85n"),r("6AQ6e")),Pd=($c=r("jb8ay"),wd=r("4Nnjr"),r("d5VSL")),Fd=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const Bd=Ld.isNative||document.queryCommandSupported("cut"),jd=Ld.isNative||document.queryCommandSupported("copy"),zd=void 0!==navigator.clipboard&&!Md.isFirefox||document.queryCommandSupported("paste");function Wd(e){return e.register(),e}const Hd=Bd?Wd(new(0,Uc.MultiCommand)({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Ld.isNative?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:wd.MenuId.MenubarEditMenu,group:"2_ccp",title:Vc.localize({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:wd.MenuId.EditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.cutLabel","Cut"),when:$c.EditorContextKeys.writable,order:1},{menuId:wd.MenuId.CommandPalette,group:"",title:Vc.localize("actions.clipboard.cutLabel","Cut"),order:1},{menuId:wd.MenuId.SimpleEditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.cutLabel","Cut"),when:$c.EditorContextKeys.writable,order:1}]})):void 0,Kd=jd?Wd(new(0,Uc.MultiCommand)({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Ld.isNative?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:wd.MenuId.MenubarEditMenu,group:"2_ccp",title:Vc.localize({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:wd.MenuId.EditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.copyLabel","Copy"),order:2},{menuId:wd.MenuId.CommandPalette,group:"",title:Vc.localize("actions.clipboard.copyLabel","Copy"),order:1},{menuId:wd.MenuId.SimpleEditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;wd.MenuRegistry.appendMenuItem(wd.MenuId.MenubarEditMenu,{submenu:wd.MenuId.MenubarCopy,title:{value:Vc.localize("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),wd.MenuRegistry.appendMenuItem(wd.MenuId.EditorContext,{submenu:wd.MenuId.EditorContextCopy,title:{value:Vc.localize("copy as","Copy As"),original:"Copy As"},group:"9_cutcopypaste",order:3});const Ud=zd?Wd(new(0,Uc.MultiCommand)({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Ld.isNative?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:wd.MenuId.MenubarEditMenu,group:"2_ccp",title:Vc.localize({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:wd.MenuId.EditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.pasteLabel","Paste"),when:$c.EditorContextKeys.writable,order:4},{menuId:wd.MenuId.CommandPalette,group:"",title:Vc.localize("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:wd.MenuId.SimpleEditorContext,group:"9_cutcopypaste",title:Vc.localize("actions.clipboard.pasteLabel","Paste"),when:$c.EditorContextKeys.writable,order:4}]})):void 0;class Vd extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;!t.getOption(31)&&t.getSelection().isEmpty()||(Nd.CopyOptions.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),Nd.CopyOptions.forceCopyWithSyntaxHighlighting=!1)}constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:Vc.localize("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,weight:100}})}}function $d(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,i)=>{const n=e.get(Od.ICodeEditorService).getFocusedCodeEditor();if(n&&n.hasTextFocus()){const e=n.getOption(31),i=n.getSelection();return i&&i.isEmpty()&&!e||document.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,i)=>(document.execCommand(t),!0))))}$d(Hd,"cut"),$d(Kd,"copy"),Ud&&(Ud.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(Od.ICodeEditorService),n=e.get(Pd.IClipboardService),o=i.getFocusedCodeEditor();if(o&&o.hasTextFocus()){return!(!document.execCommand("paste")&&Ld.isWeb)||(Fd(void 0,void 0,void 0,(function*(){const e=yield n.readText();if(""!==e){const t=Nd.InMemoryClipboardMetadataManager.INSTANCE.get(e);let i=!1,n=null,r=null;t&&(i=o.getOption(31)&&!!t.isFromEmptySelection,n=void 0!==t.multicursorText?t.multicursorText:null,r=t.mode),o.trigger("keyboard","paste",{text:e,pasteOnNewLine:i,multicursorText:n,mode:r})}})),!0)}return!1})),Ud.addImplementation(0,"generic-dom",((e,t)=>(document.execCommand("paste"),!0)))),jd&&(0,Uc.registerEditorAction)(Vd);Uc=r("kO85n");var qd={};e(qd,"QuickFixController",(function(){return wh}),(function(e){return wh=e})),e(qd,"QuickFixAction",(function(){return Sh}),(function(e){return Sh=e})),e(qd,"AutoFixAction",(function(){return Rh}),(function(e){return Rh=e})),e(qd,"CodeActionCommand",(function(){return kh}),(function(e){return kh=e})),e(qd,"RefactorAction",(function(){return Eh}),(function(e){return Eh=e})),e(qd,"SourceAction",(function(){return Dh}),(function(e){return Dh=e})),e(qd,"OrganizeImportsAction",(function(){return Ah}),(function(e){return Ah=e})),e(qd,"FixAllAction",(function(){return Ih}),(function(e){return Ih=e}));var Gd=r("7G83E");class Zd{getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}constructor(e){this.executor=e,this._didRun=!1}}gd=r("ky1to");var Jd=r("aAfu1"),Yd=(Uc=r("kO85n"),r("fj9mq")),Xd=($c=r("jb8ay"),{});e(Xd,"codeActionCommandId",(function(){return hu}),(function(e){return hu=e})),e(Xd,"refactorCommandId",(function(){return gu}),(function(e){return gu=e})),e(Xd,"sourceActionCommandId",(function(){return pu}),(function(e){return pu=e})),e(Xd,"organizeImportsCommandId",(function(){return fu}),(function(e){return fu=e})),e(Xd,"fixAllCommandId",(function(){return mu}),(function(e){return mu=e})),e(Xd,"CodeActionItem",(function(){return _u}),(function(e){return _u=e})),e(Xd,"getCodeActions",(function(){return yu}),(function(e){return yu=e}));var Qd=r("dD6PO"),eu=(Gd=r("7G83E"),Jc=r("8bVMi"),gd=r("ky1to"),r("avLBk")),tu=r("8hC5C"),iu=(fd=r("2KJrz"),qc=r("do14f"),r("ldsR3")),nu=r("cDtHV");class ou{equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+ou.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new ou(this.value+ou.sep+e)}constructor(e){this.value=e}}function ru(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((i=>au(t,i,e.include))))&&!(!e.includeSourceActions&&ou.Source.contains(t)))}function su(e,t){const i=t.kind?new ou(t.kind):void 0;return!!(!e.include||i&&e.include.contains(i))&&(!(e.excludes&&i&&e.excludes.some((t=>au(i,t,e.include))))&&(!(!e.includeSourceActions&&i&&ou.Source.contains(i))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function au(e,t,i){return!!t.contains(e)&&(!i||!t.contains(i))}ou.sep=".",ou.None=new ou("@@none@@"),ou.Empty=new ou(""),ou.QuickFix=new ou("quickfix"),ou.Refactor=new ou("refactor"),ou.Source=new ou("source"),ou.SourceOrganizeImports=ou.Source.append("organizeImports"),ou.SourceFixAll=ou.Source.append("fixAll");class lu{static fromUser(e,t){return e&&"object"==typeof e?new lu(lu.getKindFromUser(e,t.kind),lu.getApplyFromUser(e,t.apply),lu.getPreferredUser(e)):new lu(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new ou(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}}var cu=r("dkDYJ"),du=r("cUien"),uu=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const hu="editor.action.codeAction",gu="editor.action.refactor",pu="editor.action.sourceAction",fu="editor.action.organizeImports",mu="editor.action.fixAll";class _u{resolve(e){var t;return uu(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(e){(0,Jc.onUnexpectedExternalError)(e)}t&&(this.action.edit=t.edit)}return this}))}constructor(e,t){this.action=e,this.provider=t}}class bu extends gd.Disposable{static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:(0,Qd.isNonEmptyArray)(e.diagnostics)?(0,Qd.isNonEmptyArray)(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:(0,Qd.isNonEmptyArray)(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some((({action:e})=>!!e.kind&&ou.QuickFix.contains(new ou(e.kind))&&!!e.isPreferred))}constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(bu.codeActionsComparator),this.validActions=this.allActions.filter((({action:e})=>!e.disabled))}}const vu={actions:[],documentation:void 0};function yu(e,t,i,n,o){var r;const s=i.filter||{},a={only:null===(r=s.include)||void 0===r?void 0:r.value,trigger:i.type},l=new(0,tu.TextModelCancellationTokenSource)(e,o),c=function(e,t){return iu.CodeActionProviderRegistry.all(e).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>ru(t,new ou(e))))))}(e,s),d=new(0,gd.DisposableStore),u=c.map((i=>uu(this,void 0,void 0,(function*(){try{n.report(i);const o=yield i.provideCodeActions(e,t,a,l.token);if(o&&d.add(o),l.token.isCancellationRequested)return vu;const r=((null==o?void 0:o.actions)||[]).filter((e=>e&&su(s,e))),c=function(e,t,i){if(!e.documentation)return;const n=e.documentation.map((e=>({kind:new ou(e.kind),command:e.command})));if(i){let e;for(const t of n)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(const e of t)if(e.kind)for(const t of n)if(t.kind.contains(new ou(e.kind)))return t.command;return}(i,r,s.include);return{actions:r.map((e=>new _u(e,i))),documentation:c}}catch(e){if((0,Jc.isPromiseCanceledError)(e))throw e;return(0,Jc.onUnexpectedExternalError)(e),vu}})))),h=iu.CodeActionProviderRegistry.onDidChange((()=>{const t=iu.CodeActionProviderRegistry.all(e);(0,Qd.equals)(t,c)||l.cancel()}));return Promise.all(u).then((e=>{const t=(0,Qd.flatten)(e.map((e=>e.actions))),i=(0,Qd.coalesce)(e.map((e=>e.documentation)));return new bu(t,i,d)})).finally((()=>{h.dispose(),l.dispose()}))}du.CommandsRegistry.registerCommand("_executeCodeActionProvider",(function(e,t,i,n,o){return uu(this,void 0,void 0,(function*(){if(!(t instanceof eu.URI))throw(0,Jc.illegalArgument)();const r=e.get(nu.IModelService).getModel(t);if(!r)throw(0,Jc.illegalArgument)();const s=qc.Selection.isISelection(i)?qc.Selection.liftSelection(i):fd.Range.isIRange(i)?r.validateRange(i):void 0;if(!s)throw(0,Jc.illegalArgument)();const a="string"==typeof n?new ou(n):void 0,l=yield yu(r,s,{type:1,filter:{includeSourceActions:!0,include:a}},cu.Progress.None,Gd.CancellationToken.None),c=[],d=Math.min(l.validActions.length,"number"==typeof o?o:0);for(let e=0;e<d;e++)c.push(l.validActions[e].resolve(Gd.CancellationToken.None));try{return yield Promise.all(c),l.validActions.map((e=>e.action))}finally{setTimeout((()=>l.dispose()),100)}}))}));var wu={};e(wu,"CodeActionUi",(function(){return ih}),(function(e){return ih=e}));Jc=r("8bVMi"),gd=r("ky1to");var Cu={};e(Cu,"MessageController",(function(){return Eu}),(function(e){return Eu=e}));Vc=r("kMb12"),hd=r("hsQau"),gd=r("ky1to"),id=r("gF77M"),fd=r("2KJrz"),Uc=r("kO85n"),Zc=r("c5sLr"),yd=r("fmM7j"),vd=r("02ibr");var xu=r("bSm4w"),Su=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ku=function(e,t){return function(i,n){t(i,n,e)}};let Eu=class e{static get(t){return t.getContribution(e.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,id.alert)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new Au(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new(0,hd.TimeoutTimer)((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new(0,fd.Range)(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Au.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(Vc.localize("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}constructor(t,i){this._messageWidget=new(0,gd.MutableDisposable),this._messageListeners=new(0,gd.DisposableStore),this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(i),this._editorListener=this._editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit()))}};Eu.ID="editor.contrib.messageController",Eu.MESSAGE_VISIBLE=new(0,Zc.RawContextKey)("messageVisible",!1,Vc.localize("messageVisible","Whether the editor is currently showing an inline message")),Eu=Su([ku(1,Zc.IContextKeyService)],Eu);const Du=Uc.EditorCommand.bindToContribution(Eu.get);(0,Uc.registerEditorCommand)(new Du({id:"leaveEditorMessage",precondition:Eu.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class Au{static fadeOut(e){let t;const i=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",i)};return t=setTimeout(i,110),e.getDomNode().addEventListener("animationend",i),e.getDomNode().classList.add("fadeOut"),{dispose:i}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",2===e)}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");r.classList.add("message"),r.textContent=n,this._domNode.appendChild(r);const s=document.createElement("div");s.classList.add("anchor","below"),this._domNode.appendChild(s),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}}(0,Uc.registerEditorContribution)(Eu.ID,Eu),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.inputValidationInfoBorder);if(i){let n=e.type===xu.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ${i}; }`),t.addRule(`.monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ${i}; }`),t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { border: ${n}px solid ${i}; }`)}const n=e.getColor(vd.inputValidationInfoBackground);n&&t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { background-color: ${n}; }`);const o=e.getColor(vd.inputValidationInfoForeground);o&&t.addRule(`.monaco-editor .monaco-editor-overlaymessage .message { color: ${o}; }`)}));var Iu=r("cwJE1"),Ru={};e(Ru,"CodeActionMenu",(function(){return ju}),(function(e){return ju=e}));var Tu=r("2cxKt"),Mu=r("6Dupa"),Lu=(Jc=r("8bVMi"),gd=r("ky1to"),pd=r("dLnDZ"),iu=r("ldsR3"),r("fRIx8")),Nu=r("5TiFM"),Ou=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Pu=function(e,t){return function(i,n){t(i,n,e)}},Fu=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Bu extends Mu.Action{constructor(e,t){super(e.command?e.command.id:e.title,e.title.replace(/\r\n|\r|\n/g," "),void 0,!e.disabled,t),this.action=e}}let ju=class extends gd.Disposable{get isVisible(){return this._visible}show(e,t,i,n){return Fu(this,void 0,void 0,(function*(){const o=n.includeDisabledActions?t.allActions:t.validActions;if(!o.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,(0,Jc.canceled)();this._visible=!0,this._showingActions.value=t;const r=this.getMenuActions(e,o,t.documentation),s=pd.Position.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},a=this._keybindingResolver.getResolver(),l=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>s,getActions:()=>r,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof Bu?a(e.action):void 0})}))}getMenuActions(e,t,i){var n,o;const r=e=>new Bu(e.action,(()=>this._delegate.onSelectCodeAction(e))),s=t.map(r),a=[...i],l=this._editor.getModel();if(l&&s.length)for(const i of iu.CodeActionProviderRegistry.all(l))i._getAdditionalMenuItems&&a.push(...i._getAdditionalMenuItems({trigger:e.type,only:null===(o=null===(n=e.filter)||void 0===n?void 0:n.include)||void 0===o?void 0:o.value},t.map((e=>e.action))));return a.length&&s.push(new(0,Mu.Separator),...a.map((e=>r(new(0,Xd.CodeActionItem)({title:e.title,command:e},void 0))))),s}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=(0,Tu.getDomNodePagePosition)(this._editor.getDomNode());return{x:i.left+t.left,y:i.top+t.top+t.height}}constructor(e,t,i,n){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._visible=!1,this._showingActions=this._register(new(0,gd.MutableDisposable)),this._keybindingResolver=new zu({getKeybindings:()=>n.getKeybindings()})}};ju=Ou([Pu(2,Lu.IContextMenuService),Pu(3,Nu.IKeybindingService)],ju);class zu{getResolver(){const e=new Zd((()=>this._keybindingProvider.getKeybindings().filter((e=>zu.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===Xd.organizeImportsCommandId?t={kind:ou.SourceOrganizeImports.value}:e.command===Xd.fixAllCommandId&&(t={kind:ou.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},lu.fromUser(t,{kind:ou.None,apply:"never"}))}))));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return null==i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new ou(e.kind);return t.filter((e=>e.kind.contains(i))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}constructor(e){this._keybindingProvider=e}}zu.codeActionCommands=[Xd.refactorCommandId,Xd.codeActionCommandId,Xd.sourceActionCommandId,Xd.organizeImportsCommandId,Xd.fixAllCommandId];var Wu={};e(Wu,"LightBulbWidget",(function(){return Zu}),(function(e){return Zu=e}));Tu=r("2cxKt");var Hu,Ku=r("l1C9n"),Uu=r("7bUGH"),Vu=(gd=r("ky1to"),_d=r("gHDnG"),Vc=r("kMb12"),Nu=r("5TiFM"),yd=r("fmM7j"),vd=r("02ibr"),r("eyNl4")),$u=r("kWoyS"),qu=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Gu=function(e,t){return function(i,n){t(i,n,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,i,n){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=n,this.type=1}}}(Hu||(Hu={}));let Zu=class e extends gd.Disposable{dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,i,n){if(t.validActions.length<=0)return this.hide();const o=this._editor.getOptions();if(!o.get(56).enabled)return this.hide();const r=this._editor.getModel();if(!r)return this.hide();const{lineNumber:s,column:a}=r.validatePosition(n),l=r.getOptions().tabSize,c=o.get(42),d=r.getLineContent(s),u=_d.TextModel.computeIndentLevel(d,l),h=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let g=s;if(!(c.spaceWidth*u>22))if(s>1&&!h(s-1))g-=1;else if(h(s+1)){if(a*c.spaceWidth<22)return this.hide()}else g+=1;this.state=new Hu.Showing(t,i,n,{position:{lineNumber:g,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=Hu.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...$u.Codicon.lightBulb.classNamesArray),this._domNode.classList.add(...$u.Codicon.lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=Vc.localize("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...$u.Codicon.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...$u.Codicon.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?Vc.localize("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):Vc.localize("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}constructor(e,t,i,n){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=n,this._onClick=this._register(new(0,Uu.Emitter)),this.onClick=this._onClick.event,this._state=Hu.Hidden,this._domNode=document.createElement("div"),this._domNode.className=$u.Codicon.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),Vu.Gesture.ignoreTarget(this._domNode),this._register(Tu.addStandardDisposableGenericMouseDownListner(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:i}=Tu.getDomNodePagePosition(this._domNode),n=this._editor.getOption(58);let o=Math.floor(n/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(o+=n),this._onClick.fire({x:e.posx,y:t+i+o,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(Tu.addDisposableListener(this._domNode,"mouseenter",(e=>{if(1!=(1&e.buttons))return;this.hide();const t=new(0,Ku.GlobalMouseMoveMonitor);t.startMonitoring(e.target,e.buttons,Ku.standardMouseMoveMerger,(()=>{}),(()=>{t.dispose()}))}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()}))),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}};Zu._posPref=[0],Zu=qu([Gu(3,Nu.IKeybindingService)],Zu),(0,yd.registerThemingParticipant)(((e,t)=>{var i;const n=null===(i=e.getColor(vd.editorBackground))||void 0===i?void 0:i.transparent(.7),o=e.getColor(vd.editorLightBulbForeground);o&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${$u.Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${o};\n\t\t\tbackground-color: ${n};\n\t\t}`);const r=e.getColor(vd.editorLightBulbAutoFixForeground);r&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${$u.Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${r};\n\t\t\tbackground-color: ${n};\n\t\t}`)}));var Ju,Yu=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Xu=function(e,t){return function(i,n){t(i,n,e)}},Qu=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},eh=function(e,t,i,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,i):o?o.value=i:t.set(e,i),i},th=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};let ih=class extends gd.Disposable{dispose(){eh(this,Ju,!0,"f"),super.dispose()}update(e){var t,i,n;return Qu(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let o;try{o=yield e.actions}catch(e){return void(0,Jc.onUnexpectedError)(e)}if(!th(this,Ju,"f"))if(this._lightBulbWidget.getValue().update(o,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,o);if(t){try{yield this.delegate.applyCodeAction(t,!1)}finally{o.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,o);if(t&&t.action.disabled)return Cu.MessageController.get(this._editor).showMessage(t.action.disabled,e.trigger.context.position),void o.dispose()}}const t=!!(null===(n=e.trigger.filter)||void 0===n?void 0:n.include);if(e.trigger.context&&(!o.allActions.length||!t&&!o.validActions.length))return Cu.MessageController.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=o,void o.dispose();this._activeCodeActions.value=o,this._codeActionWidget.getValue().show(e.trigger,o,e.position,{includeDisabledActions:t})}else this._codeActionWidget.getValue().isVisible?o.dispose():this._activeCodeActions.value=o}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((({action:e})=>e.disabled)):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,i,n){return Qu(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,t,i,n)}))}constructor(e,t,i,n,o){super(),this._editor=e,this.delegate=n,this._activeCodeActions=this._register(new(0,gd.MutableDisposable)),Ju.set(this,!1),this._codeActionWidget=new Zd((()=>this._register(o.createInstance(Ru.CodeActionMenu,this._editor,{onSelectCodeAction:e=>Qu(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0)}))})))),this._lightBulbWidget=new Zd((()=>{const e=this._register(o.createInstance(Wu.LightBulbWidget,this._editor,t,i));return this._register(e.onClick((e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1})))),e}))}};Ju=new WeakMap,ih=Yu([Xu(4,Iu.IInstantiationService)],ih);Vc=r("kMb12"),du=r("cUien"),Zc=r("c5sLr"),Iu=r("cwJE1");var nh=r("Ma2Pe"),oh=r("26YKj"),rh=(cu=r("dkDYJ"),r("2HQ2L")),sh={};e(sh,"SUPPORTED_CODE_ACTIONS",(function(){return uh}),(function(e){return uh=e})),e(sh,"CodeActionModel",(function(){return fh}),(function(e){return fh=e}));hd=r("hsQau"),Jc=r("8bVMi"),Uu=r("7bUGH"),gd=r("ky1to");var ah,lh=r("liPtJ"),ch=(fd=r("2KJrz"),iu=r("ldsR3"),Zc=r("c5sLr"),cu=r("dkDYJ"),function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)}),dh=function(e,t,i,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,i):o?o.value=i:t.set(e,i),i};const uh=new(0,Zc.RawContextKey)("supportedCodeAction","");class hh extends gd.Disposable{trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,lh.isEqual)(e,t.uri)))&&this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2})}),this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const i of this._markerService.read({resource:t.uri})){const n=t.validateRange(i);if(fd.Range.intersectRanges(n,e))return fd.Range.lift(n)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&2===e.type){const{lineNumber:e,column:n}=i.getPosition(),o=t.getLineContent(e);if(0===o.length)return;if(1===n){if(/\s/.test(o[0]))return}else if(n===t.getLineMaxColumn(e)){if(/\s/.test(o[o.length-1]))return}else if(/\s/.test(o[n-2])&&/\s/.test(o[n-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i)return void this._signalChange(void 0);const n=this._getRangeOfMarker(t),o=n?n.getStartPosition():t.getStartPosition(),r={trigger:e,selection:t,position:o};return this._signalChange(r),r}constructor(e,t,i,n=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=n,this._autoTriggerTimer=this._register(new(0,hd.TimeoutTimer)),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._onCursorChange())))}}var gh;!function(e){e.Empty={type:0};e.Triggered=class{cancel(){this._cancellablePromise.cancel()}constructor(e,t,i,n){this.trigger=e,this.rangeOrSelection=t,this.position=i,this._cancellablePromise=n,this.type=1,this.actions=n.catch((e=>{if((0,Jc.isPromiseCanceledError)(e))return ph;throw e}))}}}(gh||(gh={}));const ph={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class fh extends gd.Disposable{dispose(){ch(this,ah,"f")||(dh(this,ah,!0,"f"),super.dispose(),this.setState(gh.Empty,!0))}_update(){if(ch(this,ah,"f"))return;this._codeActionOracle.value=void 0,this.setState(gh.Empty);const e=this._editor.getModel();if(e&&iu.CodeActionProviderRegistry.has(e)&&!this._editor.getOption(80)){const t=[];for(const i of iu.CodeActionProviderRegistry.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new hh(this._editor,this._markerService,(t=>{var i;if(!t)return void this.setState(gh.Empty);const n=(0,hd.createCancelablePromise)((i=>(0,Xd.getCodeActions)(e,t.selection,t.trigger,cu.Progress.None,i)));1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(n,250)),this.setState(new gh.Triggered(t.trigger,t.selection,t.position,n))}),void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||ch(this,ah,"f")||this._onDidChangeState.fire(e))}constructor(e,t,i,n){super(),this._editor=e,this._markerService=t,this._progressService=n,this._codeActionOracle=this._register(new(0,gd.MutableDisposable)),this._state=gh.Empty,this._onDidChangeState=this._register(new(0,Uu.Emitter)),this.onDidChangeState=this._onDidChangeState.event,ah.set(this,!1),this._supportedCodeActions=uh.bindTo(i),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(iu.CodeActionProviderRegistry.onDidChange((()=>this._update()))),this._update()}}ah=new WeakMap;var mh=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},_h=function(e,t){return function(i,n){t(i,n,e)}},bh=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function vh(e){return Zc.ContextKeyExpr.regex(sh.SUPPORTED_CODE_ACTIONS.keys()[0],new RegExp("(\\s|^)"+(0,Jd.escapeRegExpCharacters)(e.value)+"\\b"))}const yh={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:Vc.localize("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:Vc.localize("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[Vc.localize("args.schema.apply.first","Always apply the first returned code action."),Vc.localize("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),Vc.localize("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:Vc.localize("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let wh=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,i){if(!this._editor.hasModel())return;Cu.MessageController.get(this._editor).closeMessage();const n=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:i,context:{notAvailableMessage:e,position:n}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(Ch,e,this._editor)}constructor(e,t,i,n,o){super(),this._instantiationService=o,this._editor=e,this._model=this._register(new(0,sh.CodeActionModel)(this._editor,t,i,n)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._ui=new Zd((()=>this._register(new(0,wu.CodeActionUi)(e,Sh.Id,Rh.Id,{applyCodeAction:(e,t)=>bh(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e)}finally{t&&this._trigger({type:2,filter:{}})}}))},this._instantiationService))))}};function Ch(e,t,i){return bh(this,void 0,void 0,(function*(){const n=e.get(Yd.IBulkEditService),o=e.get(du.ICommandService),r=e.get(rh.ITelemetryService),s=e.get(oh.INotificationService);if(r.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred}),yield t.resolve(Gd.CancellationToken.None),t.action.edit&&(yield n.apply(Yd.ResourceEdit.convert(t.action.edit),{editor:i,label:t.action.title})),t.action.command)try{yield o.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){const t=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(e);s.error("string"==typeof t?t:Vc.localize("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function xh(e,t,i,n){if(e.hasModel()){const o=wh.get(e);o&&o.manualTriggerAtCurrentPosition(t,i,n)}}wh.ID="editor.contrib.quickFixController",wh=mh([_h(1,nh.IMarkerService),_h(2,Zc.IContextKeyService),_h(3,cu.IEditorProgressService),_h(4,Iu.IInstantiationService)],wh);class Sh extends Uc.EditorAction{run(e,t){return xh(t,Vc.localize("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}constructor(){super({id:Sh.Id,label:Vc.localize("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2132,weight:100}})}}Sh.Id="editor.action.quickFix";class kh extends Uc.EditorCommand{runEditorCommand(e,t,i){const n=lu.fromUser(i,{kind:ou.Empty,apply:"ifSingle"});return xh(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?Vc.localize("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",i.kind):Vc.localize("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",i.kind):n.preferred?Vc.localize("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):Vc.localize("editor.action.codeAction.noneMessage","No code actions available"),{include:n.kind,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}constructor(){super({id:Xd.codeActionCommandId,precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:yh}]}})}}class Eh extends Uc.EditorAction{run(e,t,i){const n=lu.fromUser(i,{kind:ou.Refactor,apply:"never"});return xh(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?Vc.localize("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",i.kind):Vc.localize("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",i.kind):n.preferred?Vc.localize("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):Vc.localize("editor.action.refactor.noneMessage","No refactorings available"),{include:ou.Refactor.contains(n.kind)?n.kind:ou.None,onlyIncludePreferredActions:n.preferred},n.apply)}constructor(){super({id:Xd.refactorCommandId,label:Vc.localize("refactor.label","Refactor..."),alias:"Refactor...",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,vh(ou.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:yh}]}})}}class Dh extends Uc.EditorAction{run(e,t,i){const n=lu.fromUser(i,{kind:ou.Source,apply:"never"});return xh(t,"string"==typeof(null==i?void 0:i.kind)?n.preferred?Vc.localize("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",i.kind):Vc.localize("editor.action.source.noneMessage.kind","No source actions for '{0}' available",i.kind):n.preferred?Vc.localize("editor.action.source.noneMessage.preferred","No preferred source actions available"):Vc.localize("editor.action.source.noneMessage","No source actions available"),{include:ou.Source.contains(n.kind)?n.kind:ou.None,includeSourceActions:!0,onlyIncludePreferredActions:n.preferred},n.apply)}constructor(){super({id:Xd.sourceActionCommandId,label:Vc.localize("source.label","Source Action..."),alias:"Source Action...",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,vh(ou.Source))},description:{description:"Source Action...",args:[{name:"args",schema:yh}]}})}}class Ah extends Uc.EditorAction{run(e,t){return xh(t,Vc.localize("editor.action.organize.noneMessage","No organize imports action available"),{include:ou.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}constructor(){super({id:Xd.organizeImportsCommandId,label:Vc.localize("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,vh(ou.SourceOrganizeImports)),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1581,weight:100}})}}class Ih extends Uc.EditorAction{run(e,t){return xh(t,Vc.localize("fixAll.noneMessage","No fix all action available"),{include:ou.SourceFixAll,includeSourceActions:!0},"ifSingle")}constructor(){super({id:Xd.fixAllCommandId,label:Vc.localize("fixAll.label","Fix All"),alias:"Fix All",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,vh(ou.SourceFixAll))})}}class Rh extends Uc.EditorAction{run(e,t){return xh(t,Vc.localize("editor.action.autoFix.noneMessage","No auto fixes available"),{include:ou.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}constructor(){super({id:Rh.Id,label:Vc.localize("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,vh(ou.QuickFix)),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}}Rh.Id="editor.action.autoFix",(0,Uc.registerEditorContribution)(qd.QuickFixController.ID,qd.QuickFixController),(0,Uc.registerEditorAction)(qd.QuickFixAction),(0,Uc.registerEditorAction)(qd.RefactorAction),(0,Uc.registerEditorAction)(qd.SourceAction),(0,Uc.registerEditorAction)(qd.OrganizeImportsAction),(0,Uc.registerEditorAction)(qd.AutoFixAction),(0,Uc.registerEditorAction)(qd.FixAllAction),(0,Uc.registerEditorCommand)(new(0,qd.CodeActionCommand));hd=r("hsQau"),Jc=r("8bVMi"),gd=r("ky1to"),tu=r("8hC5C"),Uc=r("kO85n"),iu=r("ldsR3");var Th={};e(Th,"CodeLensModel",(function(){return Nh}),(function(e){return Nh=e})),e(Th,"getCodeLensModel",(function(){return Oh}),(function(e){return Oh=e}));Gd=r("7G83E"),Jc=r("8bVMi"),eu=r("avLBk"),iu=r("ldsR3"),nu=r("cDtHV"),gd=r("ky1to"),du=r("cUien");var Mh=r("5jjji"),Lh=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Nh{dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}constructor(){this.lenses=[],this._disposables=new(0,gd.DisposableStore)}}function Oh(e,t){return Lh(this,void 0,void 0,(function*(){const i=iu.CodeLensProviderRegistry.ordered(e),n=new Map,o=new Nh,r=i.map(((i,r)=>Lh(this,void 0,void 0,(function*(){n.set(i,r);try{const n=yield Promise.resolve(i.provideCodeLenses(e,t));n&&o.add(n,i)}catch(e){(0,Jc.onUnexpectedExternalError)(e)}}))));return yield Promise.all(r),o.lenses=o.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:n.get(e.provider)<n.get(t.provider)?-1:n.get(e.provider)>n.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),o}))}du.CommandsRegistry.registerCommand("_executeCodeLensProvider",(function(e,...t){let[i,n]=t;(0,Mh.assertType)(eu.URI.isUri(i)),(0,Mh.assertType)("number"==typeof n||!n);const o=e.get(nu.IModelService).getModel(i);if(!o)throw(0,Jc.illegalArgument)();const r=[],s=new(0,gd.DisposableStore);return Oh(o,Gd.CancellationToken.None).then((e=>{s.add(e);let t=[];for(const i of e.lenses)null==n||Boolean(i.symbol.command)?r.push(i.symbol):n-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(o,i.symbol,Gd.CancellationToken.None)).then((e=>r.push(e||i.symbol))));return Promise.all(t)})).then((()=>r)).finally((()=>{setTimeout((()=>s.dispose()),100)}))}));Tu=r("2cxKt"),fd=r("2KJrz"),_d=r("gHDnG"),bd=r("ewsQ6"),vd=r("02ibr"),yd=r("fmM7j");var Ph=r("1QtdS");class Fh{onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}constructor(e,t,i){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}}class Bh{withCommands(e,t){this._commands.clear();let i=[],n=!1;for(let t=0;t<e.length;t++){const o=e[t];if(o&&(n=!0,o.command)){const n=(0,Ph.renderLabelWithIcons)(o.command.title.trim());o.command.id?(i.push(Tu.$("a",{id:String(t),title:o.command.tooltip},...n)),this._commands.set(String(t),o.command)):i.push(Tu.$("span",{title:o.command.tooltip},...n)),t+1<e.length&&i.push(Tu.$("span",void 0," | "))}}n?(Tu.reset(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Tu.reset(this._domNode,Tu.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+Bh._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}}Bh._idPool=0;class jh{addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,i=t.length;e<i;e++)this._addDecorationsCallbacks[e](t[e])}constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}}class zh{_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new Bh(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),n=this._data[t].symbol;return!(!i||fd.Range.isEmpty(n.range)!==i.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,i)=>{t.addDecoration({range:e.symbol.range,options:_d.ModelDecorationOptions.EMPTY},(e=>this._decorationIds[i]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.domNode.hasAttribute("monaco-visible-view-zone"))return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}constructor(e,t,i,n,o,r,s){let a;this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];let l=[];this._data.forEach(((e,t)=>{e.symbol.command&&l.push(e.symbol),n.addDecoration({range:e.symbol.range,options:_d.ModelDecorationOptions.EMPTY},(e=>this._decorationIds[t]=e)),a=a?fd.Range.plusRange(a,e.symbol.range):fd.Range.lift(e.symbol.range)})),this._viewZone=new Fh(a.startLineNumber-1,r,s),this._viewZoneId=o.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}}(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(bd.editorCodeLensForeground);i&&(t.addRule(`.monaco-editor .codelens-decoration { color: ${i}; }`),t.addRule(`.monaco-editor .codelens-decoration .codicon { color: ${i}; }`));const n=e.getColor(vd.editorActiveLinkForeground);n&&(t.addRule(`.monaco-editor .codelens-decoration > a:hover { color: ${n} !important; }`),t.addRule(`.monaco-editor .codelens-decoration > a:hover .codicon { color: ${n} !important; }`))}));du=r("cUien"),oh=r("26YKj");var Wh={};e(Wh,"ICodeLensCache",(function(){return Gh}),(function(e){return Gh=e}));Iu=r("cwJE1");var Hh=r("gUVjL"),Kh=r("9BG2T"),Uh=r("6Jk2H"),Vh=(fd=r("2KJrz"),hd=r("hsQau"),r("cOD9b")),$h=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},qh=function(e,t){return function(i,n){t(i,n,e)}};const Gh=(0,Iu.createDecorator)("ICodeLensCache");class Zh{constructor(e,t){this.lineCount=e,this.data=t}}let Jh=class{put(e,t){const i=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),n=new(0,Th.CodeLensModel);n.add({lenses:i,dispose:()=>{}},this._fakeProvider);const o=new Zh(e.getLineCount(),n);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const n=new Set;for(const e of i.data.lenses)n.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...n.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const i=t[e],n=[];for(const e of i.lines)n.push({range:new(0,fd.Range)(e,1,e,11)});const o=new(0,Th.CodeLensModel);o.add({lenses:n,dispose(){}},this._fakeProvider),this._cache.set(e,new Zh(i.lineCount,o))}}catch(e){}}constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new(0,Kh.LRUCache)(20,.75);(0,hd.runWhenIdle)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",i=e.get(t,1,"{}");this._deserialize(i),(0,Vh.once)(e.onWillSaveState)((i=>{i.reason===Uh.WillSaveStateReason.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}};Jh=$h([qh(0,Uh.IStorageService)],Jh),(0,Hh.registerSingleton)(Gh,Jh);Tu=r("2cxKt");var Yh=r("lzUMG"),Xh=r("b1c9q"),Qh=(Vc=r("kMb12"),$c=r("jb8ay"),r("c0UDr")),eg=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},tg=function(e,t){return function(i,n){t(i,n,e)}},ig=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let ng=class{dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e,t=this._editor.getOption(15);return!t||t<5?(t=.9*this._editor.getOption(44)|0,e=this._editor.getOption(58)):e=t*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(44))|0,{codeLensHeight:e,fontSize:t}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(14),n=this._editor.getOption(42),o=`--codelens-font-family${this._styleClassName}`,r=`--codelens-font-features${this._styleClassName}`;let s=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${r}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;i&&(s+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o})}`),this._styleElement.textContent=s,this._editor.getContainerDomNode().style.setProperty(o,null!=i?i:"inherit"),this._editor.getContainerDomNode().style.setProperty(r,n.fontFeatureSettings),this._editor.changeViewZones((t=>{for(let i of this._lenses)i.updateHeight(e,t)}))}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(13))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!iu.CodeLensProviderRegistry.has(e))return void(t&&this._localToDispose.add((0,hd.disposableTimeout)((()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const t of iu.CodeLensProviderRegistry.all(e))if("function"==typeof t.onDidChange){let e=t.onDidChange((()=>i.schedule()));this._localToDispose.add(e)}const i=new(0,hd.RunOnceScheduler)((()=>{var t;const n=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,hd.createCancelablePromise)((t=>(0,Th.getCodeLensModel)(e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const o=this._getCodeLensModelDelays.update(e,Date.now()-n);i.delay=o,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),Jc.onUnexpectedError)}),this._getCodeLensModelDelays.get(e));this._localToDispose.add(i),this._localToDispose.add((0,gd.toDisposable)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{let i=[],n=-1;this._lenses.forEach((e=>{e.isValid()&&n!==e.getLineNumber()?(e.update(t),n=e.getLineNumber()):i.push(e)}));let o=new jh;i.forEach((e=>{e.dispose(o,t),this._lenses.splice(this._lenses.indexOf(e),1)})),o.commit(e)}))})),i.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{i.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,gd.toDisposable)((()=>{if(this._editor.getModel()){const e=tu.StableEditorScrollState.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){let i=e.getCommand(t);if(i){this._commandService.executeCommand(i.id,...i.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),i.schedule()}_disposeAllLenses(e,t){const i=new jh;for(const e of this._lenses)e.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t,i=this._editor.getModel().getLineCount(),n=[];for(let o of e.lenses){let e=o.symbol.range.startLineNumber;e<1||e>i||(t&&t[t.length-1].symbol.range.startLineNumber===e?t.push(o):(t=[o],n.push(t)))}const o=tu.StableEditorScrollState.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=new jh;let o=0,s=0;for(;s<n.length&&o<this._lenses.length;){let e=n[s][0].symbol.range.startLineNumber,a=this._lenses[o].getLineNumber();a<e?(this._lenses[o].dispose(i,t),this._lenses.splice(o,1)):a===e?(this._lenses[o].updateCodeLensSymbols(n[s],i),s++,o++):(this._lenses.splice(o,0,new zh(n[s],this._editor,this._styleClassName,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),o++,s++)}for(;o<this._lenses.length;)this._lenses[o].dispose(i,t),this._lenses.splice(o,1);for(;s<n.length;)this._lenses.push(new zh(n[s],this._editor,this._styleClassName,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),s++;i.commit(e)}))})),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],n=[];if(this._lenses.forEach((e=>{const o=e.computeIfNecessary(t);o&&(i.push(o),n.push(e))})),0===i.length)return;const o=Date.now(),r=(0,hd.createCancelablePromise)((e=>{const o=i.map(((i,o)=>{const r=new Array(i.length),s=i.map(((i,n)=>i.symbol.command||"function"!=typeof i.provider.resolveCodeLens?(r[n]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then((e=>{r[n]=e}),Jc.onUnexpectedExternalError)));return Promise.all(s).then((()=>{e.isCancellationRequested||n[o].isDisposed()||n[o].updateCommands(r)}))}));return Promise.all(o)}));this._resolveCodeLensesPromise=r,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDelays.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,Jc.onUnexpectedError)(e),r===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getLenses(){return this._lenses}constructor(e,t,i,n){this._editor=e,this._commandService=t,this._notificationService=i,this._codeLensCache=n,this._disposables=new(0,gd.DisposableStore),this._localToDispose=new(0,gd.DisposableStore),this._lenses=[],this._getCodeLensModelDelays=new(0,Qh.LanguageFeatureRequestDelays)(iu.CodeLensProviderRegistry,250,2500),this._oldCodeLensModels=new(0,gd.DisposableStore),this._resolveCodeLensesDelays=new(0,Qh.LanguageFeatureRequestDelays)(iu.CodeLensProviderRegistry,250,2500),this._resolveCodeLensesScheduler=new(0,hd.RunOnceScheduler)((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(42)||e.hasChanged(15)||e.hasChanged(14))&&this._updateLensStyle(),e.hasChanged(13)&&this._onModelChange()}))),this._disposables.add(iu.CodeLensProviderRegistry.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,Yh.hash)(this._editor.getId()).toString(16),this._styleElement=Tu.createStyleSheet(Tu.isInShadowDOM(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}};ng.ID="css.editor.codeLens",ng=eg([tg(1,du.ICommandService),tg(2,oh.INotificationService),tg(3,Wh.ICodeLensCache)],ng),(0,Uc.registerEditorContribution)(ng.ID,ng),(0,Uc.registerEditorAction)(class extends Uc.EditorAction{run(e,t){return ig(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(Xh.IQuickInputService),n=e.get(du.ICommandService),o=e.get(oh.INotificationService),r=t.getSelection().positionLineNumber,s=t.getContribution(ng.ID),a=[];for(let e of s.getLenses())if(e.getLineNumber()===r)for(let t of e.getItems()){const{command:e}=t.symbol;e&&a.push({label:e.title,command:e})}if(0===a.length)return;const l=yield i.pick(a,{canPickMany:!1});if(l)try{yield n.executeCommand(l.command.id,...l.command.arguments||[])}catch(e){o.error(e)}}))}constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:$c.EditorContextKeys.hasCodeLensProvider,label:(0,Vc.localize)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}});var og={};e(og,"ColorDetector",(function(){return ug}),(function(e){return ug=e}));hd=r("hsQau");var rg=r("jyVY7");Jc=r("8bVMi"),Yh=r("lzUMG"),gd=r("ky1to"),Uc=r("kO85n"),Od=r("6AQ6e"),fd=r("2KJrz"),_d=r("gHDnG"),iu=r("ldsR3"),Gd=r("7G83E"),Jc=r("8bVMi"),eu=r("avLBk"),fd=r("2KJrz"),iu=r("ldsR3"),nu=r("cDtHV");function sg(e,t){const i=[],n=iu.ColorProviderRegistry.ordered(e).reverse().map((n=>Promise.resolve(n.provideDocumentColors(e,t)).then((e=>{if(Array.isArray(e))for(let t of e)i.push({colorInfo:t,provider:n})}))));return Promise.all(n).then((()=>i))}function ag(e,t,i,n){return Promise.resolve(i.provideColorPresentations(e,t,n))}(du=r("cUien")).CommandsRegistry.registerCommand("_executeDocumentColorProvider",(function(e,...t){const[i]=t;if(!(i instanceof eu.URI))throw(0,Jc.illegalArgument)();const n=e.get(nu.IModelService).getModel(i);if(!n)throw(0,Jc.illegalArgument)();const o=[],r=iu.ColorProviderRegistry.ordered(n).reverse().map((e=>Promise.resolve(e.provideDocumentColors(n,Gd.CancellationToken.None)).then((e=>{if(Array.isArray(e))for(let t of e)o.push({range:t.range,color:[t.color.red,t.color.green,t.color.blue,t.color.alpha]})}))));return Promise.all(r).then((()=>o))})),du.CommandsRegistry.registerCommand("_executeColorPresentationProvider",(function(e,...t){const[i,n]=t,{uri:o,range:r}=n;if(!(o instanceof eu.URI&&Array.isArray(i)&&4===i.length&&fd.Range.isIRange(r)))throw(0,Jc.illegalArgument)();const[s,a,l,c]=i,d=e.get(nu.IModelService).getModel(o);if(!d)throw(0,Jc.illegalArgument)();const u={range:r,color:{red:s,green:a,blue:l,alpha:c}},h=[],g=iu.ColorProviderRegistry.ordered(d).reverse().map((e=>Promise.resolve(e.provideColorPresentations(d,u,Gd.CancellationToken.None)).then((e=>{Array.isArray(e)&&h.push(...e)}))));return Promise.all(g).then((()=>h))}));var lg=r("7JMrK"),cg=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},dg=function(e,t){return function(i,n){t(i,n,e)}};let ug=class e extends gd.Disposable{isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageIdentifier(),i=this._configurationService.getValue(t.language);if(i&&"object"==typeof i){const e=i.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(16)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const t=this._editor.getModel();t&&iu.ColorProviderRegistry.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new(0,hd.TimeoutTimer),this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),e.RECOMPUTE_TIME))}))),this.beginCompute())}beginCompute(){this._computePromise=(0,hd.createCancelablePromise)((e=>{const t=this._editor.getModel();return t?sg(t,e):Promise.resolve([])})),this._computePromise.then((e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}),Jc.onUnexpectedError)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:_d.ModelDecorationOptions.EMPTY})));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,i)=>this._colorDatas.set(t,e[i])))}updateColorDecorators(e){let t=[],i={};for(let n=0;n<e.length&&t.length<500;n++){const{red:o,green:r,blue:s,alpha:a}=e[n].colorInfo.color,l=new(0,rg.RGBA)(Math.round(255*o),Math.round(255*r),Math.round(255*s),a);let c=(0,Yh.hash)(`rgba(${l.r},${l.g},${l.b},${l.a})`).toString(16),d=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,u="colorBox-"+c;this._decorationsTypes.has(u)||i[u]||this._codeEditorService.registerDecorationType("color-detector-color",u,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:d},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),i[u]=!0,t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(u,!0)})}this._decorationsTypes.forEach((e=>{i[e]||this._codeEditorService.removeDecorationType(e)})),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,t)}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach((e=>{this._codeEditorService.removeDecorationType(e)}))}getColorData(e){const t=this._editor.getModel();if(!t)return null;const i=t.getDecorationsInRange(fd.Range.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===i.length?null:this._colorDatas.get(i[0].id)}constructor(e,t,i){super(),this._editor=e,this._codeEditorService=t,this._configurationService=i,this._localToDispose=this._register(new(0,gd.DisposableStore)),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=[],this._decorationsTypes=new Set,this._register(e.onDidChangeModel((()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()}))),this._register(e.onDidChangeModelLanguage((()=>this.onModelChanged()))),this._register(iu.ColorProviderRegistry.onDidChange((()=>this.onModelChanged()))),this._register(e.onDidChangeConfiguration((()=>{let e=this._isEnabled;this._isEnabled=this.isEnabled(),e!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}};ug.ID="editor.contrib.colorDetector",ug.RECOMPUTE_TIME=1e3,ug=cg([dg(1,Od.ICodeEditorService),dg(2,lg.IConfigurationService)],ug),(0,Uc.registerEditorContribution)(ug.ID,ug);gd=r("ky1to"),Uc=r("kO85n");var hg={};e(hg,"ModesHoverController",(function(){return bC}),(function(e){return bC=e}));Vc=r("kMb12"),Gc=r("8NQur"),gd=r("ky1to"),Uc=r("kO85n"),fd=r("2KJrz"),$c=r("jb8ay");var gg=r("apdYP"),pg={};e(pg,"ModesContentHoverWidget",(function(){return Oy}),(function(e){return Oy=e}));Tu=r("2cxKt"),gd=r("ky1to"),pd=r("dLnDZ"),fd=r("2KJrz"),_d=r("gHDnG"),iu=r("ldsR3"),hd=r("hsQau"),Jc=r("8bVMi");class fg{setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=(0,hd.createCancelablePromise)((e=>this._computer.computeAsync(e))),this._asyncComputationPromise.then((e=>{this._asyncComputationPromiseDone=!0,this._withAsyncResult(e)}),(e=>this._onError(e)))):this._asyncComputationPromiseDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}_showLoadingMessage(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}_withAsyncResult(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}_onComplete(e){this._completeCallback(e)}_onError(e){this._errorCallback?this._errorCallback(e):(0,Jc.onUnexpectedError)(e)}_onProgress(e){this._progressCallback(e)}start(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}constructor(e,t,i,n,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new(0,hd.RunOnceScheduler)((()=>this._triggerAsyncComputation()),0),this._secondWaitScheduler=new(0,hd.RunOnceScheduler)((()=>this._triggerSyncComputation()),0),this._loadingMessageScheduler=new(0,hd.RunOnceScheduler)((()=>this._showLoadingMessage()),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=t,this._errorCallback=i,this._progressCallback=n}}Qd=r("dD6PO");var mg=r("lAQ7r"),_g=(Tu=r("2cxKt"),r("2YDAi"));gd=r("ky1to");const bg=Tu.$;class vg extends gd.Disposable{onContentsChanged(){this._scrollbar.scanDomNode()}constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new(0,_g.DomScrollableElement)(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}}class yg extends gd.Disposable{static render(e,t,i){return new yg(e,t,i)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}constructor(e,t,i){super(),this.actionContainer=Tu.append(e,bg("div.action-container")),this.action=Tu.append(this.actionContainer,bg("a.action")),this.action.setAttribute("href","#"),this.action.setAttribute("role","button"),t.iconClass&&Tu.append(this.action,bg(`span.icon.${t.iconClass}`));Tu.append(this.action,bg("span")).textContent=i?`${t.label} (${i})`:t.label,this._register(Tu.addDisposableListener(this.actionContainer,Tu.EventType.CLICK,(e=>{e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer)}))),this.setEnabled(!0)}}var wg={};e(wg,"MarkerHoverParticipant",(function(){return _f}),(function(e){return _f=e}));Vc=r("kMb12"),Tu=r("2cxKt"),gd=r("ky1to"),fd=r("2KJrz"),Qd=r("dD6PO"),nh=r("Ma2Pe"),lh=r("liPtJ");var Cg=r("7uwrp"),xg=(Jc=r("8bVMi"),r("kqjci")),Sg={};e(Sg,"MarkerController",(function(){return sf}),(function(e){return sf=e})),e(Sg,"NextMarkerAction",(function(){return lf}),(function(e){return lf=e}));Vc=r("kMb12"),gd=r("ky1to"),Zc=r("c5sLr"),pd=r("dLnDZ"),fd=r("2KJrz"),Uc=r("kO85n"),$c=r("jb8ay");var kg={};e(kg,"MarkerNavigationWidget",(function(){return Pp}),(function(e){return Pp=e}));Vc=r("kMb12"),Tu=r("2cxKt"),gd=r("ky1to"),nh=r("Ma2Pe"),fd=r("2KJrz"),vd=r("02ibr"),yd=r("fmM7j"),rg=r("jyVY7"),_g=r("2YDAi");var Eg=r("6P8o2"),Dg=r("gqnvK");Ld=r("drE9L"),lh=r("liPtJ"),eu=r("avLBk");function Ag(e){if(!e)return;"string"==typeof e&&(e=eu.URI.file(e));const t=(0,lh.basename)(e)||(e.scheme===Dg.Schemas.file?e.fsPath:e.path);return Ld.isWindows&&(0,Eg.isRootOrDriveLetter)(t)?Ig(t):t}function Ig(e){return(0,Eg.hasDriveLetter)(e)?e.charAt(0).toUpperCase()+e.slice(1):e}Qd=r("dD6PO"),Uu=r("7bUGH");var Rg={};e(Rg,"IPeekViewService",(function(){return cp}),(function(e){return cp=e})),e(Rg,"PeekContext",(function(){return dp}),(function(e){return dp=e})),e(Rg,"getOuterEditor",(function(){return gp}),(function(e){return gp=e})),e(Rg,"PeekViewWidget",(function(){return fp}),(function(e){return fp=e})),e(Rg,"peekViewTitleBackground",(function(){return mp}),(function(e){return mp=e})),e(Rg,"peekViewTitleForeground",(function(){return _p}),(function(e){return _p=e})),e(Rg,"peekViewTitleInfoForeground",(function(){return bp}),(function(e){return bp=e})),e(Rg,"peekViewBorder",(function(){return vp}),(function(e){return vp=e})),e(Rg,"peekViewResultsBackground",(function(){return yp}),(function(e){return yp=e})),e(Rg,"peekViewResultsMatchForeground",(function(){return wp}),(function(e){return wp=e})),e(Rg,"peekViewResultsFileForeground",(function(){return Cp}),(function(e){return Cp=e})),e(Rg,"peekViewResultsSelectionBackground",(function(){return xp}),(function(e){return xp=e})),e(Rg,"peekViewResultsSelectionForeground",(function(){return Sp}),(function(e){return Sp=e})),e(Rg,"peekViewEditorBackground",(function(){return kp}),(function(e){return kp=e})),e(Rg,"peekViewEditorGutterBackground",(function(){return Ep}),(function(e){return Ep=e})),e(Rg,"peekViewResultsMatchHighlight",(function(){return Dp}),(function(e){return Dp=e})),e(Rg,"peekViewEditorMatchHighlight",(function(){return Ap}),(function(e){return Ap=e})),e(Rg,"peekViewEditorMatchHighlightBorder",(function(){return Ip}),(function(e){return Ip=e}));Tu=r("2cxKt");var Tg=r("dhO0F"),Mg=(Mu=r("6Dupa"),rg=r("jyVY7"),Uu=r("7bUGH"),r("APDsT")),Lg=(Od=r("6AQ6e"),{});e(Lg,"EmbeddedCodeEditorWidget",(function(){return Bg}),(function(e){return Bg=e}));Mg=r("APDsT"),Od=r("6AQ6e");var Ng=r("im5V4"),Og=(du=r("cUien"),Zc=r("c5sLr"),Iu=r("cwJE1"),oh=r("26YKj"),yd=r("fmM7j"),r("2RRIG")),Pg=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Fg=function(e,t){return function(i,n){t(i,n,e)}};let Bg=class extends Ng.CodeEditorWidget{getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Mg.mixin(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}constructor(e,t,i,n,o,r,s,a,l,c){super(e,Object.assign(Object.assign({},i.getRawOptions()),{overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()}),{},n,o,r,s,a,l,c),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration((e=>this._onParentConfigurationChanged(e))))}};Bg=Pg([Fg(3,Iu.IInstantiationService),Fg(4,Od.ICodeEditorService),Fg(5,du.ICommandService),Fg(6,Zc.IContextKeyService),Fg(7,yd.IThemeService),Fg(8,oh.INotificationService),Fg(9,Og.IAccessibilityService)],Bg);Tu=r("2cxKt");var jg=r("hxCPG"),zg=(rg=r("jyVY7"),r("dnj4A"));gd=r("ky1to"),Mg=r("APDsT"),fd=r("2KJrz"),_d=r("gHDnG");const Wg=new(0,rg.Color)(new(0,rg.RGBA)(0,122,204)),Hg={showArrow:!0,showFrame:!0,className:"",frameColor:Wg,arrowColor:Wg,keepEditorSelection:!1};class Kg{onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}constructor(e,t,i,n,o,r){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=i,this.heightInLines=n,this._onDomNodeTop=o,this._onComputedHeight=r}}class Ug{getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}constructor(e,t){this._id=e,this._domNode=t}}class Vg{dispose(){this.hide(),Tu.removeCSSRulesContainingSelector(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){Tu.removeCSSRulesContainingSelector(this._ruleName),Tu.createCSSRule(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:fd.Range.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}constructor(e){this._editor=e,this._ruleName=Vg._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}}Vg._IdGenerator=new(0,zg.IdGenerator)(".arrow-decoration-");Vc=r("kMb12"),Zc=r("c5sLr"),Iu=r("cwJE1"),Hh=r("gUVjL"),Uc=r("kO85n"),vd=r("02ibr"),$u=r("kWoyS");var $g={};e($g,"createAndFillInActionBarActions",(function(){return ip}),(function(e){return ip=e})),e($g,"MenuEntryActionViewItem",(function(){return np}),(function(e){return np=e})),e($g,"createActionViewItem",(function(){return sp}),(function(e){return sp=e}));Tu=r("2cxKt");var qg=r("5jKgv"),Gg=r("cSwrr");Tu=r("2cxKt"),Gg=r("cSwrr"),Tu=r("2cxKt"),qg=r("5jKgv"),Vu=r("eyNl4"),Mu=r("6Dupa"),Uu=r("7bUGH");class Zg extends Mu.ActionRunner{get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}constructor(e,t){super(),this._onDidChangeVisibility=new(0,Uu.Emitter),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,Tu.append)(e,(0,Tu.$)(".monaco-dropdown")),this._label=(0,Tu.append)(this._element,(0,Tu.$)(".dropdown-label"));let i=t.labelRenderer;i||(i=e=>(e.textContent=t.label||"",null));for(const e of[Tu.EventType.CLICK,Tu.EventType.MOUSE_DOWN,Vu.EventType.Tap])this._register((0,Tu.addDisposableListener)(this.element,e,(e=>Tu.EventHelper.stop(e,!0))));for(const e of[Tu.EventType.MOUSE_DOWN,Vu.EventType.Tap])this._register((0,Tu.addDisposableListener)(this._label,e,(e=>{e instanceof MouseEvent&&e.detail>1||(this.visible?this.hide():this.show())})));this._register((0,Tu.addDisposableListener)(this._label,Tu.EventType.KEY_UP,(e=>{const t=new(0,qg.StandardKeyboardEvent)(e);(t.equals(3)||t.equals(10))&&(Tu.EventHelper.stop(e,!0),this.visible?this.hide():this.show())})));const n=i(this._label);n&&this._register(n),this._register(Vu.Gesture.addTarget(this._label))}}class Jg extends Zg{set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}}Uu=r("7bUGH");class Yg extends Gg.BaseActionViewItem{render(e){this.actionItem=e;const t=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>{this.element=(0,Tu.append)(e,(0,Tu.$)("a.action-label"));let t=[];return"string"==typeof this.options.classNames?t=this.options.classNames.split(/\s+/g).filter((e=>!!e)):this.options.classNames&&(t=this.options.classNames),t.find((e=>"icon"===e))||t.push("codicon"),this.element.classList.add(...t),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new Jg(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility((e=>{var t;null===(t=this.element)||void 0===t||t.setAttribute("aria-expanded",`${e}`),this._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const e=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return e.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const i=!this.getAction().enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",i),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",i)}constructor(e,t,i,n=Object.create(null)){super(null,e,n),this.actionItem=null,this._onDidChangeVisibility=this._register(new(0,Uu.Emitter)),this.menuActionsOrProvider=t,this.contextMenuProvider=i,this.options=n,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}}Mu=r("6Dupa");var Xg=r("koulR"),Qg=(gd=r("ky1to"),Ld=r("drE9L"),Vc=r("kMb12"),wd=r("4Nnjr"),Zc=r("c5sLr"),Lu=r("fRIx8"),Iu=r("cwJE1"),Nu=r("5TiFM"),oh=r("26YKj"),Uh=r("6Jk2H"),yd=r("fmM7j"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),ep=function(e,t){return function(i,n){t(i,n,e)}},tp=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function ip(e,t,i,n,o,r,s){const a=e.getActions(t);return function(e,t,i,n=(e=>"navigation"===e),o=Number.MAX_SAFE_INTEGER,r=(()=>!1),s=!1){let a,l;Array.isArray(t)?(a=t,l=t):(a=t.primary,l=t.secondary);const c=new Set;for(const[t,o]of e){let e;n(t)?(e=a,e.length>0&&s&&e.push(new(0,Mu.Separator))):(e=l,e.length>0&&e.push(new(0,Mu.Separator)));for(let n of o){i&&(n=n instanceof wd.MenuItemAction&&n.alt?n.alt:n);const o=e.push(n);n instanceof Mu.SubmenuAction&&c.add({group:t,action:n,index:o-1})}}for(const{group:e,action:t,index:i}of c){const s=n(e)?a:l,c=t.actions;(c.length<=1||s.length+c.length-2<=o)&&r(t,e,s.length)&&s.splice(i,1,...c)}if(a!==l&&a.length>o){const e=a.splice(o,a.length-o);l.unshift(...e,new(0,Mu.Separator))}}(a,i,!1,"string"==typeof n?e=>e===n:n,o,r,s),function(e){const t=new(0,gd.DisposableStore);for(const[,i]of e)for(const e of i)t.add(e);return t}(a)}let np=class extends Gg.ActionViewItem{get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return tp(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(e){this._notificationService.error(e)}}))}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,i=this._altKey.keyStatus.altKey||(Ld.isWindows||Ld.isLinux)&&this._altKey.keyStatus.shiftKey;const n=()=>{const e=t&&i;e!==this._wantsAltCommand&&(this._wantsAltCommand=e,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event((e=>{i=e.altKey||(Ld.isWindows||Ld.isLinux)&&e.shiftKey,n()}))),this._register((0,Tu.addDisposableListener)(e,"mouseleave",(e=>{t=!1,n()}))),this._register((0,Tu.addDisposableListener)(e,"mouseenter",(e=>{t=!0,n()})))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let n=t?(0,Vc.localize)("titleAndKb","{0} ({1})",i,t):i;if(!this._wantsAltCommand&&this._menuItemAction.alt){const e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),i=t&&t.getLabel(),o=i?(0,Vc.localize)("titleAndKb","{0} ({1})",e,i):e;n+=`\n[${Xg.UILabelProvider.modifierLabels[Ld.OS].altKey}] ${o}`}this.label.title=n}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:i,label:n}=this;if(!i||!n)return;const o=this._commandAction.checked&&(null===(t=e.toggled)||void 0===t?void 0:t.icon)?e.toggled.icon:e.icon;if(o)if(yd.ThemeIcon.isThemeIcon(o)){const e=yd.ThemeIcon.asClassNameArray(o);n.classList.add(...e),this._itemClassDispose.value=(0,gd.toDisposable)((()=>{n.classList.remove(...e)}))}else o.light&&n.style.setProperty("--menu-entry-icon-light",(0,Tu.asCSSUrl)(o.light)),o.dark&&n.style.setProperty("--menu-entry-icon-dark",(0,Tu.asCSSUrl)(o.dark)),n.classList.add("icon"),this._itemClassDispose.value=(0,gd.toDisposable)((()=>{n.classList.remove("icon"),n.style.removeProperty("--menu-entry-icon-light"),n.style.removeProperty("--menu-entry-icon-dark")}))}constructor(e,t,i,n,o){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null==t?void 0:t.draggable}),this._keybindingService=i,this._notificationService=n,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new(0,gd.MutableDisposable)),this._altKey=Tu.ModifierKeyEmitter.getInstance()}};np=Qg([ep(2,Nu.IKeybindingService),ep(3,oh.INotificationService),ep(4,Zc.IContextKeyService)],np);let op=class extends Yg{render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!yd.ThemeIcon.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",(0,Tu.asCSSUrl)(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",(0,Tu.asCSSUrl)(t.dark)))}}constructor(e,t,i){var n,o;const r=Object.assign({},null!=t?t:Object.create(null),{menuAsChild:null===(n=null==t?void 0:t.menuAsChild)||void 0===n||n,classNames:null!==(o=null==t?void 0:t.classNames)&&void 0!==o?o:yd.ThemeIcon.isThemeIcon(e.item.icon)?yd.ThemeIcon.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},i,r)}};op=Qg([ep(2,Lu.IContextMenuService)],op);let rp=class extends Gg.BaseActionViewItem{update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(np,e,void 0),this._defaultAction.actionRunner=new class extends Mu.ActionRunner{runAction(e,t){return tp(this,void 0,void 0,(function*(){yield e.run(void 0)}))}},this._container&&this._defaultAction.render((0,Tu.prepend)(this._container,(0,Tu.$)(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=(0,Tu.$)(".action-container");this._defaultAction.render((0,Tu.append)(this._container,t)),this._register((0,Tu.addDisposableListener)(t,Tu.EventType.KEY_DOWN,(e=>{const t=new(0,qg.StandardKeyboardEvent)(e);t.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())})));const i=(0,Tu.$)(".dropdown-action-container");this._dropdown.render((0,Tu.append)(this._container,i)),this._register((0,Tu.addDisposableListener)(i,Tu.EventType.KEY_DOWN,(e=>{var t;const i=new(0,qg.StandardKeyboardEvent)(e);i.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),null===(t=this._defaultAction.element)||void 0===t||t.focus(),i.stopPropagation())})))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}constructor(e,t,i,n,o,r,s,a){var l,c,d;let u;super(null,e),this._keybindingService=i,this._notificationService=n,this._contextMenuService=o,this._menuService=r,this._instaService=s,this._storageService=a,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let h=a.get(this._storageKey,1);h&&(u=e.actions.find((e=>h===e.id))),u||(u=e.actions[0]),this._defaultAction=this._instaService.createInstance(np,u,void 0);const g=Object.assign({},null!=t?t:Object.create(null),{menuAsChild:null===(l=null==t?void 0:t.menuAsChild)||void 0===l||l,classNames:null!==(c=null==t?void 0:t.classNames)&&void 0!==c?c:["codicon","codicon-chevron-down"],actionRunner:null!==(d=null==t?void 0:t.actionRunner)&&void 0!==d?d:new(0,Mu.ActionRunner)});this._dropdown=new Yg(e,e.actions,this._contextMenuService,g),this._dropdown.actionRunner.onDidRun((e=>{e.action instanceof wd.MenuItemAction&&this.update(e.action)}))}};function sp(e,t,i){return t instanceof wd.MenuItemAction?e.createInstance(np,t,void 0):t instanceof wd.SubmenuItemAction?t.item.rememberDefaultAction?e.createInstance(rp,t,i):e.createInstance(op,t,i):void 0}rp=Qg([ep(2,Nu.IKeybindingService),ep(3,oh.INotificationService),ep(4,Lu.IContextMenuService),ep(5,wd.IMenuService),ep(6,Iu.IInstantiationService),ep(7,Uh.IStorageService)],rp);var ap=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},lp=function(e,t){return function(i,n){t(i,n,e)}};const cp=(0,Iu.createDecorator)("IPeekViewService");var dp,up;(0,Hh.registerSingleton)(cp,class{addExclusiveWidget(e,t){const i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((()=>{const i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))}))})}constructor(){this._widgets=new Map}}),(up=dp||(dp={})).inPeekEditor=new(0,Zc.RawContextKey)("inReferenceSearchEditor",!0,Vc.localize("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),up.notInPeekEditor=up.inPeekEditor.toNegated();let hp=class{dispose(){}constructor(e,t){e instanceof Lg.EmbeddedCodeEditorWidget&&dp.inPeekEditor.bindTo(t)}};function gp(e){let t=e.get(Od.ICodeEditorService).getFocusedCodeEditor();return t instanceof Lg.EmbeddedCodeEditorWidget?t.getParentEditor():t}hp.ID="editor.contrib.referenceController",hp=ap([lp(1,Zc.IContextKeyService)],hp),(0,Uc.registerEditorContribution)(hp.ID,hp);const pp={headerBackgroundColor:rg.Color.white,primaryHeadingColor:rg.Color.fromHex("#333333"),secondaryHeadingColor:rg.Color.fromHex("#6c6c6cb3")};let fp=class extends class{dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null})),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new Vg(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const i=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(i))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const i=t.getDecorationRange(e);return i?i.getStartPosition():void 0}show(e,t){const i=fd.Range.isIRange(e)?fd.Range.lift(e):fd.Range.fromPositions(e);this._isShowing=!0,this._showImpl(i,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:i,options:_d.ModelDecorationOptions.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){t+=2*Math.round(e/3)}if(this.options.showFrame){t+=2*Math.round(e/9)}return t}_showImpl(e,t){const i=e.getStartPosition(),n=this.editor.getLayoutInfo(),o=this._getWidth(n);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(n)+"px";const r=document.createElement("div");r.style.overflow="hidden";const s=this.editor.getOption(58),a=Math.max(12,this.editor.getLayoutInfo().height/s*.8);t=Math.min(t,a);let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(s/3),this._arrow.height=l,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(s/9)),this.editor.changeViewZones((e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new Kg(r,i.lineNumber,i.column,t,(e=>this._onViewZoneTop(e)),(e=>this._onViewZoneHeight(e))),this._viewZone.id=e.addZone(this._viewZone),this._overlayWidget=new Ug("vs.editor.contrib.zoneWidget"+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)})),this.container&&this.options.showFrame){const e=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=e+"px",this.container.style.borderBottomWidth=e+"px"}let d=t*s-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,o),this.options.keepEditorSelection||this.editor.setSelection(e);const u=this.editor.getModel();if(u){const t=e.endLineNumber+1;t<=u.getLineCount()?this.revealLine(t,!1):this.revealLine(u.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones((t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))}))}_initSash(){if(this._resizeSash)return;let e;this._resizeSash=this._disposables.add(new(0,jg.Sash)(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((()=>{e=void 0}))),this._disposables.add(this._resizeSash.onDidChange((t=>{if(e){let i=(t.currentY-e.startY)/this.editor.getOption(58),n=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+n;o>5&&o<35&&this._relayout(o)}})))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new(0,gd.DisposableStore),this.container=null,this._isShowing=!1,this.editor=e,this.options=Mg.deepClone(t),Mg.mixin(this.options,Hg,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((e=>{const t=this._getWidth(e);this.domNode.style.width=t+"px",this.domNode.style.left=this._getLeft(e)+"px",this._onWidth(t)})))}}{dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Tu.$(".head"),this._bodyElement=Tu.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const i=Tu.$(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),Tu.addStandardDisposableListener(i,"click",(e=>this._onTitleClick(e)))),Tu.append(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=Tu.$("span.filename"),this._secondaryHeading=Tu.$("span.dirname"),this._metaHeading=Tu.$("span.meta"),Tu.append(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=Tu.$(".peekview-actions");Tu.append(this._headElement,n);const o=this._getActionBarOptions();this._actionbarWidget=new(0,Tg.ActionBar)(n,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new(0,Mu.Action)("peekview.close",Vc.localize("label.close","Close"),$u.Codicon.close.classNames,!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:$g.createActionViewItem.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Tu.clearNode(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Tu.show(this._metaHeading)):Tu.hide(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0)return void this.dispose();const i=Math.ceil(1.2*this.editor.getOption(58)),n=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(n,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new(0,Uu.Emitter),this.onDidClose=this._onDidClose.event,Mg.mixin(this.options,pp,!1)}};fp=ap([lp(2,Iu.IInstantiationService)],fp);const mp=(0,vd.registerColor)("peekViewTitle.background",{dark:(0,vd.transparent)(vd.editorInfoForeground,.1),light:(0,vd.transparent)(vd.editorInfoForeground,.1),hc:null},Vc.localize("peekViewTitleBackground","Background color of the peek view title area.")),_p=(0,vd.registerColor)("peekViewTitleLabel.foreground",{dark:rg.Color.white,light:rg.Color.black,hc:rg.Color.white},Vc.localize("peekViewTitleForeground","Color of the peek view title.")),bp=(0,vd.registerColor)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161e6",hc:"#FFFFFF99"},Vc.localize("peekViewTitleInfoForeground","Color of the peek view title info.")),vp=(0,vd.registerColor)("peekView.border",{dark:vd.editorInfoForeground,light:vd.editorInfoForeground,hc:vd.contrastBorder},Vc.localize("peekViewBorder","Color of the peek view borders and arrow.")),yp=(0,vd.registerColor)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:rg.Color.black},Vc.localize("peekViewResultsBackground","Background color of the peek view result list.")),wp=(0,vd.registerColor)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:rg.Color.white},Vc.localize("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),Cp=(0,vd.registerColor)("peekViewResult.fileForeground",{dark:rg.Color.white,light:"#1E1E1E",hc:rg.Color.white},Vc.localize("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),xp=(0,vd.registerColor)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},Vc.localize("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),Sp=(0,vd.registerColor)("peekViewResult.selectionForeground",{dark:rg.Color.white,light:"#6C6C6C",hc:rg.Color.white},Vc.localize("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),kp=(0,vd.registerColor)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:rg.Color.black},Vc.localize("peekViewEditorBackground","Background color of the peek view editor.")),Ep=(0,vd.registerColor)("peekViewEditorGutter.background",{dark:kp,light:kp,hc:kp},Vc.localize("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),Dp=(0,vd.registerColor)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},Vc.localize("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),Ap=(0,vd.registerColor)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},Vc.localize("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),Ip=(0,vd.registerColor)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:vd.activeContrastBorder},Vc.localize("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));lh=r("liPtJ"),$u=r("kWoyS");var Rp,Tp=r("eVLa5");vd=r("02ibr"),yd=r("fmM7j");(Rp||(Rp={})).className=function(e){switch(e){case Tp.default.Ignore:return"severity-ignore "+$u.Codicon.info.classNames;case Tp.default.Info:return $u.Codicon.info.classNames;case Tp.default.Warning:return $u.Codicon.warning.classNames;case Tp.default.Error:return $u.Codicon.error.classNames;default:return""}},(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.problemsErrorIconForeground);if(i){const e=$u.Codicon.error.cssSelector;t.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.extensions-viewlet > .extensions ${e} {\n\t\t\t\tcolor: ${i};\n\t\t\t}\n\t\t`)}const n=e.getColor(vd.problemsWarningIconForeground);if(n){const e=$u.Codicon.warning.cssSelector;t.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.extensions-viewlet > .extensions ${e},\n\t\t\t.extension-editor ${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.preferences-editor ${e} {\n\t\t\t\tcolor: ${n};\n\t\t\t}\n\t\t`)}const o=e.getColor(vd.problemsInfoIconForeground);if(o){const e=$u.Codicon.info.cssSelector;t.addRule(`\n\t\t\t.monaco-editor .zone-widget ${e},\n\t\t\t.markers-panel .marker-icon${e},\n\t\t\t.extensions-viewlet > .extensions ${e},\n\t\t\t.text-search-provider-messages .providerMessage ${e},\n\t\t\t.extension-editor ${e} {\n\t\t\t\tcolor: ${o};\n\t\t\t}\n\t\t`)}}));xg=r("kqjci"),wd=r("4Nnjr"),Zc=r("c5sLr"),Iu=r("cwJE1"),Jd=r("aAfu1");var Mp=r("57WTe"),Lp=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Np=function(e,t){return function(i,n){t(i,n,e)}};class Op{dispose(){(0,gd.dispose)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((null==t?void 0:t.length)||0)+2;o&&(r+="string"==typeof o?o.length:o.value.length);const s=(0,Jd.splitLines)(i);this._lines=s.length,this._longestLineLength=0;for(const e of s)this._longestLineLength=Math.max(e.length+r,this._longestLineLength);Tu.clearNode(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const e of s)a=document.createElement("div"),a.innerText=e,""===e&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||o){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o)if("string"==typeof o){const t=document.createElement("span");t.innerText=`(${o})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=Tu.$("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};Tu.append(this._codeLink,Tu.$("span")).innerText=o.value,e.appendChild(this._codeLink)}}if(Tu.clearNode(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,Qd.isNonEmptyArray)(n)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=`${Math.floor(.66*this._editor.getOption(58))}px`,this._lines+=1;for(const t of n){let i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText=`${Ag(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);let o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}const l=this._editor.getOption(42),c=Math.ceil(l.typicalFullwidthCharacterWidth*this._longestLineLength*.75),d=l.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:d})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case nh.MarkerSeverity.Error:t=Vc.localize("Error","Error");break;case nh.MarkerSeverity.Warning:t=Vc.localize("Warning","Warning");break;case nh.MarkerSeverity.Info:t=Vc.localize("Info","Info");break;case nh.MarkerSeverity.Hint:t=Vc.localize("Hint","Hint")}let i=Vc.localize("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){i=`${n.getLineContent(e.startLineNumber)}, ${i}`}return i}constructor(e,t,i,n,o){this._openerService=n,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new(0,gd.DisposableStore),this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(Tu.addStandardDisposableListener(this._relatedBlock,"click",(e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new(0,_g.ScrollableElement)(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{r.style.left=`-${e.scrollLeft}px`,r.style.top=`-${e.scrollTop}px`}))),this._disposables.add(this._scrollable)}}let Pp=class e extends Rg.PeekViewWidget{_applyTheme(e){this._backgroundColor=e.getColor($p);let t=zp,i=Wp;this._severity===nh.MarkerSeverity.Warning?(t=Hp,i=Kp):this._severity===nh.MarkerSeverity.Info&&(t=Up,i=Vp);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(Rg.peekViewTitleForeground),secondaryHeadingColor:e.getColor(Rg.peekViewTitleInfoForeground)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((e=>this.editor.focus())));const i=[],n=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);(0,$g.createAndFillInActionBarActions)(n,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=Tu.append(e,Tu.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Op(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let n=fd.Range.lift(e);const o=this.editor.getPosition();let r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const s=this.editor.getModel();if(s){const e=i>1?Vc.localize("problems","{0} of {1} problems",t,i):Vc.localize("change","{0} of {1} problem",t,i);this.setTitle((0,lh.basename)(s.uri),e)}this._icon.className=`codicon ${Rp.className(nh.MarkerSeverity.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}constructor(e,t,i,n,o,r,s){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=r,this._labelService=s,this._callOnDispose=new(0,gd.DisposableStore),this._onDidSelectRelatedInformation=new(0,Uu.Emitter),this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=nh.MarkerSeverity.Warning,this._backgroundColor=rg.Color.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}};Pp.TitleMenu=new(0,wd.MenuId)("gotoErrorTitleMenu"),Pp=Lp([Np(1,yd.IThemeService),Np(2,xg.IOpenerService),Np(3,wd.IMenuService),Np(4,Iu.IInstantiationService),Np(5,Zc.IContextKeyService),Np(6,Mp.ILabelService)],Pp);let Fp=(0,vd.oneOf)(vd.editorErrorForeground,vd.editorErrorBorder),Bp=(0,vd.oneOf)(vd.editorWarningForeground,vd.editorWarningBorder),jp=(0,vd.oneOf)(vd.editorInfoForeground,vd.editorInfoBorder);const zp=(0,vd.registerColor)("editorMarkerNavigationError.background",{dark:Fp,light:Fp,hc:vd.contrastBorder},Vc.localize("editorMarkerNavigationError","Editor marker navigation widget error color.")),Wp=(0,vd.registerColor)("editorMarkerNavigationError.headerBackground",{dark:(0,vd.transparent)(zp,.1),light:(0,vd.transparent)(zp,.1),hc:null},Vc.localize("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Hp=(0,vd.registerColor)("editorMarkerNavigationWarning.background",{dark:Bp,light:Bp,hc:vd.contrastBorder},Vc.localize("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Kp=(0,vd.registerColor)("editorMarkerNavigationWarning.headerBackground",{dark:(0,vd.transparent)(Hp,.1),light:(0,vd.transparent)(Hp,.1),hc:"#0C141F"},Vc.localize("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Up=(0,vd.registerColor)("editorMarkerNavigationInfo.background",{dark:jp,light:jp,hc:vd.contrastBorder},Vc.localize("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Vp=(0,vd.registerColor)("editorMarkerNavigationInfo.headerBackground",{dark:(0,vd.transparent)(Up,.1),light:(0,vd.transparent)(Up,.1),hc:null},Vc.localize("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),$p=(0,vd.registerColor)("editorMarkerNavigation.background",{dark:vd.editorBackground,light:vd.editorBackground,hc:vd.editorBackground},Vc.localize("editorMarkerNavigationBackground","Editor marker navigation widget background."));(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.textLinkForeground);i&&t.addRule(`.monaco-editor .marker-widget a.code-link span { color: ${i}; }`);const n=e.getColor(vd.textLinkActiveForeground);n&&t.addRule(`.monaco-editor .marker-widget a.code-link span:hover { color: ${n}; }`)}));Od=r("6AQ6e"),wd=r("4Nnjr"),$u=r("kWoyS"),Iu=r("cwJE1");var qp={};e(qp,"IMarkerNavigationService",(function(){return Qp}),(function(e){return Qp=e}));nh=r("Ma2Pe"),eu=r("avLBk"),Uu=r("7bUGH"),gd=r("ky1to"),fd=r("2KJrz"),Jd=r("aAfu1"),Qd=r("dD6PO"),Iu=r("cwJE1"),Hh=r("gUVjL");var Gp=r("cQEXs"),Zp=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Jp=function(e,t){return function(i,n){t(i,n,e)}};class Yp{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let Xp=class e{dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new Yp(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex((t=>t.resource.toString()===e.uri.toString()));o<0&&(o=(0,Qd.binarySearch)(this._markers,{resource:e.uri},((e,t)=>(0,Jd.compare)(e.resource.toString(),t.resource.toString()))),o<0&&(o=~o));for(let i=o;i<this._markers.length;i++){let o=fd.Range.lift(this._markers[i]);if(o.isEmpty()){const t=e.getWordAtPosition(o.getStartPosition());t&&(o=new(0,fd.Range)(o.startLineNumber,t.startColumn,o.startLineNumber,t.endColumn))}if(t&&(o.containsPosition(t)||t.isBeforeOrEqual(o.getStartPosition()))){this._nextIdx=i,n=!0;break}if(this._markers[i].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;let n=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex((t=>t.resource.toString()===e.toString()));if(!(i<0))for(;i<this._markers.length;i++)if(fd.Range.containsPosition(this._markers[i],t))return new Yp(this._markers[i],i+1,this._markers.length)}static _compareMarker(e,t){let i=(0,Jd.compare)(e.resource.toString(),t.resource.toString());return 0===i&&(i=nh.MarkerSeverity.compare(e.severity,t.severity)),0===i&&(i=fd.Range.compareRangesUsingStarts(e,t)),i}constructor(t,i){this._markerService=i,this._onDidChange=new(0,Uu.Emitter),this.onDidChange=this._onDidChange.event,this._dispoables=new(0,gd.DisposableStore),this._markers=[],this._nextIdx=-1,eu.URI.isUri(t)?this._resourceFilter=e=>e.toString()===t.toString():t&&(this._resourceFilter=t);const n=()=>{this._markers=this._markerService.read({resource:eu.URI.isUri(t)?t:void 0,severities:nh.MarkerSeverity.Error|nh.MarkerSeverity.Warning|nh.MarkerSeverity.Info}),"function"==typeof t&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(e._compareMarker)};n(),this._dispoables.add(i.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(n(),this._nextIdx=-1,this._onDidChange.fire())})))}};Xp=Zp([Jp(1,nh.IMarkerService)],Xp);const Qp=(0,Iu.createDecorator)("IMarkerNavigationService");let ef=class{getMarkerList(e){for(let t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new Xp(e,this._markerService)}constructor(e){this._markerService=e,this._provider=new(0,Gp.LinkedList)}};ef=Zp([Jp(0,nh.IMarkerService)],ef),(0,Hh.registerSingleton)(Qp,ef,!0);var tf=r("lfDTl"),nf=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},of=function(e,t){return function(i,n){t(i,n,e)}},rf=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let sf=class e{static get(t){return t.getContribution(e.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(kg.MarkerNavigationWidget,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&fd.Range.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:fd.Range.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new(0,pd.Position)(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){return rf(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(n.move(t,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const o=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);o&&(e.get(o).close(),e.get(o).nagivate(t,i))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}}))}constructor(e,t,i,n,o){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=o,this._sessionDispoables=new(0,gd.DisposableStore),this._editor=e,this._widgetVisible=df.bindTo(this._contextKeyService)}};sf.ID="editor.contrib.markerController",sf=nf([of(1,qp.IMarkerNavigationService),of(2,Zc.IContextKeyService),of(3,Od.ICodeEditorService),of(4,Iu.IInstantiationService)],sf);class af extends Uc.EditorAction{run(e,t){return rf(this,void 0,void 0,(function*(){t.hasModel()&&sf.get(t).nagivate(this._next,this._multiFile)}))}constructor(e,t,i){super(i),this._next=e,this._multiFile=t}}class lf extends af{constructor(){super(!0,!1,{id:lf.ID,label:lf.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:578,weight:100},menuOpts:{menuId:kg.MarkerNavigationWidget.TitleMenu,title:lf.LABEL,icon:(0,tf.registerIcon)("marker-navigation-next",$u.Codicon.arrowDown,Vc.localize("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}lf.ID="editor.action.marker.next",lf.LABEL=Vc.localize("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class cf extends af{constructor(){super(!1,!1,{id:cf.ID,label:cf.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:1602,weight:100},menuOpts:{menuId:kg.MarkerNavigationWidget.TitleMenu,title:lf.LABEL,icon:(0,tf.registerIcon)("marker-navigation-previous",$u.Codicon.arrowUp,Vc.localize("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}cf.ID="editor.action.marker.prev",cf.LABEL=Vc.localize("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");(0,Uc.registerEditorContribution)(sf.ID,sf),(0,Uc.registerEditorAction)(lf),(0,Uc.registerEditorAction)(cf),(0,Uc.registerEditorAction)(class extends af{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:Vc.localize("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:66,weight:100},menuOpts:{menuId:wd.MenuId.MenubarGoMenu,title:Vc.localize({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,Uc.registerEditorAction)(class extends af{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:Vc.localize("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:1090,weight:100},menuOpts:{menuId:wd.MenuId.MenubarGoMenu,title:Vc.localize({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const df=new(0,Zc.RawContextKey)("markersNavigationVisible",!1),uf=Uc.EditorCommand.bindToContribution(sf.get);(0,Uc.registerEditorCommand)(new uf({id:"closeMarkersNavigation",precondition:df,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:$c.EditorContextKeys.focus,primary:9,secondary:[1033]}}));hd=r("hsQau"),cu=r("dkDYJ"),yd=r("fmM7j"),vd=r("02ibr");var hf=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},gf=function(e,t){return function(i,n){t(i,n,e)}};const pf=Tu.$;class ff{isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}}const mf={type:1,filter:{include:ou.QuickFix}};let _f=class{computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const s of t){const t=s.range.startLineNumber===n?s.range.startColumn:1,a=s.range.endLineNumber===n?s.range.endColumn:o,l=this._markerDecorationsService.getMarker(i.uri,s);if(!l)continue;const c=new(0,fd.Range)(e.range.startLineNumber,t,e.range.startLineNumber,a);r.push(new ff(this,c,l))}return r}renderHoverParts(e,t,i){if(!e.length)return gd.Disposable.None;const n=new(0,gd.DisposableStore);e.forEach((e=>t.appendChild(this.renderMarkerHover(e,n))));const o=1===e.length?e[0]:e.sort(((e,t)=>nh.MarkerSeverity.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(o,i,n),n}renderMarkerHover(e,t){const i=pf("div.hover-row"),n=Tu.append(i,pf("div.marker.hover-contents")),{source:o,message:r,code:s,relatedInformation:a}=e.marker;this._editor.applyFontInfo(n);const l=Tu.append(n,pf("span"));if(l.style.whiteSpace="pre-wrap",l.innerText=r,o||s)if(s&&"string"!=typeof s){const e=pf("span");if(o){Tu.append(e,pf("span")).innerText=o}const i=Tu.append(e,pf("a.code-link"));i.setAttribute("href",s.target.toString()),t.add(Tu.addDisposableListener(i,"click",(e=>{this._openerService.open(s.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));Tu.append(i,pf("span")).innerText=s.value;const r=Tu.append(n,e);r.style.opacity="0.6",r.style.paddingLeft="6px"}else{const e=Tu.append(n,pf("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&s?`${o}(${s})`:o||`(${s})`}if((0,Qd.isNonEmptyArray)(a))for(const{message:e,resource:i,startLineNumber:o,startColumn:r}of a){const s=Tu.append(n,pf("div"));s.style.marginTop="8px";const a=Tu.append(s,pf("a"));a.innerText=`${(0,lh.basename)(i)}(${o}, ${r}): `,a.style.cursor="pointer",t.add(Tu.addDisposableListener(a,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(i,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:o,startColumn:r}}}).catch(Jc.onUnexpectedError)})));const l=Tu.append(s,pf("span"));l.innerText=e,this._editor.applyFontInfo(l)}return i}renderMarkerStatusbar(e,t,i){if(e.marker.severity!==nh.MarkerSeverity.Error&&e.marker.severity!==nh.MarkerSeverity.Warning&&e.marker.severity!==nh.MarkerSeverity.Info||t.addAction({label:Vc.localize("view problem","View Problem"),commandId:Sg.NextMarkerAction.ID,run:()=>{this._hover.hide(),Sg.MarkerController.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const n=t.append(pf("div"));this.recentMarkerCodeActionsInfo&&(nh.IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker)===nh.IMarkerData.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(n.textContent=Vc.localize("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?gd.Disposable.None:i.add((0,hd.disposableTimeout)((()=>n.textContent=Vc.localize("checkingForQuickFixes","Checking for quick fixes...")),200));n.textContent||(n.textContent=String.fromCharCode(160));const r=this.getCodeActions(e.marker);i.add((0,gd.toDisposable)((()=>r.cancel()))),r.then((r=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:r.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return r.dispose(),void(n.textContent=Vc.localize("noQuickFixes","No quick fixes available"));n.style.display="none";let s=!1;i.add((0,gd.toDisposable)((()=>{s||r.dispose()}))),t.addAction({label:Vc.localize("quick fixes","Quick Fix..."),commandId:qd.QuickFixAction.Id,run:e=>{s=!0;const t=qd.QuickFixController.get(this._editor),i=Tu.getDomNodePagePosition(e);this._hover.hide(),t.showCodeActions(mf,r,{x:i.left+6,y:i.top+i.height+6})}})}),Jc.onUnexpectedError)}}getCodeActions(e){return(0,hd.createCancelablePromise)((t=>(0,Xd.getCodeActions)(this._editor.getModel(),new(0,fd.Range)(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),mf,cu.Progress.None,t)))}constructor(e,t,i,n){this._editor=e,this._hover=t,this._markerDecorationsService=i,this._openerService=n,this.recentMarkerCodeActionsInfo=void 0}};_f=hf([gf(2,Cg.IMarkerDecorationsService),gf(3,xg.IOpenerService)],_f),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.textLinkForeground);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${i}; }`);const n=e.getColor(vd.textLinkActiveForeground);n&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)}));Iu=r("cwJE1");var bf={};e(bf,"MarkdownHoverParticipant",(function(){return Hf}),(function(e){return Hf=e}));Vc=r("kMb12"),Tu=r("2cxKt"),gd=r("ky1to"),fd=r("2KJrz");var vf={};e(vf,"MarkdownRenderer",(function(){return Of}),(function(e){return Of=e}));Tu=r("2cxKt");var yf=r("eZ0ye"),wf=r("4SWFB"),Cf=r("31k0T");Ph=r("1QtdS"),Jc=r("8bVMi"),Uu=r("7bUGH"),Yc=r("eCoyX"),zg=r("dnj4A");let xf;!function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[s]={exports:{}};t[s][0].call(d.exports,(function(e){return o(t[s][1][e]||e)}),d,d.exports,e,t,i,n)}return i[s].exports}for(var r=void 0,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){var n=e("./toMap");t.exports={uris:n(["background","base","cite","href","longdesc","src","usemap"])}},{"./toMap":10}],2:[function(e,t,i){t.exports={allowedAttributes:{"*":["title","accesskey"],a:["href","name","target","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null}},{}],3:[function(e,t,i){var n=e("./toMap");t.exports={voids:n(["area","br","col","hr","img","wbr","input","base","basefont","link","meta"])}},{"./toMap":10}],4:[function(e,t,i){e("he");var n=e("assignment"),o=e("./parser"),r=e("./sanitizer"),s=e("./defaults");function a(e,t,i){var a=[],l=!0===i?t:n({},s,t),c=r(a,l);return o(e,c),a.join("")}a.defaults=s,t.exports=a,xf=a},{"./defaults":2,"./parser":7,"./sanitizer":8,assignment:6,he:9}],5:[function(e,t,i){t.exports=function(e){return"string"==typeof e?e.toLowerCase():e}},{}],6:[function(e,t,i){t.exports=function e(t){for(var i,n,o=Array.prototype.slice.call(arguments,1);o.length;)for(n in i=o.shift())i.hasOwnProperty(n)&&("[object Object]"===Object.prototype.toString.call(t[n])?t[n]=e(t[n],i[n]):t[n]=i[n]);return t}},{}],7:[function(e,t,i){var n=e("he"),o=e("./lowercase"),r=(e("./attributes"),e("./elements")),s=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,a=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,c=/^</,d=/^<\s*\//;t.exports=function(e,t){for(var i,u=function(){var e=[];return e.lastItem=function(){return e[e.length-1]},e}(),h=e;e;)g();function g(){i=!0,function(){"\x3c!--"===e.substr(0,4)?(n=e.indexOf("--\x3e"),n>=0&&(t.comment&&t.comment(e.substring(4,n)),e=e.substring(n+3),i=!1)):d.test(e)?p(a,m):c.test(e)&&p(s,f);var n;!function(){if(!i)return;var n,o=e.indexOf("<");o>=0?(n=e.substring(0,o),e=e.substring(o)):(n=e,e="");t.chars&&t.chars(n)}()}();var n=e===h;h=e,n&&(e="")}function p(t,n){var o=e.match(t);o&&(e=e.substring(o[0].length),o[0].replace(t,n),i=!1)}function f(e,i,s,a){var c={},d=o(i),h=r.voids[d]||!!a;s.replace(l,(function(e,t,i,o,r){c[t]=void 0===i&&void 0===o&&void 0===r?void 0:n.decode(i||o||r||"")})),h||u.push(d),t.start&&t.start(d,c,h)}function m(e,i){var n,r=0,s=o(i);if(s)for(r=u.length-1;r>=0&&u[r]!==s;r--);if(r>=0){for(n=u.length-1;n>=r;n--)t.end&&t.end(u[n]);u.length=r}}m()}},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],8:[function(e,t,i){var n=e("he"),o=e("./lowercase"),r=e("./attributes"),s=e("./elements");t.exports=function(e,t){var i,a=t||{};return u(),{start:function(e,t,s){var d=o(e);if(i.ignoring)return void c(d);if(-1===(a.allowedTags||[]).indexOf(d))return void c(d);if(a.filter&&!a.filter({tag:d,attrs:t}))return void c(d);l("<"),l(d),Object.keys(t).forEach((function(e){var i,s=t[e],c=(a.allowedClasses||{})[d]||[],u=(a.allowedAttributes||{})[d]||[];u=u.concat((a.allowedAttributes||{})["*"]||[]);var h=o(e);i="class"===h&&-1===u.indexOf(h)?(s=s.split(" ").filter((function(e){return c&&-1!==c.indexOf(e)})).join(" ").trim()).length:-1!==u.indexOf(h)&&(!0!==r.uris[h]||function(e){var t=e[0];if("#"===t||"/"===t)return!0;var i=e.indexOf(":");if(-1===i)return!0;var n=e.indexOf("?");if(-1!==n&&i>n)return!0;var o=e.indexOf("#");return-1!==o&&i>o||a.allowedSchemes.some(r);function r(t){return 0===e.indexOf(t+":")}}(s)),i&&(l(" "),l(e),"string"==typeof s&&(l('="'),l(n.encode(s)),l('"')))})),l(s?"/>":">")},end:function(e){var t=o(e);-1!==(a.allowedTags||[]).indexOf(t)&&!1===i.ignoring?(l("</"),l(t),l(">")):d(t)},chars:function(e){!1===i.ignoring&&l(a.transformText?a.transformText(e):e)}};function l(t){e.push(t)}function c(e){s.voids[e]||(!1===i.ignoring?i={ignoring:e,depth:1}:i.ignoring===e&&i.depth++)}function d(e){i.ignoring===e&&--i.depth<=0&&u()}function u(){i={ignoring:!1,depth:0}}}},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],9:[function(e,t,i){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},r=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,s=/[&<>"']/g;function a(e){return n[e]}function l(e){return o[e]}function c(e){return null==e?"":String(e).replace(s,a)}function d(e){return null==e?"":String(e).replace(r,l)}c.options=d.options={},t.exports={encode:c,escape:c,decode:d,unescape:d,version:"1.0.0-browser"}},{}],10:[function(e,t,i){function n(e,t){return e[t]=!0,e}t.exports=function(e){return e.reduce(n,{})}},{}]},{},[4]);var Sf=xf,kf={};kf=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r={exports:{}};function s(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function a(e){r.exports.defaults=e}r.exports={defaults:s(),getDefaults:s,changeDefaults:a};var l=/[&<>"']/,c=/[&<>"']/g,d=/[<>"']|&(?!#?\w+;)/,u=/[<>"']|&(?!#?\w+;)/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=function(e){return h[e]};function p(e,t){if(t){if(l.test(e))return e.replace(c,g)}else if(d.test(e))return e.replace(u,g);return e}var f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function m(e){return e.replace(f,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var _=/(^|[^\[])\^/g;function b(e,t){e=e.source||e,t=t||"";var i={replace:function(t,n){return n=(n=n.source||n).replace(_,"$1"),e=e.replace(t,n),i},getRegex:function(){return new RegExp(e,t)}};return i}var v=/[^\w:]/g,y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w(e,t,i){if(e){var n;try{n=decodeURIComponent(m(i)).replace(v,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!y.test(i)&&(i=E(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i}var C={},x=/^[^:]+:\/*[^/]*$/,S=/^([^:]+:)[\s\S]*$/,k=/^([^:]+:\/*[^/]*)[\s\S]*$/;function E(e,t){C[" "+e]||(x.test(e)?C[" "+e]=e+"/":C[" "+e]=I(e,"/",!0));var i=-1===(e=C[" "+e]).indexOf(":");return"//"===t.substring(0,2)?i?t:e.replace(S,"$1")+t:"/"===t.charAt(0)?i?t:e.replace(k,"$1")+t:e+t}function D(e){for(var t,i,n=1;n<arguments.length;n++)for(i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function A(e,t){var i=e.replace(/\|/g,(function(e,t,i){for(var n=!1,o=t;--o>=0&&"\\"===i[o];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(i[0].trim()||i.shift(),i[i.length-1].trim()||i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function I(e,t,i){var n=e.length;if(0===n)return"";for(var o=0;o<n;){var r=e.charAt(n-o-1);if(r!==t||i){if(r===t||!i)break;o++}else o++}return e.substr(0,n-o)}function R(e,t){if(-1===e.indexOf(t[1]))return-1;for(var i=e.length,n=0,o=0;o<i;o++)if("\\"===e[o])o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&--n<0)return o;return-1}function T(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function M(e,t){if(t<1)return"";for(var i="";t>1;)1&t&&(i+=e),t>>=1,e+=e;return i+e}var L={escape:p,unescape:m,edit:b,cleanUrl:w,resolveUrl:E,noopTest:{exec:function(){}},merge:D,splitCells:A,rtrim:I,findClosingBracket:R,checkSanitizeDeprecation:T,repeatString:M},N=r.exports.defaults,O=L.rtrim,P=L.splitCells,F=L.escape,B=L.findClosingBracket;function j(e,t,i,n){var o=t.href,r=t.title?F(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?(n.state.inLink=!0,{type:"link",raw:i,href:o,title:r,text:s,tokens:n.inlineTokens(s,[])}):{type:"image",raw:i,href:o,title:r,text:F(s)}}function z(e,t){var i=e.match(/^(\s+)(?:```)/);if(null===i)return t;var n=i[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=n.length?e.slice(n.length):e})).join("\n")}var W=function(){function e(e){this.options=e||N}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:O(i,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var i=t[0],n=z(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:n}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var i=t[2].trim();if(/#$/.test(i)){var n=O(i,"#");this.options.pedantic?i=n.trim():n&&!/ $/.test(n)||(i=n.trim())}var o={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(o.text,o.tokens),o}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var i,n,o,r,s,a,l,c,d,u,h=t[1].trim(),g=h.length>1,p={type:"list",raw:"",ordered:g,start:g?+h.slice(0,-1):"",loose:!1,items:[]};h=g?"\\d{1,9}\\"+h.slice(-1):"\\"+h,this.options.pedantic&&(h=g?h:"[*+-]");for(var f=new RegExp("^( {0,3}"+h+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");e&&!this.rules.block.hr.test(e)&&(t=f.exec(e));){d=t[2].split("\n"),this.options.pedantic?(r=2,u=d[0].trimLeft()):(r=t[2].search(/[^ ]/),r=t[1].length+(r>4?1:r),u=d[0].slice(r-t[1].length)),a=!1,i=t[0],!d[0]&&/^ *$/.test(d[1])&&(i=t[1]+d.slice(0,2).join("\n")+"\n",p.loose=!0,d=[]);var m=new RegExp("^ {0,"+Math.min(3,r-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(s=1;s<d.length;s++){if(c=d[s],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),m.test(c)){i=t[1]+d.slice(0,s).join("\n")+"\n";break}if(a){if(!(c.search(/[^ ]/)>=r)&&c.trim()){i=t[1]+d.slice(0,s).join("\n")+"\n";break}u+="\n"+c.slice(r)}else c.trim()||(a=!0),c.search(/[^ ]/)>=r?u+="\n"+c.slice(r):u+="\n"+c}p.loose||(l?p.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(u))&&(o="[ ] "!==n[0],u=u.replace(/^\[[ xX]\] +/,"")),p.items.push({type:"list_item",raw:i,task:!!n,checked:o,loose:!1,text:u}),p.raw+=i,e=e.slice(i.length)}p.items[p.items.length-1].raw=i.trimRight(),p.items[p.items.length-1].text=u.trimRight(),p.raw=p.raw.trimRight();var _=p.items.length;for(s=0;s<_;s++)this.lexer.state.top=!1,p.items[s].tokens=this.lexer.blockTokens(p.items[s].text,[]),p.items[s].tokens.some((function(e){return"space"===e.type}))&&(p.loose=!0,p.items[s].loose=!0);return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t){var i={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):F(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var i={type:"table",header:P(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=t[0];var n,o,r,s,a=i.align.length;for(n=0;n<a;n++)/^ *-+: *$/.test(i.align[n])?i.align[n]="right":/^ *:-+: *$/.test(i.align[n])?i.align[n]="center":/^ *:-+ *$/.test(i.align[n])?i.align[n]="left":i.align[n]=null;for(a=i.rows.length,n=0;n<a;n++)i.rows[n]=P(i.rows[n],i.header.length).map((function(e){return{text:e}}));for(a=i.header.length,o=0;o<a;o++)i.header[o].tokens=[],this.lexer.inlineTokens(i.header[o].text,i.header[o].tokens);for(a=i.rows.length,o=0;o<a;o++)for(s=i.rows[o],r=0;r<s.length;r++)s[r].tokens=[],this.lexer.inlineTokens(s[r].text,s[r].tokens);return i}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var i={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var i={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t){var i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:F(t[1])}},t.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):F(t[0]):t[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var n=O(i.slice(0,-1),"\\");if((i.length-n.length)%2==0)return}else{var o=B(t[2],"()");if(o>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,r).trim(),t[3]=""}}var s=t[2],a="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);l&&(s=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),j(t,{href:s?s.replace(this.rules.inline._escapes,"$1"):s,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0],this.lexer)}},t.reflink=function(e,t){var i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){var n=(i[2]||i[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])||!n.href){var o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return j(i,n,i[0],this.lexer)}},t.emStrong=function(e,t,i){void 0===i&&(i="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&(!n[3]||!i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var o=n[1]||n[2]||"";if(!o||o&&(""===i||this.rules.inline.punctuation.exec(i))){var r,s,a=n[0].length-1,l=a,c=0,d="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+a);null!=(n=d.exec(t));)if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(s=r.length,n[3]||n[4])l+=s;else if(!((n[5]||n[6])&&a%3)||(a+s)%3){if(!((l-=s)>0)){if(s=Math.min(s,s+l+c),Math.min(a,s)%2){var u=e.slice(1,a+n.index+s);return{type:"em",raw:e.slice(0,a+n.index+s+1),text:u,tokens:this.lexer.inlineTokens(u,[])}}var h=e.slice(2,a+n.index+s-1);return{type:"strong",raw:e.slice(0,a+n.index+s+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}else c+=s}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var i=t[2].replace(/\n/g," "),n=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return n&&o&&(i=i.substring(1,i.length-1)),i=F(i,!0),{type:"codespan",raw:t[0],text:i}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},t.autolink=function(e,t){var i,n,o=this.rules.inline.autolink.exec(e);if(o)return n="@"===o[2]?"mailto:"+(i=F(this.options.mangle?t(o[1]):o[1])):i=F(o[1]),{type:"link",raw:o[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}},t.url=function(e,t){var i;if(i=this.rules.inline.url.exec(e)){var n,o;if("@"===i[2])o="mailto:"+(n=F(this.options.mangle?t(i[0]):i[0]));else{var r;do{r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(r!==i[0]);n=F(i[0]),o="www."===i[1]?"http://"+n:n}return{type:"link",raw:i[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}},t.inlineText=function(e,t){var i,n=this.rules.inline.text.exec(e);if(n)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):F(n[0]):n[0]:F(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:i}},e}(),H=L.noopTest,K=L.edit,U=L.merge,V={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:H,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};V.def=K(V.def).replace("label",V._label).replace("title",V._title).getRegex(),V.bullet=/(?:[*+-]|\d{1,9}[.)])/,V.listItemStart=K(/^( *)(bull) */).replace("bull",V.bullet).getRegex(),V.list=K(V.list).replace(/bull/g,V.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+V.def.source+")").getRegex(),V._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",V._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,V.html=K(V.html,"i").replace("comment",V._comment).replace("tag",V._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),V.paragraph=K(V._paragraph).replace("hr",V.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",V._tag).getRegex(),V.blockquote=K(V.blockquote).replace("paragraph",V.paragraph).getRegex(),V.normal=U({},V),V.gfm=U({},V.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),V.gfm.table=K(V.gfm.table).replace("hr",V.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",V._tag).getRegex(),V.pedantic=U({},V.normal,{html:K("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",V._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:H,paragraph:K(V.normal._paragraph).replace("hr",V.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",V.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var $={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:H,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:H,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};$.punctuation=K($.punctuation).replace(/punctuation/g,$._punctuation).getRegex(),$.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,$.escapedEmSt=/\\\*|\\_/g,$._comment=K(V._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),$.emStrong.lDelim=K($.emStrong.lDelim).replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimAst=K($.emStrong.rDelimAst,"g").replace(/punct/g,$._punctuation).getRegex(),$.emStrong.rDelimUnd=K($.emStrong.rDelimUnd,"g").replace(/punct/g,$._punctuation).getRegex(),$._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,$._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,$._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,$.autolink=K($.autolink).replace("scheme",$._scheme).replace("email",$._email).getRegex(),$._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,$.tag=K($.tag).replace("comment",$._comment).replace("attribute",$._attribute).getRegex(),$._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,$._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,$.link=K($.link).replace("label",$._label).replace("href",$._href).replace("title",$._title).getRegex(),$.reflink=K($.reflink).replace("label",$._label).getRegex(),$.reflinkSearch=K($.reflinkSearch,"g").replace("reflink",$.reflink).replace("nolink",$.nolink).getRegex(),$.normal=U({},$),$.pedantic=U({},$.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:K(/^!?\[(label)\]\((.*?)\)/).replace("label",$._label).getRegex(),reflink:K(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$._label).getRegex()}),$.gfm=U({},$.normal,{escape:K($.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),$.gfm.url=K($.gfm.url,"i").replace("email",$.gfm._extended_email).getRegex(),$.breaks=U({},$.gfm,{br:K($.br).replace("{2,}","*").getRegex(),text:K($.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var q={block:V,inline:$},G=W,Z=r.exports.defaults,J=q.block,Y=q.inline,X=L.repeatString;function Q(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function ee(e){var t,i,n="",o=e.length;for(t=0;t<o;t++)i=e.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),n+="&#"+i+";";return n}var te=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Z,this.options.tokenizer=this.options.tokenizer||new G,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:J.normal,inline:Y.normal};this.options.pedantic?(t.block=J.pedantic,t.inline=Y.pedantic):this.options.gfm&&(t.block=J.gfm,this.options.breaks?t.inline=Y.breaks:t.inline=Y.gfm),this.tokenizer.rules=t}e.lex=function(t,i){return new e(i).lex(t)},e.lexInline=function(t,i){return new e(i).inlineTokens(t)};var i=e.prototype;return i.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},i.blockTokens=function(e,t){var i,n,o,r,s=this;for(void 0===t&&(t=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(n){return!!(i=n.call({lexer:s},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e))e=e.substring(i.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?t.push(i):(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.list(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.def(e))e=e.substring(i.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text);else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(o=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,i=e.slice(1),n=void 0;s.options.extensions.startBlock.forEach((function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),this.state.top&&(i=this.tokenizer.paragraph(o)))n=t[t.length-1],r&&"paragraph"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);else if(i=this.tokenizer.text(e))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===n.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return this.state.top=!0,t},i.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},i.inlineTokens=function(e,t){var i,n,o,r=this;void 0===t&&(t=[]);var s,a,l,c=e;if(this.tokens.links){var d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(c));)d.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,s.index)+"["+X("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,s.index)+"["+X("a",s[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(s=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,s.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(n){return!!(i=n.call({lexer:r},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)}))))if(i=this.tokenizer.escape(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.tag(e))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.link(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(i.raw.length),(n=t[t.length-1])&&"text"===i.type&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(i=this.tokenizer.emStrong(e,c,l))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.codespan(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.br(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.del(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.autolink(e,ee))e=e.substring(i.raw.length),t.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(e,ee))){if(o=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,i=e.slice(1),n=void 0;r.options.extensions.startInline.forEach((function(e){"number"==typeof(n=e.call({lexer:this},i))&&n>=0&&(t=Math.min(t,n))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}(),i=this.tokenizer.inlineText(o,Q))e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),a=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=i.raw,n.text+=i.text):t.push(i);else if(e){var u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else e=e.substring(i.raw.length),t.push(i);return t},t(e,null,[{key:"rules",get:function(){return{block:J,inline:Y}}}]),e}(),ie=r.exports.defaults,ne=L.cleanUrl,oe=L.escape,re=function(){function e(e){this.options=e||ie}var t=e.prototype;return t.code=function(e,t,i){var n=(t||"").match(/\S*/)[0];if(this.options.highlight){var o=this.options.highlight(e,n);null!=o&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+"\n",n?'<pre><code class="'+this.options.langPrefix+oe(n,!0)+'">'+(i?e:oe(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:oe(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,i){var n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+n+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,i){if(null===(e=ne(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<a href="'+oe(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>"},t.image=function(e,t,i){if(null===(e=ne(this.options.sanitize,this.options.baseUrl,e)))return i;var n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),se=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,i){return""+i},t.image=function(e,t,i){return""+i},t.br=function(){return""},e}(),ae=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do{i=e+"-"+ ++n}while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i},t.slug=function(e,t){void 0===t&&(t={});var i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)},e}(),le=re,ce=se,de=ae,ue=r.exports.defaults,he=L.unescape,ge=function(){function e(e){this.options=e||ue,this.options.renderer=this.options.renderer||new le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ce,this.slugger=new de}e.parse=function(t,i){return new e(i).parse(t)},e.parseInline=function(t,i){return new e(i).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var i,n,o,r,s,a,l,c,d,u,h,g,p,f,m,_,b,v,y,w="",C=e.length;for(i=0;i<C;i++)if(u=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type])||!1===(y=this.options.extensions.renderers[u.type].call({parser:this},u))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type))switch(u.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(u.tokens),u.depth,he(this.parseInline(u.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(u.text,u.lang,u.escaped);continue;case"table":for(c="",l="",r=u.header.length,n=0;n<r;n++)l+=this.renderer.tablecell(this.parseInline(u.header[n].tokens),{header:!0,align:u.align[n]});for(c+=this.renderer.tablerow(l),d="",r=u.rows.length,n=0;n<r;n++){for(l="",s=(a=u.rows[n]).length,o=0;o<s;o++)l+=this.renderer.tablecell(this.parseInline(a[o].tokens),{header:!1,align:u.align[o]});d+=this.renderer.tablerow(l)}w+=this.renderer.table(c,d);continue;case"blockquote":d=this.parse(u.tokens),w+=this.renderer.blockquote(d);continue;case"list":for(h=u.ordered,g=u.start,p=u.loose,r=u.items.length,d="",n=0;n<r;n++)_=(m=u.items[n]).checked,b=m.task,f="",m.task&&(v=this.renderer.checkbox(_),p?m.tokens.length>0&&"paragraph"===m.tokens[0].type?(m.tokens[0].text=v+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=v+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:v}):f+=v),f+=this.parse(m.tokens,p),d+=this.renderer.listitem(f,b,_);w+=this.renderer.list(d,h,g);continue;case"html":w+=this.renderer.html(u.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(u.tokens));continue;case"text":for(d=u.tokens?this.parseInline(u.tokens):u.text;i+1<C&&"text"===e[i+1].type;)d+="\n"+((u=e[++i]).tokens?this.parseInline(u.tokens):u.text);w+=t?this.renderer.paragraph(d):d;continue;default:var x='Token with "'+u.type+'" type was not found.';if(this.options.silent)return void console.error(x);throw new Error(x)}else w+=y||"";return w},t.parseInline=function(e,t){t=t||this.renderer;var i,n,o,r="",s=e.length;for(i=0;i<s;i++)if(n=e[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type])||!1===(o=this.options.extensions.renderers[n.type].call({parser:this},n))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type))switch(n.type){case"escape":case"text":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;default:var a='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else r+=o||"";return r},e}(),pe=te,fe=ge,me=W,_e=re,be=se,ve=ae,ye=L.merge,we=L.checkSanitizeDeprecation,Ce=L.escape,xe=r.exports.getDefaults,Se=r.exports.changeDefaults,ke=r.exports.defaults;function Ee(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(i=t,t=null),t=ye({},Ee.defaults,t||{}),we(t),i){var n,o=t.highlight;try{n=pe.lex(e,t)}catch(e){return i(e)}var r=function(e){var r;if(!e)try{t.walkTokens&&Ee.walkTokens(n,t.walkTokens),r=fe.parse(n,t)}catch(t){e=t}return t.highlight=o,e?i(e):i(null,r)};if(!o||o.length<3)return r();if(delete t.highlight,!n.length)return r();var s=0;return Ee.walkTokens(n,(function(e){"code"===e.type&&(s++,setTimeout((function(){o(e.text,e.lang,(function(t,i){if(t)return r(t);null!=i&&i!==e.text&&(e.text=i,e.escaped=!0),0==--s&&r()}))}),0))})),void(0===s&&r())}try{var a=pe.lex(e,t);return t.walkTokens&&Ee.walkTokens(a,t.walkTokens),fe.parse(a,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Ce(e.message+"",!0)+"</pre>";throw e}}return Ee.options=Ee.setOptions=function(e){return ye(Ee.defaults,e),Se(Ee.defaults),Ee},Ee.getDefaults=xe,Ee.defaults=ke,Ee.use=function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var o,r=ye.apply(void 0,[{}].concat(i)),s=Ee.defaults.extensions||{renderers:{},childTokens:{}};i.forEach((function(t){if(t.extensions&&(o=!0,t.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=s.renderers?s.renderers[e.name]:null;s.renderers[e.name]=t?function(){for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");s[e.level]?s[e.level].unshift(e.tokenizer):s[e.level]=[e.tokenizer],e.start&&("block"===e.level?s.startBlock?s.startBlock.push(e.start):s.startBlock=[e.start]:"inline"===e.level&&(s.startInline?s.startInline.push(e.start):s.startInline=[e.start]))}e.childTokens&&(s.childTokens[e.name]=e.childTokens)}))),t.renderer&&function(){var e=Ee.defaults.renderer||new _e,i=function(i){var n=e[i];e[i]=function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];var a=t.renderer[i].apply(e,r);return!1===a&&(a=n.apply(e,r)),a}};for(var n in t.renderer)i(n);r.renderer=e}(),t.tokenizer&&function(){var e=Ee.defaults.tokenizer||new me,i=function(i){var n=e[i];e[i]=function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];var a=t.tokenizer[i].apply(e,r);return!1===a&&(a=n.apply(e,r)),a}};for(var n in t.tokenizer)i(n);r.tokenizer=e}(),t.walkTokens){var i=Ee.defaults.walkTokens;r.walkTokens=function(n){t.walkTokens.call(e,n),i&&i(n)}}o&&(r.extensions=s),Ee.setOptions(r)}))},Ee.walkTokens=function(e,t){for(var i,n=function(){var e=i.value;switch(t(e),e.type){case"table":for(var n,r=o(e.header);!(n=r()).done;){var s=n.value;Ee.walkTokens(s.tokens,t)}for(var a,l=o(e.rows);!(a=l()).done;)for(var c,d=o(a.value);!(c=d()).done;){var u=c.value;Ee.walkTokens(u.tokens,t)}break;case"list":Ee.walkTokens(e.items,t);break;default:Ee.defaults.extensions&&Ee.defaults.extensions.childTokens&&Ee.defaults.extensions.childTokens[e.type]?Ee.defaults.extensions.childTokens[e.type].forEach((function(i){Ee.walkTokens(e[i],t)})):e.tokens&&Ee.walkTokens(e.tokens,t)}},r=o(e);!(i=r()).done;)n()},Ee.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=ye({},Ee.defaults,t||{}),we(t);try{var i=pe.lexInline(e,t);return t.walkTokens&&Ee.walkTokens(i,t.walkTokens),fe.parseInline(i,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Ce(e.message+"",!0)+"</pre>";throw e}},Ee.Parser=fe,Ee.parser=fe.parse,Ee.Renderer=_e,Ee.TextRenderer=be,Ee.Lexer=pe,Ee.lexer=pe.lex,Ee.Tokenizer=me,Ee.Slugger=ve,Ee.parse=Ee,Ee}();var Ef,Df=r("8W0UO");Dg=r("gqnvK"),Mg=r("APDsT"),lh=r("liPtJ"),Jd=r("aAfu1"),eu=r("avLBk");const Af=null===(Ef=window.trustedTypes)||void 0===Ef?void 0:Ef.createPolicy("insane",{createHTML:(e,t)=>Sf(e,t)});function If(e,t={},i={}){var n;const o=(0,wf.createElement)(t),r=function(t){let i;try{i=(0,Df.parse)(decodeURIComponent(t))}catch(e){}return i?(i=(0,Mg.cloneAndChange)(i,(t=>e.uris&&e.uris[t]?eu.URI.revive(e.uris[t]):void 0)),encodeURIComponent(JSON.stringify(i))):t},s=function(t,i){const n=e.uris&&e.uris[t];if(!n)return t;let o=eu.URI.revive(n);return i?t.startsWith(Dg.Schemas.data+":")?t:Dg.FileAccess.asBrowserUri(o).toString(!0):eu.URI.parse(t).toString()===o.toString()?t:(o.query&&(o=o.with({query:r(o.query)})),o.toString())};let a;const l=new Promise((e=>a=e)),c=new kf.Renderer;if(c.image=(e,i,n)=>{let o=[],r=[];if(e){({href:e,dimensions:o}=td(e)),e=s(e,!0);try{const i=eu.URI.parse(e);t.baseUrl&&i.scheme===Dg.Schemas.file&&(e=(0,lh.resolvePath)(t.baseUrl,e).toString())}catch(e){}r.push(`src="${e}"`)}return n&&r.push(`alt="${n}"`),i&&r.push(`title="${i}"`),o.length&&(r=r.concat(o)),"<img "+r.join(" ")+">"},c.link=(i,n,o)=>{if(i===o&&(o=ed(o)),i=s(i,!1),t.baseUrl){/^\w[\w\d+.-]*:/.test(i)||(i=(0,lh.resolvePath)(t.baseUrl,i).toString())}return n=ed(n),!(i=ed(i))||i.match(/^data:|javascript:/i)||i.match(/^command:/i)&&!e.isTrusted||i.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?o:`<a href="#" data-href="${i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}" title="${n||i}">${o}</a>`},c.paragraph=t=>{if(e.supportThemeIcons){t=(0,Ph.renderLabelWithIcons)(t).map((e=>"string"==typeof e?e:e.outerHTML)).join("")}return`<p>${t}</p>`},t.codeBlockRenderer&&(c.code=(e,i)=>{const n=t.codeBlockRenderer(i,e),r=zg.defaultGenerator.nextId(),s=Promise.all([n,l]).then((e=>{const t=o.querySelector(`div[data-code="${r}"]`);t&&Tu.reset(t,e[0])})).catch((e=>{}));return t.asyncRenderCallback&&s.then(t.asyncRenderCallback),`<div class="code" data-code="${r}">${(0,Jd.escape)(e)}</div>`}),t.actionHandler){const e=t.actionHandler.disposables.add(new(0,yf.DomEmitter)(o,"click")),i=t.actionHandler.disposables.add(new(0,yf.DomEmitter)(o,"auxclick"));t.actionHandler.disposables.add(Uu.Event.any(e.event,i.event)((e=>{const i=new(0,Cf.StandardMouseEvent)(e);if(!i.leftButton&&!i.middleButton)return;let n=i.target;if("A"===n.tagName||(n=n.parentElement,n&&"A"===n.tagName))try{const e=n.dataset.href;e&&t.actionHandler.callback(e,i)}catch(e){(0,Jc.onUnexpectedError)(e)}finally{i.preventDefault()}})))}i.sanitizer=t=>(e.isTrusted?t.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?t:"",i.sanitize=!0,i.silent=!0,i.renderer=c;let d=null!==(n=e.value)&&void 0!==n?n:"";d.length>1e5&&(d=`${d.substr(0,1e5)}…`),e.supportThemeIcons&&(d=(0,Yc.markdownEscapeEscapedIcons)(d));const u=kf.parse(d,i);if(o.innerHTML=function(e,t){var i;const n=function(e){const t=[Dg.Schemas.http,Dg.Schemas.https,Dg.Schemas.mailto,Dg.Schemas.data,Dg.Schemas.file,Dg.Schemas.vscodeFileResource,Dg.Schemas.vscodeRemote,Dg.Schemas.vscodeRemoteResource];e.isTrusted&&t.push(Dg.Schemas.command);return{allowedSchemes:t,allowedTags:["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],allowedAttributes:{a:["href","name","target","data-href"],img:["src","title","alt","width","height"],div:["class","data-code"],span:["class","style"],th:["align"],td:["align"]},filter:t=>"span"!==t.tag||!e.isTrusted||(t.attrs.style&&1===Object.keys(t.attrs).length?!!t.attrs.style.match(/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/):!!t.attrs.class&&!!t.attrs.class.match(/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/))}}(e);return null!==(i=null==Af?void 0:Af.createHTML(t,n))&&void 0!==i?i:Sf(t,n)}(e,u),a(),t.asyncRenderCallback)for(const e of o.getElementsByTagName("img")){const i=Tu.addDisposableListener(e,"load",(()=>{i.dispose(),t.asyncRenderCallback()}))}return o}xg=r("kqjci"),gg=r("apdYP"),Jc=r("8bVMi");var Rf,Tf=r("eFEhq"),Mf=(Uu=r("7bUGH"),gd=r("ky1to"),iu=r("ldsR3"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),Lf=function(e,t){return function(i,n){t(i,n,e)}},Nf=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let Of=class e{dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){const n=new(0,gd.DisposableStore);let o;return o=e?If(e,Object.assign(Object.assign({},this._getRenderOptions(e,n)),t),i):document.createElement("span"),{element:o,dispose:()=>n.dispose()}}_getRenderOptions(t,i){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(t,i)=>Nf(this,void 0,void 0,(function*(){var n,o,r,s;let a;t?a=this._modeService.getModeIdForLanguageName(t):this._options.editor&&(a=null===(n=this._options.editor.getModel())||void 0===n?void 0:n.getLanguageIdentifier().language),a||(a="plaintext"),this._modeService.triggerMode(a);const l=null!==(o=yield iu.TokenizationRegistry.getPromise(a))&&void 0!==o?o:void 0,c=document.createElement("span");c.innerHTML=null!==(s=null===(r=e._ttpTokenizer)||void 0===r?void 0:r.createHTML(i,l))&&void 0!==s?s:(0,Tf.tokenizeToString)(i,l);let d=this._options.codeBlockFontFamily;return this._options.editor&&(d=this._options.editor.getOption(42).fontFamily),d&&(c.style.fontFamily=d),c})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>this._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:t.isTrusted}).catch(Jc.onUnexpectedError),disposables:i}}}constructor(e,t,i){this._options=e,this._modeService=t,this._openerService=i,this._onDidRenderAsync=new(0,Uu.Emitter),this.onDidRenderAsync=this._onDidRenderAsync.event}};Of._ttpTokenizer=null===(Rf=window.trustedTypes)||void 0===Rf?void 0:Rf.createPolicy("tokenizeToString",{createHTML:(e,t)=>(0,Tf.tokenizeToString)(e,t)}),Of=Mf([Lf(1,gg.IModeService),Lf(2,xg.IOpenerService)],Of);Qd=r("dD6PO"),xg=r("kqjci"),gg=r("apdYP"),iu=r("ldsR3"),Qd=r("dD6PO"),Gd=r("7G83E"),Jc=r("8bVMi"),Uc=r("kO85n"),iu=r("ldsR3");function Pf(e,t,i){const n=iu.HoverProviderRegistry.ordered(e).map((n=>Promise.resolve(n.provideHover(e,t,i)).then((e=>e&&function(e){const t=void 0!==e.range,i=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&i}(e)?e:void 0),(e=>{(0,Jc.onUnexpectedExternalError)(e)}))));return Promise.all(n).then(Qd.coalesce)}(0,Uc.registerModelAndPositionCommand)("_executeHoverProvider",((e,t)=>Pf(e,t,Gd.CancellationToken.None)));pd=r("dLnDZ"),lg=r("7JMrK");var Ff=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Bf=function(e,t){return function(i,n){t(i,n,e)}},jf=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const zf=Tu.$;class Wf{isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}constructor(e,t,i){this.owner=e,this.range=t,this.contents=i}}let Hf=class{createLoadingMessage(e){return new Wf(this,e.range,[(new Xc).appendText(Vc.localize("modesContentHover.loading","Loading..."))])}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),n=e.range.startLineNumber,o=i.getLineMaxColumn(n),r=[];for(const i of t){const t=i.range.startLineNumber===n?i.range.startColumn:1,s=i.range.endLineNumber===n?i.range.endColumn:o,a=i.options.hoverMessage;if(!a||Qc(a))continue;const l=new(0,fd.Range)(e.range.startLineNumber,t,e.range.startLineNumber,s);r.push(new Wf(this,l,(0,Qd.asArray)(a)))}const s=this._editor.getModel().getLineLength(n),a=this._configurationService.getValue("editor.maxTokenizationLineLength");return"number"==typeof a&&s>=a&&r.push(new Wf(this,new(0,fd.Range)(n,1,n,s+1),[{value:Vc.localize("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),r}computeAsync(e,t,i){return jf(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||1!==e.type)return Promise.resolve([]);const t=this._editor.getModel();if(!iu.HoverProviderRegistry.has(t))return Promise.resolve([]);const n=yield Pf(t,new(0,pd.Position)(e.range.startLineNumber,e.range.startColumn),i),o=[];for(const t of n){if(Qc(t.contents))continue;const i=t.range?fd.Range.lift(t.range):e.range;o.push(new Wf(this,i,t.contents))}return o}))}renderHoverParts(e,t,i){const n=new(0,gd.DisposableStore);for(const i of e)for(const e of i.contents){if(Qc(e))continue;const i=zf("div.hover-row.markdown-hover"),o=Tu.append(i,zf("div.hover-contents")),r=n.add(new(0,vf.MarkdownRenderer)({editor:this._editor},this._modeService,this._openerService));n.add(r.onDidRenderAsync((()=>{o.className="hover-contents code-hover-contents",this._hover.onContentsChanged()})));const s=n.add(r.render(e));o.appendChild(s.element),t.appendChild(i)}return n}constructor(e,t,i,n,o){this._editor=e,this._hover=t,this._modeService=i,this._openerService=n,this._configurationService=o}};Hf=Ff([Bf(2,gg.IModeService),Bf(3,xg.IOpenerService),Bf(4,lg.IConfigurationService)],Hf);var Kf={};e(Kf,"InlineCompletionsHoverParticipant",(function(){return gy}),(function(e){return gy=e}));Vc=r("kMb12");class Uf{equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}constructor(e,t){this.priority=e,this.range=t,this.type=1}}class Vf{equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}constructor(e,t,i){this.priority=e,this.owner=t,this.range=i,this.type=2}}fd=r("2KJrz"),gd=r("ky1to");var $f={};e($f,"GhostTextController",(function(){return iy}),(function(e){return iy=e})),e($f,"commitInlineSuggestionAction",(function(){return sy}),(function(e){return sy=e})),e($f,"ShowNextInlineSuggestionAction",(function(){return ay}),(function(e){return ay=e})),e($f,"ShowPreviousInlineSuggestionAction",(function(){return ly}),(function(e){return ly=e}));gd=r("ky1to"),Uc=r("kO85n"),$c=r("jb8ay");var qf={};e(qf,"GhostTextWidget",(function(){return rm}),(function(e){return rm=e}));Tu=r("2cxKt"),gd=r("ky1to"),fd=r("2KJrz"),Od=r("6AQ6e"),Jd=r("aAfu1");var Gf,Zf=r("UixEE"),Jf=r("kNKTn"),Yf=r("ikldm"),Xf=r("3qvxX"),Qf=r("4cufD"),em=(pd=r("dLnDZ"),yd=r("fmM7j"),bd=r("ewsQ6"),rg=r("jyVY7"),r("44khe")),tm=r("9wQWq"),im=(Zc=r("c5sLr"),Iu=r("cwJE1"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),nm=function(e,t){return function(i,n){t(i,n,e)}};const om=null===(Gf=window.trustedTypes)||void 0===Gf?void 0:Gf.createPolicy("editorGhostText",{createHTML:e=>e});let rm=class extends gd.Disposable{shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();const i=new Array,n=new Array;function o(e,t){if(n.length>0){const i=n[n.length-1];t&&i.decorations.push(new(0,tm.LineDecoration)(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)n.push({content:i,decorations:t?[new(0,tm.LineDecoration)(1,i.length+1,t,0)]:[]})}const r=this.editor.getModel().getLineContent(t.lineNumber);let s;this.editor.getModel().getLineTokens(t.lineNumber);let a=0;for(const e of t.parts){let t=e.lines;void 0===s?(i.push({column:e.column,text:t[0],preview:e.preview}),t=t.slice(1)):o([r.substring(a,e.column-1)],void 0),t.length>0&&(o(t,"ghost-text"),void 0===s&&e.column<=r.length&&(s=e.column)),a=e.column-1}void 0!==s&&o([r.substring(a)],void 0),this.partsWidget.setParts(t.lineNumber,i,void 0!==s?{column:s,length:r.length+1-s}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),t.parts.some((e=>e.lines.length<0))?this.viewMoreContentWidget=this.renderViewMoreLines(new(0,pd.Position)(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):(null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,i){const n=this.editor.getOption(42),o=document.createElement("div");o.className="suggest-preview-additional-widget",Xf.Configuration.applyFontInfoSlow(o,n);const r=document.createElement("span");r.className="content-spacer",r.append(t),o.append(r);const s=document.createElement("span");s.className="content-newline suggest-preview-text",s.append("⏎  "),o.append(s);const a=new(0,gd.DisposableStore),l=document.createElement("div");return l.className="button suggest-preview-text",l.append(`+${i} lines…`),a.add(Tu.addStandardDisposableListener(l,"mousedown",(e=>{var t;null===(t=this.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),this.editor.focus()}))),o.append(l),new dm(this.editor,e,o,a)}constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(sm,this.editor)),this.additionalLinesWidget=this._register(new lm(this.editor)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(28)||e.hasChanged(105)||e.hasChanged(88)||e.hasChanged(82)||e.hasChanged(43)||e.hasChanged(42)||e.hasChanged(58))&&this.update()}))),this._register((0,gd.toDisposable)((()=>{var e;this.disposed=!0,this.update(),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}))),this._register(t.onDidChange((()=>{this.update()}))),this.update()}};rm=im([nm(2,Iu.IInstantiationService)],rm);let sm=class{dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,i){this.disposableStore.clear();const n=this.themeService.getColorTheme(),o=n.getColor(bd.ghostTextForeground);let r,s;o&&(r=String(o.rgba.a),s=rg.Color.Format.CSS.format(am(o)));const a=n.getColor(bd.ghostTextBorder);let l;a&&(l=`2px dashed ${a}`);const c=this.editor.getModel();if(!c)return;const{tabSize:d}=c.getOptions(),u=c.getLineContent(e)||"";let h=0,g="";const p=new Array;i&&p.push({range:fd.Range.fromPositions(new(0,pd.Position)(e,i.column),new(0,pd.Position)(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});const f=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),m=void 0===f||!!f;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map((t=>{g+=u.substring(h,t.column-1),h=t.column-1;const i=m?t.text:this.renderSingleLineText(t.text,g,d,!1),n=this.disposableStore.add(function(e,t,i,n){const o=i+cm++;return e.registerDecorationType(t,o,n),{dispose(){e.removeDecorationType(o)},resolve:()=>e.resolveDecorationOptions(o,!0)}}(this.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:i,opacity:r,color:s,border:l,fontWeight:t.preview?"bold":"normal"}}));return{range:fd.Range.fromPositions(new(0,pd.Position)(e,t.column)),options:m?{description:"ghost-text",after:{content:i,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration"}}:Object.assign({},n.resolve())}})).concat(p))}renderSingleLineText(e,t,i,n){const o=t+e,r=em.CursorColumns.visibleColumnsByColumns(o,i);let s="",a=t.length+1;for(const t of e){if("\t"===t){const e=r[a+1]-r[a];if(n){s+="→";for(let t=1;t<e;t++)s+=" "}else for(let t=0;t<e;t++)s+=" "}else s+=" "===t?n?"·":" ":t;a+=1}return s}constructor(e,t,i,n){this.editor=e,this.codeEditorService=t,this.themeService=i,this.contextKeyService=n,this.decorationIds=[],this.disposableStore=new(0,gd.DisposableStore)}};function am(e){const{r:t,b:i,g:n}=e.rgba;return new(0,rg.Color)(new(0,rg.RGBA)(t,n,i,255))}sm=im([nm(1,Od.ICodeEditorService),nm(2,yd.IThemeService),nm(3,Zc.IContextKeyService)],sm);class lm{get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const r=Math.max(t.length,i);if(r>0){const i=document.createElement("div");!function(e,t,i,n){const o=n.get(28),r=n.get(105),s="none",a=n.get(82),l=n.get(43),c=n.get(42),d=n.get(58),u=(0,Yf.createStringBuilder)(1e4);u.appendASCIIString('<div class="suggest-preview-text">');for(let e=0,n=i.length;e<n;e++){const n=i[e],h=n.content;u.appendASCIIString('<div class="view-line'),u.appendASCIIString('" style="top:'),u.appendASCIIString(String(e*d)),u.appendASCIIString('px;width:1000000px;">');const g=Jd.isBasicASCII(h),p=Jd.containsRTL(h),f=Qf.LineTokens.createEmpty(h);(0,Zf.renderViewLine)(new(0,Zf.RenderLineInput)(c.isMonospace&&!o,c.canUseHalfwidthRightwardsArrow,h,!1,g,p,0,f,n.decorations,t,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,r,s,a,l!==Jf.EditorFontLigatures.OFF,null),u),u.appendASCIIString("</div>")}u.appendASCIIString("</div>"),Xf.Configuration.applyFontInfoSlow(e,c);const h=u.build(),g=om?om.createHTML(h):h;e.innerHTML=g}(i,o,t,this.editor.getOptions()),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:r,domNode:i})}}))}constructor(e){this.editor=e,this._viewZoneId=void 0}}let cm=0;class dm extends gd.Disposable{getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}constructor(e,t,i,n){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(n),this._register((0,gd.toDisposable)((()=>{this.editor.removeContentWidget(this)}))),this.editor.addContentWidget(this)}}(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(bd.ghostTextForeground);if(i){const e=String(i.rgba.a),n=rg.Color.Format.CSS.format(am(i));t.addRule(`.monaco-editor .ghost-text-decoration { opacity: ${e}; color: ${n}; }`),t.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${i.toString()}; }`),t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { opacity: ${e}; color: ${n}; }`)}const n=e.getColor(bd.ghostTextBorder);n&&t.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 2px dashed ${n}; }`)}));Vc=r("kMb12"),Zc=r("c5sLr"),Iu=r("cwJE1");var um={};e(um,"GhostTextModel",(function(){return Yv}),(function(e){return Yv=e}));gd=r("ky1to");var hm={};e(hm,"InlineCompletionsModel",(function(){return km}),(function(e){return km=e})),e(hm,"provideInlineCompletions",(function(){return Rm}),(function(e){return Rm=e})),e(hm,"UpdateOperation",(function(){return Dm}),(function(e){return Dm=e})),e(hm,"SynchronizedInlineCompletionsCache",(function(){return Am}),(function(e){return Am=e}));hd=r("hsQau"),Gd=r("7G83E"),Jc=r("8bVMi"),Uu=r("7bUGH"),gd=r("ky1to"),fd=r("2KJrz"),iu=r("ldsR3");var gm=r("8ScSA"),pm=(du=r("cUien"),Uc=r("kO85n"),r("caAgA"));Uu=r("7bUGH"),gd=r("ky1to"),fd=r("2KJrz");class fm{renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1];return function(e,t){const i=new mm(e),n=t.map((e=>{const t=fd.Range.lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}}));n.sort(((e,t)=>t.startOffset-e.startOffset));for(const t of n)e=e.substring(0,t.startOffset)+t.text+e.substring(t.endOffset);return e}(e.substr(0,t.column-1),this.parts.map((e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")})))).substring(this.parts[0].column-1)}constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}}class mm{getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}}class _m{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class bm extends gd.Disposable{setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new(0,Uu.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(106)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()})))}}Jd=r("aAfu1");var vm=r("fvfvJ");function ym(e,t,i,n,o=0){if(e.range.startLineNumber!==e.range.endLineNumber)return;const r=e.text.length-o,s=t.getValueInRange(e.range),a=function(e,t){if((null==wm?void 0:wm.originalValue)===e&&(null==wm?void 0:wm.newValue)===t)return null==wm?void 0:wm.changes;{const i=function(e,t){function i(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const n=Math.max(i(e),i(t));function o(e){if(e<0)throw new Error("unexpected");return n+e+1}function r(e){let t=0,i=0;const n=new Int32Array(e.length);for(let r=0,s=e.length;r<s;r++){const s=100*i+t;"("===e[r]?(n[r]=o(2*s),t++):")"===e[r]?(n[r]=o(2*s+1),1===t&&i++,t=Math.max(t-1,0)):n[r]=e.charCodeAt(r)}return n}const s=r(e),a=r(t);return new(0,vm.LcsDiff)({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}(e,t);return wm={originalValue:e,newValue:t,changes:i},i}}(s,e.text),l=e.range.startLineNumber,c=new Array;if("prefix"===i){const e=a.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==s.length)return}for(const o of a){const a=e.range.startColumn+o.originalStart+o.originalLength;if("subwordSmart"===i&&n&&n.lineNumber===e.range.startLineNumber&&a<n.column)return;if(o.originalLength>0){const e=s.substr(o.originalStart,o.originalLength),i=t.getLineFirstNonWhitespaceColumn(l);if(!/^(\t| )*$/.test(e)||!(0===i||a<=i))return}if(0===o.modifiedLength)continue;const d=o.modifiedStart+o.modifiedLength,u=Math.max(o.modifiedStart,Math.min(d,r)),h=e.text.substring(o.modifiedStart,u),g=e.text.substring(u,Math.max(o.modifiedStart,d));if(h.length>0){const e=Jd.splitLines(h);c.push(new _m(a,e,!1))}if(g.length>0){const e=Jd.splitLines(g);c.push(new _m(a,e,!0))}}return new fm(l,c,0)}let wm;var Cm=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},xm=function(e,t){return function(i,n){t(i,n,e)}},Sm=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let km=class extends gd.Disposable{handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout((()=>{this.disposed||this.startSessionIfTriggered()}),0)}get session(){return this.completionSession.value}get ghostText(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(iu.InlineCompletionTriggerKind.Automatic))}trigger(e){this.completionSession.value?e===iu.InlineCompletionTriggerKind.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new Em(this.editor,this.editor.getPosition(),(()=>this.active),this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((()=>{this.onDidChangeEmitter.fire()}))))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}showNext(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}showPrevious(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return Sm(this,void 0,void 0,(function*(){const t=yield null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}constructor(e,t,i){super(),this.editor=e,this.cache=t,this.commandService=i,this.onDidChangeEmitter=new(0,Uu.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new(0,gd.MutableDisposable)),this.active=!1,this.disposed=!1,this._register(i.onDidExecuteCommand((t=>{new Set([Uc.UndoCommand.id,Uc.RedoCommand.id,pm.CoreEditingCommands.Tab.id,pm.CoreEditingCommands.DeleteLeft.id,pm.CoreEditingCommands.DeleteRight.id,"editor.action.inlineSuggest.commit","acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&this.handleUserInput()}))),this._register(this.editor.onDidType((e=>{this.handleUserInput()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.session&&!this.session.isValid&&this.hide()}))),this._register((0,gd.toDisposable)((()=>{this.disposed=!0})))}};km=Cm([xm(2,du.ICommandService)],km);class Em extends bm{fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;const e=this.cache.value.completions.findIndex((e=>e.semanticId===this.currentlySelectedCompletionId));return-1===e?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return Sm(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){var e;return Sm(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const t=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[];if(t.length>0){const e=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[e].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}ensureUpdateWithExplicitContext(){var e;return Sm(this,void 0,void 0,(function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===iu.InlineCompletionTriggerKind.Explicit?yield this.updateOperation.value.promise:yield this.update(iu.InlineCompletionTriggerKind.Explicit):(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)!==iu.InlineCompletionTriggerKind.Explicit&&(yield this.update(iu.InlineCompletionTriggerKind.Explicit))}))}hasMultipleInlineCompletions(){var e;return Sm(this,void 0,void 0,(function*(){return yield this.ensureUpdateWithExplicitContext(),((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1}))}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?ym(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return Sm(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=(0,hd.createCancelablePromise)((i=>Sm(this,void 0,void 0,(function*(){let n;try{n=yield Rm(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},i)}catch(e){return void(0,Jc.onUnexpectedError)(e)}i.isCancellationRequested||(this.cache.setValue(this.editor,n,e),this.onDidChangeEmitter.fire())})))),n=new Dm(i,e);this.updateOperation.value=n,yield i,this.updateOperation.value===n&&this.updateOperation.clear()}))}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[gm.EditOperation.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally((()=>{null==t||t.dispose()})).then(void 0,Jc.onUnexpectedExternalError):null==t||t.dispose(),this.onDidChangeEmitter.fire()}constructor(e,t,i,n,o,r){let s;super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=n,this.cache=o,this.initialTriggerKind=r,this.minReservedLineCount=0,this.updateOperation=this._register(new(0,gd.MutableDisposable)),this.updateSoon=this._register(new(0,hd.RunOnceScheduler)((()=>{let e=this.initialTriggerKind;return this.initialTriggerKind=iu.InlineCompletionTriggerKind.Automatic,this.update(e)}),50)),this.currentlySelectedCompletionId=void 0,this._register(this.onDidChange((()=>{const e=this.currentCompletion;if(e&&e.sourceInlineCompletion!==s){s=e.sourceInlineCompletion;const t=e.sourceProvider;t.handleItemDidShow&&t.handleItemDidShow(e.sourceInlineCompletions,s)}}))),this._register((0,gd.toDisposable)((()=>{this.cache.clear()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.cache.value&&this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeModelContent((e=>{this.scheduleAutomaticUpdate()}))),this._register(iu.InlineCompletionsProviderRegistry.onDidChange((()=>{this.updateSoon.schedule()}))),this.scheduleAutomaticUpdate()}}class Dm{dispose(){this.promise.cancel()}constructor(e,t){this.promise=e,this.triggerKind=t}}class Am extends gd.Disposable{constructor(e,t,i,n){super(),this.triggerKind=n;const o=e.deltaDecorations([],t.items.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._register((0,gd.toDisposable)((()=>{e.deltaDecorations(o,[])}))),this.completions=t.items.map(((e,t)=>new Im(e,o[t]))),this._register(e.onDidChangeModelContent((()=>{let t=!1;const n=e.getModel();for(const e of this.completions){const i=n.getDecorationRange(e.decorationId);i?e.synchronizedRange.equalsRange(i)||(t=!0,e.synchronizedRange=i):(0,Jc.onUnexpectedError)(new Error("Decoration has no range"))}t&&i()}))),this._register(t)}}class Im{toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}}function Rm(e,t,i,n=Gd.CancellationToken.None){return Sm(this,void 0,void 0,(function*(){const o=function(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new(0,fd.Range)(e.lineNumber,i.startColumn,e.lineNumber,n):fd.Range.fromPositions(e,e.with(void 0,n))}(e,t),r=iu.InlineCompletionsProviderRegistry.all(t),s=yield Promise.all(r.map((o=>Sm(this,void 0,void 0,(function*(){const r=yield o.provideInlineCompletions(t,e,i,n);return{completions:r,provider:o,dispose:()=>{r&&o.freeInlineCompletions(r)}}}))))),a=new Map;for(const e of s){const t=e.completions;if(t)for(const i of t.items.map((i=>({text:i.text,range:i.range?fd.Range.lift(i.range):o,command:i.command,sourceProvider:e.provider,sourceInlineCompletions:t,sourceInlineCompletion:i}))))i.range.startLineNumber===i.range.endLineNumber&&a.set(JSON.stringify({text:i.text,range:i.range}),i)}return{items:[...a.values()],dispose:()=>{for(const e of s)e.dispose()}}}))}var Tm={};e(Tm,"SuggestWidgetPreviewModel",(function(){return Vv}),(function(e){return Vv=e}));hd=r("hsQau"),Jc=r("8bVMi"),gd=r("ky1to"),fd=r("2KJrz"),iu=r("ldsR3"),hd=r("hsQau"),Uu=r("7bUGH"),gd=r("ky1to"),fd=r("2KJrz");class Mm{static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e,t=this.pos,i=0,n=this.value.charCodeAt(t);if(e=Mm._table[n],"number"==typeof e)return this.pos+=1,{type:e,pos:t,len:1};if(Mm.isDigitCharacter(n)){e=8;do{i+=1,n=this.value.charCodeAt(t+i)}while(Mm.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}if(Mm.isVariableCharacter(n)){e=9;do{n=this.value.charCodeAt(t+ ++i)}while(Mm.isVariableCharacter(n)||Mm.isDigitCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}e=10;do{i+=1,n=this.value.charCodeAt(t+i)}while(!isNaN(n)&&void 0===Mm._table[n]&&!Mm.isDigitCharacter(n)&&!Mm.isVariableCharacter(n));return this.pos+=i,{type:e,pos:t,len:i}}constructor(){this.value="",this.pos=0}}Mm._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class Lm{appendChild(e){return e instanceof Nm&&this._children[this._children.length-1]instanceof Nm?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,n=i.children.indexOf(e),o=i.children.slice(0);o.splice(n,1,...t),i._children=o,function e(t,i){for(const n of t)n.parent=i,e(n.children,n)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Hm)return e;e=e.parent}}toString(){return this.children.reduce(((e,t)=>e+t.toString()),"")}len(){return 0}constructor(){this._children=[]}}class Nm extends Lm{toString(){return this.value}len(){return this.value.length}clone(){return new Nm(this.value)}constructor(e){super(),this.value=e}}class Om extends Lm{}class Pm extends Om{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof Fm?this._children[0]:void 0}clone(){let e=new Pm(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}constructor(e){super(),this.index=e}}class Fm extends Lm{appendChild(e){return e instanceof Nm&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new Fm;return this.options.forEach(e.appendChild,e),e}constructor(){super(...arguments),this.options=[]}}class Bm extends Lm{resolve(e){const t=this;let i=!1,n=e.replace(this.regexp,(function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!i&&this._children.some((e=>e instanceof jm&&Boolean(e.elseValue)))&&(n=this._replace([])),n}_replace(e){let t="";for(const i of this._children)if(i instanceof jm){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){let e=new Bm;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((e=>e.clone())),e}constructor(){super(...arguments),this.regexp=new RegExp("")}}class jm extends Lm{resolve(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"==typeof this.ifValue?this.ifValue:Boolean(e)||"string"!=typeof this.elseValue?e||"":this.elseValue}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(((e,t)=>0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())).join(""):e}clone(){return new jm(this.index,this.shorthandName,this.ifValue,this.elseValue)}constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}}class zm extends Om{resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Nm(t)],!0)}clone(){const e=new zm(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}constructor(e){super(),this.name=e}}function Wm(e,t){const i=[...e];for(;i.length>0;){const e=i.shift();if(!t(e))break;i.unshift(...e.children)}}class Hm extends Lm{get placeholderInfo(){if(!this._placeholders){let e,t=[];this.walk((function(i){return i instanceof Pm&&(t.push(i),e=!e||e.index<i.index?i:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk((n=>n===e?(i=!0,!1):(t+=n.len(),!0))),i?t:-1}fullLen(e){let t=0;return Wm([e],(e=>(t+=e.len(),!0))),t}enclosingPlaceholders(e){let t=[],{parent:i}=e;for(;i;)i instanceof Pm&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk((t=>(t instanceof zm&&t.resolve(e)&&(this._placeholders=void 0),!0))),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new Hm;return this._children=this.children.map((e=>e.clone())),e}walk(e){Wm(this.children,e)}}class Km{static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){this._scanner.text(e),this._token=this._scanner.next();const n=new Hm;for(;this._parse(n););const o=new Map,r=[];let s=0;n.walk((e=>(e instanceof Pm&&(s+=1,e.isFinalTabstop?o.set(0,void 0):!o.has(e.index)&&e.children.length>0?o.set(e.index,e.children):r.push(e)),!0)));for(const e of r){const t=o.get(e.index);if(t){const i=new Pm(e.index);i.transform=e.transform;for(const e of t)i.appendChild(e.clone());n.replace(e,[i])}}return i||(i=s>0&&t),!o.has(0)&&i&&n.appendChild(new Pm(0)),n}_accept(e,t){if(void 0===e||this._token.type===e){let e=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){const e=this._scanner.next();if(0!==e.type&&4!==e.type&&5!==e.type)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Nm(t)),!0)}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Pm(Number(t)):new zm(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const n=new Pm(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new Nm("${"+t+":")),n.children.forEach(e.appendChild,e),!0}else{if(!(n.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);{const t=new Fm;for(;;){if(this._parseChoiceElement(t)){if(this._accept(2))continue;if(this._accept(7)&&(n.appendChild(t),this._accept(4)))return e.appendChild(n),!0}return this._backTo(i),!1}}}}_parseChoiceElement(e){const t=this._token,i=[];for(;2!==this._token.type&&7!==this._token.type;){let e;if(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0),!e)return this._backTo(t),!1;i.push(e)}return 0===i.length?(this._backTo(t),!1):(e.appendChild(new Nm(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const n=new zm(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new Nm("${"+t+":")),n.children.forEach(e.appendChild,e),!0}}_parseTransform(e){let t=new Bm,i="",n="";for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(6,!0)||e,i+=e;else{if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}}for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(5,!0)||this._accept(6,!0)||e,t.appendChild(new Nm(e));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}try{t.regexp=new RegExp(i,n)}catch(e){return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);let n=this._accept(8,!0);if(!n)return this._backTo(t),!1;if(!i)return e.appendChild(new jm(Number(n))),!0;if(this._accept(4))return e.appendChild(new jm(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){let i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new jm(Number(n),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){let t=this._until(4);if(t)return e.appendChild(new jm(Number(n),void 0,t,void 0)),!0}else if(this._accept(12)){let t=this._until(4);if(t)return e.appendChild(new jm(Number(n),void 0,void 0,t)),!0}else if(this._accept(13)){let t=this._until(1);if(t){let i=this._until(4);if(i)return e.appendChild(new jm(Number(n),void 0,t,i)),!0}}else{let t=this._until(4);if(t)return e.appendChild(new jm(Number(n),void 0,void 0,t)),!0}return this._backTo(t),!1}_parseAnything(e){return 14!==this._token.type&&(e.appendChild(new Nm(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}constructor(){this._scanner=new Mm,this._token={type:14,pos:0,len:0}}}Qd=r("dD6PO"),gd=r("ky1to"),Jd=r("aAfu1"),gm=r("8ScSA"),fd=r("2KJrz"),qc=r("do14f"),_d=r("gHDnG");var Um=r("ffMvB"),Vm=(Iu=r("cwJE1"),Vc=r("kMb12"),r("9d4PW")),$m=(lh=r("liPtJ"),r("gesUy"));Jd=r("aAfu1"),eu=r("avLBk");function qm(e){const t=e;return"string"==typeof(null==t?void 0:t.id)&&eu.URI.isUri(t.uri)}const Gm=new Uint8Array(16),Zm=[];for(let e=0;e<256;e++)Zm.push(e.toString(16).padStart(2,"0"));let Jm;function Ym(){Jm(Gm),Gm[6]=15&Gm[6]|64,Gm[8]=63&Gm[8]|128;let e=0,t="";return t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+="-",t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+="-",t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+="-",t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+="-",t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t+=Zm[Gm[e++]],t}Jm="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};class Xm{resolve(e){for(const t of this._delegates){let i=t.resolve(e);if(void 0!==i)return i}}constructor(e){this._delegates=e}}class Qm{resolve(e){const{name:t}=e;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){let t=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!t&&this._overtypingCapturer){const e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(t=e.value,i=e.multiline)}if(t&&i&&e.snippet){const i=this._model.getLineContent(this._selection.startLineNumber),n=(0,Jd.getLeadingWhitespace)(i,0,this._selection.startColumn-1);let o=n;e.snippet.walk((t=>t!==e&&(t instanceof Nm&&(o=(0,Jd.getLeadingWhitespace)((0,Jd.splitLines)(t.value).pop())),!0)));const r=(0,Jd.commonPrefixLength)(o,n);t=t.replace(/(\r\n|\r|\n)(.*)/g,((e,t,i)=>`${t}${o.substr(r)}${i}`))}return t}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){const e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):void 0}constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}}class e_{resolve(e){const{name:t}=e;if("TM_FILENAME"===t)return Vm.basename(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){const e=Vm.basename(this._model.uri.fsPath),t=e.lastIndexOf(".");return t<=0?e:e.slice(0,t)}return"TM_DIRECTORY"===t&&this._labelService?"."===Vm.dirname(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,lh.dirname)(this._model.uri)):"TM_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}constructor(e,t){this._labelService=e,this._model=t}}class t_{resolve(e){if("CLIPBOARD"!==e.name)return;const t=this._readClipboardText();if(t){if(this._spread){const e=t.split(/\r\n|\n|\r/).filter((e=>!(0,Jd.isFalsyOrWhitespace)(e)));if(e.length===this._selectionCount)return e[this._selectionIdx]}return t}}constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}}class i_{resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=$m.LanguageConfigurationRegistry.getComments(i);if(n)return"LINE_COMMENT"===t?n.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?n.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&n.blockCommentEndToken||void 0}constructor(e,t){this._model=e,this._selection=t}}class n_{resolve(e){const{name:t}=e;return"CURRENT_YEAR"===t?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===t?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===t?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===t?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===t?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===t?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===t?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===t?n_.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===t?n_.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===t?n_.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===t?n_.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===t?String(Math.floor(this._date.getTime()/1e3)):void 0}constructor(){this._date=new Date}}n_.dayNames=[Vc.localize("Sunday","Sunday"),Vc.localize("Monday","Monday"),Vc.localize("Tuesday","Tuesday"),Vc.localize("Wednesday","Wednesday"),Vc.localize("Thursday","Thursday"),Vc.localize("Friday","Friday"),Vc.localize("Saturday","Saturday")],n_.dayNamesShort=[Vc.localize("SundayShort","Sun"),Vc.localize("MondayShort","Mon"),Vc.localize("TuesdayShort","Tue"),Vc.localize("WednesdayShort","Wed"),Vc.localize("ThursdayShort","Thu"),Vc.localize("FridayShort","Fri"),Vc.localize("SaturdayShort","Sat")],n_.monthNames=[Vc.localize("January","January"),Vc.localize("February","February"),Vc.localize("March","March"),Vc.localize("April","April"),Vc.localize("May","May"),Vc.localize("June","June"),Vc.localize("July","July"),Vc.localize("August","August"),Vc.localize("September","September"),Vc.localize("October","October"),Vc.localize("November","November"),Vc.localize("December","December")],n_.monthNamesShort=[Vc.localize("JanuaryShort","Jan"),Vc.localize("FebruaryShort","Feb"),Vc.localize("MarchShort","Mar"),Vc.localize("AprilShort","Apr"),Vc.localize("MayShort","May"),Vc.localize("JuneShort","Jun"),Vc.localize("JulyShort","Jul"),Vc.localize("AugustShort","Aug"),Vc.localize("SeptemberShort","Sep"),Vc.localize("OctoberShort","Oct"),Vc.localize("NovemberShort","Nov"),Vc.localize("DecemberShort","Dec")];class o_{resolve(e){if(!this._workspaceService)return;const t=(i=this._workspaceService.getWorkspace()).configuration?{id:i.id,configPath:i.configuration}:1===i.folders.length?{id:i.id,uri:i.folders[0].uri}:void 0;var i;return t?"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0:void 0}_resolveWorkspaceName(e){if(qm(e))return Vm.basename(e.uri.path);let t=Vm.basename(e.configPath.path);return t.endsWith("code-workspace")&&(t=t.substr(0,t.length-"code-workspace".length-1)),t}_resoveWorkspacePath(e){if(qm(e))return Ig(e.uri.fsPath);let t=Vm.basename(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?Ig(i):"/"}constructor(e){this._workspaceService=e}}class r_{resolve(e){const{name:t}=e;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?Ym():void 0}}yd=r("fmM7j"),vd=r("02ibr"),Mp=r("57WTe");(0,yd.registerThemingParticipant)(((e,t)=>{function i(t){const i=e.getColor(t);return i?i.toString():"transparent"}t.addRule(`.monaco-editor .snippet-placeholder { background-color: ${i(vd.snippetTabstopHighlightBackground)}; outline-color: ${i(vd.snippetTabstopHighlightBorder)}; }`),t.addRule(`.monaco-editor .finish-snippet-placeholder { background-color: ${i(vd.snippetFinalTabstopHighlightBackground)}; outline-color: ${i(vd.snippetFinalTabstopHighlightBorder)}; }`)}));class s_{dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations((t=>{for(const i of this._snippet.placeholders){const n=this._snippet.offset(i),o=this._snippet.fullLen(i),r=fd.Range.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+o)),s=i.isFinalTabstop?s_._decor.inactiveFinal:s_._decor.inactive,a=t.addDecoration(r,s);this._placeholderDecorations.set(i,a)}}))}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let e=[];for(const t of this._placeholderGroups[this._placeholderGroupsIdx])if(t.transform){const i=this._placeholderDecorations.get(t),n=this._editor.getModel().getDecorationRange(i),o=this._editor.getModel().getValueInRange(n),r=t.transform.resolve(o).split(/\r\n|\r|\n/);for(let e=1;e<r.length;e++)r[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+r[e]);e.push(gm.EditOperation.replace(n,r.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits("snippet.placeholderTransform",e)}let t=!1;!0===e&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):!1===e&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations((e=>{const i=new Set,n=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx]){const r=this._placeholderDecorations.get(o),s=this._editor.getModel().getDecorationRange(r);n.push(new(0,qc.Selection)(s.startLineNumber,s.startColumn,s.endLineNumber,s.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(o),e.changeDecorationOptions(r,o.isFinalTabstop?s_._decor.activeFinal:s_._decor.active),i.add(o);for(const t of this._snippet.enclosingPlaceholders(o)){const n=this._placeholderDecorations.get(t);e.changeDecorationOptions(n,t.isFinalTabstop?s_._decor.activeFinal:s_._decor.active),i.add(t)}}for(const[t,n]of this._placeholderDecorations)i.has(t)||e.changeDecorationOptions(n,t.isFinalTabstop?s_._decor.inactiveFinal:s_._decor.inactive);return n}));return t?this.move(e):null!=i?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Pm){const e=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(e).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));const t=this._placeholderDecorations.get(n),o=this._editor.getModel().getDecorationRange(t);if(!o){e.delete(n.index);break}i.push(o)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((i=>{for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const e of o._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=n.index+(r+1)/this._nestingLevel:e.index=n.index+e.index/this._nestingLevel;this._snippet.replace(n,o._snippet.children);const s=this._placeholderDecorations.get(n);i.removeDecoration(s),this._placeholderDecorations.delete(n);for(const e of o._snippet.placeholders){const n=o._snippet.offset(e),r=o._snippet.fullLen(e),s=fd.Range.fromPositions(t.getPositionAt(o._offset+n),t.getPositionAt(o._offset+n+r)),a=i.addDecoration(s,s_._decor.inactive);this._placeholderDecorations.set(e,a)}}this._placeholderGroups=(0,Qd.groupBy)(this._snippet.placeholders,Pm.compareByIndex)}))}constructor(e,t,i,n){this._editor=e,this._snippet=t,this._offset=i,this._snippetLineLeadingWhitespace=n,this._nestingLevel=1,this._placeholderGroups=(0,Qd.groupBy)(t.placeholders,Pm.compareByIndex),this._placeholderGroupsIdx=-1}}s_._decor={active:_d.ModelDecorationOptions.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:_d.ModelDecorationOptions.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:_d.ModelDecorationOptions.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:_d.ModelDecorationOptions.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const a_={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class l_{static adjustWhitespace(e,t,i,n,o){const r=e.getLineContent(t.lineNumber),s=(0,Jd.getLeadingWhitespace)(r,0,t.column-1);let a;return i.walk((t=>{if(!(t instanceof Nm)||t.parent instanceof Fm)return!0;const o=t.value.split(/\r\n|\r|\n/);if(n){const n=i.offset(t);if(0===n)o[0]=e.normalizeIndentation(o[0]);else{a=null!=a?a:i.toString();let t=a.charCodeAt(n-1);10!==t&&13!==t||(o[0]=e.normalizeIndentation(s+o[0]))}for(let t=1;t<o.length;t++)o[t]=e.normalizeIndentation(s+o[t])}const r=o.join(e.getEOL());return r!==t.value&&(t.parent.replace(t,[new Nm(r)]),a=void 0),!0})),s}static adjustSelection(e,t,i,n){if(0!==i||0!==n){const{positionLineNumber:o,positionColumn:r}=t,s=r-i,a=r+n,l=e.validateRange({startLineNumber:o,startColumn:s,endLineNumber:o,endColumn:a});t=qc.Selection.createWithDirection(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,i,n,o,r,s,a){const l=[],c=[];if(!e.hasModel())return{edits:l,snippets:c};const d=e.getModel(),u=e.invokeWithinContext((e=>e.get(Um.IWorkspaceContextService,Iu.optional))),h=e.invokeWithinContext((e=>new e_(e.get(Mp.ILabelService,Iu.optional),d))),g=()=>s;let p=0,f=d.getValueInRange(l_.adjustSelection(d,e.getSelection(),i,0)),m=d.getValueInRange(l_.adjustSelection(d,e.getSelection(),0,n)),_=d.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const b=e.getSelections().map(((e,t)=>({selection:e,idx:t}))).sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.selection,t.selection)));for(const{selection:s,idx:v}of b){let y=l_.adjustSelection(d,s,i,0),w=l_.adjustSelection(d,s,0,n);f!==d.getValueInRange(y)&&(y=s),m!==d.getValueInRange(w)&&(w=s);const C=s.setStartPosition(y.startLineNumber,y.startColumn).setEndPosition(w.endLineNumber,w.endColumn),x=(new Km).parse(t,!0,o),S=C.getStartPosition(),k=l_.adjustWhitespace(d,S,x,r||v>0&&_!==d.getLineFirstNonWhitespaceColumn(s.positionLineNumber),!0);x.resolveVariables(new Xm([h,new t_(g,v,b.length,"spread"===e.getOption(70)),new Qm(d,s,v,a),new i_(d,s),new n_,new o_(u),new r_]));const E=d.getOffsetAt(S)+p;p+=x.toString().length-d.getValueLengthInRange(C),l[v]=gm.EditOperation.replace(C,x.toString()),l[v].identifier={major:v,minor:0},c[v]=new s_(e,x,E,k)}return{edits:l,snippets:c}}dispose(){(0,gd.dispose)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=l_.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,(e=>this._snippets[0].hasPlaceholder?this._move(!0):e.filter((e=>!!e.identifier)).map((e=>qc.Selection.fromPositions(e.range.getEndPosition()))))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=a_){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:i,snippets:n}=l_.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",i,(e=>{for(const e of this._snippets)e.merge(n);return console.assert(0===n.length),this._snippets[0].hasPlaceholder?this._move(void 0):e.filter((e=>!!e.identifier)).map((e=>qc.Selection.fromPositions(e.range.getEndPosition())))}))}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const i of this._snippets){const n=i.computePossibleSelections();if(0===t.size)for(const[i,o]of n){o.sort(fd.Range.compareRangesUsingStarts);for(const n of e)if(o[0].containsRange(n)){t.set(i,[]);break}}if(0===t.size)return!1;t.forEach(((e,t)=>{e.push(...n.get(t))}))}e.sort(fd.Range.compareRangesUsingStarts);for(let[i,n]of t)if(n.length===e.length){n.sort(fd.Range.compareRangesUsingStarts);for(let o=0;o<n.length;o++)if(!n[o].containsRange(e[o])){t.delete(i);continue}}else t.delete(i);return t.size>0}constructor(e,t,i=a_){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=i}}var c_={};e(c_,"SuggestController",(function(){return zv}),(function(e){return zv=e}));id=r("gF77M"),Qd=r("dD6PO"),Jc=r("8bVMi"),Gc=r("8NQur"),gd=r("ky1to"),tu=r("8hC5C"),Uc=r("kO85n"),gm=r("8ScSA"),fd=r("2KJrz"),$c=r("jb8ay");var d_={};e(d_,"SnippetController2",(function(){return M_}),(function(e){return M_=e}));gd=r("ky1to"),Uc=r("kO85n"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay");var u_={};e(u_,"Context",(function(){return m_}),(function(e){return m_=e})),e(u_,"suggestWidgetStatusbarMenu",(function(){return __}),(function(e){return __=e})),e(u_,"CompletionOptions",(function(){return v_}),(function(e){return v_=e})),e(u_,"getSnippetSuggestSupport",(function(){return y_}),(function(e){return y_=e})),e(u_,"provideSuggestionItems",(function(){return C_}),(function(e){return C_=e})),e(u_,"getSuggestionComparator",(function(){return k_}),(function(e){return k_=e})),e(u_,"showSimpleSuggestions",(function(){return D_}),(function(e){return D_=e}));Jc=r("8bVMi"),iu=r("ldsR3"),pd=r("dLnDZ"),Zc=r("c5sLr"),Gd=r("7G83E"),fd=r("2KJrz");var h_=r("7DFs7"),g_=(gd=r("ky1to"),wd=r("4Nnjr"),r("6dNj6")),p_=(du=r("cUien"),Mh=r("5jjji"),eu=r("avLBk"),r("1JIvq")),f_=(Vc=r("kMb12"),function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))});const m_={Visible:new(0,Zc.RawContextKey)("suggestWidgetVisible",!1,(0,Vc.localize)("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new(0,Zc.RawContextKey)("suggestWidgetDetailsVisible",!1,(0,Vc.localize)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new(0,Zc.RawContextKey)("suggestWidgetMultipleSuggestions",!1,(0,Vc.localize)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new(0,Zc.RawContextKey)("suggestionMakesTextEdit",!0,(0,Vc.localize)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new(0,Zc.RawContextKey)("acceptSuggestionOnEnter",!0,(0,Vc.localize)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new(0,Zc.RawContextKey)("suggestionHasInsertAndReplaceRange",!1,(0,Vc.localize)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new(0,Zc.RawContextKey)("suggestionInsertMode",void 0,{type:"string",description:(0,Vc.localize)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new(0,Zc.RawContextKey)("suggestionCanResolve",!1,(0,Vc.localize)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},__=new(0,wd.MenuId)("suggestWidgetStatusBar");class b_{get isResolved(){return!!this._isResolved}resolve(e){return f_(this,void 0,void 0,(function*(){if(!this._resolveCache){const t=e.onCancellationRequested((()=>{this._resolveCache=void 0,this._isResolved=!1}));this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((e=>{Object.assign(this.completion,e),this._isResolved=!0,t.dispose()}),(e=>{(0,Jc.isPromiseCanceledError)(e)&&(this._resolveCache=void 0,this._isResolved=!1)}))}return this._resolveCache}))}constructor(e,t,i,n){this.position=e,this.completion=t,this.container=i,this.provider=n,this.isInvalid=!1,this.score=h_.FuzzyScore.Default,this.distance=0,this.textLabel="string"==typeof t.label?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),fd.Range.isIRange(t.range)?(this.editStart=new(0,pd.Position)(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new(0,pd.Position)(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new(0,pd.Position)(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||fd.Range.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new(0,pd.Position)(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new(0,pd.Position)(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new(0,pd.Position)(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||fd.Range.spansMultipleLines(t.range.insert)||fd.Range.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),"function"!=typeof n.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}}class v_{constructor(e=2,t=new Set,i=new Set,n=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=n}}function y_(){}v_.default=new v_;class w_{constructor(e,t,i,n){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=n}}function C_(e,t,i=v_.default,n={triggerKind:0},o=Gd.CancellationToken.None){return f_(this,void 0,void 0,(function*(){const r=new(0,g_.StopWatch)(!0);t=t.clone();const s=e.getWordAtPosition(t),a=s?new(0,fd.Range)(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):fd.Range.fromPositions(t),l={replace:a,insert:a.setEndPosition(t.lineNumber,t.column)},c=[],d=new(0,gd.DisposableStore),u=[];let h=!1;const g=(e,n,o)=>{var r,s,a;if(n){for(let o of n.suggestions)if(!i.kindFilter.has(o.kind)){if(!i.showDeprecated&&(null===(r=null==o?void 0:o.tags)||void 0===r?void 0:r.includes(1)))continue;o.range||(o.range=l),o.sortText||(o.sortText="string"==typeof o.label?o.label:o.label.label),!h&&o.insertTextRules&&4&o.insertTextRules&&(h=Km.guessNeedsClipboard(o.insertText)),c.push(new b_(t,o,n,e))}(0,gd.isDisposable)(n)&&d.add(n),u.push({providerName:null!==(s=e._debugDisplayName)&&void 0!==s?s:"unkown_provider",elapsedProvider:null!==(a=n.duration)&&void 0!==a?a:-1,elapsedOverall:o.elapsed()})}},p=(()=>f_(this,void 0,void 0,(function*(){})))();for(let r of iu.CompletionProviderRegistry.orderedGroups(e)){let s=c.length;if(yield Promise.all(r.map((r=>f_(this,void 0,void 0,(function*(){if(!(i.providerFilter.size>0)||i.providerFilter.has(r))try{const i=new(0,g_.StopWatch)(!0),s=yield r.provideCompletionItems(e,t,n,o);g(r,s,i)}catch(e){(0,Jc.onUnexpectedExternalError)(e)}}))))),s!==c.length||o.isCancellationRequested)break}return yield p,o.isCancellationRequested?(d.dispose(),Promise.reject((0,Jc.canceled)())):new w_(c.sort(k_(i.snippetSortOrder)),h,{entries:u,elapsed:r.elapsed()},d)}))}function x_(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.completion.label<t.completion.label?-1:e.completion.label>t.completion.label?1:e.completion.kind-t.completion.kind}const S_=new Map;function k_(e){return S_.get(e)}S_.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return x_(e,t)})),S_.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return x_(e,t)})),S_.set(1,x_),du.CommandsRegistry.registerCommand("_executeCompletionItemProvider",((e,...t)=>f_(void 0,void 0,void 0,(function*(){const[i,n,o,r]=t;(0,Mh.assertType)(eu.URI.isUri(i)),(0,Mh.assertType)(pd.Position.isIPosition(n)),(0,Mh.assertType)("string"==typeof o||!o),(0,Mh.assertType)("number"==typeof r||!r);const s=yield e.get(p_.ITextModelService).createModelReference(i);try{const e={incomplete:!1,suggestions:[]},t=[],i=yield C_(s.object.textEditorModel,pd.Position.lift(n),void 0,{triggerCharacter:o,triggerKind:o?1:0});for(const n of i.items)t.length<(null!=r?r:0)&&t.push(n.resolve(Gd.CancellationToken.None)),e.incomplete=e.incomplete||n.container.incomplete,e.suggestions.push(n.completion);try{return yield Promise.all(t),e}finally{setTimeout((()=>i.disposable.dispose()),100)}}finally{s.dispose()}}))));const E_=new class{provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}constructor(){this.onlyOnceSuggestions=[]}};function D_(e,t){setTimeout((()=>{E_.onlyOnceSuggestions.push(...t),e.getContribution("editor.contrib.suggestController").triggerSuggest((new Set).add(E_))}),0)}iu.CompletionProviderRegistry.register("*",E_);Zc=r("c5sLr");var A_=r("k0Rz2"),I_=(Vc=r("kMb12"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),R_=function(e,t){return function(i,n){t(i,n,e)}};const T_={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let M_=class e{static get(t){return t.getContribution(e.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,void 0===t?T_:Object.assign(Object.assign({},T_),t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new l_(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((e=>e.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState()))))}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{choice:e}=this._session;if(e){if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map((e=>qc.Selection.fromPositions(e.getStartPosition()))));const[t]=e.options;(0,u_.showSimpleSuggestions)(this._editor,e.options.map(((e,i)=>({kind:13,label:e.value,insertText:e.value,sortText:"a".repeat(i+1),range:fd.Range.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))}))))}}else this._currentChoice=void 0}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),null===(t=this._session)||void 0===t||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}constructor(t,i,n){this._editor=t,this._logService=i,this._snippetListener=new(0,gd.DisposableStore),this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(n),this._hasNextTabstop=e.HasNextTabstop.bindTo(n),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(n)}};M_.ID="snippetController2",M_.InSnippetMode=new(0,Zc.RawContextKey)("inSnippetMode",!1,(0,Vc.localize)("inSnippetMode","Whether the editor in current in snippet mode")),M_.HasNextTabstop=new(0,Zc.RawContextKey)("hasNextTabstop",!1,(0,Vc.localize)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),M_.HasPrevTabstop=new(0,Zc.RawContextKey)("hasPrevTabstop",!1,(0,Vc.localize)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),M_=I_([R_(1,A_.ILogService),R_(2,Zc.IContextKeyService)],M_),(0,Uc.registerEditorContribution)(M_.ID,M_);const L_=Uc.EditorCommand.bindToContribution(M_.get);(0,Uc.registerEditorCommand)(new L_({id:"jumpToNextSnippetPlaceholder",precondition:Zc.ContextKeyExpr.and(M_.InSnippetMode,M_.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2}})),(0,Uc.registerEditorCommand)(new L_({id:"jumpToPrevSnippetPlaceholder",precondition:Zc.ContextKeyExpr.and(M_.InSnippetMode,M_.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1026}})),(0,Uc.registerEditorCommand)(new L_({id:"leaveSnippet",precondition:M_.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:$c.EditorContextKeys.editorTextFocus,primary:9,secondary:[1033]}})),(0,Uc.registerEditorCommand)(new L_({id:"acceptSnippet",precondition:M_.InSnippetMode,handler:e=>e.finish()}));var N_={};e(N_,"ISuggestMemoryService",(function(){return z_}),(function(e){return z_=e}));Kh=r("9BG2T"),Uh=r("6Jk2H"),iu=r("ldsR3"),gd=r("ky1to"),hd=r("hsQau"),Iu=r("cwJE1"),lg=r("7JMrK"),Hh=r("gUVjL"),gg=r("apdYP");var O_=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},P_=function(e,t){return function(i,n){t(i,n,e)}};class F_{select(e,t,i){if(0===i.length)return 0;let n=i[0].score[0];for(let e=0;e<i.length;e++){const{score:t,completion:o}=i[e];if(t[0]!==n)break;if(o.preselect)return e}return 0}constructor(e){this.name=e}}class B_ extends F_{memorize(e,t,i){}toJSON(){}fromJSON(){}constructor(){super("first")}}let j_=class e{dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(t,i){var n,o;const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:null===(n=this._modeService.getLanguageIdentifier(t.getLanguageIdAtPosition(i.lineNumber,i.column)))||void 0===n?void 0:n.language,resource:t.uri});if((null===(o=this._strategy)||void 0===o?void 0:o.name)!==r){this._saveState();const t=e._strategyCtors.get(r)||B_;this._strategy=new t;try{const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=this._storageService.get(`${e._storagePrefix}/${r}`,t);i&&this._strategy.fromJSON(JSON.parse(i))}catch(e){}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${e._storagePrefix}/${this._strategy.name}`,i,t,1)}}constructor(e,t,i){this._storageService=e,this._modeService=t,this._configService=i,this._disposables=new(0,gd.DisposableStore),this._persistSoon=new(0,hd.RunOnceScheduler)((()=>this._saveState()),500),this._disposables.add(e.onWillSaveState((e=>{e.reason===Uh.WillSaveStateReason.SHUTDOWN&&this._saveState()})))}};j_._strategyCtors=new Map([["recentlyUsedByPrefix",class extends F_{memorize(e,t,i){const{word:n}=e.getWordUntilPosition(t),o=`${e.getLanguageIdentifier().language}/${n}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:n}=e.getWordUntilPosition(t);if(!n)return super.select(e,t,i);let o=`${e.getLanguageIdentifier().language}/${n}`,r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let e=0;e<i.length;e++){let{kind:t,insertText:n}=i[e].completion;if(t===r.type&&n===r.insertText)return e}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach(((t,i)=>e.push([i,t]))),e.sort(((e,t)=>-(e[1].touch-t[1].touch))).forEach(((e,t)=>e[1].touch=t)),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type="number"==typeof i.type?i.type:(0,iu.completionKindFromString)(i.type),this._trie.set(t,i)}}constructor(){super("recentlyUsedByPrefix"),this._trie=Kh.TernarySearchTree.forStrings(),this._seq=0}}],["recentlyUsed",class extends F_{memorize(e,t,i){const n=`${e.getLanguageIdentifier().language}/${i.textLabel}`;this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(0===i.length)return 0;const n=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(n))return super.select(e,t,i);let o=i[0].score[0],r=-1,s=-1,a=-1;for(let t=0;t<i.length&&i[t].score[0]===o;t++){const n=`${e.getLanguageIdentifier().language}/${i[t].textLabel}`,o=this._cache.peek(n);if(o&&o.touch>a&&o.type===i[t].completion.kind&&o.insertText===i[t].completion.insertText&&(a=o.touch,s=t),i[t].completion.preselect&&-1===r)return t}return-1!==s?s:-1!==r?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();for(const[t,i]of e)i.touch=0,i.type="number"==typeof i.type?i.type:(0,iu.completionKindFromString)(i.type),this._cache.set(t,i);this._seq=this._cache.size}constructor(){super("recentlyUsed"),this._cache=new(0,Kh.LRUCache)(300,.66),this._seq=0}}],["first",B_]]),j_._storagePrefix="suggest/memories",j_=O_([P_(0,Uh.IStorageService),P_(1,gg.IModeService),P_(2,lg.IConfigurationService)],j_);const z_=(0,Iu.createDecorator)("ISuggestMemories");(0,Hh.registerSingleton)(z_,j_,!0);Vc=r("kMb12"),du=r("cUien"),Zc=r("c5sLr"),Iu=r("cwJE1");var W_=r("1Iayd"),H_={};e(H_,"SuggestAlternatives",(function(){return V_}),(function(e){return V_=e}));Zc=r("c5sLr");var K_=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U_=function(e,t){return function(i,n){t(i,n,e)}};let V_=class e{dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:t,index:i},n){if(0===t.items.length)return void this.reset();e._moveIndex(!0,t,i)!==i?(this._acceptNext=n,this._model=t,this._index=i,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,t,i){let n=i;for(;n=(n+t.items.length+(e?1:-1))%t.items.length,n!==i&&t.items[n].completion.additionalTextEdits;);return n}next(){this._move(!0)}prev(){this._move(!1)}_move(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}constructor(t,i){this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}};V_.OtherSuggestions=new(0,Zc.RawContextKey)("hasOtherSuggestions",!1),V_=K_([U_(1,Zc.IContextKeyService)],V_);var $_={};e($_,"SuggestModel",(function(){return rb}),(function(e){return rb=e}));hd=r("hsQau"),Jc=r("8bVMi"),Uu=r("7bUGH"),gd=r("ky1to"),qc=r("do14f"),iu=r("ldsR3"),h_=r("7DFs7"),Jd=r("aAfu1"),Qd=r("dD6PO");class q_{get lineContext(){return this._lineContext}set lineContext(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){let t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let n="",o="";const r=1===this._refilterKind?this._items:this._filteredItems,s=[],a=!this._options.filterGraceful||r.length>2e3?h_.fuzzyScore:h_.fuzzyScoreGracefulAggressive;for(let l=0;l<r.length;l++){const c=r[l];if(c.isInvalid)continue;this._providerInfo.set(c.provider,Boolean(c.container.incomplete));const d=c.position.column-c.editStart.column,u=d+i-(c.position.column-this._column);if(n.length!==u&&(n=0===u?"":t.slice(-u),o=n.toLowerCase()),c.word=n,0===u)c.score=h_.FuzzyScore.Default;else{let e=0;for(;e<d;){const t=n.charCodeAt(e);if(32!==t&&9!==t)break;e+=1}if(e>=u)c.score=h_.FuzzyScore.Default;else if("string"==typeof c.completion.filterText){let t=a(n,o,e,c.completion.filterText,c.filterTextLow,0,!1);if(!t)continue;0===(0,Jd.compareIgnoreCase)(c.completion.filterText,c.textLabel)?c.score=t:(c.score=(0,h_.anyScore)(n,o,e,c.textLabel,c.labelLow,0),c.score[0]=t[0])}else{let t=a(n,o,e,c.textLabel,c.labelLow,0,!1);if(!t)continue;c.score=t}}c.idx=l,c.distance=this._wordDistance.distance(c.position,c.completion),s.push(c),e.push(c.textLabel.length)}this._filteredItems=s.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,Qd.quickSelect)(e.length-.85,e,((e,t)=>e-t)):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return q_._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return q_._compareCompletionItems(e,t)}constructor(e,t,i,n,o,r,s){this.clipboardText=s,this._snippetCompareFn=q_._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=n,this._options=o,this._refilterKind=1,this._lineContext=i,"top"===r?this._snippetCompareFn=q_._compareCompletionItemsSnippetsUp:"bottom"===r&&(this._snippetCompareFn=q_._compareCompletionItemsSnippetsDown)}}Gd=r("7G83E");var G_=r("4eCHg"),Z_={};e(Z_,"WordDistance",(function(){return eb}),(function(e){return eb=e}));Qd=r("dD6PO"),fd=r("2KJrz");var J_={};e(J_,"BracketSelectionRangeProvider",(function(){return X_}),(function(e){return X_=e}));pd=r("dLnDZ"),fd=r("2KJrz"),Gp=r("cQEXs");var Y_=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class X_{provideSelectionRanges(e,t){return Y_(this,void 0,void 0,(function*(){const i=[];for(const n of t){const t=[];i.push(t);const o=new Map;yield new Promise((t=>X_._bracketsRightYield(t,0,e,n,o))),yield new Promise((i=>X_._bracketsLeftYield(i,0,e,n,o,t)))}return i}))}static _bracketsRightYield(e,t,i,n,o){const r=new Map,s=Date.now();for(;;){if(t>=X_._maxRounds){e();break}if(!n){e();break}let a=i.findNextBracket(n);if(!a){e();break}if(Date.now()-s>X_._maxDuration){setTimeout((()=>X_._bracketsRightYield(e,t+1,i,n,o)));break}const l=a.close[0];if(a.isOpen){let e=r.has(l)?r.get(l):0;r.set(l,e+1)}else{let e=r.has(l)?r.get(l):0;if(e-=1,r.set(l,Math.max(0,e)),e<0){let e=o.get(l);e||(e=new(0,Gp.LinkedList),o.set(l,e)),e.push(a.range)}}n=a.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,o,r){const s=new Map,a=Date.now();for(;;){if(t>=X_._maxRounds&&0===o.size){e();break}if(!n){e();break}let l=i.findPrevBracket(n);if(!l){e();break}if(Date.now()-a>X_._maxDuration){setTimeout((()=>X_._bracketsLeftYield(e,t+1,i,n,o,r)));break}const c=l.close[0];if(l.isOpen){let e=s.has(c)?s.get(c):0;if(e-=1,s.set(c,Math.max(0,e)),e<0){let e=o.get(c);if(e){let t=e.shift();0===e.size&&o.delete(c);const n=fd.Range.fromPositions(l.range.getEndPosition(),t.getStartPosition()),s=fd.Range.fromPositions(l.range.getStartPosition(),t.getEndPosition());r.push({range:n}),r.push({range:s}),X_._addBracketLeading(i,s,r)}}}else{let e=s.has(c)?s.get(c):0;s.set(c,e+1)}n=l.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const n=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(n);0!==o&&o!==t.startColumn&&(i.push({range:fd.Range.fromPositions(new(0,pd.Position)(n,o),t.getEndPosition())}),i.push({range:fd.Range.fromPositions(new(0,pd.Position)(n,1),t.getEndPosition())}));const r=n-1;if(r>0){const n=e.getLineFirstNonWhitespaceColumn(r);n===t.startColumn&&n!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:fd.Range.fromPositions(new(0,pd.Position)(r,n),t.getEndPosition())}),i.push({range:fd.Range.fromPositions(new(0,pd.Position)(r,1),t.getEndPosition())}))}}}X_._maxDuration=30,X_._maxRounds=2;var Q_=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class eb{static create(e,t){return Q_(this,void 0,void 0,(function*(){if(!t.getOption(106).localityBonus)return eb.None;if(!t.hasModel())return eb.None;const i=t.getModel(),n=t.getPosition();if(!e.canComputeWordRanges(i.uri))return eb.None;const[o]=yield(new(0,J_.BracketSelectionRangeProvider)).provideSelectionRanges(i,[n]);if(0===o.length)return eb.None;const r=yield e.computeWordRanges(i.uri,o[0].range);if(!r)return eb.None;const s=i.getWordUntilPosition(n);return delete r[s.word],new class extends eb{distance(e,i){if(!n.equals(t.getPosition()))return 0;if(17===i.kind)return 2097152;let s="string"==typeof i.label?i.label:i.label.label,a=r[s];if((0,Qd.isFalsyOrEmpty)(a))return 2097152;let l=(0,Qd.binarySearch)(a,fd.Range.fromPositions(e),fd.Range.compareRangesUsingStarts),c=l>=0?a[l]:a[Math.max(0,~l-1)],d=o.length;for(const e of o){if(!fd.Range.containsRange(e.range,c))break;d-=1}return d}}}))}}eb.None=new class extends eb{distance(){return 0}};Jd=r("aAfu1"),Pd=r("d5VSL"),rh=r("2HQ2L"),A_=r("k0Rz2"),Zc=r("c5sLr"),lg=r("7JMrK");var tb=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ib=function(e,t){return function(i,n){t(i,n,e)}},nb=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class ob{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenizeIfCheap(i.lineNumber);const n=t.getWordAtPosition(i);return!!n&&(n.endColumn===i.column&&!!isNaN(Number(n.word)))}constructor(e,t,i,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=n}}let rb=class e{dispose(){(0,gd.dispose)(this._triggerCharacterListener),(0,gd.dispose)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(109))return;const e=new Map;for(const t of iu.CompletionProviderRegistry.all(this._editor.getModel()))for(const i of t.triggerCharacters||[]){let n=e.get(i);n||(n=new Set,n.add((0,u_.getSnippetSuggestSupport)()),e.set(i,n)),n.add(t)}const t=t=>{if(i=this._contextKeyService,n=this._configurationService,Boolean(i.getContextKeyValue("inlineSuggestionVisible"))&&!Boolean(n.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters")))return;var i,n;if(ob.shouldAutoTrigger(this._editor))return;if(!t){const e=this._editor.getPosition();t=this._editor.getModel().getLineContent(e.lineNumber).substr(0,e.column-1)}let o="";(0,Jd.isLowSurrogate)(t.charCodeAt(t.length-1))?(0,Jd.isHighSurrogate)(t.charCodeAt(t.length-2))&&(o=t.substr(t.length-2)):o=t.charAt(t.length-1);const r=e.get(o);if(r){const e=this._completionModel?{items:this._completionModel.adopt(r),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:o},Boolean(this._completionModel),r,e)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;0!==this._state&&(this._triggerQuickSuggest.cancel(),null===(t=this._requestToken)||void 0===t||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){0!==this._state&&(this._editor.hasModel()&&iu.CompletionProviderRegistry.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source)this.cancel();else if(iu.CompletionProviderRegistry.has(t))if(0===this._state&&0===e.reason){if(!1===this._editor.getOption(78))return;if(!i.containsRange(this._currentSelection)&&!i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))return;if(this._editor.getOption(106).snippetsPreventQuickSuggestions&&d_.SnippetController2.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(0!==this._state)return;if(!ob.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(78);if(!1!==i){if(!0===i);else{e.tokenizeIfCheap(t.lineNumber);const n=e.getLineTokens(t.lineNumber),o=n.getStandardTokenType(n.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(i.other&&0===o||i.comments&&1===o||i.strings&&2===o))return}var n,o;if(n=this._contextKeyService,o=this._configurationService,!Boolean(n.getContextKeyValue("inlineSuggestionVisible"))||Boolean(o.getValue("editor.inlineSuggest.allowQuickSuggestions")))this.trigger({auto:!0,shy:!1})}}),this._quickSuggestDelay)}else 0!==this._state&&3===e.reason&&this._refilterCompletionItems()}_refilterCompletionItems(){Promise.resolve().then((()=>{if(0===this._state)return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=new ob(e,t,2===this._state,!1);this._onNewContext(i)}))}trigger(t,i=!1,n,o){var r;if(!this._editor.hasModel())return;const s=this._editor.getModel(),a=t.auto,l=new ob(s,this._editor.getPosition(),a,t.shy);this.cancel(i),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:t.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:null!==(r=t.triggerKind)&&void 0!==r?r:0};t.triggerCharacter&&(c={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new(0,Gd.CancellationTokenSource);const d=this._editor.getOption(101);let u=1;switch(d){case"top":u=0;break;case"bottom":u=2}const{itemKind:h,showDeprecated:g}=e._createSuggestFilter(this._editor),p=Z_.WordDistance.create(this._editorWorkerService,this._editor),f=(0,u_.provideSuggestionItems)(s,this._editor.getPosition(),new(0,u_.CompletionOptions)(u,h,n,g),c,this._requestToken.token);Promise.all([f,p]).then((([e,i])=>nb(this,void 0,void 0,(function*(){var n;if(null===(n=this._requestToken)||void 0===n||n.dispose(),!this._editor.hasModel())return;let r=null==o?void 0:o.clipboardText;if(!r&&e.needsClipboard&&(r=yield this._clipboardService.readText()),0===this._state)return;const s=this._editor.getModel();let l=e.items;if(o){const e=(0,u_.getSuggestionComparator)(u);l=l.concat(o.items).sort(e)}const c=new ob(s,this._editor.getPosition(),a,t.shy);this._completionModel=new q_(l,this._context.column,{leadingLineContent:c.leadingLineContent,characterCountDelta:c.column-this._context.column},i,this._editor.getOption(106),this._editor.getOption(101),r),this._completionDisposables.add(e.disposable),this._onNewContext(c),this._reportDurationsTelemetry(e.durations)})))).catch(Jc.onUnexpectedError)}_reportDurationsTelemetry(e){this._telemetryGate++%230==0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)}))}static _createSuggestFilter(e){const t=new Set;"none"===e.getOption(101)&&t.add(27);const i=e.getOption(106);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,Jd.getLeadingWhitespace)(e.leadingLineContent)===(0,Jd.getLeadingWhitespace)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const e=new Set(iu.CompletionProviderRegistry.all(this._editor.getModel()));for(let t of this._completionModel.allProvider)e.delete(t);const t=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,e,{items:t,clipboardText:this._completionModel.clipboardText})}else if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){const{incomplete:e}=this._completionModel,t=this._completionModel.adopt(e);this.trigger({auto:2===this._state,shy:!1,triggerKind:2},!0,e,{items:t,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(ob.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:i})}}else this.cancel();else this.cancel()}constructor(e,t,i,n,o,r,s){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=n,this._logService=o,this._contextKeyService=r,this._configurationService=s,this._toDispose=new(0,gd.DisposableStore),this._quickSuggestDelay=10,this._triggerCharacterListener=new(0,gd.DisposableStore),this._triggerQuickSuggest=new(0,hd.TimeoutTimer),this._state=0,this._completionDisposables=new(0,gd.DisposableStore),this._onDidCancel=new(0,Uu.Emitter),this._onDidTrigger=new(0,Uu.Emitter),this._onDidSuggest=new(0,Uu.Emitter),this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new(0,qc.Selection)(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()}))),this._toDispose.add(iu.CompletionProviderRegistry.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._onCursorChange(e)})));let a=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{a=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{a=!1,this._refilterCompletionItems()}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{a||this._refilterCompletionItems()}))),this._updateTriggerCharacters(),this._updateQuickSuggest()}};rb=tb([ib(1,G_.IEditorWorkerService),ib(2,Pd.IClipboardService),ib(3,rh.ITelemetryService),ib(4,A_.ILogService),ib(5,Zc.IContextKeyService),ib(6,lg.IConfigurationService)],rb);var sb={};e(sb,"SuggestWidget",(function(){return Av}),(function(e){return Av=e})),r("hC6do");Vc=r("kMb12"),yd=r("fmM7j"),vd=r("02ibr"),$u=r("kWoyS");const ab=(0,vd.registerColor)("symbolIcon.arrayForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),lb=(0,vd.registerColor)("symbolIcon.booleanForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cb=(0,vd.registerColor)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Vc.localize)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),db=(0,vd.registerColor)("symbolIcon.colorForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ub=(0,vd.registerColor)("symbolIcon.constantForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hb=(0,vd.registerColor)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Vc.localize)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gb=(0,vd.registerColor)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Vc.localize)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pb=(0,vd.registerColor)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Vc.localize)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fb=(0,vd.registerColor)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Vc.localize)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mb=(0,vd.registerColor)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Vc.localize)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_b=(0,vd.registerColor)("symbolIcon.fileForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bb=(0,vd.registerColor)("symbolIcon.folderForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vb=(0,vd.registerColor)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Vc.localize)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yb=(0,vd.registerColor)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Vc.localize)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wb=(0,vd.registerColor)("symbolIcon.keyForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Cb=(0,vd.registerColor)("symbolIcon.keywordForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xb=(0,vd.registerColor)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Vc.localize)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Sb=(0,vd.registerColor)("symbolIcon.moduleForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kb=(0,vd.registerColor)("symbolIcon.namespaceForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Eb=(0,vd.registerColor)("symbolIcon.nullForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Db=(0,vd.registerColor)("symbolIcon.numberForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ab=(0,vd.registerColor)("symbolIcon.objectForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ib=(0,vd.registerColor)("symbolIcon.operatorForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Rb=(0,vd.registerColor)("symbolIcon.packageForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tb=(0,vd.registerColor)("symbolIcon.propertyForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Mb=(0,vd.registerColor)("symbolIcon.referenceForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Lb=(0,vd.registerColor)("symbolIcon.snippetForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nb=(0,vd.registerColor)("symbolIcon.stringForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ob=(0,vd.registerColor)("symbolIcon.structForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pb=(0,vd.registerColor)("symbolIcon.textForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Fb=(0,vd.registerColor)("symbolIcon.typeParameterForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bb=(0,vd.registerColor)("symbolIcon.unitForeground",{dark:vd.foreground,light:vd.foreground,hc:vd.foreground},(0,Vc.localize)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jb=(0,vd.registerColor)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Vc.localize)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(ab);i&&t.addRule(`${$u.Codicon.symbolArray.cssSelector} { color: ${i}; }`);const n=e.getColor(lb);n&&t.addRule(`${$u.Codicon.symbolBoolean.cssSelector} { color: ${n}; }`);const o=e.getColor(cb);o&&t.addRule(`${$u.Codicon.symbolClass.cssSelector} { color: ${o}; }`);const r=e.getColor(xb);r&&t.addRule(`${$u.Codicon.symbolMethod.cssSelector} { color: ${r}; }`);const s=e.getColor(db);s&&t.addRule(`${$u.Codicon.symbolColor.cssSelector} { color: ${s}; }`);const a=e.getColor(ub);a&&t.addRule(`${$u.Codicon.symbolConstant.cssSelector} { color: ${a}; }`);const l=e.getColor(hb);l&&t.addRule(`${$u.Codicon.symbolConstructor.cssSelector} { color: ${l}; }`);const c=e.getColor(gb);c&&t.addRule(`\n\t\t\t${$u.Codicon.symbolValue.cssSelector},${$u.Codicon.symbolEnum.cssSelector} { color: ${c}; }`);const d=e.getColor(pb);d&&t.addRule(`${$u.Codicon.symbolEnumMember.cssSelector} { color: ${d}; }`);const u=e.getColor(fb);u&&t.addRule(`${$u.Codicon.symbolEvent.cssSelector} { color: ${u}; }`);const h=e.getColor(mb);h&&t.addRule(`${$u.Codicon.symbolField.cssSelector} { color: ${h}; }`);const g=e.getColor(_b);g&&t.addRule(`${$u.Codicon.symbolFile.cssSelector} { color: ${g}; }`);const p=e.getColor(bb);p&&t.addRule(`${$u.Codicon.symbolFolder.cssSelector} { color: ${p}; }`);const f=e.getColor(vb);f&&t.addRule(`${$u.Codicon.symbolFunction.cssSelector} { color: ${f}; }`);const m=e.getColor(yb);m&&t.addRule(`${$u.Codicon.symbolInterface.cssSelector} { color: ${m}; }`);const _=e.getColor(wb);_&&t.addRule(`${$u.Codicon.symbolKey.cssSelector} { color: ${_}; }`);const b=e.getColor(Cb);b&&t.addRule(`${$u.Codicon.symbolKeyword.cssSelector} { color: ${b}; }`);const v=e.getColor(Sb);v&&t.addRule(`${$u.Codicon.symbolModule.cssSelector} { color: ${v}; }`);const y=e.getColor(kb);y&&t.addRule(`${$u.Codicon.symbolNamespace.cssSelector} { color: ${y}; }`);const w=e.getColor(Eb);w&&t.addRule(`${$u.Codicon.symbolNull.cssSelector} { color: ${w}; }`);const C=e.getColor(Db);C&&t.addRule(`${$u.Codicon.symbolNumber.cssSelector} { color: ${C}; }`);const x=e.getColor(Ab);x&&t.addRule(`${$u.Codicon.symbolObject.cssSelector} { color: ${x}; }`);const S=e.getColor(Ib);S&&t.addRule(`${$u.Codicon.symbolOperator.cssSelector} { color: ${S}; }`);const k=e.getColor(Rb);k&&t.addRule(`${$u.Codicon.symbolPackage.cssSelector} { color: ${k}; }`);const E=e.getColor(Tb);E&&t.addRule(`${$u.Codicon.symbolProperty.cssSelector} { color: ${E}; }`);const D=e.getColor(Mb);D&&t.addRule(`${$u.Codicon.symbolReference.cssSelector} { color: ${D}; }`);const A=e.getColor(Lb);A&&t.addRule(`${$u.Codicon.symbolSnippet.cssSelector} { color: ${A}; }`);const I=e.getColor(Nb);I&&t.addRule(`${$u.Codicon.symbolString.cssSelector} { color: ${I}; }`);const R=e.getColor(Ob);R&&t.addRule(`${$u.Codicon.symbolStruct.cssSelector} { color: ${R}; }`);const T=e.getColor(Pb);T&&t.addRule(`${$u.Codicon.symbolText.cssSelector} { color: ${T}; }`);const M=e.getColor(Fb);M&&t.addRule(`${$u.Codicon.symbolTypeParameter.cssSelector} { color: ${M}; }`);const L=e.getColor(Bb);L&&t.addRule(`${$u.Codicon.symbolUnit.cssSelector} { color: ${L}; }`);const N=e.getColor(jb);N&&t.addRule(`${$u.Codicon.symbolVariable.cssSelector} { color: ${N}; }`)}));Vc=r("kMb12"),Jd=r("aAfu1"),Tu=r("2cxKt"),Uu=r("7bUGH"),Jc=r("8bVMi"),gd=r("ky1to");var zb=r("1BDxV"),Wb=(Zc=r("c5sLr"),r("iNj3h")),Hb=(yd=r("fmM7j"),vd=r("02ibr"),Uh=r("6Jk2H"),hd=r("hsQau"),Iu=r("cwJE1"),{});e(Hb,"canExpandCompletionItem",(function(){return $b}),(function(e){return $b=e})),e(Hb,"SuggestDetailsWidget",(function(){return qb}),(function(e){return qb=e})),e(Hb,"SuggestDetailsOverlay",(function(){return Gb}),(function(e){return Gb=e}));Vc=r("kMb12"),gd=r("ky1to"),Tu=r("2cxKt"),_g=r("2YDAi"),$u=r("kWoyS"),Uu=r("7bUGH"),Uu=r("7bUGH"),gd=r("ky1to"),Tu=r("2cxKt"),jg=r("hxCPG");class Kb{dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,i,n){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=i?3:0,this._westSash.state=n?3:0}layout(e=this.size.height,t=this.size.width){const{height:i,width:n}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(i,Math.min(o,e)),t=Math.max(n,Math.min(r,t));const s=new(0,Tu.Dimension)(t,e);Tu.Dimension.equals(s,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=s,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}constructor(){let e;this._onDidWillResize=new(0,Uu.Emitter),this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new(0,Uu.Emitter),this.onDidResize=this._onDidResize.event,this._sashListener=new(0,gd.DisposableStore),this._size=new(0,Tu.Dimension)(0,0),this._minSize=new(0,Tu.Dimension)(0,0),this._maxSize=new(0,Tu.Dimension)(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new(0,jg.Sash)(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new(0,jg.Sash)(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new(0,jg.Sash)(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:jg.OrthogonalEdge.North}),this._southSash=new(0,jg.Sash)(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:jg.OrthogonalEdge.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let t=0,i=0;this._sashListener.add(Uu.Event.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((()=>{void 0===e&&(this._onDidWillResize.fire(),e=this._size,t=0,i=0)}))),this._sashListener.add(Uu.Event.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((()=>{void 0!==e&&(e=void 0,t=0,i=0,this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((n=>{e&&(i=n.currentX-n.startX,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((n=>{e&&(i=-(n.currentX-n.startX),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((n=>{e&&(t=-(n.currentY-n.startY),this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((n=>{e&&(t=n.currentY-n.startY,this.layout(e.height+t,e.width+i),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))}))),this._sashListener.add(Uu.Event.any(this._eastSash.onDidReset,this._westSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))),this._sashListener.add(Uu.Event.any(this._northSash.onDidReset,this._southSash.onDidReset)((e=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))})))}}Iu=r("cwJE1");var Ub=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Vb=function(e,t){return function(i,n){t(i,n,e)}};function $b(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}let qb=class{dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(42),i=t.fontFamily,n=e.get(107)||t.fontSize,o=e.get(108)||t.lineHeight,r=t.fontWeight,s=`${n}px`,a=`${o}px`;this.domNode.style.fontSize=s,this.domNode.style.lineHeight=a,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=a,this._close.style.width=a}getLayoutInfo(){const e=this._editor.getOption(108)||this._editor.getOption(42).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=Vc.localize("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,n;this._renderDisposeable.clear();let{detail:o,documentation:r}=e.completion;if(t){let t="";t+=`score: ${e.score[0]}\n`,t+=`prefix: ${null!==(i=e.word)&&void 0!==i?i:"(no prefix)"}\n`,t+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}\n`,t+=`distance: ${e.distance} (localityBonus-setting)\n`,t+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}\n`,t+=`commit_chars: ${null===(n=e.completion.commitCharacters)||void 0===n?void 0:n.join("")}\n`,r=(new Xc).appendCodeblock("empty",t),o=`Provider: ${e.provider._debugDisplayName}`}if(t||$b(e)){if(this.domNode.classList.remove("no-docs","no-type"),o){const e=o.length>1e5?`${o.substr(0,1e5)}…`:o;this._type.textContent=e,this._type.title=e,Tu.show(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(e))}else Tu.clearNode(this._type),this._type.title="",Tu.hide(this._type),this.domNode.classList.add("no-type");if(Tu.clearNode(this._docs),"string"==typeof r)this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),Tu.clearNode(this._docs);const e=this._markdownRenderer.render(r);this._docs.appendChild(e.element),this._renderDisposeable.add(e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const i=new Tu.Dimension(e,t);Tu.Dimension.equals(i,this._size)||(this._size=i,Tu.size(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}constructor(e,t){this._editor=e,this._onDidClose=new(0,Uu.Emitter),this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new(0,Uu.Emitter),this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new(0,gd.DisposableStore),this._renderDisposeable=new(0,gd.DisposableStore),this._borderWidth=1,this._size=new Tu.Dimension(330,0),this.domNode=Tu.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(vf.MarkdownRenderer,{editor:e}),this._body=Tu.$(".body"),this._scrollbar=new(0,_g.DomScrollableElement)(this._body,{}),Tu.append(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Tu.append(this._body,Tu.$(".header")),this._close=Tu.append(this._header,Tu.$("span"+$u.Codicon.close.cssSelector)),this._close.title=Vc.localize("details.close","Close"),this._type=Tu.append(this._header,Tu.$("p.type")),this._docs=Tu.append(this._body,Tu.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(42)&&this._configureFont()})))}};qb=Ub([Vb(1,Iu.IInstantiationService)],qb);class Gb{dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const i=Tu.getDomNodePagePosition(e);this._anchorBox=i,this._placeAtAnchor(this._anchorBox,null!==(t=this._userSize)&&void 0!==t?t:this.widget.size)}_placeAtAnchor(e,t){const i=Tu.getClientArea(document.body),n=this.widget.getLayoutInfo();let o,r,s,a,l=new Tu.Dimension(220,2*n.lineHeight),c=0,d=e.top,u=e.top+e.height-n.borderHeight,h=i.width-(e.left+e.width+n.borderWidth+n.horizontalPadding);c=-n.borderWidth+e.left+e.width,a=!0,o=new Tu.Dimension(h,i.height-e.top-n.borderHeight-n.verticalPadding),r=o.with(void 0,e.top+e.height-n.borderHeight-n.verticalPadding),t.width>h&&(e.left>h&&(h=e.left-n.borderWidth-n.horizontalPadding,a=!1,c=Math.max(n.horizontalPadding,e.left-t.width-n.borderWidth),o=o.with(h),r=o.with(void 0,r.height)),e.width>1.3*h&&i.height-(e.top+e.height)>e.height&&(h=e.width,c=e.left,d=-n.borderWidth+e.top+e.height,o=new Tu.Dimension(e.width-n.borderHeight,i.height-e.top-e.height-n.verticalPadding),r=o.with(void 0,e.top-n.verticalPadding),l=l.with(o.width)));let g,p=t.height,f=Math.max(o.height,r.height);p>f&&(p=f),p<=o.height?(s=!0,g=o):(s=!1,g=r),this._applyTopLeft({left:c,top:s?d:u-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!s,a,s,!a),this._resizable.minSize=l,this._resizable.maxSize=g,this._resizable.layout(p,Math.min(g.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}constructor(e,t){let i,n;this.widget=e,this._editor=t,this._disposables=new(0,gd.DisposableStore),this._added=!1,this._resizable=new Kb,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let o=0,r=0;this._disposables.add(this._resizable.onDidWillResize((()=>{i=this._topLeft,n=this._resizable.size}))),this._disposables.add(this._resizable.onDidResize((e=>{if(i&&n){this.widget.layout(e.dimension.width,e.dimension.height);let t=!1;e.west&&(r=n.width-e.dimension.width,t=!0),e.north&&(o=n.height-e.dimension.height,t=!0),t&&this._applyTopLeft({top:i.top+o,left:i.left+r})}e.done&&(i=void 0,n=void 0,o=0,r=0,this._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((()=>{var e;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(e=this._userSize)&&void 0!==e?e:this.widget.size)})))}}var Zb={};e(Zb,"SuggestWidgetStatus",(function(){return Qb}),(function(e){return Qb=e}));Tu=r("2cxKt"),Tg=r("dhO0F"),gd=r("ky1to"),Vc=r("kMb12"),wd=r("4Nnjr"),Zc=r("c5sLr"),Iu=r("cwJE1");var Jb=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Yb=function(e,t){return function(i,n){t(i,n,e)}};class Xb extends $g.MenuEntryActionViewItem{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=(0,Vc.localize)("ddd","{0} ({1})",this._action.label,Xb.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"⏎")}}let Qb=class{dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(u_.suggestWidgetStatusbarMenu,this._contextKeyService),t=()=>{const t=[],i=[];for(let[n,o]of e.getActions())"left"===n?t.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange((()=>t()))),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}constructor(e,t,i,n){this._menuService=i,this._contextKeyService=n,this._menuDisposables=new(0,gd.DisposableStore),this.element=Tu.append(e,Tu.$(".suggest-status-bar"));const o=e=>e instanceof wd.MenuItemAction?t.createInstance(Xb,e,void 0):void 0;this._leftActions=new(0,Tg.ActionBar)(this.element,{actionViewItemProvider:o}),this._rightActions=new(0,Tg.ActionBar)(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}};Qb=Jb([Yb(1,Iu.IInstantiationService),Yb(2,wd.IMenuService),Yb(3,Zc.IContextKeyService)],Qb);var ev={};e(ev,"getAriaId",(function(){return dv}),(function(e){return dv=e})),e(ev,"ItemRenderer",(function(){return gv}),(function(e){return gv=e}));Vc=r("kMb12"),h_=r("7DFs7"),gd=r("ky1to"),Tu=r("2cxKt"),yd=r("fmM7j"),gg=r("apdYP"),iu=r("ldsR3");var tv,iv,nv=r("au47y"),ov=(Dg=r("gqnvK"),lh=r("liPtJ"),r("hP0aD"));function rv(e,t,i,n){const o=n===tv.ROOT_FOLDER?["rootfolder-icon"]:n===tv.FOLDER?["folder-icon"]:["file-icon"];if(i){let r;if(i.scheme===Dg.Schemas.data){r=lh.DataUri.parseMetaData(i).get(lh.DataUri.META_DATA_LABEL)}else r=sv((0,lh.basenameOrAuthority)(i).toLowerCase());if(n===tv.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),r.length<=255){const e=r.split(".");for(let t=1;t<e.length;t++)o.push(`${e.slice(t).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const n=function(e,t,i){if(!i)return null;let n=null;if(i.scheme===Dg.Schemas.data){const e=lh.DataUri.parseMetaData(i).get(lh.DataUri.META_DATA_MIME);e&&(n=t.getModeId(e))}else{const t=e.getModel(i);t&&(n=t.getModeId())}return n&&n!==ov.PLAINTEXT_MODE_ID?n:t.getModeIdByFilepathOrFirstLine(i)}(e,t,i);n&&o.push(`${sv(n)}-lang-file-icon`)}}return o}function sv(e){return e.replace(/[\11\12\14\15\40]/g,"/")}(iv=tv||(tv={}))[iv.FILE=0]="FILE",iv[iv.FOLDER=1]="FOLDER",iv[iv.ROOT_FOLDER=2]="ROOT_FOLDER";nu=r("cDtHV"),eu=r("avLBk"),Qd=r("dD6PO"),$u=r("kWoyS"),Uu=r("7bUGH");var av,lv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},cv=function(e,t){return function(i,n){t(i,n,e)}};function dv(e){return`suggest-aria-id:${e}`}const uv=(0,(tf=r("lfDTl")).registerIcon)("suggest-more-info",$u.Codicon.chevronRight,Vc.localize("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),hv=new((av=class e{extract(t,i){if(t.textLabel.match(e._regexStrict))return i[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return i[0]=t.completion.detail,!0;if("string"==typeof t.completion.documentation){const n=e._regexRelaxed.exec(t.completion.documentation);if(n&&(0===n.index||n.index+n[0].length===t.completion.documentation.length))return i[0]=n[0],!0}return!1}})._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,av._regexStrict=new RegExp(`^${av._regexRelaxed.source}$`,"i"),av);let gv=class{dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new(0,gd.DisposableStore),t.root=e,t.root.classList.add("show-file-icons"),t.icon=(0,Tu.append)(e,(0,Tu.$)(".icon")),t.colorspan=(0,Tu.append)(t.icon,(0,Tu.$)("span.colorspan"));const i=(0,Tu.append)(e,(0,Tu.$)(".contents")),n=(0,Tu.append)(i,(0,Tu.$)(".main"));t.iconContainer=(0,Tu.append)(n,(0,Tu.$)(".icon-label.codicon")),t.left=(0,Tu.append)(n,(0,Tu.$)("span.left")),t.right=(0,Tu.append)(n,(0,Tu.$)("span.right")),t.iconLabel=new(0,nv.IconLabel)(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=(0,Tu.append)(t.left,(0,Tu.$)("span.signature-label")),t.qualifierLabel=(0,Tu.append)(t.left,(0,Tu.$)("span.qualifier-label")),t.detailsLabel=(0,Tu.append)(t.right,(0,Tu.$)("span.details-label")),t.readMore=(0,Tu.append)(t.right,(0,Tu.$)("span.readMore"+yd.ThemeIcon.asCSSSelector(uv))),t.readMore.title=Vc.localize("readMore","Read More");const o=()=>{const e=this._editor.getOptions(),i=e.get(42),o=i.fontFamily,r=i.fontFeatureSettings,s=e.get(107)||i.fontSize,a=e.get(108)||i.lineHeight,l=i.fontWeight,c=`${s}px`,d=`${a}px`;t.root.style.fontSize=c,t.root.style.fontWeight=l,n.style.fontFamily=o,n.style.fontFeatureSettings=r,n.style.lineHeight=d,t.icon.style.height=d,t.icon.style.width=d,t.readMore.style.height=d,t.readMore.style.width=d};return o(),t.disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(42)||e.hasChanged(107)||e.hasChanged(108))&&o()}))),t}renderElement(e,t,i){const{completion:n}=e;i.root.id=dv(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:(0,h_.createMatches)(e.score)};let r=[];if(19===n.kind&&hv.extract(e,r))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=r[0];else if(20===n.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const t=rv(this._modelService,this._modeService,eu.URI.from({scheme:"fake",path:e.textLabel}),tv.FILE),r=rv(this._modelService,this._modeService,eu.URI.from({scheme:"fake",path:n.detail}),tv.FILE);o.extraClasses=t.length>r.length?t:r}else 23===n.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=(0,Qd.flatten)([rv(this._modelService,this._modeService,eu.URI.from({scheme:"fake",path:e.textLabel}),tv.FOLDER),rv(this._modelService,this._modeService,eu.URI.from({scheme:"fake",path:n.detail}),tv.FOLDER)])):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...(0,iu.completionKindToCssClass)(n.kind).split(" ")));n.tags&&n.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),"string"==typeof n.label?(i.parametersLabel.textContent="",i.detailsLabel.textContent=pv(n.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=pv(n.label.detail||""),i.detailsLabel.textContent=pv(n.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(106).showInlineDetails?(0,Tu.show)(i.detailsLabel):(0,Tu.hide)(i.detailsLabel),(0,Hb.canExpandCompletionItem)(e)?(i.right.classList.add("can-expand-details"),(0,Tu.show)(i.readMore),i.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},i.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,Tu.hide)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}constructor(e,t,i,n){this._editor=e,this._modelService=t,this._modeService=i,this._themeService=n,this._onDidToggleDetails=new(0,Uu.Emitter),this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}};function pv(e){return e.replace(/\r\n|\r|\n/g,"")}gv=lv([cv(1,nu.IModelService),cv(2,gg.IModeService),cv(3,yd.IThemeService)],gv);var fv=r("5Fa3A"),mv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},_v=function(e,t){return function(i,n){t(i,n,e)}},bv=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const vv=(0,vd.registerColor)("editorSuggestWidget.background",{dark:vd.editorWidgetBackground,light:vd.editorWidgetBackground,hc:vd.editorWidgetBackground},Vc.localize("editorSuggestWidgetBackground","Background color of the suggest widget.")),yv=(0,vd.registerColor)("editorSuggestWidget.border",{dark:vd.editorWidgetBorder,light:vd.editorWidgetBorder,hc:vd.editorWidgetBorder},Vc.localize("editorSuggestWidgetBorder","Border color of the suggest widget.")),wv=(0,vd.registerColor)("editorSuggestWidget.foreground",{dark:vd.editorForeground,light:vd.editorForeground,hc:vd.editorForeground},Vc.localize("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Cv=(0,vd.registerColor)("editorSuggestWidget.selectedForeground",{dark:vd.quickInputListFocusForeground,light:vd.quickInputListFocusForeground,hc:vd.quickInputListFocusForeground},Vc.localize("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),xv=(0,vd.registerColor)("editorSuggestWidget.selectedIconForeground",{dark:vd.quickInputListFocusIconForeground,light:vd.quickInputListFocusIconForeground,hc:vd.quickInputListFocusIconForeground},Vc.localize("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),Sv=(0,vd.registerColor)("editorSuggestWidget.selectedBackground",{dark:vd.quickInputListFocusBackground,light:vd.quickInputListFocusBackground,hc:vd.quickInputListFocusBackground},Vc.localize("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),kv=(0,vd.registerColor)("editorSuggestWidget.highlightForeground",{dark:vd.listHighlightForeground,light:vd.listHighlightForeground,hc:vd.listHighlightForeground},Vc.localize("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),Ev=(0,vd.registerColor)("editorSuggestWidget.focusHighlightForeground",{dark:vd.listFocusHighlightForeground,light:vd.listFocusHighlightForeground,hc:vd.listFocusHighlightForeground},Vc.localize("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class Dv{restore(){var e;const t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{const e=JSON.parse(t);if(Tu.Dimension.is(e))return Tu.Dimension.lift(e)}catch(e){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Lg.EmbeddedCodeEditorWidget}`}}let Av=class e{dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(vv);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const i=e.getColor(yv);i&&(this.element.domNode.style.borderColor=i.toString(),this._messageElement.style.borderColor=i.toString(),this._status.element.style.borderTopColor=i.toString(),this._details.widget.domNode.style.borderColor=i.toString(),this._detailsBorderColor=i.toString());const n=e.getColor(vd.focusBorder);n&&(this._detailsFocusBorderColor=n.toString()),this._details.widget.borderWidth="hc"===e.type?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),void this.editor.setAriaOptions({activeDescendant:void 0});if(!this._completionModel)return;const i=e.elements[0],n=e.indexes[0];i!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(n),this._currentSuggestionDetails=(0,hd.createCancelablePromise)((e=>bv(this,void 0,void 0,(function*(){const t=(0,hd.disposableTimeout)((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250);e.onCancellationRequested((()=>t.dispose()));const n=yield i.resolve(e);return t.dispose(),n})))),this._currentSuggestionDetails.then((()=>{n>=this._list.length||i!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[i]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:(0,ev.getAriaId)(n)}))})).catch(Jc.onUnexpectedError)),this._onDidFocus.fire({item:i,index:n,model:this._completionModel})}_setState(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:Tu.hide(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,Tu.hide(this._listElement,this._status.element),Tu.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,Tu.hide(this._listElement,this._status.element),Tu.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:Tu.hide(this._messageElement),Tu.show(this._listElement,this._status.element),this._show();break;case 5:Tu.hide(this._messageElement),Tu.show(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(e,t){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,hd.disposableTimeout)((()=>this._setState(1)),t)))}showSuggestions(e,t,i,n){var o,r;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(o=this._loadingTimeout)||void 0===o||o.dispose(),null===(r=this._currentSuggestionDetails)||void 0===r||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)return void this._setState(4);const s=this._completionModel.items.length,a=0===s;if(this._ctxSuggestWidgetMultipleSuggestions.set(s>1),a)return this._setState(n?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!(0,Hb.canExpandCompletionItem)(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return 4===this._state}_afterRender(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(e){var t,i,n;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;const o=Tu.getClientArea(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let s=e.height,a=e.width;if(this._status.element.style.lineHeight=`${r.itemHeight}px`,2===this._state||1===this._state)s=r.itemHeight+r.borderHeight,a=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Tu.Dimension(a,s),this._contentWidget.setPreference(2);else{const l=o.width-r.borderHeight-2*r.horizontalPadding;a>l&&(a=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:a,d=r.statusBarHeight+this._list.contentHeight+r.borderHeight,u=r.itemHeight+r.statusBarHeight,h=Tu.getDomNodePagePosition(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=h.top+g.top+g.height,f=Math.min(o.height-p-r.verticalPadding,d),m=h.top+g.top-r.verticalPadding,_=Math.min(m,d);let b=Math.min(Math.max(_,f)+r.borderHeight,d);s===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>b&&(s=b);const v=150;s>f||this._forceRenderingAbove&&m>v?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),b=_):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),b=f),this.element.preferredSize=new Tu.Dimension(c,r.defaultSize.height),this.element.maxSize=new Tu.Dimension(l,b),this.element.minSize=new Tu.Dimension(220,u),this._cappedHeight=s===d?{wanted:null!==(n=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==n?n:e.height,capped:s}:void 0}this._resize(a,s)}_resize(e,t){const{width:i,height:n}=this.element.maxSize;e=Math.min(i,e),t=Math.min(n,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=t-o+"px",this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(42),t=(0,fv.clamp)(this.editor.getOption(108)||e.lineHeight,8,1e3),i=this.editor.getOption(106).showStatusBar&&2!==this._state&&1!==this._state?t:0,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Tu.Dimension(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}constructor(e,t,i,n,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new(0,hd.TimeoutTimer),this._disposables=new(0,gd.DisposableStore),this._onDidSelect=new(0,Uu.Emitter),this._onDidFocus=new(0,Uu.Emitter),this._onDidHide=new(0,Uu.Emitter),this._onDidShow=new(0,Uu.Emitter),this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new(0,Uu.Emitter),this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Kb,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Iv(this,e),this._persistedSize=new Dv(t,e);class r{constructor(e,t,i=!1,n=!1){this.persistedSize=e,this.currentSize=t,this.persistHeight=i,this.persistWidth=n}}let s;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),s=new r(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((e=>{var t,i,n,o;if(this._resize(e.dimension.width,e.dimension.height),s&&(s.persistHeight=s.persistHeight||!!e.north||!!e.south,s.persistWidth=s.persistWidth||!!e.east||!!e.west),e.done){if(s){const{itemHeight:e,defaultSize:r}=this.getLayoutInfo(),a=Math.round(e/2);let{width:l,height:c}=this.element.size;(!s.persistHeight||Math.abs(s.currentSize.height-c)<=a)&&(c=null!==(i=null===(t=s.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:r.height),(!s.persistWidth||Math.abs(s.currentSize.width-l)<=a)&&(l=null!==(o=null===(n=s.persistedSize)||void 0===n?void 0:n.width)&&void 0!==o?o:r.width),this._persistedSize.store(new Tu.Dimension(l,c))}this._contentWidget.unlockPreference(),s=void 0}}))),this._messageElement=Tu.append(this.element.domNode,Tu.$(".message")),this._listElement=Tu.append(this.element.domNode,Tu.$(".tree"));const a=o.createInstance(Hb.SuggestDetailsWidget,this.editor);a.onDidClose(this.toggleDetails,this,this._disposables),this._details=new(0,Hb.SuggestDetailsOverlay)(a,this.editor);const l=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(106).showIcons);l();const c=o.createInstance(ev.ItemRenderer,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new(0,zb.List)("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:e=>{if(e.isResolved&&this._isDetailsVisible()){const{documentation:t,detail:i}=e.completion,n=Jd.format("{0}{1}",i||"",t?"string"==typeof t?t:t.value:"");return Vc.localize("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",e.textLabel,n)}return e.textLabel},getWidgetAriaLabel:()=>Vc.localize("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=o.createInstance(Zb.SuggestWidgetStatus,this.element.domNode);const d=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(106).showStatusBar);d(),this._disposables.add((0,Wb.attachListStyler)(this._list,n,{listInactiveFocusBackground:Sv,listInactiveFocusOutline:vd.activeContrastBorder})),this._disposables.add(n.onDidColorThemeChange((e=>this._onThemeChange(e)))),this._onThemeChange(n.getColorTheme()),this._disposables.add(this._list.onMouseDown((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onTap((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onDidChangeSelection((e=>this._onListSelection(e)))),this._disposables.add(this._list.onDidChangeFocus((e=>this._onListFocus(e)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(106)&&(d(),l())}))),this._ctxSuggestWidgetVisible=u_.Context.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=u_.Context.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=u_.Context.MultipleSuggestions.bindTo(i),this._disposables.add(Tu.addStandardDisposableListener(this._details.widget.domNode,"keydown",(e=>{this._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((e=>this._onEditorMouseDown(e))))}};Av.LOADING_MESSAGE=Vc.localize("suggestWidget.loading","Loading..."),Av.NO_SUGGESTIONS_MESSAGE=Vc.localize("suggestWidget.noSuggestions","No suggestions."),Av=mv([_v(1,Uh.IStorageService),_v(2,Zc.IContextKeyService),_v(3,yd.IThemeService),_v(4,Iu.IInstantiationService)],Av);class Iv{dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:n}=this._widget.getLayoutInfo();return new Tu.Dimension(t+2*i+n,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}}(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(kv);i&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${i}; }`);const n=e.getColor(Ev);i&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${n}; }`);const o=e.getColor(wv);o&&t.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${o}; }`);const r=e.getColor(Cv);r&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${r}; }`);const s=e.getColor(xv);s&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ${s}; }`);const a=e.getColor(vd.textLinkForeground);a&&t.addRule(`.monaco-editor .suggest-details a { color: ${a}; }`);const l=e.getColor(vd.textLinkActiveForeground);l&&t.addRule(`.monaco-editor .suggest-details a:hover { color: ${l}; }`);const c=e.getColor(vd.textCodeBlockBackground);c&&t.addRule(`.monaco-editor .suggest-details code { background-color: ${c}; }`)}));var Rv={};e(Rv,"WordContextKey",(function(){return Lv}),(function(e){return Lv=e}));Zc=r("c5sLr");var Tv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Mv=function(e,t){return function(i,n){t(i,n,e)}};let Lv=class e{dispose(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}_update(){const e="on"===this._editor.getOption(111);if(this._enabled!==e)if(this._enabled=e,this._enabled){const e=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const e=this._editor.getModel(),t=this._editor.getSelection(),i=e.getWordAtPosition(t.getStartPosition());i?this._ckAtEnd.set(i.endColumn===t.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(e),e()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}constructor(t,i){this._editor=t,this._enabled=!1,this._ckAtEnd=e.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration((e=>e.hasChanged(111)&&this._update())),this._update()}};Lv.AtEnd=new(0,Zc.RawContextKey)("atEndOfWord",!1),Lv=Tv([Mv(1,Zc.IContextKeyService)],Lv);Uu=r("7bUGH"),hd=r("hsQau"),Mh=r("5jjji"),Qd=r("dD6PO"),gd=r("ky1to");var Nv=r("iQyRu");class Ov{_onItem(e){if(!e||!(0,Qd.isNonEmptyArray)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const t=new(0,Nv.CharacterSet);for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}constructor(e,t,i){this._disposables=new(0,gd.DisposableStore),this._disposables.add(t.onDidShow((()=>this._onItem(t.getFocusedItem())))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType((n=>{if(this._active&&!t.isFrozen()){const t=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&i(this._active.item)}})))}}gd=r("ky1to");class Pv{getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}constructor(e,t){this._disposables=new(0,gd.DisposableStore),this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType((()=>{if(!this._empty)return;if(!e.hasModel())return;const t=e.getSelections(),i=t.length;let n=!1;for(let e=0;e<i;e++)if(!t[e].isEmpty()){n=!0;break}if(!n)return;this._lastOvertyped=[];const o=e.getModel();for(let e=0;e<i;e++){const i=t[e];if(o.getValueLengthInRange(i)>Pv._maxSelectionLength)return;this._lastOvertyped[e]={value:o.getValueInRange(i),multiline:i.startLineNumber!==i.endLineNumber}}this._empty=!1}))),this._disposables.add(t.onDidCancel((e=>{this._empty||e.retrigger||(this._empty=!0)})))}}Pv._maxSelectionLength=51200;pd=r("dLnDZ"),Ld=r("drE9L"),wd=r("4Nnjr"),Gd=r("7G83E"),A_=r("k0Rz2"),g_=r("6dNj6");var Fv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Bv=function(e,t){return function(i,n){t(i,n,e)}};class jv{dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}constructor(e,t){this._model=e,this._position=t;if(e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),n=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:fd.Range.fromPositions(t,n),options:{description:"suggest-line-suffix",stickiness:1}}])}}}let zv=class e{static get(t){return t.getContribution(e.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const i=this.editor.getModel(),n=i.getAlternativeVersionId(),{item:o}=e,r=[],s=new(0,Gd.CancellationTokenSource);1&t||this.editor.pushUndoStop();const a=this.getOverwriteInfo(o,Boolean(8&t));if(this._memoryService.memorize(i,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){const e=tu.StableEditorScrollState.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map((e=>gm.EditOperation.replace(fd.Range.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){const e=new(0,g_.StopWatch)(!0);let n;const a=i.onDidChangeContent((e=>{if(e.isFlush)return s.cancel(),void a.dispose();for(let t of e.changes){const e=fd.Range.getEndPosition(t.range);n&&!pd.Position.isBefore(e,n)||(n=e)}}));let l=t;t|=2;let c=!1,d=this.editor.onWillType((()=>{d.dispose(),c=!0,2&l||this.editor.pushUndoStop()}));r.push(o.resolve(s.token).then((()=>{if(!o.completion.additionalTextEdits||s.token.isCancellationRequested)return!1;if(n&&o.completion.additionalTextEdits.some((e=>pd.Position.isBefore(n,fd.Range.getStartPosition(e.range)))))return!1;c&&this.editor.pushUndoStop();const e=tu.StableEditorScrollState.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map((e=>gm.EditOperation.replace(fd.Range.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!c&&2&l||this.editor.pushUndoStop(),!0})).then((t=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),t),a.dispose(),d.dispose()})))}let{insertText:l}=o.completion;4&o.completion.insertTextRules||(l=Km.escape(l)),d_.SnippetController2.get(this.editor).insert(l,{overwriteBefore:a.overwriteBefore,overwriteAfter:a.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&o.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===Wv.id?this.model.trigger({auto:!0,shy:!1},!0):(r.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(Jc.onUnexpectedError)),this.model.cancel()):this.model.cancel(),4&t&&this._alternatives.value.set(e,(e=>{for(s.cancel();i.canUndo();){n!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(o),Promise.all(r).finally((()=>{this.model.clear(),s.dispose()}))}getOverwriteInfo(e,t){(0,Mh.assertType)(this.editor.hasModel());let i="replace"===this.editor.getOption(106).insertMode;t&&(i=!i);const n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:n+(this.editor.getPosition().column-e.position.column),overwriteAfter:o+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(e){if((0,Qd.isNonEmptyArray)(e.completion.additionalTextEdits)){let t=Vc.localize("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,id.alert)(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealLine(this.editor.getPosition().lineNumber,0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},n=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const t=this.editor.getPosition(),i=e.editStart.column,n=t.column;if(n-i!==e.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:n})!==e.completion.insertText};Uu.Event.once(this.model.onDidTrigger)((e=>{let t=[];Uu.Event.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{(0,gd.dispose)(t),i()}),void 0,t),this.model.onDidSuggest((({completionModel:e})=>{if((0,gd.dispose)(t),0===e.items.length)return void i();const o=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),r=e.items[o];n(r)?(this.editor.pushUndoStop(),this._insertSuggestion({index:o,item:r,model:e},7)):i()}),void 0,t)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealLine(t.lineNumber,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}constructor(e,t,i,n,o,r){this._memoryService=t,this._commandService=i,this._contextKeyService=n,this._instantiationService=o,this._logService=r,this._lineSuffix=new(0,gd.MutableDisposable),this._toDispose=new(0,gd.DisposableStore),this.editor=e,this.model=o.createInstance($_.SuggestModel,this.editor);const s=u_.Context.InsertMode.bindTo(n);s.set(e.getOption(106).insertMode),this.model.onDidTrigger((()=>s.set(e.getOption(106).insertMode))),this.widget=this._toDispose.add(new(0,hd.IdleValue)((()=>{const e=this._instantiationService.createInstance(sb.SuggestWidget,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect((e=>this._insertSuggestion(e,0)),this));const t=new Ov(this.editor,e,(e=>this._insertSuggestion(e,2)));this._toDispose.add(t),this._toDispose.add(this.model.onDidSuggest((e=>{0===e.completionModel.items.length&&t.reset()})));const i=u_.Context.MakesTextEdit.bindTo(this._contextKeyService),n=u_.Context.HasInsertAndReplaceRange.bindTo(this._contextKeyService),o=u_.Context.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,gd.toDisposable)((()=>{i.reset(),n.reset(),o.reset()}))),this._toDispose.add(e.onDidFocus((({item:e})=>{const t=this.editor.getPosition(),r=e.editStart.column,s=t.column;let a=!0;if(!("smart"!==this.editor.getOption(1)||2!==this.model.state||e.completion.command||e.completion.additionalTextEdits||4&e.completion.insertTextRules||s-r!==e.completion.insertText.length)){a=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:r,endLineNumber:t.lineNumber,endColumn:s})!==e.completion.insertText}i.set(a),n.set(!pd.Position.equals(e.editInsertEnd,e.editReplaceEnd)),o.set(Boolean(e.provider.resolveCompletionItem)||Boolean(e.completion.documentation)||e.completion.detail!==e.completion.label)}))),this._toDispose.add(e.onDetailsKeyDown((e=>{e.toKeybinding().equals(new(0,Gc.SimpleKeybinding)(!0,!1,!1,!1,33))||Ld.isMacintosh&&e.toKeybinding().equals(new(0,Gc.SimpleKeybinding)(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new(0,hd.IdleValue)((()=>this._toDispose.add(new Pv(this.editor,this.model))))),this._alternatives=this._toDispose.add(new(0,hd.IdleValue)((()=>this._toDispose.add(new(0,H_.SuggestAlternatives)(this.editor,this._contextKeyService))))),this._toDispose.add(o.createInstance(Rv.WordContextKey,e)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new jv(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(!e.shy){let t=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items);this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{this.model.cancel(),this.model.clear()})));let a=u_.Context.AcceptSuggestionsOnEnter.bindTo(n),l=()=>{const e=this.editor.getOption(1);a.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>l()))),l()}};zv.ID="editor.contrib.suggestController",zv=Fv([Bv(1,N_.ISuggestMemoryService),Bv(2,du.ICommandService),Bv(3,Zc.IContextKeyService),Bv(4,Iu.IInstantiationService),Bv(5,A_.ILogService)],zv);class Wv extends Uc.EditorAction{run(e,t){const i=zv.get(t);i&&i.triggerSuggest()}constructor(){super({id:Wv.id,label:Vc.localize("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasCompletionItemProvider),kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}}Wv.id="editor.action.triggerSuggest",(0,Uc.registerEditorContribution)(zv.ID,zv),(0,Uc.registerEditorAction)(Wv);const Hv=Uc.EditorCommand.bindToContribution(zv.get);(0,Uc.registerEditorCommand)(new Hv({id:"acceptSelectedSuggestion",precondition:u_.Context.Visible,handler(e){e.acceptSelectedSuggestion(!0,!1)}})),W_.KeybindingsRegistry.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Zc.ContextKeyExpr.and(u_.Context.Visible,$c.EditorContextKeys.textInputFocus),primary:2,weight:190}),W_.KeybindingsRegistry.registerKeybindingRule({id:"acceptSelectedSuggestion",when:Zc.ContextKeyExpr.and(u_.Context.Visible,$c.EditorContextKeys.textInputFocus,u_.Context.AcceptSuggestionsOnEnter,u_.Context.MakesTextEdit),primary:3,weight:190}),wd.MenuRegistry.appendMenuItem(u_.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Vc.localize("accept.insert","Insert")},group:"left",order:1,when:u_.Context.HasInsertAndReplaceRange.toNegated()}),wd.MenuRegistry.appendMenuItem(u_.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Vc.localize("accept.insert","Insert")},group:"left",order:1,when:Zc.ContextKeyExpr.and(u_.Context.HasInsertAndReplaceRange,u_.Context.InsertMode.isEqualTo("insert"))}),wd.MenuRegistry.appendMenuItem(u_.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Vc.localize("accept.replace","Replace")},group:"left",order:1,when:Zc.ContextKeyExpr.and(u_.Context.HasInsertAndReplaceRange,u_.Context.InsertMode.isEqualTo("replace"))}),(0,Uc.registerEditorCommand)(new Hv({id:"acceptAlternativeSelectedSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,$c.EditorContextKeys.textInputFocus),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:u_.suggestWidgetStatusbarMenu,group:"left",order:2,when:Zc.ContextKeyExpr.and(u_.Context.HasInsertAndReplaceRange,u_.Context.InsertMode.isEqualTo("insert")),title:Vc.localize("accept.replace","Replace")},{menuId:u_.suggestWidgetStatusbarMenu,group:"left",order:2,when:Zc.ContextKeyExpr.and(u_.Context.HasInsertAndReplaceRange,u_.Context.InsertMode.isEqualTo("replace")),title:Vc.localize("accept.insert","Insert")}]})),du.CommandsRegistry.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,Uc.registerEditorCommand)(new Hv({id:"hideSuggestWidget",precondition:u_.Context.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})),(0,Uc.registerEditorCommand)(new Hv({id:"selectNextSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,Uc.registerEditorCommand)(new Hv({id:"selectNextPageSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:12,secondary:[2060]}})),(0,Uc.registerEditorCommand)(new Hv({id:"selectLastSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectLastSuggestion()})),(0,Uc.registerEditorCommand)(new Hv({id:"selectPrevSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,Uc.registerEditorCommand)(new Hv({id:"selectPrevPageSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:11,secondary:[2059]}})),(0,Uc.registerEditorCommand)(new Hv({id:"selectFirstSuggestion",precondition:Zc.ContextKeyExpr.and(u_.Context.Visible,u_.Context.MultipleSuggestions),handler:e=>e.selectFirstSuggestion()})),(0,Uc.registerEditorCommand)(new Hv({id:"toggleSuggestionDetails",precondition:u_.Context.Visible,handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:2058,mac:{primary:266}},menuOpts:[{menuId:u_.suggestWidgetStatusbarMenu,group:"right",order:1,when:Zc.ContextKeyExpr.and(u_.Context.DetailsVisible,u_.Context.CanResolve),title:Vc.localize("detail.more","show less")},{menuId:u_.suggestWidgetStatusbarMenu,group:"right",order:1,when:Zc.ContextKeyExpr.and(u_.Context.DetailsVisible.toNegated(),u_.Context.CanResolve),title:Vc.localize("detail.less","show more")}]})),(0,Uc.registerEditorCommand)(new Hv({id:"toggleExplainMode",precondition:u_.Context.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2133}})),(0,Uc.registerEditorCommand)(new Hv({id:"toggleSuggestionFocus",precondition:u_.Context.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:2570,mac:{primary:778}}})),(0,Uc.registerEditorCommand)(new Hv({id:"insertBestCompletion",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,Zc.ContextKeyExpr.equals("config.editor.tabCompletion","on"),Rv.WordContextKey.AtEnd,u_.Context.Visible.toNegated(),H_.SuggestAlternatives.OtherSuggestions.toNegated(),d_.SnippetController2.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest((0,Mh.isObject)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:190,primary:2}})),(0,Uc.registerEditorCommand)(new Hv({id:"insertNextSuggestion",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,Zc.ContextKeyExpr.equals("config.editor.tabCompletion","on"),H_.SuggestAlternatives.OtherSuggestions,u_.Context.Visible.toNegated(),d_.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:2}})),(0,Uc.registerEditorCommand)(new Hv({id:"insertPrevSuggestion",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,Zc.ContextKeyExpr.equals("config.editor.tabCompletion","on"),H_.SuggestAlternatives.OtherSuggestions,u_.Context.Visible.toNegated(),d_.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:190,kbExpr:$c.EditorContextKeys.textInputFocus,primary:1026}})),(0,Uc.registerEditorAction)(class extends Uc.EditorAction{run(e,t){zv.get(t).resetWidgetSize()}constructor(){super({id:"editor.action.resetSuggestSize",label:Vc.localize("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}});class Kv extends gd.Disposable{get state(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}update(e){const t=this.getInlineCompletion();let i=!1;this._currentInlineCompletion!==t&&(this._currentInlineCompletion=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getInlineCompletion(){const e=c_.SuggestController.get(this.editor);if(!e)return;if(!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();return t?function(e,t,i,n){const o=i.item;if(Array.isArray(o.completion.additionalTextEdits)&&o.completion.additionalTextEdits.length>0)return{text:"",range:fd.Range.fromPositions(t,t)};let{insertText:r}=o.completion;if(4&o.completion.insertTextRules){const i=(new Km).parse(r),n=e.editor.getModel();l_.adjustWhitespace(n,t,i,!0,!0),r=i.toString()}const s=e.getOverwriteInfo(o,n);return{text:r,range:fd.Range.fromPositions(t.delta(0,-s.overwriteBefore),t.delta(0,Math.max(s.overwriteAfter,0)))}}(e,this.editor.getPosition(),t,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=c_.SuggestController.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=c_.SuggestController.get(this.editor);e&&e.forceRenderingAbove()}constructor(e){super(),this.editor=e,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentInlineCompletion=void 0,this.onDidChangeEmitter=new(0,Uu.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new(0,hd.RunOnceScheduler)((()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())}),100)),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const t=c_.SuggestController.get(this.editor);if(t){let e=!1;const i=()=>{e||(e=!0,this._register(t.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(t.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)}))),this._register(t.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(Uu.Event.once(t.model.onDidTrigger)((e=>{i()})))}this.update(this._isActive)}}var Uv=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Vv extends bm{get isActive(){return void 0!==this.suggestionInlineCompletionSource.state}isSuggestionPreviewEnabled(){return this.editor.getOption(106).preview}updateCache(){return Uv(this,void 0,void 0,(function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItemAsInlineCompletion)return;const t={text:e.selectedItemAsInlineCompletion.text,range:e.selectedItemAsInlineCompletion.range},i=this.editor.getPosition(),n=(0,hd.createCancelablePromise)((e=>Uv(this,void 0,void 0,(function*(){let n;try{n=yield(0,hm.provideInlineCompletions)(i,this.editor.getModel(),{triggerKind:iu.InlineCompletionTriggerKind.Automatic,selectedSuggestionInfo:t},e)}catch(e){return void(0,Jc.onUnexpectedError)(e)}e.isCancellationRequested||(this.cache.setValue(this.editor,n,iu.InlineCompletionTriggerKind.Automatic),this.onDidChangeEmitter.fire())})))),o=new(0,hm.UpdateOperation)(n,iu.InlineCompletionTriggerKind.Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()}))}get ghostText(){var e,t;const i=this.suggestionInlineCompletionSource.state,n=$v(this.editor.getModel(),null==i?void 0:i.selectedItemAsInlineCompletion),o=$v(this.editor.getModel(),null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()),r=o&&n&&o.text.startsWith(n.text)&&o.range.equalsRange(n.range)?o:n||o,s=n?((null==r?void 0:r.text.length)||0)-n.text.length:0,a=(e=>{const t=this.editor.getOptions().get(106).previewMode;return e?ym(e,this.editor.getModel(),t,this.editor.getPosition(),s)||new fm(e.range.endLineNumber,[],this.minReservedLineCount):void 0})(r);return this.isSuggestionPreviewEnabled()?a:void 0}constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new Kv(this.editor)),this.updateOperation=this._register(new(0,gd.MutableDisposable)),this.updateCacheSoon=this._register(new(0,hd.RunOnceScheduler)((()=>this.updateCache()),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange((()=>{this.updateCacheSoon.schedule();this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const e=this.ghostText;e&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,e.parts.map((e=>e.lines.length-1)).reduce(((e,t)=>e+t),0))),this.minReservedLineCount>=1&&this.isSuggestionPreviewEnabled()?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()}))),this._register(this.cache.onDidChange((()=>{this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.isSuggestionPreviewEnabled()&&(this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire())}))),this._register((0,gd.toDisposable)((()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove())))}}function $v(e,t){if(!t)return t;const i=e.getValueInRange(t.range),n=function(e,t){let i=0;for(;i<e.length&&i<t.length&&e[i]===t[i];)i++;return i}(i,t.text),o=e.getOffsetAt(t.range.getStartPosition())+n,r=e.getPositionAt(o),s=function(e,t){let i=0;for(;i<e.length&&i<t.length&&e[e.length-i-1]===t[t.length-i-1];)i++;return i}(i.substr(n),t.text),a=e.getPositionAt(Math.max(o,e.getOffsetAt(t.range.getEndPosition())-s));return{range:fd.Range.fromPositions(r,a),text:t.text.substr(n,t.text.length-n-s)}}du=r("cUien"),Uu=r("7bUGH"),pd=r("dLnDZ");iu=r("ldsR3");var qv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Gv=function(e,t){return function(i,n){t(i,n,e)}},Zv=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Jv extends gd.Disposable{get targetModel(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}setTargetModel(e){var t,i,n;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?(i=e,n=e.onDidChange((()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})),{object:i,dispose:()=>null==n?void 0:n.dispose()}):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}constructor(){super(...arguments),this.onDidChangeEmitter=new(0,Uu.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new(0,gd.MutableDisposable))}}let Yv=class extends Jv{get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!i&&i.parts.some((t=>e.containsPosition(new(0,pd.Position)(i.lineNumber,t.column))))}triggerInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(iu.InlineCompletionTriggerKind.Explicit)}commitInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}showNextInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}showPreviousInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}hasMultipleInlineCompletions(){var e;return Zv(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new Xv),this.suggestWidgetAdapterModel=this._register(new(0,Tm.SuggestWidgetPreviewModel)(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new(0,hm.InlineCompletionsModel)(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange((()=>{this.updateModel()}))),this.updateModel()}};Yv=qv([Gv(1,du.ICommandService)],Yv);class Xv extends gd.Disposable{get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new(0,hm.SynchronizedInlineCompletionsCache)(e,t,(()=>this.onDidChangeEmitter.fire()),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}constructor(){super(...arguments),this.onDidChangeEmitter=new(0,Uu.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new(0,gd.MutableDisposable))}}W_=r("1Iayd");var Qv=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ey=function(e,t){return function(i,n){t(i,n,e)}},ty=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let iy=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}updateModelController(){const e=this.editor.getOption(106),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(oy,this.editor):void 0}shouldShowHoverAt(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return(null===(i=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ty(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new(0,gd.MutableDisposable)),this._register(this.editor.onDidChangeModel((()=>{this.updateModelController()}))),this._register(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(106)&&this.updateModelController(),e.hasChanged(54)&&this.updateModelController()}))),this.updateModelController()}};iy.inlineSuggestionVisible=new(0,Zc.RawContextKey)("inlineSuggestionVisible",!1,Vc.localize("inlineSuggestionVisible","Whether an inline suggestion is visible")),iy.inlineSuggestionHasIndentation=new(0,Zc.RawContextKey)("inlineSuggestionHasIndentation",!1,Vc.localize("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),iy.ID="editor.contrib.ghostTextController",iy=Qv([ey(1,Iu.IInstantiationService)],iy);class ny{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=iy.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=iy.inlineSuggestionHasIndentation.bindTo(this.contextKeyService)}}let oy=class extends gd.Disposable{updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));const t=this.model.inlineCompletionsModel.ghostText;if(t&&t.parts.length>0){const{column:e,lines:i}=t.parts[0],n=i[0].startsWith(" ")||i[0].startsWith("\t"),o=e<=this.editor.getModel().getLineIndentColumn(t.lineNumber);this.contextKeys.inlineCompletionSuggestsIndentation.set(!!this.model.activeInlineCompletionsModel&&n&&o)}else this.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new ny(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(um.GhostTextModel,this.editor)),this.widget=this._register(this.instantiationService.createInstance(qf.GhostTextWidget,this.editor,this.model)),this._register((0,gd.toDisposable)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}};oy=Qv([ey(1,Iu.IInstantiationService),ey(2,Zc.IContextKeyService)],oy);const ry=Uc.EditorCommand.bindToContribution(iy.get),sy=new ry({id:"editor.action.inlineSuggest.commit",precondition:iy.inlineSuggestionVisible,handler(e){e.commit(),e.editor.focus()}});(0,Uc.registerEditorCommand)(sy),W_.KeybindingsRegistry.registerKeybindingRule({primary:2,weight:200,id:sy.id,when:Zc.ContextKeyExpr.and(sy.precondition,$c.EditorContextKeys.tabMovesFocus.toNegated(),iy.inlineSuggestionHasIndentation.toNegated())}),(0,Uc.registerEditorCommand)(new ry({id:"editor.action.inlineSuggest.hide",precondition:iy.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(e){e.hide()}}));class ay extends Uc.EditorAction{run(e,t){return ty(this,void 0,void 0,(function*(){const e=iy.get(t);e&&(e.showNextInlineCompletion(),t.focus())}))}constructor(){super({id:ay.ID,label:Vc.localize("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,iy.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}}ay.ID="editor.action.inlineSuggest.showNext";class ly extends Uc.EditorAction{run(e,t){return ty(this,void 0,void 0,(function*(){const e=iy.get(t);e&&(e.showPreviousInlineCompletion(),t.focus())}))}constructor(){super({id:ly.ID,label:Vc.localize("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,iy.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}}ly.ID="editor.action.inlineSuggest.showPrevious";class cy extends Uc.EditorAction{run(e,t){return ty(this,void 0,void 0,(function*(){const e=iy.get(t);e&&e.trigger()}))}constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Vc.localize("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:$c.EditorContextKeys.writable})}}(0,Uc.registerEditorContribution)(iy.ID,iy),(0,Uc.registerEditorAction)(cy),(0,Uc.registerEditorAction)(ay),(0,Uc.registerEditorAction)(ly);du=r("cUien"),wd=r("4Nnjr"),Zc=r("c5sLr"),Tu=r("2cxKt"),gg=r("apdYP"),xg=r("kqjci"),Og=r("2RRIG");var dy=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},uy=function(e,t){return function(i,n){t(i,n,e)}};class hy{isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}}let gy=class{suggestHoverAnchor(e){const t=$f.GhostTextController.get(this._editor);if(!t)return null;if(8===e.target.type){const i=e.target.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new Vf(1e3,this,fd.Range.fromPositions(i.positionBefore||i.position,i.positionBefore||i.position))}if(7===e.target.type&&e.target.range&&t.shouldShowHoverAt(e.target.range))return new Vf(1e3,this,e.target.range);if(6===e.target.type&&e.target.range&&e.target.detail){if(e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range))return new Vf(1e3,this,e.target.range)}return null}computeSync(e,t){const i=$f.GhostTextController.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new hy(this,e.range,i)]:[]}renderHoverParts(e,t,i){const n=new(0,gd.DisposableStore),o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,n);const r=n.add(this._menuService.createMenu(wd.MenuId.InlineCompletionsActions,this._contextKeyService)),s=i.addAction({label:Vc.localize("showNextInlineSuggestion","Next"),commandId:$f.ShowNextInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand($f.ShowNextInlineSuggestionAction.ID)}),a=i.addAction({label:Vc.localize("showPreviousInlineSuggestion","Previous"),commandId:$f.ShowPreviousInlineSuggestionAction.ID,run:()=>this._commandService.executeCommand($f.ShowPreviousInlineSuggestionAction.ID)});i.addAction({label:Vc.localize("acceptInlineSuggestion","Accept"),commandId:$f.commitInlineSuggestionAction.id,run:()=>this._commandService.executeCommand($f.commitInlineSuggestionAction.id)});const l=[s,a];for(const e of l)e.setEnabled(!1);o.hasMultipleSuggestions().then((e=>{for(const t of l)t.setEnabled(e)}));for(const[e,t]of r.getActions())for(const e of t)e instanceof wd.MenuItemAction&&i.addAction({label:e.label,commandId:e.item.id,run:()=>this._commandService.executeCommand(e.item.id)});return n}renderScreenReaderText(e,t,i){var n,o;const r=Tu.$,s=r("div.hover-row.markdown-hover"),a=Tu.append(s,r("div.hover-contents")),l=i.add(new(0,vf.MarkdownRenderer)({editor:this._editor},this._modeService,this._openerService)),c=e=>{i.add(l.onDidRenderAsync((()=>{a.className="hover-contents code-hover-contents",this._hover.onContentsChanged()})));const t=Vc.localize("inlineSuggestionFollows","Suggestion:"),n=i.add(l.render((new Xc).appendText(t).appendCodeblock("text",e)));a.replaceChildren(n.element)},d=null===(o=null===(n=e.controller.activeModel)||void 0===n?void 0:n.inlineCompletionsModel)||void 0===o?void 0:o.ghostText;if(d){const e=this._editor.getModel().getLineContent(d.lineNumber);c(d.renderForScreenReader(e))}t.appendChild(s)}constructor(e,t,i,n,o,r,s,a){this._editor=e,this._hover=t,this._commandService=i,this._menuService=n,this._contextKeyService=o,this._modeService=r,this._openerService=s,this.accessibilityService=a}};gy=dy([uy(2,du.ICommandService),uy(3,wd.IMenuService),uy(4,Zc.IContextKeyService),uy(5,gg.IModeService),uy(6,xg.IOpenerService),uy(7,Og.IAccessibilityService)],gy);var py={};e(py,"ColorHoverParticipant",(function(){return Ay}),(function(e){return Ay=e}));gd=r("ky1to"),fd=r("2KJrz"),Gd=r("7G83E"),rg=r("jyVY7"),Uu=r("7bUGH");class fy{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){this.presentationIndex=e,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}constructor(e,t,i){this.presentationIndex=i,this._onColorFlushed=new(0,Uu.Emitter),this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new(0,Uu.Emitter),this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new(0,Uu.Emitter),this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}}Md=r("gDqjO"),Tu=r("2cxKt"),Ku=r("l1C9n"),mg=r("lAQ7r"),rg=r("jyVY7"),Uu=r("7bUGH"),gd=r("ky1to"),vd=r("02ibr"),yd=r("fmM7j");const my=Tu.$;class _y extends gd.Disposable{onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=rg.Color.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:""}constructor(e,t,i){super(),this.model=t,this.domNode=my(".colorpicker-header"),Tu.append(e,this.domNode),this.pickedColorNode=Tu.append(this.domNode,my(".picked-color"));const n=Tu.append(this.domNode,my(".original-color"));n.style.backgroundColor=rg.Color.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=i.getColorTheme().getColor(vd.editorHoverBackground)||rg.Color.white,this._register((0,yd.registerThemingParticipant)(((e,t)=>{this.backgroundColor=e.getColor(vd.editorHoverBackground)||rg.Color.white}))),this._register(Tu.addDisposableListener(this.pickedColorNode,Tu.EventType.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(Tu.addDisposableListener(n,Tu.EventType.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=rg.Color.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter())}}class by extends gd.Disposable{flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const i=this.model.color.hsva;this.model.color=new(0,rg.Color)(new(0,rg.HSVA)(i.h,e,t,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new(0,rg.Color)(new(0,rg.HSVA)(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,i=360*(1-e);this.model.color=new(0,rg.Color)(new(0,rg.HSVA)(360===i?0:i,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this.domNode=my(".colorpicker-body"),Tu.append(e,this.domNode),this.saturationBox=new vy(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new wy(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Cy(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}}class vy extends gd.Disposable{onMouseDown(e){this.monitor=this._register(new(0,Ku.GlobalMouseMoveMonitor));const t=Tu.getDomNodePagePosition(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,Ku.standardMouseMoveMerger,(e=>this.onDidChangePosition(e.posx-t.left,e.posy-t.top)),(()=>null));const i=Tu.addDisposableGenericMouseUpListner(document,(()=>{this._onColorFlushed.fire(),i.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const i=Math.max(0,Math.min(1,e/this.width)),n=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(i,n),this._onDidChange.fire({s:i,v:n})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new(0,rg.Color)(new(0,rg.HSVA)(e.h,1,1,1)),i=this.canvas.getContext("2d"),n=i.createLinearGradient(0,0,this.canvas.width,0);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)");const o=i.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this.canvas.width,this.canvas.height),i.fillStyle=rg.Color.Format.CSS.format(t),i.fill(),i.fillStyle=n,i.fill(),i.fillStyle=o,i.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}constructor(e,t,i){super(),this.model=t,this.pixelRatio=i,this._onDidChange=new(0,Uu.Emitter),this.onDidChange=this._onDidChange.event,this._onColorFlushed=new(0,Uu.Emitter),this.onColorFlushed=this._onColorFlushed.event,this.domNode=my(".saturation-wrap"),Tu.append(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Tu.append(this.domNode,this.canvas),this.selection=my(".saturation-selection"),Tu.append(this.domNode,this.selection),this.layout(),this._register(Tu.addDisposableGenericMouseDownListner(this.domNode,(e=>this.onMouseDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}}class yy extends gd.Disposable{layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new(0,Ku.GlobalMouseMoveMonitor)),i=Tu.getDomNodePagePosition(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,Ku.standardMouseMoveMerger,(e=>this.onDidChangeTop(e.posy-i.top)),(()=>null));const n=Tu.addDisposableGenericMouseUpListner(document,(()=>{this._onColorFlushed.fire(),n.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}constructor(e,t){super(),this.model=t,this._onDidChange=new(0,Uu.Emitter),this.onDidChange=this._onDidChange.event,this._onColorFlushed=new(0,Uu.Emitter),this.onColorFlushed=this._onColorFlushed.event,this.domNode=Tu.append(e,my(".strip")),this.overlay=Tu.append(this.domNode,my(".overlay")),this.slider=Tu.append(this.domNode,my(".slider")),this.slider.style.top="0px",this._register(Tu.addDisposableGenericMouseDownListner(this.domNode,(e=>this.onMouseDown(e)))),this.layout()}}class wy extends yy{onDidChangeColor(e){const{r:t,g:i,b:n}=e.rgba,o=new(0,rg.Color)(new(0,rg.RGBA)(t,i,n,1)),r=new(0,rg.Color)(new(0,rg.RGBA)(t,i,n,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}}class Cy extends yy{getValue(e){return 1-e.hsva.h/360}constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}}class xy extends mg.Widget{layout(){this.body.layout()}constructor(e,t,i,n){super(),this.model=t,this.pixelRatio=i,this._register((0,Md.onDidChangeZoomLevel)((()=>this.layout())));const o=my(".colorpicker-widget");e.appendChild(o);const r=new _y(o,this.model,n);this.body=new by(o,this.model,this.pixelRatio),this._register(r),this._register(this.body)}}yd=r("fmM7j");var Sy=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ky=function(e,t){return function(i,n){t(i,n,e)}},Ey=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Dy{isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}constructor(e,t,i,n){this.owner=e,this.range=t,this.model=i,this.provider=n,this.forceShowAtRange=!0}}let Ay=class{computeSync(e,t){return[]}computeAsync(e,t,i){return Ey(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=og.ColorDetector.get(this._editor);for(const i of t){const t=e.getColorData(i.range.getStartPosition());if(t){return[yield this._createColorHover(this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}))}_createColorHover(e,t,i){return Ey(this,void 0,void 0,(function*(){const n=e.getValueInRange(t.range),{red:o,green:r,blue:s,alpha:a}=t.color,l=new(0,rg.RGBA)(Math.round(255*o),Math.round(255*r),Math.round(255*s),a),c=new(0,rg.Color)(l),d=yield ag(e,t,i,Gd.CancellationToken.None),u=new fy(c,[],0);return u.colorPresentations=d||[],u.guessColorPresentation(c,n),new Dy(this,fd.Range.lift(t.range),u,i)}))}renderHoverParts(e,t,i){if(0===e.length||!this._editor.hasModel())return gd.Disposable.None;const n=new(0,gd.DisposableStore),o=e[0],r=this._editor.getModel(),s=o.model,a=n.add(new xy(t,s,this._editor.getOption(128),this._themeService));let l=new(0,fd.Range)(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);const c=()=>{let e,t;if(s.presentation.textEdit){e=[s.presentation.textEdit],t=new(0,fd.Range)(s.presentation.textEdit.range.startLineNumber,s.presentation.textEdit.range.startColumn,s.presentation.textEdit.range.endLineNumber,s.presentation.textEdit.range.endColumn);const i=this._editor.getModel()._setTrackedRange(null,t,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e),t=this._editor.getModel()._getTrackedRange(i)||t}else e=[{identifier:null,range:l,text:s.presentation.label,forceMoveMarkers:!1}],t=l.setEndPosition(l.endLineNumber,l.startColumn+s.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",e);s.presentation.additionalTextEdits&&(e=[...s.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",e),this._hover.hide()),this._editor.pushUndoStop(),l=t},d=e=>ag(r,{range:l,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},o.provider,Gd.CancellationToken.None).then((e=>{s.colorPresentations=e||[]}));return n.add(s.onColorFlushed((e=>{d(e).then(c)}))),n.add(s.onDidChangeColor(d)),this._hover.setColorPicker(a),n}constructor(e,t,i){this._editor=e,this._hover=t,this._themeService=i}};Ay=Sy([ky(2,yd.IThemeService)],Ay);Nu=r("5TiFM");var Iy=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ry=function(e,t){return function(i,n){t(i,n,e)}},Ty=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const My=Tu.$;let Ly=class extends gd.Disposable{get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(yg.render(this.actionsElement,e,i))}append(e){const t=Tu.append(this.actionsElement,e);return this._hasContent=!0,t}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=My("div.hover-row.status-bar"),this.actionsElement=Tu.append(this.hoverElement,My("div.actions"))}};Ly=Iy([Ry(0,Nu.IKeybindingService)],Ly);class Ny{setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(1!==t.type)return[];const i=e.getModel(),n=t.range.startLineNumber,o=i.getLineMaxColumn(n);return e.getLineDecorations(n).filter((e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===n?e.range.startColumn:1,r=e.range.endLineNumber===n?e.range.endColumn:o;return!(i>t.range.startColumn||t.range.endColumn>r)}))}computeAsync(e){return Ty(this,void 0,void 0,(function*(){const t=this._anchor;if(!this._editor.hasModel()||!t)return Promise.resolve([]);const i=Ny._getLineDecorations(this._editor,t),n=yield Promise.all(this._participants.map((n=>this._computeAsync(n,i,t,e))));return(0,Qd.flatten)(n)}))}_computeAsync(e,t,i,n){return Ty(this,void 0,void 0,(function*(){return e.computeAsync?e.computeAsync(i,t,n):[]}))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Ny._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,Qd.coalesce)(t)}onResult(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor)for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}return this._result.slice(0)}constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}}let Oy=class e extends mg.Widget{dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return this._id}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(6===t)return!0;if(7===t){const t=this._editor.getOption(42).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"==typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<t)return!0}return!1}maybeShowAt(e){var t;const i=[];for(const t of this._participants)if("function"==typeof t.suggestHoverAnchor){const n=t.suggestHoverAnchor(e);n&&i.push(n)}if(this._shouldShowAt(e)&&e.target.range){const n=[...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find((e=>e.startsWith("ced-colorBox")))&&e.target.range.endColumn-e.target.range.startColumn==1?new(0,fd.Range)(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;i.push(new Uf(0,n))}return 0!==i.length&&(i.sort(((e,t)=>t.priority-e.priority)),this._startShowingAt(i[0],0,!1),!0)}_showAt(e,t,i){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=i,i&&this._hover.containerDomNode.focus()}getPosition(){return this._isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:i}=this._editor.getOption(42);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${i}px`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,i){this._startShowingAt(new Uf(0,e),t,i)}_startShowingAt(e,t,i){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){const t=this._messages.filter((t=>t.isValidForHoverAnchor(e)));if(0===t.length)this.hide();else{if(t.length===this._messages.length)return;this._renderMessages(e,t)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=i,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout((()=>{this._isVisible||this._hoverVisibleKey.set(!1)}),0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(t,i){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,o=i[0].range,r=null,s=document.createDocumentFragment();const a=new(0,gd.DisposableStore),l=new Map;for(const e of i){n=Math.min(n,e.range.startColumn),o=fd.Range.plusRange(o,e.range),e.forceShowAtRange&&(r=e.range),l.has(e.owner)||l.set(e.owner,[]);l.get(e.owner).push(e)}const c=a.add(new Ly(this._keybindingService));for(const[e,t]of l)a.add(e.renderHoverParts(t,s,c));c.hasContent&&s.appendChild(c.hoverElement),this._renderDisposable=a,s.hasChildNodes()&&(r?this._showAt(r.getStartPosition(),r,this._shouldFocus):this._showAt(new(0,pd.Position)(t.range.startLineNumber,n),o,this._shouldFocus),this._updateContents(s)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,o?[{range:o,options:e._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}constructor(t,i,n,o){super(),this._hoverVisibleKey=i,this._keybindingService=o,this.allowEditorOverflow=!0,this._participants=[n.createInstance(py.ColorHoverParticipant,t,this),n.createInstance(bf.MarkdownHoverParticipant,t,this),n.createInstance(Kf.InlineCompletionsHoverParticipant,t,this),n.createInstance(wg.MarkerHoverParticipant,t,this)],this._hover=this._register(new vg),this._id=e.ID,this._editor=t,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.hide()})),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(42)&&this._updateFont()}))),this._editor.onDidLayoutChange((()=>this.layout())),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._lastAnchor=null,this._computer=new Ny(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._hoverOperation=new fg(this._computer,(e=>this._withResult(e,!0)),null,(e=>this._withResult(e,!1)),this._editor.getOption(52).delay),this._register(Tu.addStandardDisposableListener(this.getDomNode(),Tu.EventType.FOCUS,(()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")}))),this._register(Tu.addStandardDisposableListener(this.getDomNode(),Tu.EventType.BLUR,(()=>{this.getDomNode().classList.remove("colorpicker-hover")}))),this._register(t.onDidChangeConfiguration((()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay)}))),this._register(iu.TokenizationRegistry.onDidChange((()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))})))}};Oy.ID="editor.contrib.modesContentHoverWidget",Oy._DECORATION_OPTIONS=_d.ModelDecorationOptions.register({description:"content-hover-highlight",className:"hoverHighlight"}),Oy=Iy([Ry(2,Iu.IInstantiationService),Ry(3,Nu.IKeybindingService)],Oy);Tu=r("2cxKt"),gd=r("ky1to"),mg=r("lAQ7r");class Py extends mg.Widget{get isVisible(){return this._isVisible}set isVisible(e){this._isVisible=e,this._domNode.classList.toggle("hidden",!this._isVisible)}getId(){return this._id}getDomNode(){return this._domNode}showAt(e){this._showAtLineNumber=e,this.isVisible||(this.isVisible=!0);const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(this._showAtLineNumber),n=this._editor.getScrollTop(),o=this._editor.getOption(58),r=i-n-(this._domNode.clientHeight-o)/2;this._domNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._domNode.style.top=`${Math.max(Math.round(r),0)}px`}hide(){this.isVisible&&(this.isVisible=!1)}getPosition(){return null}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}updateFont(){[...Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),...Array.prototype.slice.call(this._domNode.getElementsByClassName("code"))].forEach((e=>this._editor.applyFontInfo(e)))}updateContents(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont()}constructor(e,t){super(),this._id=e,this._editor=t,this._isVisible=!1,this._domNode=document.createElement("div"),this._domNode.className="monaco-hover hidden",this._domNode.setAttribute("aria-hidden","true"),this._domNode.setAttribute("role","tooltip"),this._showAtLineNumber=-1,this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(42)&&this.updateFont()}))),this._editor.addOverlayWidget(this)}}xg=r("kqjci"),Qd=r("dD6PO");class Fy{setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),i=[];if(!t)return i;for(const n of t){if(!n.options.glyphMarginClassName)continue;const t=n.options.glyphMarginHoverMessage;t&&!Qc(t)&&i.push(...(0,Qd.asArray)(t).map(e))}return i}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}}class By extends Py{dispose(){this._hoverOperation.cancel(),super.dispose()}onModelDecorationsChanged(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),super.hide()}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const e of t){const t=this._markdownRenderer.render(e.value);this._renderDisposeables.add(t),i.appendChild((0,Tu.$)("div.hover-row",void 0,t.element))}this.updateContents(i),this.showAt(e)}constructor(e,t,i=xg.NullOpenerService){super(By.ID,e),this._renderDisposeables=this._register(new(0,gd.DisposableStore)),this._messages=[],this._lastLineNumber=-1,this._markdownRenderer=this._register(new(0,vf.MarkdownRenderer)({editor:this._editor},t,i)),this._computer=new Fy(this._editor),this._hoverOperation=new fg(this._computer,(e=>this._withResult(e)),void 0,(e=>this._withResult(e)),300)}}By.ID="editor.contrib.modesGlyphHoverWidget";xg=r("kqjci"),vd=r("02ibr"),yd=r("fmM7j");var jy={};e(jy,"GotoDefinitionAtPositionEditorContribution",(function(){return fC}),(function(e){return fC=e}));Vc=r("kMb12"),hd=r("hsQau"),Jc=r("8bVMi"),gg=r("apdYP"),fd=r("2KJrz"),iu=r("ldsR3"),Uc=r("kO85n");var zy={};e(zy,"getDefinitionsAtPosition",(function(){return Zy}),(function(e){return Zy=e})),e(zy,"getDeclarationsAtPosition",(function(){return Jy}),(function(e){return Jy=e})),e(zy,"getImplementationsAtPosition",(function(){return Yy}),(function(e){return Yy=e})),e(zy,"getTypeDefinitionsAtPosition",(function(){return Xy}),(function(e){return Xy=e})),e(zy,"getReferencesAtPosition",(function(){return Qy}),(function(e){return Qy=e}));Gd=r("7G83E"),Jc=r("8bVMi"),Uc=r("kO85n"),iu=r("ldsR3");var Wy={};e(Wy,"OneReference",(function(){return Ky}),(function(e){return Ky=e})),e(Wy,"FileReferences",(function(){return Vy}),(function(e){return Vy=e})),e(Wy,"ReferencesModel",(function(){return $y}),(function(e){return $y=e}));Vc=r("kMb12"),Uu=r("7bUGH"),lh=r("liPtJ"),gd=r("ky1to"),Jd=r("aAfu1"),zg=r("dnj4A"),fd=r("2KJrz"),Kh=r("9BG2T"),Jc=r("8bVMi");var Hy=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class Ky{get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,Vc.localize)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,lh.basename)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,Vc.localize)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,lh.basename)(this.uri),this.range.startLineNumber,this.range.startColumn)}constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=zg.defaultGenerator.nextId()}}class Uy{dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:n,column:o-t}),l=new(0,fd.Range)(n,a.startColumn,n,o),c=new(0,fd.Range)(r,s,r,1073741824),d=i.getValueInRange(l).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:d+u+i.getValueInRange(c).replace(/\s+$/,""),highlight:{start:d.length,end:d.length+u.length}}}constructor(e){this._modelReference=e}}class Vy{dispose(){(0,gd.dispose)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,Vc.localize)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,lh.basename)(this.uri),this.uri.fsPath):(0,Vc.localize)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,lh.basename)(this.uri),this.uri.fsPath)}resolve(e){return Hy(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new Uy(i))}catch(e){(0,Jc.onUnexpectedError)(e)}return this}))}constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new(0,Kh.ResourceMap)}}class $y{dispose(){(0,gd.dispose)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new $y(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,Vc.localize)("aria.result.0","No results found"):1===this.references.length?(0,Vc.localize)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,Vc.localize)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,Vc.localize)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:i}=e,n=i.children.indexOf(e),o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,n)=>({idx:n,prefixLen:Jd.commonPrefixLength(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&fd.Range.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return lh.extUri.compare(e.uri,t.uri)||fd.Range.compareRangesUsingStarts(e.range,t.range)}constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new(0,Uu.Emitter),this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let n;e.sort($y._compareReferences);for(let t of e)if(n&&lh.extUri.isEqual(n.uri,t.uri,!0)||(n=new Vy(this,t.uri),this.groups.push(n)),0===n.children.length||0!==$y._compareReferences(t,n.children[n.children.length-1])){const e=new Ky(i===t,n,t,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),n.children.push(e)}}}var qy=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function Gy(e,t,i,n){const o=i.ordered(e).map((i=>Promise.resolve(n(i,e,t)).then(void 0,(e=>{(0,Jc.onUnexpectedExternalError)(e)}))));return Promise.all(o).then((e=>{const t=[];for(let i of e)Array.isArray(i)?t.push(...i):i&&t.push(i);return t}))}function Zy(e,t,i){return Gy(e,t,iu.DefinitionProviderRegistry,((e,t,n)=>e.provideDefinition(t,n,i)))}function Jy(e,t,i){return Gy(e,t,iu.DeclarationProviderRegistry,((e,t,n)=>e.provideDeclaration(t,n,i)))}function Yy(e,t,i){return Gy(e,t,iu.ImplementationProviderRegistry,((e,t,n)=>e.provideImplementation(t,n,i)))}function Xy(e,t,i){return Gy(e,t,iu.TypeDefinitionProviderRegistry,((e,t,n)=>e.provideTypeDefinition(t,n,i)))}function Qy(e,t,i,n){return Gy(e,t,iu.ReferenceProviderRegistry,((e,t,o)=>qy(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,o,{includeDeclaration:!0},n);if(!i||!r||2!==r.length)return r;const s=yield e.provideReferences(t,o,{includeDeclaration:!1},n);return s&&1===s.length?s:r}))))}function ew(e){return qy(this,void 0,void 0,(function*(){const t=yield e(),i=new(0,Wy.ReferencesModel)(t,""),n=i.references.map((e=>e.link));return i.dispose(),n}))}(0,Uc.registerModelAndPositionCommand)("_executeDefinitionProvider",((e,t)=>ew((()=>Zy(e,t,Gd.CancellationToken.None))))),(0,Uc.registerModelAndPositionCommand)("_executeDeclarationProvider",((e,t)=>ew((()=>Jy(e,t,Gd.CancellationToken.None))))),(0,Uc.registerModelAndPositionCommand)("_executeImplementationProvider",((e,t)=>ew((()=>Yy(e,t,Gd.CancellationToken.None))))),(0,Uc.registerModelAndPositionCommand)("_executeTypeDefinitionProvider",((e,t)=>ew((()=>Xy(e,t,Gd.CancellationToken.None))))),(0,Uc.registerModelAndPositionCommand)("_executeReferenceProvider",((e,t)=>ew((()=>Qy(e,t,!1,Gd.CancellationToken.None)))));gd=r("ky1to"),p_=r("1JIvq"),yd=r("fmM7j"),vd=r("02ibr"),tu=r("8hC5C");var tw={};e(tw,"DefinitionAction",(function(){return eC}),(function(e){return eC=e}));id=r("gF77M"),hd=r("hsQau"),Gc=r("8NQur"),Ld=r("drE9L");var iw=r("fXLrS"),nw=(Uc=r("kO85n"),Od=r("6AQ6e"),pd=r("dLnDZ"),fd=r("2KJrz"),$c=r("jb8ay"),iu=r("ldsR3"),{});e(nw,"ReferencesController",(function(){return Lw}),(function(e){return Lw=e}));Vc=r("kMb12"),Jc=r("8bVMi"),gd=r("ky1to"),Od=r("6AQ6e"),Iu=r("cwJE1"),Zc=r("c5sLr"),lg=r("7JMrK"),Uh=r("6Jk2H");var ow={};e(ow,"LayoutData",(function(){return Ew}),(function(e){return Ew=e})),e(ow,"ReferenceWidget",(function(){return Aw}),(function(e){return Aw=e}));Tu=r("2cxKt"),rg=r("jyVY7"),Uu=r("7bUGH"),gd=r("ky1to"),Dg=r("gqnvK"),lh=r("liPtJ"),fd=r("2KJrz"),_d=r("gHDnG"),p_=r("1JIvq");var rw={};e(rw,"DataSource",(function(){return dw}),(function(e){return dw=e})),e(rw,"Delegate",(function(){return uw}),(function(e){return uw=e})),e(rw,"FileReferencesRenderer",(function(){return fw}),(function(e){return fw=e})),e(rw,"OneReferenceRenderer",(function(){return _w}),(function(e){return _w=e})),e(rw,"StringRepresentationProvider",(function(){return hw}),(function(e){return hw=e})),e(rw,"IdentityProvider",(function(){return gw}),(function(e){return gw=e})),e(rw,"AccessibilityProvider",(function(){return bw}),(function(e){return bw=e}));p_=r("1JIvq"),nv=r("au47y");var sw=r("6rdsy"),aw=(Mp=r("57WTe"),yd=r("fmM7j"),Wb=r("iNj3h"),Tu=r("2cxKt"),Vc=r("kMb12"),lh=r("liPtJ"),gd=r("ky1to"),Iu=r("cwJE1"),Nu=r("5TiFM"),h_=r("7DFs7"),r("kojwW")),lw=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},cw=function(e,t){return function(i,n){t(i,n,e)}};let dw=class{hasChildren(e){return e instanceof Wy.ReferencesModel||e instanceof Wy.FileReferences}getChildren(e){if(e instanceof Wy.ReferencesModel)return e.groups;if(e instanceof Wy.FileReferences)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}constructor(e){this._resolverService=e}};dw=lw([cw(0,p_.ITextModelService)],dw);class uw{getHeight(){return 23}getTemplateId(e){return e instanceof Wy.FileReferences?fw.id:_w.id}}let hw=class{getKeyboardNavigationLabel(e){var t;if(e instanceof Wy.OneReference){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,lh.basename)(e.uri)}constructor(e){this._keybindingService=e}};hw=lw([cw(0,Nu.IKeybindingService)],hw);class gw{getId(e){return e instanceof Wy.OneReference?e.id:e.uri}}let pw=class extends gd.Disposable{set(e,t){let i=(0,lh.dirname)(e.uri);this.file.setLabel(Ag(e.uri),this._uriLabel.getUriLabel(i,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat((0,Vc.localize)("referencesCount","{0} references",n)):this.badge.setTitleFormat((0,Vc.localize)("referenceCount","{0} reference",n))}constructor(e,t,i){super(),this._uriLabel=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new(0,nv.IconLabel)(n,{supportHighlights:!0})),this.badge=new(0,sw.CountBadge)(Tu.append(n,Tu.$(".count"))),this._register((0,Wb.attachBadgeStyler)(this.badge,i)),e.appendChild(n)}};pw=lw([cw(1,Mp.ILabelService),cw(2,yd.IThemeService)],pw);let fw=class e{renderTemplate(e){return this._instantiationService.createInstance(pw,e)}renderElement(e,t,i){i.set(e.element,(0,h_.createMatches)(e.filterData))}disposeTemplate(e){e.dispose()}constructor(t){this._instantiationService=t,this.templateId=e.id}};fw.id="FileReferencesRenderer",fw=lw([cw(0,Iu.IInstantiationService)],fw);class mw{set(e,t){var i;const n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){const{value:e,highlight:i}=n;t&&!h_.FuzzyScore.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,h_.createMatches)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${(0,lh.basename)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}constructor(e){this.label=new(0,aw.HighlightedLabel)(e,!1)}}class _w{renderTemplate(e){return new mw(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}constructor(){this.templateId=_w.id}}_w.id="OneReferenceRenderer";class bw{getWidgetAriaLabel(){return(0,Vc.localize)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}Vc=r("kMb12"),Iu=r("cwJE1"),Mp=r("57WTe");var vw=r("10jRn"),yw=(vd=r("02ibr"),yd=r("fmM7j"),r("jwlj4")),ww=r("d4XlU"),Cw=(Nu=r("5TiFM"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),xw=function(e,t){return function(i,n){t(i,n,e)}},Sw=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class kw{dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(let t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let n=0,o=e.children.length;n<o;n++){let o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:kw.DecorationOptions}),i.push(n))}const n=this._editor.deltaDecorations([],t);for(let t=0;t<n.length;t++)this._decorations.set(n[t],e.children[i[t]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!fd.Range.equalsRange(o,n.range)){if(fd.Range.spansMultipleLines(o))r=!0;else{n.range.endColumn-n.range.startColumn!==o.endColumn-o.startColumn&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new(0,gd.DisposableStore),this._callOnModelChange=new(0,gd.DisposableStore),this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}}kw.DecorationOptions=_d.ModelDecorationOptions.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class Ew{static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:i||18}}constructor(){this.ratio=.7,this.heightInLines=18}}class Dw extends vw.WorkbenchAsyncDataTree{}let Aw=class extends Rg.PeekViewWidget{dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,gd.dispose)(this._preview),(0,gd.dispose)(this._previewNotAvailableMessage),(0,gd.dispose)(this._tree),(0,gd.dispose)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(Rg.peekViewBorder)||rg.Color.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Rg.peekViewTitleBackground)||rg.Color.transparent,primaryHeadingColor:e.getColor(Rg.peekViewTitleForeground),secondaryHeadingColor:e.getColor(Rg.peekViewTitleInfoForeground)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Tu.append(e,Tu.$("div.messages")),Tu.hide(this._messageContainer),this._splitView=new(0,yw.SplitView)(e,{orientation:1}),this._previewContainer=Tu.append(e,Tu.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(Lg.EmbeddedCodeEditorWidget,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),Tu.hide(this._previewContainer),this._previewNotAvailableMessage=new(0,_d.TextModel)(Vc.localize("missingPreviewMessage","no preview available"),_d.TextModel.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService),this._treeContainer=Tu.append(e,Tu.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new(0,rw.AccessibilityProvider),keyboardNavigationLabelProvider:this._instantiationService.createInstance(rw.StringRepresentationProvider),identityProvider:new(0,rw.IdentityProvider),openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Rg.peekViewResultsBackground}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Tu.addStandardDisposableListener(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(Dw,"ReferencesWidget",this._treeContainer,new(0,rw.Delegate),[this._instantiationService.createInstance(rw.FileReferencesRenderer),this._instantiationService.createInstance(rw.OneReferenceRenderer)],this._instantiationService.createInstance(rw.DataSource),t),this._splitView.addView({onDidChange:Uu.Event.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},yw.Sizing.Distribute),this._splitView.addView({onDidChange:Uu.Event.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},yw.Sizing.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));let i=(e,t)=>{e instanceof Wy.OneReference&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),Tu.hide(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Tu.Dimension(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=Vc.localize("noResults","No results"),Tu.show(this._messageContainer),Promise.resolve(void 0)):(Tu.hide(this._messageContainer),this._decorationsManager=new kw(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),Tu.show(this._treeContainer),Tu.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof Wy.OneReference?e:e instanceof Wy.FileReferences&&e.children.length>0?e.children[0]:void 0}revealReference(e){return Sw(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return Sw(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==Dg.Schemas.inMemory?this.setTitle((0,lh.basenameOrAuthority)(e.uri),this._uriLabel.getUriLabel((0,lh.dirname)(e.uri))):this.setTitle(Vc.localize("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();(0,gd.dispose)(this._previewModelReference);const o=n.object;if(o){const t=this._preview.getModel()===o.textEditorModel?0:1,i=fd.Range.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}constructor(e,t,i,n,o,r,s,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=s,this._uriLabel=a,this._undoRedoService=l,this._keybindingService=c,this._disposeOnNewModel=new(0,gd.DisposableStore),this._callOnDispose=new(0,gd.DisposableStore),this._onDidSelectReference=new(0,Uu.Emitter),this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Tu.Dimension(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}};Aw=Cw([xw(3,yd.IThemeService),xw(4,p_.ITextModelService),xw(5,Iu.IInstantiationService),xw(6,Rg.IPeekViewService),xw(7,Mp.ILabelService),xw(8,ww.IUndoRedoService),xw(9,Nu.IKeybindingService)],Aw),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(Rg.peekViewResultsMatchHighlight);i&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ${i}; }`);const n=e.getColor(Rg.peekViewEditorMatchHighlight);n&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ${n}; }`);const o=e.getColor(Rg.peekViewEditorMatchHighlightBorder);o&&t.addRule(`.monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ${o}; box-sizing: border-box; }`);const r=e.getColor(vd.activeContrastBorder);r&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ${r}; box-sizing: border-box; }`);const s=e.getColor(Rg.peekViewResultsBackground);s&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { background-color: ${s}; }`);const a=e.getColor(Rg.peekViewResultsMatchForeground);a&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree { color: ${a}; }`);const l=e.getColor(Rg.peekViewResultsFileForeground);l&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ${l}; }`);const c=e.getColor(Rg.peekViewResultsSelectionBackground);c&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ${c}; }`);const d=e.getColor(Rg.peekViewResultsSelectionForeground);d&&t.addRule(`.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ${d} !important; }`);const u=e.getColor(Rg.peekViewEditorBackground);u&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: ${u};}`);const h=e.getColor(Rg.peekViewEditorGutterBackground);h&&t.addRule(`.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: ${h};}`)}));fd=r("2KJrz"),pd=r("dLnDZ"),oh=r("26YKj"),hd=r("hsQau"),vw=r("10jRn"),W_=r("1Iayd"),Gc=r("8NQur"),du=r("cUien");var Iw=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Rw=function(e,t){return function(i,n){t(i,n,e)}},Tw=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const Mw=new(0,Zc.RawContextKey)("referenceSearchVisible",!1,Vc.localize("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let Lw=class e{static get(t){return t.getContribution(e.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const o="peekViewLayout",r=ow.LayoutData.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(ow.ReferenceWidget,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(Vc.localize("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{let{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t):this.openReference(t,!1,!0)}})));const s=++this._requestIdPool;t.then((t=>{var i;if(s===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(Vc.localize("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let t=this._editor.getModel().uri,i=new(0,pd.Position)(e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then((()=>{this._widget&&"editor"===this._editor.getOption(76)&&this._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return Tw(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return Tw(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const i=fd.Range.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then((t=>{var n;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(i),this._widget.focusOnReferenceTree();else{const o=e.get(t),r=this._model.clone();this.closeWidget(),t.focus(),o.toggleWidget(i,(0,hd.createCancelablePromise)((e=>Promise.resolve(r))),null!==(n=this._peekMode)&&void 0!==n&&n)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,Jc.onUnexpectedError)(e)}))}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,pinned:i}},this._editor,t)}constructor(e,t,i,n,o,r,s,a){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=s,this._configurationService=a,this._disposables=new(0,gd.DisposableStore),this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Mw.bindTo(i)}};function Nw(e,t){const i=(0,Rg.getOuterEditor)(e);if(!i)return;let n=Lw.get(i);n&&t(n)}Lw.ID="editor.contrib.referencesController",Lw=Iw([Rw(2,Zc.IContextKeyService),Rw(3,Od.ICodeEditorService),Rw(4,oh.INotificationService),Rw(5,Iu.IInstantiationService),Rw(6,Uh.IStorageService),Rw(7,lg.IConfigurationService)],Lw),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,Gc.KeyChord)(2089,60),when:Zc.ContextKeyExpr.or(Mw,Rg.PeekContext.inPeekEditor),handler(e){Nw(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:Zc.ContextKeyExpr.or(Mw,Rg.PeekContext.inPeekEditor),handler(e){Nw(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:Zc.ContextKeyExpr.or(Mw,Rg.PeekContext.inPeekEditor),handler(e){Nw(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),du.CommandsRegistry.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),du.CommandsRegistry.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),du.CommandsRegistry.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),du.CommandsRegistry.registerCommand("closeReferenceSearch",(e=>Nw(e,(e=>e.closeWidget())))),W_.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:Zc.ContextKeyExpr.and(Rg.PeekContext.inPeekEditor,Zc.ContextKeyExpr.not("config.editor.stablePeek"))}),W_.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:Zc.ContextKeyExpr.and(Mw,Zc.ContextKeyExpr.not("config.editor.stablePeek"))}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Zc.ContextKeyExpr.and(Mw,vw.WorkbenchListFocusContextKey),handler(e){var t;const i=null===(t=e.get(vw.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof Wy.OneReference&&Nw(e,(e=>e.revealReference(i[0])))}}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Zc.ContextKeyExpr.and(Mw,vw.WorkbenchListFocusContextKey),handler(e){var t;const i=null===(t=e.get(vw.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof Wy.OneReference&&Nw(e,(e=>e.openReference(i[0],!0,!0)))}}),du.CommandsRegistry.registerCommand("openReference",(e=>{var t;const i=null===(t=e.get(vw.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof Wy.OneReference&&Nw(e,(e=>e.openReference(i[0],!1,!0)))}));Vc=r("kMb12"),wd=r("4Nnjr"),Zc=r("c5sLr"),oh=r("26YKj"),cu=r("dkDYJ"),du=r("cUien"),tu=r("8hC5C");var Ow={};e(Ow,"ISymbolNavigationService",(function(){return jw}),(function(e){return jw=e}));Zc=r("c5sLr"),Iu=r("cwJE1"),Hh=r("gUVjL"),W_=r("1Iayd"),Uc=r("kO85n"),Od=r("6AQ6e"),fd=r("2KJrz"),gd=r("ky1to"),Uu=r("7bUGH"),Vc=r("kMb12"),Nu=r("5TiFM"),oh=r("26YKj"),lh=r("liPtJ");var Pw=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Fw=function(e,t){return function(i,n){t(i,n,e)}};const Bw=new(0,Zc.RawContextKey)("hasSymbols",!1,(0,Vc.localize)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),jw=(0,Iu.createDecorator)("ISymbolNavigationService");let zw=class{reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new Ww(this._editorService),n=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(const e of t.references)if((0,lh.isEqual)(e.uri,n.uri))r=!0,s=s||fd.Range.containsPosition(e.range,o);else if(r)break;r&&s||this.reset()}));this._currentState=(0,gd.combinedDisposable)(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:fd.Range.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,Vc.localize)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,Vc.localize)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=Bw.bindTo(e)}};zw=Pw([Fw(0,Zc.IContextKeyService),Fw(1,Od.ICodeEditorService),Fw(2,oh.INotificationService),Fw(3,Nu.IKeybindingService)],zw),(0,Hh.registerSingleton)(jw,zw,!0),(0,Uc.registerEditorCommand)(new class extends Uc.EditorCommand{runEditorCommand(e,t){return e.get(jw).revealNext(t)}constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:Bw,kbOpts:{weight:100,primary:70}})}}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:Bw,primary:9,handler(e){e.get(jw).reset()}});let Ww=class{dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,gd.dispose)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,gd.combinedDisposable)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}constructor(e){this._listener=new Map,this._disposables=new(0,gd.DisposableStore),this._onDidChange=new(0,Uu.Emitter),this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}};Ww=Pw([Fw(0,Od.ICodeEditorService)],Ww);Md=r("gDqjO"),eu=r("avLBk"),Iu=r("cwJE1"),Mh=r("5jjji");var Hw,Kw,Uw,Vw,$w,qw,Gw,Zw,Jw=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};wd.MenuRegistry.appendMenuItem(wd.MenuId.EditorContext,{submenu:wd.MenuId.EditorContextPeek,title:Vc.localize("peek.submenu","Peek"),group:"navigation",order:100});const Yw=new Set;function Xw(e){const t=new e;return(0,Uc.registerInstantiatedEditorAction)(t),Yw.add(t.id),t}class Qw extends Uc.EditorAction{run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const i=e.get(oh.INotificationService),n=e.get(Od.ICodeEditorService),o=e.get(cu.IEditorProgressService),r=e.get(Ow.ISymbolNavigationService),s=t.getModel(),a=t.getPosition(),l=new(0,tu.EditorStateCancellationTokenSource)(t,5),c=(0,hd.raceCancellation)(this._getLocationModel(s,a,l.token),l.token).then((e=>Jw(this,void 0,void 0,(function*(){if(!e||l.token.isCancellationRequested)return;let i;if((0,id.alert)(e.ariaMessage),e.referenceAt(s.uri,a)){const e=this._getAlternativeCommand(t);e!==this.id&&Yw.has(e)&&(i=t.getAction(e))}const o=e.references.length;if(0===o){if(!this._configuration.muteMessage){const e=s.getWordAtPosition(a);Cu.MessageController.get(t).showMessage(this._getNoResultFoundMessage(e),a)}}else{if(1!==o||!i)return this._onResult(n,r,t,e);i.run()}}))),(e=>{i.error(e)})).finally((()=>{l.dispose()}));return o.showWhile(c,250),c}_onResult(e,t,i,n){return Jw(this,void 0,void 0,(function*(){const o=this._getGoToPreference(i);if(i instanceof Lg.EmbeddedCodeEditorWidget||!(this._configuration.openInPeek||"peek"===o&&n.references.length>1)){const r=n.firstReference(),s=n.references.length>1&&"gotoAndPeek"===o,a=yield this._openReference(i,e,r,this._configuration.openToSide,!s);s&&a?this._openInPeek(a,n):n.dispose(),"goto"===o&&t.put(r)}else this._openInPeek(i,n)}))}_openReference(e,t,i,n,o){return Jw(this,void 0,void 0,(function*(){let r;if((0,iu.isLocationLink)(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:fd.Range.collapseToStart(r),selectionRevealType:3}},e,n);if(s){if(o){const e=s.getModel(),t=s.deltaDecorations([],[{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{s.getModel()===e&&s.deltaDecorations(t,[])}),350)}return s}}))}_openInPeek(e,t){let i=nw.ReferencesController.get(e);i&&e.hasModel()?i.toggleWidget(e.getSelection(),(0,hd.createCancelablePromise)((e=>Promise.resolve(t))),this._configuration.openInPeek):t.dispose()}constructor(e,t){super(t),this._configuration=e}}class eC extends Qw{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getDefinitionsAtPosition)(e,t,i),Vc.localize("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?Vc.localize("noResultWord","No definition found for '{0}'",e.word):Vc.localize("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(49).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(49).multipleDefinitions}}const tC=Ld.isWeb&&!Md.isStandalone?2118:70;Xw(((Hw=class e extends eC{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:Vc.localize("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasDefinitionProvider,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:tC,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),du.CommandsRegistry.registerCommandAlias("editor.action.goToDeclaration",e.id)}}).id="editor.action.revealDefinition",Hw)),Xw(((Kw=class e extends eC{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,label:Vc.localize("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasDefinitionProvider,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,tC),weight:100}}),du.CommandsRegistry.registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}}).id="editor.action.revealDefinitionAside",Kw)),Xw(((Uw=class e extends eC{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,label:Vc.localize("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasDefinitionProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:wd.MenuId.EditorContextPeek,group:"peek",order:2}}),du.CommandsRegistry.registerCommandAlias("editor.action.previewDeclaration",e.id)}}).id="editor.action.peekDefinition",Uw));class iC extends Qw{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getDeclarationsAtPosition)(e,t,i),Vc.localize("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?Vc.localize("decl.noResultWord","No declaration found for '{0}'",e.word):Vc.localize("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(49).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(49).multipleDeclarations}}Xw(((Vw=class e extends iC{_getNoResultFoundMessage(e){return e&&e.word?Vc.localize("decl.noResultWord","No declaration found for '{0}'",e.word):Vc.localize("decl.generic.noResults","No declaration found")}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,label:Vc.localize("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasDeclarationProvider,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}}).id="editor.action.revealDeclaration",Vw)),Xw(class extends iC{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:Vc.localize("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasDeclarationProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wd.MenuId.EditorContextPeek,group:"peek",order:3}})}});class nC extends Qw{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getTypeDefinitionsAtPosition)(e,t,i),Vc.localize("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?Vc.localize("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):Vc.localize("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(49).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(49).multipleTypeDefinitions}}Xw((($w=class e extends nC{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:Vc.localize("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasTypeDefinitionProvider,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}}).ID="editor.action.goToTypeDefinition",$w)),Xw(((qw=class e extends nC{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:Vc.localize("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasTypeDefinitionProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wd.MenuId.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",qw));class oC extends Qw{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getImplementationsAtPosition)(e,t,i),Vc.localize("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?Vc.localize("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):Vc.localize("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(49).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(49).multipleImplementations}}Xw(((Gw=class e extends oC{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,label:Vc.localize("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasImplementationProvider,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}}).ID="editor.action.goToImplementation",Gw)),Xw(((Zw=class e extends oC{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,label:Vc.localize("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasImplementationProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:wd.MenuId.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",Zw));class rC extends Qw{_getNoResultFoundMessage(e){return e?Vc.localize("references.no","No references found for '{0}'",e.word):Vc.localize("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(49).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(49).multipleReferences}}Xw(class extends rC{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getReferencesAtPosition)(e,t,!0,i),Vc.localize("ref.title","References"))}))}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:Vc.localize("goToReferences.label","Go to References"),alias:"Go to References",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasReferenceProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}}),Xw(class extends rC{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(yield(0,zy.getReferencesAtPosition)(e,t,!1,i),Vc.localize("ref.title","References"))}))}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:Vc.localize("references.action.label","Peek References"),alias:"Peek References",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.hasReferenceProvider,Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:wd.MenuId.EditorContextPeek,group:"peek",order:6}})}});class sC extends Qw{_getLocationModel(e,t,i){return Jw(this,void 0,void 0,(function*(){return new(0,Wy.ReferencesModel)(this._references,Vc.localize("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&Vc.localize("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(49).multipleReferences}_getAlternativeCommand(){return""}constructor(e,t,i){super(e,{id:"editor.action.goToLocation",label:Vc.localize("label.generic","Go To Any Symbol"),alias:"Go To Any Symbol",precondition:Zc.ContextKeyExpr.and(Rg.PeekContext.notInPeekEditor,$c.EditorContextKeys.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}}du.CommandsRegistry.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:eu.URI},{name:"position",description:"The position at which to start",constraint:pd.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,n,o,r,s)=>Jw(void 0,void 0,void 0,(function*(){(0,Mh.assertType)(eu.URI.isUri(t)),(0,Mh.assertType)(pd.Position.isIPosition(i)),(0,Mh.assertType)(Array.isArray(n)),(0,Mh.assertType)(void 0===o||"string"==typeof o),(0,Mh.assertType)(void 0===s||"boolean"==typeof s);const a=e.get(Od.ICodeEditorService),l=yield a.openCodeEditor({resource:t},a.getFocusedCodeEditor());if((0,iw.isCodeEditor)(l))return l.setPosition(i),l.revealPositionInCenterIfOutsideViewport(i,0),l.invokeWithinContext((e=>{const t=new class extends sC{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(s),openToSide:!1},n,o);e.get(Iu.IInstantiationService).invokeFunction(t.run.bind(t),l)}))}))}),du.CommandsRegistry.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:eu.URI},{name:"position",description:"The position at which to start",constraint:pd.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,n,o)=>Jw(void 0,void 0,void 0,(function*(){e.get(du.ICommandService).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}))}),du.CommandsRegistry.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,Mh.assertType)(eu.URI.isUri(t)),(0,Mh.assertType)(pd.Position.isIPosition(i));const n=e.get(Od.ICodeEditorService);return n.openCodeEditor({resource:t},n.getFocusedCodeEditor()).then((e=>{if(!(0,iw.isCodeEditor)(e)||!e.hasModel())return;const t=nw.ReferencesController.get(e);if(!t)return;const n=(0,hd.createCancelablePromise)((t=>(0,zy.getReferencesAtPosition)(e.getModel(),pd.Position.lift(i),!1,t).then((e=>new(0,Wy.ReferencesModel)(e,Vc.localize("ref.title","References")))))),o=new(0,fd.Range)(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(o,n,!1))}))}}),du.CommandsRegistry.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),wd.MenuRegistry.appendMenuItems([{id:wd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:Vc.localize({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:wd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:Vc.localize({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:wd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:Vc.localize({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:wd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:Vc.localize({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:wd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:Vc.localize({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);gd=r("ky1to"),Uu=r("7bUGH"),Ld=r("drE9L");function aC(e,t){return!!e[t]}class lC{constructor(e,t){this.target=e.target,this.hasTriggerModifier=aC(e.event,t.triggerModifier),this.hasSideBySideModifier=aC(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class cC{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=aC(e,t.triggerModifier)}}class dC{equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}}function uC(e){return"altKey"===e?Ld.isMacintosh?new dC(57,"metaKey",6,"altKey"):new dC(5,"ctrlKey",6,"altKey"):Ld.isMacintosh?new dC(6,"altKey",57,"metaKey"):new dC(6,"altKey",5,"ctrlKey")}class hC extends gd.Disposable{_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new(0,Uu.Emitter)),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new(0,Uu.Emitter)),this.onExecute=this._onExecute.event,this._onCancel=this._register(new(0,Uu.Emitter)),this.onCancel=this._onCancel.event,this._editor=e,this._opts=uC(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(69)){const e=uC(this._editor.getOption(69));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new lC(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new lC(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new lC(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new cC(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new cC(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}}pd=r("dLnDZ"),Mh=r("5jjji"),Zc=r("c5sLr");var gC=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},pC=function(e,t){return function(i,n){t(i,n,e)}};let fC=class e{static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then((()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;let n=new(0,tu.EditorState)(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,hd.createCancelablePromise)((t=>this.findDefinition(e,t))),this.previousPromise.then((t=>{if(t&&t.length&&n.validate(this.editor))if(t.length>1)this.addDecoration(new(0,fd.Range)(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new Xc).appendText(Vc.localize("multipleResults","Click to show {0} definitions.",t.length)));else{let n=t[0];if(!n.uri)return;this.textModelResolverService.createModelReference(n.uri).then((t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:o}}=t,{startLineNumber:r}=n.range;if(r<1||r>o.getLineCount())return void t.dispose();const s=this.getPreviewValue(o,r,n);let a;a=n.originSelectionRange?fd.Range.lift(n.originSelectionRange):new(0,fd.Range)(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);const l=this.modeService.getModeIdByFilepathOrFirstLine(o.uri);this.addDecoration(a,(new Xc).appendCodeblock(l||"",s)),t.dispose()}))}else this.removeLinkDecorations()})).then(void 0,Jc.onUnexpectedError)}getPreviewValue(t,i,n){let o=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(t,i);o.endLineNumber-o.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(t,i));return this.stripIndentationFromPreviewRange(t,i,o)}stripIndentationFromPreviewRange(e,t,i){let n=e.getLineFirstNonWhitespaceColumn(t);for(let o=t+1;o<i.endLineNumber;o++){const t=e.getLineFirstNonWhitespaceColumn(o);n=Math.min(n,t)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${n-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(t,i){const n=t.getLineFirstNonWhitespaceColumn(i),o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let r=i+1;for(;r<o;r++){if(n===t.getLineFirstNonWhitespaceColumn(r))break}return new(0,fd.Range)(i,1,r+1,1)}getPreviewRangeBasedOnBrackets(t,i){const n=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES),o=[];let r=!0,s=t.findNextBracket(new(0,pd.Position)(i,1));for(;null!==s;){if(0===o.length)o.push(s);else{const e=o[o.length-1];if(e.open[0]===s.open[0]&&e.isOpen&&!s.isOpen?o.pop():o.push(s),0===o.length){if(!r)return new(0,fd.Range)(i,1,s.range.endLineNumber+1,1);r=!1}}const e=t.getLineMaxColumn(i);let a=s.range.endLineNumber,l=s.range.endColumn;if(e===s.range.endColumn&&(a++,l=1),a>n)return new(0,fd.Range)(i,1,n+1,1);s=t.findNextBracket(new(0,pd.Position)(a,l))}return new(0,fd.Range)(i,1,n+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[i])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&iu.DefinitionProviderRegistry.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?(0,zy.getDefinitionsAtPosition)(i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const i=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(e);return new(0,tw.DefinitionAction)({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(e,this.editor)}))}isInPeekEditor(e){const t=e.get(Zc.IContextKeyService);return Rg.PeekContext.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}constructor(e,t,i){this.textModelResolverService=t,this.modeService=i,this.toUnhook=new(0,gd.DisposableStore),this.toUnhookForKeyboard=new(0,gd.DisposableStore),this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let n=new hC(e);this.toUnhook.add(n),this.toUnhook.add(n.onMouseMoveOrRelevantKeyDown((([e,t])=>{this.startFindDefinitionFromMouse(e,(0,Mh.withNullAsUndefined)(t))}))),this.toUnhook.add(n.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((()=>{this.removeLinkDecorations()}),(e=>{this.removeLinkDecorations(),(0,Jc.onUnexpectedError)(e)}))}))),this.toUnhook.add(n.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}};fC.ID="editor.contrib.gotodefinitionatposition",fC.MAX_SOURCE_PREVIEW_LINES=8,fC=gC([pC(1,p_.ITextModelService),pC(2,gg.IModeService)],fC),(0,Uc.registerEditorContribution)(fC.ID,fC),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorActiveLinkForeground);i&&t.addRule(`.monaco-editor .goto-definition-link { color: ${i} !important; }`)}));Zc=r("c5sLr"),Iu=r("cwJE1");var mC=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},_C=function(e,t){return function(i,n){t(i,n,e)}};let bC=class e{static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e)))),this._toUnhook.add(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged())))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;9!==t||e.target.detail!==pg.ModesContentHoverWidget.ID?12===t&&e.target.detail===By.ID||(12!==t&&e.target.detail!==By.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,i,n,o,r;let s=e.target.type;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===s&&e.target.detail===pg.ModesContentHoverWidget.ID)return;if(this._isHoverSticky&&!(null===(i=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===i?void 0:i.isCollapsed))return;if(!this._isHoverSticky&&9===s&&e.target.detail===pg.ModesContentHoverWidget.ID&&(null===(n=this._contentWidget)||void 0===n?void 0:n.isColorPickerVisible()))return;if(this._isHoverSticky&&12===s&&e.target.detail===By.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===s&&e.target.position?(null===(r=this._contentWidget)||void 0===r||r.hide(),this._glyphWidget||(this._glyphWidget=new By(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(o=this._glyphWidget)||void 0===o||o.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,i;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(pg.ModesContentHoverWidget,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,i){this._getOrCreateContentWidget().startShowingAtRange(e,t,i)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}constructor(e,t,i,n,o){this._editor=e,this._instantiationService=t,this._openerService=i,this._modeService=n,this._toUnhook=new(0,gd.DisposableStore),this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())})),this._hoverVisibleKey=$c.EditorContextKeys.hoverVisible.bindTo(o)}};bC.ID="editor.contrib.hover",bC=mC([_C(1,Iu.IInstantiationService),_C(2,xg.IOpenerService),_C(3,gg.IModeService),_C(4,Zc.IContextKeyService)],bC);class vC extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;let i=bC.get(t);if(!i)return;const n=t.getPosition(),o=new(0,fd.Range)(n.lineNumber,n.column,n.lineNumber,n.column),r=2===t.getOption(2);i.showContentHover(o,1,r)}constructor(){super({id:"editor.action.showHover",label:Vc.localize({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2087),weight:100}})}}class yC extends Uc.EditorAction{run(e,t){let i=bC.get(t);if(!i)return;const n=t.getPosition();if(!n)return;const o=new(0,fd.Range)(n.lineNumber,n.column,n.lineNumber,n.column);jy.GotoDefinitionAtPositionEditorContribution.get(t).startFindDefinitionFromCursor(n).then((()=>{i.showContentHover(o,1,!0)}))}constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:Vc.localize({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}}(0,Uc.registerEditorContribution)(bC.ID,bC),(0,Uc.registerEditorAction)(vC),(0,Uc.registerEditorAction)(yC),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorHoverHighlight);i&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${i}; }`);const n=e.getColor(vd.editorHoverBackground);n&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const o=e.getColor(vd.editorHoverBorder);o&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${o}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${o.transparent(.5)}; }`));const r=e.getColor(vd.textLinkForeground);r&&t.addRule(`.monaco-editor .monaco-hover a { color: ${r}; }`);const s=e.getColor(vd.textLinkActiveForeground);s&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=e.getColor(vd.editorHoverForeground);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const l=e.getColor(vd.editorHoverStatusBarBackground);l&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${l}; }`);const c=e.getColor(vd.textCodeBlockBackground);c&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${c}; }`)}));fd=r("2KJrz");class wC extends gd.Disposable{dispose(){super.dispose()}onMouseDown(e){var t;if(6!==e.target.type)return;if(![...(null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]].find((e=>e.startsWith("ced-colorBox"))))return;if(!e.target.range)return;const i=this._editor.getContribution(hg.ModesHoverController.ID);if(!i.isColorPickerVisible()){const t=new(0,fd.Range)(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);i.showContentHover(t,0,!1)}}constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}}wC.ID="editor.contrib.colorContribution",(0,Uc.registerEditorContribution)(wC.ID,wC);Vc=r("kMb12"),Gc=r("8NQur"),Uc=r("kO85n"),fd=r("2KJrz"),$c=r("jb8ay"),gm=r("8ScSA"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),$m=r("gesUy");class CC{static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const n=t.length;if(i+n>e.length)return!1;for(let o=0;o<n;o++){const n=e.charCodeAt(i+o),r=t.charCodeAt(o);if(n!==r&&!(n>=65&&n<=90&&n+32===r||r>=65&&r<=90&&r+32===n))return!1}return!0}_createOperationsForBlockComment(e,t,i,n,o,r){const s=e.startLineNumber,a=e.startColumn,l=e.endLineNumber,c=e.endColumn,d=o.getLineContent(s),u=o.getLineContent(l);let h,g=d.lastIndexOf(t,a-1+t.length),p=u.indexOf(i,c-1-i.length);if(-1!==g&&-1!==p)if(s===l){d.substring(g+t.length,p).indexOf(i)>=0&&(g=-1,p=-1)}else{const e=d.substring(g+t.length),n=u.substring(0,p);(e.indexOf(i)>=0||n.indexOf(i)>=0)&&(g=-1,p=-1)}-1!==g&&-1!==p?(n&&g+t.length<d.length&&32===d.charCodeAt(g+t.length)&&(t+=" "),n&&p>0&&32===u.charCodeAt(p-1)&&(i=" "+i,p-=1),h=CC._createRemoveBlockCommentOperations(new(0,fd.Range)(s,g+t.length+1,l,p+1),t,i)):(h=CC._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===h.length?i:null);for(const e of h)r.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,i){let n=[];return fd.Range.isEmpty(e)?n.push(gm.EditOperation.delete(new(0,fd.Range)(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(n.push(gm.EditOperation.delete(new(0,fd.Range)(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),n.push(gm.EditOperation.delete(new(0,fd.Range)(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),n}static _createAddBlockCommentOperations(e,t,i,n){let o=[];return fd.Range.isEmpty(e)?o.push(gm.EditOperation.replace(new(0,fd.Range)(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(o.push(gm.EditOperation.insert(new(0,pd.Position)(e.startLineNumber,e.startColumn),t+(n?" ":""))),o.push(gm.EditOperation.insert(new(0,pd.Position)(e.endLineNumber,e.endColumn),(n?" ":"")+i))),o}getEditOperations(e,t){const i=this._selection.startLineNumber,n=this._selection.startColumn;e.tokenizeIfCheap(i);const o=e.getLanguageIdAtPosition(i,n),r=$m.LanguageConfigurationRegistry.getComments(o);r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2===i.length){const e=i[0],t=i[1];return new(0,qc.Selection)(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new(0,qc.Selection)(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}}Jd=r("aAfu1"),gm=r("8ScSA"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),$m=r("gesUy");class xC{static _gatherPreflightCommentStrings(e,t,i){e.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),o=$m.LanguageConfigurationRegistry.getComments(n),r=o?o.lineCommentToken:null;if(!r)return null;let s=[];for(let e=0,n=i-t+1;e<n;e++)s[e]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return s}static _analyzeLines(e,t,i,n,o,r,s){let a,l=!0;a=0===e||1!==e;for(let c=0,d=n.length;c<d;c++){const d=n[c],u=o+c;if(u===o&&s){d.ignore=!0;continue}const h=i.getLineContent(u),g=Jd.firstNonWhitespaceIndex(h);if(-1!==g){if(l=!1,d.ignore=!1,d.commentStrOffset=g,a&&!CC._haystackHasNeedleAtOffset(h,d.commentStr,g)&&(0===e?a=!1:1===e||(d.ignore=!0)),a&&t){const e=g+d.commentStrLength;e<h.length&&32===h.charCodeAt(e)&&(d.commentStrLength+=1)}}else d.ignore=r,d.commentStrOffset=h.length}if(0===e&&l){a=!1;for(let e=0,t=n.length;e<t;e++)n[e].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:n}}static _gatherPreflightData(e,t,i,n,o,r,s){const a=xC._gatherPreflightCommentStrings(i,n,o);return null===a?{supported:!1}:xC._analyzeLines(e,t,i,a,n,r,s)}_executeLineComments(e,t,i,n){let o;i.shouldRemoveComments?o=xC._createRemoveLineCommentsOperations(i.lines,n.startLineNumber):(xC._normalizeInsertionPoint(e,i.lines,n.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(i.lines,n.startLineNumber));const r=new(0,pd.Position)(n.positionLineNumber,n.positionColumn);for(let i=0,n=o.length;i<n;i++)if(t.addEditOperation(o[i].range,o[i].text),fd.Range.isEmpty(o[i].range)&&fd.Range.getStartPosition(o[i].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[i].text||"").length)}this._selectionId=t.trackSelection(n)}_attemptRemoveBlockComment(e,t,i,n){let o=t.startLineNumber,r=t.endLineNumber,s=n.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),a=e.getLineContent(o).lastIndexOf(i,s-1),l=e.getLineContent(r).indexOf(n,t.endColumn-1-i.length);return-1!==a&&-1===l&&(l=e.getLineContent(o).indexOf(n,a+i.length),r=o),-1===a&&-1!==l&&(a=e.getLineContent(r).lastIndexOf(i,l),o=r),!t.isEmpty()||-1!==a&&-1!==l||(a=e.getLineContent(o).indexOf(i),-1!==a&&(l=e.getLineContent(o).indexOf(n,a+i.length))),-1!==a&&32===e.getLineContent(o).charCodeAt(a+i.length)&&(i+=" "),-1!==l&&32===e.getLineContent(r).charCodeAt(l-1)&&(n=" "+n,l-=1),-1!==a&&-1!==l?CC._createRemoveBlockCommentOperations(new(0,fd.Range)(o,a+i.length+1,r,l+1),i,n):null}_executeBlockComment(e,t,i){e.tokenizeIfCheap(i.startLineNumber);let n=e.getLanguageIdAtPosition(i.startLineNumber,1),o=$m.LanguageConfigurationRegistry.getComments(n);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,s=o.blockCommentEndToken;let a=this._attemptRemoveBlockComment(e,i,r,s);if(!a){if(i.isEmpty()){const t=e.getLineContent(i.startLineNumber);let n=Jd.firstNonWhitespaceIndex(t);-1===n&&(n=t.length),a=CC._createAddBlockCommentOperations(new(0,fd.Range)(i.startLineNumber,n+1,i.startLineNumber,t.length+1),r,s,this._insertSpace)}else a=CC._createAddBlockCommentOperations(new(0,fd.Range)(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,s,this._insertSpace);1===a.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const e of a)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new(0,fd.Range)(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=xC._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return n.supported?this._executeLineComments(e,t,n,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new(0,qc.Selection)(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let i=[];for(let n=0,o=e.length;n<o;n++){const o=e[n];o.ignore||i.push(gm.EditOperation.delete(new(0,fd.Range)(t+n,o.commentStrOffset+1,t+n,o.commentStrOffset+o.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){let i=[];const n=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const r=e[o];r.ignore||i.push(gm.EditOperation.insert(new(0,pd.Position)(t+o,r.commentStrOffset+1),r.commentStr+n))}return i}static nextVisibleColumn(e,t,i,n){return i?e+(t-e%t):e+n}static _normalizeInsertionPoint(e,t,i,n){let o,r,s=1073741824;for(let o=0,r=t.length;o<r;o++){if(t[o].ignore)continue;const r=e.getLineContent(i+o);let a=0;for(let e=0,i=t[o].commentStrOffset;a<s&&e<i;e++)a=xC.nextVisibleColumn(a,n,9===r.charCodeAt(e),1);a<s&&(s=a)}s=Math.floor(s/n)*n;for(let a=0,l=t.length;a<l;a++){if(t[a].ignore)continue;const l=e.getLineContent(i+a);let c=0;for(o=0,r=t[a].commentStrOffset;c<s&&o<r;o++)c=xC.nextVisibleColumn(c,n,9===l.charCodeAt(o),1);t[a].commentStrOffset=c>s?o-1:o}}constructor(e,t,i,n,o,r){this._selection=e,this._tabSize=t,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=r||!1}}wd=r("4Nnjr");class SC extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=[],n=t.getModel().getOptions(),o=t.getOption(18),r=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));r.sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.selection,t.selection)));let s=r[0];for(let e=1;e<r.length;e++){const t=r[e];s.selection.endLineNumber===t.selection.startLineNumber&&(s.index<t.index?t.ignoreFirstLine=!0:(s.ignoreFirstLine=!0,s=t))}for(const e of r)i.push(new xC(e.selection,n.tabSize,this._type,o.insertSpace,o.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}constructor(e,t){super(t),this._type=e}}class kC extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getOption(18),n=[],o=t.getSelections();for(const e of o)n.push(new CC(e,i.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}constructor(){super({id:"editor.action.blockComment",label:Vc.localize("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:wd.MenuId.MenubarEditMenu,group:"5_insert",title:Vc.localize({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}}(0,Uc.registerEditorAction)(class extends SC{constructor(){super(0,{id:"editor.action.commentLine",label:Vc.localize("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:wd.MenuId.MenubarEditMenu,group:"5_insert",title:Vc.localize({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,Uc.registerEditorAction)(class extends SC{constructor(){super(1,{id:"editor.action.addCommentLine",label:Vc.localize("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2081),weight:100}})}}),(0,Uc.registerEditorAction)(class extends SC{constructor(){super(2,{id:"editor.action.removeCommentLine",label:Vc.localize("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2099),weight:100}})}}),(0,Uc.registerEditorAction)(kC);Vc=r("kMb12"),Tu=r("2cxKt"),Mu=r("6Dupa"),gd=r("ky1to"),Uc=r("kO85n"),$c=r("jb8ay"),wd=r("4Nnjr"),Zc=r("c5sLr"),Lu=r("fRIx8"),Nu=r("5TiFM"),Gg=r("cSwrr"),Ld=r("drE9L");var EC=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},DC=function(e,t){return function(i,n){t(i,n,e)}};let AC=class e{static get(t){return t.getContribution(e.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(19))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(e.event.preventDefault(),e.event.stopPropagation(),6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(19))return;if(!this._editor.hasModel())return;if(!this._contextMenuService)return void this._editor.focus();const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?wd.MenuId.SimpleEditorContext:wd.MenuId.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],n=this._menuService.createMenu(t,this._contextKeyService),o=n.getActions({arg:e.uri});n.dispose();for(let t of o){const[,n]=t;let o=0;for(const t of n)if(t instanceof wd.SubmenuItemAction){const n=this._getMenuActions(e,t.item.submenu);n.length>0&&(i.push(new(0,Mu.SubmenuAction)(t.id,t.label,n)),o++)}else i.push(t),o++;o&&i.push(new(0,Mu.Separator))}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),i=Tu.getDomNodePagePosition(this._editor.getDomNode()),n=i.left+e.left,o=i.top+e.top+e.height;t={x:n,y:o}}const n=this._editor.getOption(114)&&!Ld.isIOS;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:n?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new(0,Gg.ActionViewItem)(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const i=e;return"function"==typeof i.getActionViewItem?i.getActionViewItem():new(0,Gg.ActionViewItem)(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:i})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}constructor(e,t,i,n,o,r){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=o,this._menuService=r,this._toDispose=new(0,gd.DisposableStore),this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),i=e.srcElement;i.shadowRoot&&Tu.getShadowRoot(t)===i.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}};AC.ID="editor.contrib.contextmenu",AC=EC([DC(1,Lu.IContextMenuService),DC(2,Lu.IContextViewService),DC(3,Zc.IContextKeyService),DC(4,Nu.IKeybindingService),DC(5,wd.IMenuService)],AC);class IC extends Uc.EditorAction{run(e,t){AC.get(t).showContextMenu()}constructor(){super({id:"editor.action.showContextMenu",label:Vc.localize("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:1092,weight:100}})}}(0,Uc.registerEditorContribution)(AC.ID,AC),(0,Uc.registerEditorAction)(IC);Vc=r("kMb12"),gd=r("ky1to"),Uc=r("kO85n"),$c=r("jb8ay");class RC{equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}constructor(e){this.selections=e}}class TC{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class MC extends gd.Disposable{static get(e){return e.getContribution(MC.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new TC(new RC(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new TC(new RC(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const i=new RC(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new TC(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}}MC.ID="editor.contrib.cursorUndoRedoController";class LC extends Uc.EditorAction{run(e,t,i){MC.get(t).cursorUndo()}constructor(){super({id:"cursorUndo",label:Vc.localize("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:2099,weight:100}})}}class NC extends Uc.EditorAction{run(e,t,i){MC.get(t).cursorRedo()}constructor(){super({id:"cursorRedo",label:Vc.localize("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}}(0,Uc.registerEditorContribution)(MC.ID,MC),(0,Uc.registerEditorAction)(LC),(0,Uc.registerEditorAction)(NC);gd=r("ky1to"),Ld=r("drE9L"),Uc=r("kO85n"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),qc=r("do14f"),fd=r("2KJrz");class OC{getEditOperations(e,t){let i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new(0,fd.Range)(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new(0,qc.Selection)(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new(0,qc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new(0,qc.Selection)(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new(0,qc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new(0,qc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}}_d=r("gHDnG");function PC(e){return Ld.isMacintosh?e.altKey:e.ctrlKey}class FC extends gd.Disposable{onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(PC(e)&&(this._modifierPressed=!0),this._mouseDown&&PC(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(PC(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===FC.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(null===this._dragSelection){let e=(this._editor.getSelections()||[]).filter((e=>t.position&&e.containsPosition(t.position)));if(1!==e.length)return;this._dragSelection=e[0]}PC(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new(0,pd.Position)(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){let e=this._editor.getSelection();if(e){const{selectionStartLineNumber:n,selectionStartColumn:o}=e;i=[new(0,qc.Selection)(n,o,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map((e=>e.containsPosition(t)?new(0,qc.Selection)(t.lineNumber,t.column,t.lineNumber,t.column):e));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(PC(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(FC.ID,new OC(this._dragSelection,t,PC(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new(0,fd.Range)(e.lineNumber,e.column,e.lineNumber,e.column),options:FC._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}}FC.ID="editor.contrib.dragAndDrop",FC.TRIGGER_KEY_VALUE=Ld.isMacintosh?6:5,FC._DECORATION_OPTIONS=_d.ModelDecorationOptions.register({description:"dnd-target",className:"dnd-target"}),(0,Uc.registerEditorContribution)(FC.ID,FC);var BC={};e(BC,"CommonFindController",(function(){return hS}),(function(e){return hS=e}));Vc=r("kMb12"),hd=r("hsQau"),gd=r("ky1to"),Jd=r("aAfu1"),Uc=r("kO85n"),$c=r("jb8ay"),hd=r("hsQau"),gd=r("ky1to"),Id=r("jTJ7G"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f");var jC=r("6u1OO");fd=r("2KJrz"),md=r("gSqSV"),_d=r("gHDnG"),vd=r("02ibr"),yd=r("fmM7j");class zC{dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map((e=>this._editor.getModel().getDecorationRange(e))).filter((e=>!!e));if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const e of t){const t=e.options;if(t===zC._FIND_MATCH_DECORATION||t===zC._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(e.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let n=0,o=this._decorations.length;n<o;n++){let o=this._editor.getModel().getDecorationRange(this._decorations[n]);if(e.equalsRange(o)){t=this._decorations[n],i=n+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations((e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,zC._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,zC._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){let e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new(0,fd.Range)(i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,zC._RANGE_HIGHLIGHT_DECORATION)}})),i}set(e,t){this._editor.changeDecorations((i=>{let n=zC._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){n=zC._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height/t,r=Math.max(2,Math.ceil(3/i));let s=e[0].range.startLineNumber,a=e[0].range.endLineNumber;for(let t=1,i=e.length;t<i;t++){const i=e[t].range;a+r>=i.startLineNumber?i.endLineNumber>a&&(a=i.endLineNumber):(o.push({range:new(0,fd.Range)(s,1,a,1),options:zC._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),s=i.startLineNumber,a=i.endLineNumber)}o.push({range:new(0,fd.Range)(s,1,a,1),options:zC._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let r=new Array(e.length);for(let t=0,i=e.length;t<i;t++)r[t]={range:e[t].range,options:n};this._decorations=i.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((e=>i.removeDecoration(e))),this._findScopeDecorationIds=[]),(null==t?void 0:t.length)&&(this._findScopeDecorationIds=t.map((e=>i.addDecoration(e,zC._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){let i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){let i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.startLineNumber<e.lineNumber)){if(n.startLineNumber>e.lineNumber)return n;if(!(n.startColumn<e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}}zC._CURRENT_FIND_MATCH_DECORATION=_d.ModelDecorationOptions.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,yd.themeColorFromId)(vd.overviewRulerFindMatchForeground),position:md.OverviewRulerLane.Center},minimap:{color:(0,yd.themeColorFromId)(vd.minimapFindMatch),position:md.MinimapPosition.Inline}}),zC._FIND_MATCH_DECORATION=_d.ModelDecorationOptions.register({description:"find-match",stickiness:1,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,yd.themeColorFromId)(vd.overviewRulerFindMatchForeground),position:md.OverviewRulerLane.Center},minimap:{color:(0,yd.themeColorFromId)(vd.minimapFindMatch),position:md.MinimapPosition.Inline}}),zC._FIND_MATCH_NO_OVERVIEW_DECORATION=_d.ModelDecorationOptions.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),zC._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_d.ModelDecorationOptions.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,yd.themeColorFromId)(vd.overviewRulerFindMatchForeground),position:md.OverviewRulerLane.Center}}),zC._RANGE_HIGHLIGHT_DECORATION=_d.ModelDecorationOptions.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),zC._FIND_SCOPE_DECORATION=_d.ModelDecorationOptions.register({description:"find-scope",className:"findScope",isWholeLine:!0});fd=r("2KJrz");class WC{getEditOperations(e,t){if(this._ranges.length>0){let e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.range,t.range)));let i=[],n=e[0];for(let t=1;t<e.length;t++)n.range.endLineNumber===e[t].range.startLineNumber&&n.range.endColumn===e[t].range.startColumn?(n.range=n.range.plusRange(e[t].range),n.text=n.text+e[t].text):(i.push(n),n=e[t]);i.push(n);for(const e of i)t.addEditOperation(e.range,e.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}}Jd=r("aAfu1");function HC(e,t){if(e&&""!==e[0]){const i=KC(e,t,"-"),n=KC(e,t,"_");return i&&!n?UC(e,t,"-"):!i&&n?UC(e,t,"_"):e[0].toUpperCase()===e[0]?t.toUpperCase():e[0].toLowerCase()===e[0]?t.toLowerCase():Jd.containsUppercaseCharacter(e[0][0])&&t.length>0?t[0].toUpperCase()+t.substr(1):e[0][0].toUpperCase()!==e[0][0]&&t.length>0?t[0].toLowerCase()+t.substr(1):t}return t}function KC(e,t,i){return-1!==e[0].indexOf(i)&&-1!==t.indexOf(i)&&e[0].split(i).length===t.split(i).length}function UC(e,t,i){const n=t.split(i),o=e[0].split(i);let r="";return n.forEach(((e,t)=>{r+=HC([o[t]],e)+i})),r.slice(0,-1)}class VC{constructor(e){this.staticValue=e,this.kind=0}}class $C{constructor(e){this.pieces=e,this.kind=1}}class qC{static fromStaticValue(e){return new qC([GC.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}buildReplaceString(e,t){if(0===this._state.kind)return t?HC(e,this._state.staticValue):this._state.staticValue;let i="";for(let t=0,n=this._state.pieces.length;t<n;t++){let n=this._state.pieces[t];if(null!==n.staticValue){i+=n.staticValue;continue}let o=qC._substitute(n.matchIndex,e);if(null!==n.caseOps&&n.caseOps.length>0){let e=[],t=n.caseOps.length,i=0;for(let r=0,s=o.length;r<s;r++){if(i>=t){e.push(o.slice(r));break}switch(n.caseOps[i]){case"U":e.push(o[r].toUpperCase());break;case"u":e.push(o[r].toUpperCase()),i++;break;case"L":e.push(o[r].toLowerCase());break;case"l":e.push(o[r].toLowerCase()),i++;break;default:e.push(o[r])}}o=e.join("")}i+=o}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";for(;e>0;){if(e<t.length){return(t[e]||"")+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new VC(e[0].staticValue):this._state=new $C(e):this._state=new VC("")}}class GC{static staticValue(e){return new GC(e,-1,null)}static caseOps(e,t){return new GC(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}}class ZC{emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=GC.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=GC.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=GC.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new qC(this._result)}constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}}function JC(e){if(!e||0===e.length)return new qC(null);let t=[],i=new ZC(e);for(let n=0,o=e.length;n<o;n++){let r=e.charCodeAt(n);if(92!==r){if(36===r){if(n++,n>=o)break;let r=e.charCodeAt(n);if(36===r){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===r||38===r){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=r&&r<=57){let s=r-48;if(n+1<o){let o=e.charCodeAt(n+1);if(48<=o&&o<=57){n++,s=10*s+(o-48),i.emitUnchanged(n-2),i.emitMatchIndex(s,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(s,n+1,t),t.length=0;continue}}}else{if(n++,n>=o)break;let r=e.charCodeAt(n);switch(r){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("\t",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(r))}}}return i.finalize()}Zc=r("c5sLr"),Qd=r("dD6PO");const YC=new(0,Zc.RawContextKey)("findWidgetVisible",!1),XC=new(0,Zc.RawContextKey)("findInputFocussed",!1),QC=new(0,Zc.RawContextKey)("replaceInputFocussed",!1),ex={primary:545,mac:{primary:2593}},tx={primary:565,mac:{primary:2613}},ix={primary:560,mac:{primary:2608}},nx={primary:554,mac:{primary:2602}},ox={primary:558,mac:{primary:2606}},rx={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"};class sx{dispose(){this._isDisposed=!0,(0,gd.dispose)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;void 0!==t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map((e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new(0,fd.Range)(e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e})));let n=this._findMatches(i,!1,19999);this._decorations.set(n,i);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(0===r&&n.length>0){const e=(0,Qd.findFirstInSorted)(n.map((e=>e.range)),(e=>fd.Range.compareRangesUsingStarts(e,o)>=0));r=e>0?e-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(34).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||1===n?(1===i?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new(0,pd.Position)(i,n)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const t=this._decorations.matchAfterPosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<19999){let t=this._decorations.matchBeforePosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),void(t&&this._setCurrentFindMatch(t))}if(this._cannotFind())return;let i=this._decorations.getFindScope(),n=sx._getSearchRange(this._editor.getModel(),i);n.getEndPosition().isBefore(e)&&(e=n.getEndPosition()),e.isBefore(n.getStartPosition())&&(e=n.getEndPosition());let{lineNumber:o,column:r}=e,s=this._editor.getModel(),a=new(0,pd.Position)(o,r),l=s.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);return l&&l.range.isEmpty()&&l.range.getStartPosition().equals(a)&&(a=this._prevSearchPosition(a),l=s.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),l?t||n.containsRange(l.range)?void this._setCurrentFindMatch(l.range):this._moveToPrevMatch(l.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:i,column:n}=e,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new(0,pd.Position)(i,n)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const t=this._decorations.matchBeforePosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<19999){let t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i,n=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),r=sx._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());let{lineNumber:s,column:a}=e,l=this._editor.getModel(),c=new(0,pd.Position)(s,a),d=l.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return i&&d&&d.range.isEmpty()&&d.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),d=l.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),d?n||r.containsRange(d.range)?d:this._getNextMatch(d.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?JC(this._state.replaceString):qC.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){let n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new(0,Id.ReplaceCommand)(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new(0,pd.Position)(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const n=(e||[null]).map((e=>sx._getSearchRange(this._editor.getModel(),e)));return this._editor.getModel().findMatches(this._state.searchString,n,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=19999?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new(0,jC.SearchParams)(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!e)return;let t=e.regex;if(!t.multiline){let e="mu";t.ignoreCase&&(e+="i"),t.global&&(e+="g"),t=new RegExp(t.source,e)}const i=this._editor.getModel(),n=i.getValue(1),o=i.getFullModelRange(),r=this._getReplacePattern();let s;const a=this._state.preserveCase;s=r.hasReplacementPatterns||a?n.replace(t,(function(){return r.buildReplaceString(arguments,a)})):n.replace(t,r.buildReplaceString(null,a));let l=new(0,Id.ReplaceCommandThatPreservesSelection)(o,s,this._editor.getSelection());this._executeEditorCommand("replaceAll",l)}_regularReplaceAll(e){const t=this._getReplacePattern();let i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[];for(let e=0,o=i.length;e<o;e++)n[e]=t.buildReplaceString(i[e].matches,this._state.preserveCase);let o=new WC(this._editor.getSelection(),i.map((e=>e.range)),n);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((e=>new(0,qc.Selection)(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))),i=this._editor.getSelection();for(let e=0,n=t.length;e<n;e++){if(t[e].equalsRange(i)){t=[i].concat(t.slice(0,e)).concat(t.slice(e+1));break}}this._editor.setSelections(t)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}constructor(e,t){this._toDispose=new(0,gd.DisposableStore),this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new(0,hd.TimeoutTimer),this._decorations=new zC(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new(0,hd.RunOnceScheduler)((()=>this.research(!1)),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this.research(!1,this._state.searchScope)}}Tu=r("2cxKt"),mg=r("lAQ7r"),$u=r("kWoyS"),rg=r("jyVY7"),Uu=r("7bUGH");const ax={inputActiveOptionBorder:rg.Color.fromHex("#007ACC00"),inputActiveOptionForeground:rg.Color.fromHex("#FFFFFF"),inputActiveOptionBackground:rg.Color.fromHex("#0E639C50")};class lx extends mg.Widget{get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}constructor(e){super(),this._onChange=this._register(new(0,Uu.Emitter)),this.onChange=this._onChange.event,this._onKeyDown=this._register(new(0,Uu.Emitter)),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},ax),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...$u.CSSIcon.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault()})),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),void e.preventDefault();this._onKeyDown.fire(e)}))}}$u=r("kWoyS");const cx=(Vc=r("kMb12")).localize("caseDescription","Match Case"),dx=Vc.localize("wordsDescription","Match Whole Word"),ux=Vc.localize("regexDescription","Use Regular Expression");class hx extends lx{constructor(e){super({icon:$u.Codicon.caseSensitive,title:cx+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class gx extends lx{constructor(e){super({icon:$u.Codicon.wholeWord,title:dx+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class px extends lx{constructor(e){super({icon:$u.Codicon.regex,title:ux+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}mg=r("lAQ7r"),hd=r("hsQau"),vd=r("02ibr"),yd=r("fmM7j");class fx extends mg.Widget{_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return fx.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(vd.inputActiveOptionBorder),inputActiveOptionForeground:e.getColor(vd.inputActiveOptionForeground),inputActiveOptionBackground:e.getColor(vd.inputActiveOptionBackground)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}constructor(e,t,i,n){super(),this._hideSoon=this._register(new(0,hd.RunOnceScheduler)((()=>this._hide()),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=n.getColorTheme().getColor(vd.inputActiveOptionBorder),r=n.getColorTheme().getColor(vd.inputActiveOptionForeground),s=n.getColorTheme().getColor(vd.inputActiveOptionBackground);this.caseSensitive=this._register(new hx({appendTitle:this._keybindingLabelFor(rx.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:s})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange((()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)}))),this.wholeWords=this._register(new gx({appendTitle:this._keybindingLabelFor(rx.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:s})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange((()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)}))),this.regex=this._register(new px({appendTitle:this._keybindingLabelFor(rx.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:r,inputActiveOptionBackground:s})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange((()=>{this._state.change({isRegex:this.regex.checked},!1)}))),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange((e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()}))),this._register(Tu.addDisposableNonBubblingMouseOutListener(this._domNode,(e=>this._onMouseOut()))),this._register(Tu.addDisposableListener(this._domNode,"mouseover",(e=>this._onMouseOver()))),this._applyTheme(n.getColorTheme()),this._register(n.onDidColorThemeChange(this._applyTheme.bind(this)))}}fx.ID="editor.contrib.findOptionsWidget",(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorWidgetBackground);i&&t.addRule(`.monaco-editor .findOptionsWidget { background-color: ${i}; }`);const n=e.getColor(vd.editorWidgetForeground);n&&t.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const o=e.getColor(vd.widgetShadow);o&&t.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${o}; }`);const r=e.getColor(vd.contrastBorder);r&&t.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${r}; }`)}));Uu=r("7bUGH"),gd=r("ky1to"),fd=r("2KJrz");function mx(e,t){return 1===e||2!==e&&t}class _x extends gd.Disposable{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return mx(this._isRegexOverride,this._isRegex)}get wholeWord(){return mx(this._wholeWordOverride,this._wholeWord)}get matchCase(){return mx(this._matchCaseOverride,this._matchCase)}get preserveCase(){return mx(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,i){let n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),void 0!==i&&(fd.Range.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}change(e,t,i=!0){var n;let o={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;const s=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;void 0!==e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),void 0!==e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),void 0!==e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),void 0!==e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),void 0!==e.isRegex&&(this._isRegex=e.isRegex),void 0!==e.wholeWord&&(this._wholeWord=e.wholeWord),void 0!==e.matchCase&&(this._matchCase=e.matchCase),void 0!==e.preserveCase&&(this._preserveCase=e.preserveCase),void 0!==e.searchScope&&((null===(n=e.searchScope)||void 0===n?void 0:n.every((e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some((t=>!fd.Range.equalsRange(t,e)))})))||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0)),void 0!==e.loop&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),this._isRegexOverride=void 0!==e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride=void 0!==e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride=void 0!==e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride=void 0!==e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(r=!0,o.isRegex=!0),a!==this.wholeWord&&(r=!0,o.wholeWord=!0),l!==this.matchCase&&(r=!0,o.matchCase=!0),c!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=19999}constructor(){super(),this._onFindReplaceStateChange=this._register(new(0,Uu.Emitter)),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}}var bx={};e(bx,"FindWidget",(function(){return sS}),(function(e){return sS=e}));Vc=r("kMb12"),Tu=r("2cxKt"),id=r("gF77M"),jg=r("hxCPG"),mg=r("lAQ7r"),hd=r("hsQau"),Jc=r("8bVMi"),gd=r("ky1to"),Ld=r("drE9L"),Jd=r("aAfu1"),fd=r("2KJrz"),vd=r("02ibr"),yd=r("fmM7j");var vx={};e(vx,"ContextScopedFindInput",(function(){return Tx}),(function(e){return Tx=e})),e(vx,"ContextScopedReplaceInput",(function(){return Mx}),(function(e){return Mx=e}));Tu=r("2cxKt");var yx=r("8CLBV");mg=r("lAQ7r"),Uu=r("7bUGH");const wx=(Vc=r("kMb12")).localize("defaultLabel","input");class Cx extends mg.Widget{enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new(0,Uu.Emitter)),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new(0,Uu.Emitter)),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new(0,Uu.Emitter)),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new(0,Uu.Emitter)),this._onKeyUp=this._register(new(0,Uu.Emitter)),this._onCaseSensitiveKeyDown=this._register(new(0,Uu.Emitter)),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new(0,Uu.Emitter)),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||wx,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;const o=n.appendCaseSensitiveLabel||"",r=n.appendWholeWordsLabel||"",s=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,d=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new(0,yx.HistoryInputBox)(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:a,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d})),this.regex=this._register(new px({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((e=>{this._onRegexKeyDown.fire(e)}))),this.wholeWords=this._register(new gx({appendTitle:r,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new hx({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((e=>{this._onCaseSensitiveKeyDown.fire(e)}))),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let t=u.indexOf(document.activeElement);if(t>=0){let i=-1;e.equals(17)?i=(t+1)%u.length:e.equals(15)&&(i=0===t?u.length-1:t-1),e.equals(9)?(u[t].blur(),this.inputBox.focus()):i>=0&&u[i].focus(),Tu.EventHelper.stop(e,!0)}}}));let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.caseSensitive.domNode),h.appendChild(this.wholeWords.domNode),h.appendChild(this.regex.domNode),this.domNode.appendChild(h),e&&e.appendChild(this.domNode),this._register(Tu.addDisposableListener(this.inputBox.inputElement,"compositionstart",(e=>{this.imeSessionInProgress=!0}))),this._register(Tu.addDisposableListener(this.inputBox.inputElement,"compositionend",(e=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}}Tu=r("2cxKt"),yx=r("8CLBV"),mg=r("lAQ7r"),$u=r("kWoyS"),Uu=r("7bUGH");const xx=(Vc=r("kMb12")).localize("defaultLabel","input"),Sx=Vc.localize("label.preserveCaseCheckbox","Preserve Case");class kx extends lx{constructor(e){super({icon:$u.Codicon.preserveCase,title:Sx+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Ex extends mg.Widget{enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}constructor(e,t,i,n){super(),this._showOptionButtons=i,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new(0,Uu.Emitter)),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new(0,Uu.Emitter)),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new(0,Uu.Emitter)),this._onInput=this._register(new(0,Uu.Emitter)),this._onKeyUp=this._register(new(0,Uu.Emitter)),this._onPreserveCaseKeyDown=this._register(new(0,Uu.Emitter)),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||xx,this.inputActiveOptionBorder=n.inputActiveOptionBorder,this.inputActiveOptionForeground=n.inputActiveOptionForeground,this.inputActiveOptionBackground=n.inputActiveOptionBackground,this.inputBackground=n.inputBackground,this.inputForeground=n.inputForeground,this.inputBorder=n.inputBorder,this.inputValidationInfoBorder=n.inputValidationInfoBorder,this.inputValidationInfoBackground=n.inputValidationInfoBackground,this.inputValidationInfoForeground=n.inputValidationInfoForeground,this.inputValidationWarningBorder=n.inputValidationWarningBorder,this.inputValidationWarningBackground=n.inputValidationWarningBackground,this.inputValidationWarningForeground=n.inputValidationWarningForeground,this.inputValidationErrorBorder=n.inputValidationErrorBorder,this.inputValidationErrorBackground=n.inputValidationErrorBackground,this.inputValidationErrorForeground=n.inputValidationErrorForeground;const o=n.appendPreserveCaseLabel||"",r=n.history||[],s=!!n.flexibleHeight,a=!!n.flexibleWidth,l=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new(0,yx.HistoryInputBox)(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:r,flexibleHeight:s,flexibleWidth:a,flexibleMaxHeight:l})),this.preserveCase=this._register(new kx({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.preserveCase.onKeyDown((e=>{this._onPreserveCaseKeyDown.fire(e)}))),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let c=[this.preserveCase.domNode];this.onkeydown(this.domNode,(e=>{if(e.equals(15)||e.equals(17)||e.equals(9)){let t=c.indexOf(document.activeElement);if(t>=0){let i=-1;e.equals(17)?i=(t+1)%c.length:e.equals(15)&&(i=0===t?c.length-1:t-1),e.equals(9)?(c[t].blur(),this.inputBox.focus()):i>=0&&c[i].focus(),Tu.EventHelper.stop(e,!0)}}}));let d=document.createElement("div");d.className="controls",d.style.display=this._showOptionButtons?"block":"none",d.appendChild(this.preserveCase.domNode),this.domNode.appendChild(d),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}}Zc=r("c5sLr"),W_=r("1Iayd");var Dx=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ax=function(e,t){return function(i,n){t(i,n,e)}};function Ix(e,t){return e.getContext(document.activeElement).getValue(t)}function Rx(e,t){const i=function(e,t){return e.createScoped(t.target)}(e,t);!function(e,t,i){new(0,Zc.RawContextKey)(i,t).bindTo(e)}(i,t,"historyNavigationWidget");return{scopedContextKeyService:i,historyNavigationForwardsEnablement:new(0,Zc.RawContextKey)("historyNavigationForwardsEnabled",!0).bindTo(i),historyNavigationBackwardsEnablement:new(0,Zc.RawContextKey)("historyNavigationBackwardsEnabled",!0).bindTo(i)}}let Tx=class extends Cx{constructor(e,t,i,n,o=!1){super(e,t,o,i),this._register(Rx(n,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};Tx=Dx([Ax(3,Zc.IContextKeyService)],Tx);let Mx=class extends Ex{constructor(e,t,i,n,o=!1){super(e,t,o,i),this._register(Rx(n,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};Mx=Dx([Ax(3,Zc.IContextKeyService)],Mx),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Zc.ContextKeyExpr.and(Zc.ContextKeyExpr.has("historyNavigationWidget"),Zc.ContextKeyExpr.equals("historyNavigationBackwardsEnabled",!0)),primary:16,secondary:[528],handler:e=>{const t=Ix(e.get(Zc.IContextKeyService),"historyNavigationWidget");if(t){t.historyNavigator.showPreviousValue()}}}),W_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Zc.ContextKeyExpr.and(Zc.ContextKeyExpr.has("historyNavigationWidget"),Zc.ContextKeyExpr.equals("historyNavigationForwardsEnabled",!0)),primary:18,secondary:[530],handler:e=>{const t=Ix(e.get(Zc.IContextKeyService),"historyNavigationWidget");if(t){t.historyNavigator.showNextValue()}}});$u=r("kWoyS"),tf=r("lfDTl");var Lx=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const Nx=(0,tf.registerIcon)("find-selection",$u.Codicon.selection,Vc.localize("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Ox=(0,tf.registerIcon)("find-collapsed",$u.Codicon.chevronRight,Vc.localize("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Px=(0,tf.registerIcon)("find-expanded",$u.Codicon.chevronDown,Vc.localize("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Fx=(0,tf.registerIcon)("find-replace",$u.Codicon.replace,Vc.localize("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Bx=(0,tf.registerIcon)("find-replace-all",$u.Codicon.replaceAll,Vc.localize("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),jx=(0,tf.registerIcon)("find-previous-match",$u.Codicon.arrowUp,Vc.localize("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),zx=(0,tf.registerIcon)("find-next-match",$u.Codicon.arrowDown,Vc.localize("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Wx=Vc.localize("label.find","Find"),Hx=Vc.localize("placeholder.find","Find"),Kx=Vc.localize("label.previousMatchButton","Previous Match"),Ux=Vc.localize("label.nextMatchButton","Next Match"),Vx=Vc.localize("label.toggleSelectionFind","Find in Selection"),$x=Vc.localize("label.closeButton","Close"),qx=Vc.localize("label.replace","Replace"),Gx=Vc.localize("placeholder.replace","Replace"),Zx=Vc.localize("label.replaceButton","Replace"),Jx=Vc.localize("label.replaceAllButton","Replace All"),Yx=Vc.localize("label.toggleReplaceButton","Toggle Replace"),Xx=Vc.localize("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",19999),Qx=Vc.localize("label.matchesLocation","{0} of {1}"),eS=Vc.localize("label.noResults","No results");let tS=69;const iS=Ld.isMacintosh?256:2048;class nS{constructor(e){this.afterLineNumber=e,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function oS(e,t,i){const n=!!t.match(/\n/);i&&n&&i.selectionStart>0&&e.stopPropagation()}function rS(e,t,i){const n=!!t.match(/\n/);i&&n&&i.selectionEnd<i.value.length&&e.stopPropagation()}class sS extends mg.Widget{getId(){return sS.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Jc.onUnexpectedError)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=tS+"px",this._state.matchesCount>=19999?this._matchesCount.title=Xx:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=19999&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=Jd.format(Qx,i,t)}else e=eS;this._matchesCount.appendChild(document.createTextNode(e)),(0,id.alert)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),tS=Math.max(tS,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===eS)return""===i?Vc.localize("ariaSearchNoResultEmpty","{0} found",e):Vc.localize("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const n=Vc.localize("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){return`${o.getLineContent(t.startLineNumber)}, ${n}`}return n}return Vc.localize("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let i=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(34).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((()=>{this._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(34).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const n=Tu.getDomNodePagePosition(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=n.left+(o?o.left:0),s=o?o.top:0;if(this._viewZone&&s<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const i=Tu.getTopLeftOffset(this._domNode).left;r>i&&(t=!1);const o=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());n.left+(o?o.left:0)>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(34).addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;const t=this._viewZone;void 0===this._viewZoneId&&t&&this._codeEditor.changeViewZones((i=>{t.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(t),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+t.heightInPx)}))}_showViewZone(e=!0){if(!this._isVisible)return;if(!this._codeEditor.getOption(34).addExtraSpaceOnTop)return;void 0===this._viewZone&&(this._viewZone=new nS(0));const t=this._viewZone;this._codeEditor.changeViewZones((i=>{if(void 0!==this._viewZoneId){const n=this._getHeight();if(n===t.heightInPx)return;let o=n-t.heightInPx;return t.heightInPx=n,i.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o))}{let n=this._getHeight();if(n-=this._codeEditor.getOption(74).top,n<=0)return;t.heightInPx=n,this._viewZoneId=i.addZone(t),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+n)}}))}_removeViewZone(){this._codeEditor.changeViewZones((e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))}))}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(vd.inputActiveOptionBorder),inputActiveOptionBackground:e.getColor(vd.inputActiveOptionBackground),inputActiveOptionForeground:e.getColor(vd.inputActiveOptionForeground),inputBackground:e.getColor(vd.inputBackground),inputForeground:e.getColor(vd.inputForeground),inputBorder:e.getColor(vd.inputBorder),inputValidationInfoBackground:e.getColor(vd.inputValidationInfoBackground),inputValidationInfoForeground:e.getColor(vd.inputValidationInfoForeground),inputValidationInfoBorder:e.getColor(vd.inputValidationInfoBorder),inputValidationWarningBackground:e.getColor(vd.inputValidationWarningBackground),inputValidationWarningForeground:e.getColor(vd.inputValidationWarningForeground),inputValidationWarningBorder:e.getColor(vd.inputValidationWarningBorder),inputValidationErrorBackground:e.getColor(vd.inputValidationErrorBackground),inputValidationErrorForeground:e.getColor(vd.inputValidationErrorForeground),inputValidationErrorBorder:e.getColor(vd.inputValidationErrorBorder)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!Tu.isInDOM(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const t=e.width,i=e.minimap.minimapWidth;let n=!1,o=!1,r=!1;if(this._resized){if(Tu.getTotalWidth(this._domNode)>419)return this._domNode.style.maxWidth=t-28-i-15+"px",void(this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode))}if(447+i>=t&&(o=!0),447+i-tS>=t&&(r=!0),447+i-tS>=t+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",o),r||n||(this._domNode.style.maxWidth=t-28-i-15+"px"),this._resized){this._findInput.inputBox.layout();let e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map((e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||fd.Range.equalsRange(e,t)?null:e})).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|iS)?(this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?oS(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?rS(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|iS)?(Ld.isWindows&&Ld.isNative&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Vc.localize("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store("ctrlEnterReplaceAll.windows.donotask",!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?oS(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?rS(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new(0,vx.ContextScopedFindInput)(null,this._contextViewProvider,{width:221,label:Wx,placeholder:Hx,appendCaseSensitiveLabel:this._keybindingLabelFor(rx.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(rx.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(rx.ToggleRegexCommand),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(e){return{content:e.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((e=>this._onFindInputKeyDown(e)))),this._register(this._findInput.inputBox.onDidChange((()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((e=>{this._tryUpdateHeight()&&this._showViewZone()}))),Ld.isLinux&&this._register(this._findInput.onMouseDown((e=>this._onFindInputMouseDown(e)))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new aS({label:Kx+this._keybindingLabelFor(rx.PreviousMatchFindAction),icon:jx,onTrigger:()=>{this._codeEditor.getAction(rx.PreviousMatchFindAction).run().then(void 0,Jc.onUnexpectedError)}})),this._nextBtn=this._register(new aS({label:Ux+this._keybindingLabelFor(rx.NextMatchFindAction),icon:zx,onTrigger:()=>{this._codeEditor.getAction(rx.NextMatchFindAction).run().then(void 0,Jc.onUnexpectedError)}}));let e=document.createElement("div");e.className="find-part",e.appendChild(this._findInput.domNode);const t=document.createElement("div");t.className="find-actions",e.appendChild(t),t.appendChild(this._matchesCount),t.appendChild(this._prevBtn.domNode),t.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new lx({icon:Nx,title:Vx+this._keybindingLabelFor(rx.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange((()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let e=this._codeEditor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)}))),t.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new aS({label:$x+this._keybindingLabelFor(rx.CloseFindWidgetCommand),icon:tf.widgetClose,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),t.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new(0,vx.ContextScopedReplaceInput)(null,void 0,{label:qx,placeholder:Gx,appendPreserveCaseLabel:this._keybindingLabelFor(rx.TogglePreserveCaseCommand),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((e=>this._onReplaceInputKeyDown(e)))),this._register(this._replaceInput.inputBox.onDidChange((()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())}))),this._replaceBtn=this._register(new aS({label:Zx+this._keybindingLabelFor(rx.ReplaceOneAction),icon:Fx,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new aS({label:Jx+this._keybindingLabelFor(rx.ReplaceAllAction),icon:Bx,onTrigger:()=>{this._controller.replaceAll()}}));let i=document.createElement("div");i.className="replace-part",i.appendChild(this._replaceInput.domNode);const n=document.createElement("div");n.className="replace-actions",i.appendChild(n),n.appendChild(this._replaceBtn.domNode),n.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new aS({label:Yx,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="419px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(e),this._domNode.appendChild(i),this._resizeSash=new(0,jg.Sash)(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let o=419;this._register(this._resizeSash.onDidStart((()=>{o=Tu.getTotalWidth(this._domNode)}))),this._register(this._resizeSash.onDidChange((e=>{this._resized=!0;let t=o+e.startX-e.currentX;if(t<419)return;t>(parseFloat(Tu.getComputedStyle(this._domNode).maxWidth)||0)||(this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((()=>{const e=Tu.getTotalWidth(this._domNode);if(e<419)return;let t=419;if(!this._resized||419===e){const e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${t}px`,this._isReplaceVisible&&(this._replaceInput.width=Tu.getTotalWidth(this._findInput.domNode)),this._findInput.inputBox.layout()})))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}constructor(e,t,i,n,o,r,s,a,l){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=o,this._contextKeyService=r,this._storageService=a,this._notificationService=l,this._ctrlEnterReplaceAllWarningPrompted=!!a.getBoolean("ctrlEnterReplaceAll.windows.donotask",0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new(0,hd.Delayer)(500),this._register((0,gd.toDisposable)((()=>this._updateHistoryDelayer.cancel()))),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration((e=>{if(e.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(130)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(34)){const e=this._codeEditor.getOption(34).addExtraSpaceOnTop;e&&!this._viewZone&&(this._viewZone=new nS(0),this._showViewZone()),!e&&this._viewZone&&this._removeViewZone()}}))),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection((()=>{this._isVisible&&this._updateToggleSelectionFindButton()}))),this._register(this._codeEditor.onDidFocusEditorWidget((()=>Lx(this,void 0,void 0,(function*(){if(this._isVisible){let e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}}))))),this._findInputFocused=XC.bindTo(r),this._findFocusTracker=this._register(Tu.trackFocus(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus((()=>{this._findInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._findFocusTracker.onDidBlur((()=>{this._findInputFocused.set(!1)}))),this._replaceInputFocused=QC.bindTo(r),this._replaceFocusTracker=this._register(Tu.trackFocus(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus((()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._replaceFocusTracker.onDidBlur((()=>{this._replaceInputFocused.set(!1)}))),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(34).addExtraSpaceOnTop&&(this._viewZone=new nS(0)),this._applyTheme(s.getColorTheme()),this._register(s.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel((()=>{this._isVisible&&(this._viewZoneId=void 0)}))),this._register(this._codeEditor.onDidScrollChange((e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout((()=>{this._layoutViewZone()}),0)})))}}sS.ID="editor.contrib.findWidget";class aS extends mg.Widget{get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...yd.ThemeIcon.asClassNameArray(Ox)),this._domNode.classList.add(...yd.ThemeIcon.asClassNameArray(Px))):(this._domNode.classList.remove(...yd.ThemeIcon.asClassNameArray(Px)),this._domNode.classList.add(...yd.ThemeIcon.asClassNameArray(Ox)))}constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+yd.ThemeIcon.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,(e=>{this._opts.onTrigger(),e.preventDefault()})),this.onkeydown(this._domNode,(e=>{if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();this._opts.onKeyDown&&this._opts.onKeyDown(e)}))}}(0,yd.registerThemingParticipant)(((e,t)=>{const i=(e,i)=>{i&&t.addRule(`.monaco-editor ${e} { background-color: ${i}; }`)};i(".findMatch",e.getColor(vd.editorFindMatchHighlight)),i(".currentFindMatch",e.getColor(vd.editorFindMatch)),i(".findScope",e.getColor(vd.editorFindRangeHighlight));i(".find-widget",e.getColor(vd.editorWidgetBackground));const n=e.getColor(vd.widgetShadow);n&&t.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${n}; }`);const o=e.getColor(vd.editorFindMatchHighlightBorder);o&&t.addRule(`.monaco-editor .findMatch { border: 1px ${"hc"===e.type?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const r=e.getColor(vd.editorFindMatchBorder);r&&t.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${r}; padding: 1px; box-sizing: border-box; }`);const s=e.getColor(vd.editorFindRangeHighlightBorder);s&&t.addRule(`.monaco-editor .findScope { border: 1px ${"hc"===e.type?"dashed":"solid"} ${s}; }`);const a=e.getColor(vd.contrastBorder);a&&t.addRule(`.monaco-editor .find-widget { border: 1px solid ${a}; }`);const l=e.getColor(vd.editorWidgetForeground);l&&t.addRule(`.monaco-editor .find-widget { color: ${l}; }`);const c=e.getColor(vd.errorForeground);c&&t.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${c}; }`);const d=e.getColor(vd.editorWidgetResizeBorder);if(d)t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${d}; }`);else{const i=e.getColor(vd.editorWidgetBorder);i&&t.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${i}; }`)}const u=e.getColor(vd.toolbarHoverBackground);u&&t.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${u} !important;\n\t\t}\n\t`);const h=e.getColor(vd.focusBorder);h&&t.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${h}; }`)}));wd=r("4Nnjr"),Pd=r("d5VSL"),Zc=r("c5sLr"),Lu=r("fRIx8"),Nu=r("5TiFM"),Uh=r("6Jk2H"),yd=r("fmM7j"),oh=r("26YKj");var lS=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},cS=function(e,t){return function(i,n){t(i,n,e)}},dS=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function uS(e,t="single",i=!1){if(!e.hasModel())return null;const n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t)if(n.isEmpty()){const t=e.getConfiguredWordAtPosition(n.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(n)<524288)return e.getModel().getValueInRange(n);return null}let hS=class e extends gd.Disposable{get editor(){return this._editor}static get(t){return t.getContribution(e.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!XC.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Jd.escapeRegExpCharacters(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e){return dS(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;let t={isRevealed:!0};if("single"===e.seedSearchStringFromSelection){let i=uS(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?t.searchString=Jd.escapeRegExpCharacters(i):t.searchString=i)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){let i=uS(this._editor,e.seedSearchStringFromSelection);i&&(t.searchString=i)}if(!t.searchString&&e.seedSearchStringFromGlobalClipboard){let e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(t.searchString=e)}if(e.forceRevealReplace?t.isReplaceRevealed=!0:this._findWidgetVisible.get()||(t.isReplaceRevealed=!1),e.updateSearchScope){let e=this._editor.getSelections();e.some((e=>!e.isEmpty()))&&(t.searchScope=e)}t.loop=e.loop,this._state.change(t,!1),this._model||(this._model=new sx(this._editor,this._state))}))}start(e){return this._start(e)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return dS(this,void 0,void 0,(function*(){return this._editor.getOption(34).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(34).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}constructor(e,t,i,n){super(),this._editor=e,this._findWidgetVisible=YC.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new(0,hd.Delayer)(500),this._state=this._register(new _x),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{let e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(34).loop})})))}};hS.ID="editor.contrib.findController",hS=lS([cS(1,Zc.IContextKeyService),cS(2,Uh.IStorageService),cS(3,Pd.IClipboardService)],hS);let gS=class extends hS{_start(e){const t=Object.create(null,{_start:{get:()=>super._start}});return dS(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const i=this._editor.getSelection();let n=!1;switch(this._editor.getOption(34).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":n=!!i&&i.startLineNumber!==i.endLineNumber}e.updateSearchScope=n,yield t._start.call(this,e),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new(0,bx.FindWidget)(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new fx(this._editor,this._state,this._keybindingService,this._themeService))}constructor(e,t,i,n,o,r,s,a){super(e,i,s,a),this._contextViewService=t,this._keybindingService=n,this._themeService=o,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}};gS=lS([cS(1,Lu.IContextViewService),cS(2,Zc.IContextKeyService),cS(3,Nu.IKeybindingService),cS(4,yd.IThemeService),cS(5,oh.INotificationService),cS(6,Uh.IStorageService),cS(7,Pd.IClipboardService)],gS);(0,Uc.registerMultiEditorAction)(new(0,Uc.MultiEditorAction)({id:rx.StartFindAction,label:Vc.localize("startFindAction","Find"),alias:"Find",precondition:Zc.ContextKeyExpr.or($c.EditorContextKeys.focus,Zc.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:wd.MenuId.MenubarEditMenu,group:"3_find",title:Vc.localize({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})).addImplementation(0,((e,t,i)=>{const n=hS.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(34).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})}));class pS extends Uc.EditorAction{run(e,t){return dS(this,void 0,void 0,(function*(){let e=hS.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}constructor(){super({id:rx.StartFindWithSelection,label:Vc.localize("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}}class fS extends Uc.EditorAction{run(e,t){return dS(this,void 0,void 0,(function*(){let e=hS.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),this._run(e))}))}}class mS extends Uc.EditorAction{run(e,t){return dS(this,void 0,void 0,(function*(){let e=hS.get(t);if(!e)return;const i="selection"===t.getOption(34).seedSearchStringFromSelection;let n=null;"never"!==t.getOption(34).seedSearchStringFromSelection&&(n=uS(t,"single",i)),n&&e.setSearchString(n),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop}),this._run(e))}))}}(0,Uc.registerMultiEditorAction)(new(0,Uc.MultiEditorAction)({id:rx.StartFindReplaceAction,label:Vc.localize("startReplace","Replace"),alias:"Replace",precondition:Zc.ContextKeyExpr.or($c.EditorContextKeys.focus,Zc.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:wd.MenuId.MenubarEditMenu,group:"3_find",title:Vc.localize({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})).addImplementation(0,((e,t,i)=>{if(!t.hasModel()||t.getOption(80))return!1;const n=hS.get(t);if(!n)return!1;const o=t.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(34).seedSearchStringFromSelection&&!r,a=r||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(34).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})})),(0,Uc.registerEditorContribution)(hS.ID,gS),(0,Uc.registerEditorAction)(pS),(0,Uc.registerEditorAction)(class extends fS{_run(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}constructor(){super({id:rx.NextMatchFindAction,label:Vc.localize("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:$c.EditorContextKeys.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.focus,XC),primary:3,weight:100}]})}}),(0,Uc.registerEditorAction)(class extends fS{_run(e){return e.moveToPrevMatch()}constructor(){super({id:rx.PreviousMatchFindAction,label:Vc.localize("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:$c.EditorContextKeys.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.focus,XC),primary:1027,weight:100}]})}}),(0,Uc.registerEditorAction)(class extends mS{_run(e){return e.moveToNextMatch()}constructor(){super({id:rx.NextSelectionMatchFindAction,label:Vc.localize("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:2109,weight:100}})}}),(0,Uc.registerEditorAction)(class extends mS{_run(e){return e.moveToPrevMatch()}constructor(){super({id:rx.PreviousSelectionMatchFindAction,label:Vc.localize("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:3133,weight:100}})}});const _S=Uc.EditorCommand.bindToContribution(hS.get);(0,Uc.registerEditorCommand)(new _S({id:rx.CloseFindWidgetCommand,precondition:YC,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.focus,Zc.ContextKeyExpr.not("isComposing")),primary:9,secondary:[1033]}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:ex.primary,mac:ex.mac,win:ex.win,linux:ex.linux}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:tx.primary,mac:tx.mac,win:tx.win,linux:tx.linux}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:ix.primary,mac:ix.mac,win:ix.win,linux:ix.linux}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:nx.primary,mac:nx.mac,win:nx.win,linux:nx.linux}})),(0,Uc.registerEditorCommand)(new _S({id:rx.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:ox.primary,mac:ox.mac,win:ox.win,linux:ox.linux}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ReplaceOneAction,precondition:YC,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:3094}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ReplaceOneAction,precondition:YC,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.focus,QC),primary:3}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ReplaceAllAction,precondition:YC,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:2563}})),(0,Uc.registerEditorCommand)(new _S({id:rx.ReplaceAllAction,precondition:YC,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.focus,QC),primary:void 0,mac:{primary:2051}}})),(0,Uc.registerEditorCommand)(new _S({id:rx.SelectAllMatchesAction,precondition:YC,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:$c.EditorContextKeys.focus,primary:515}}));Vc=r("kMb12"),Mh=r("5jjji"),Jd=r("aAfu1"),hd=r("hsQau"),Gc=r("8NQur"),gd=r("ky1to"),Uc=r("kO85n"),Uu=r("7bUGH");class bS{ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(t,i)=>{let n=e[e.length-1];return this.getStartLineNumber(n)<=t&&this.getEndLineNumber(n)>=i};for(let i=0,n=this._startIndexes.length;i<n;i++){let n=this._startIndexes[i],o=this._endIndexes[i];if(n>16777215||o>16777215)throw new Error("startLineNumber or endLineNumber must not exceed 16777215");for(;e.length>0&&!t(n,o);)e.pop();let r=e.length>0?e[e.length-1]:-1;e.push(i),this._startIndexes[i]=n+((255&r)<<24),this._endIndexes[i]=o+((65280&r)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return 16777215&this._startIndexes[e]}getEndLineNumber(e){return 16777215&this._endIndexes[e]}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,i=e%32;return 0!=(this._collapseStates[t]&1<<i)}setCollapsed(e,t){let i=e/32|0,n=e%32,o=this._collapseStates[i];this._collapseStates[i]=t?o|1<<n:o&~(1<<n)}setCollapsedAllOfType(e,t){let i=!1;if(this._types)for(let n=0;n<this._types.length;n++)this._types[n]===e&&(this.setCollapsed(n,t),i=!0);return i}toRegion(e){return new vS(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((4278190080&this._startIndexes[e])>>>24)+((4278190080&this._endIndexes[e])>>>16);return 65535===t?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,i=this._startIndexes.length;if(0===i)return-1;for(;t<i;){let n=Math.floor((t+i)/2);e<this.getStartLineNumber(n)?i=n:t=n+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}constructor(e,t,i){if(e.length!==t.length||e.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=i,this._parentsComputed=!1}}class vS{get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}constructor(e,t){this.ranges=e,this.index=t}}class yS{get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort(((e,t)=>e.regionIndex-t.regionIndex));const t={};this._decorationProvider.changeDecorations((i=>{let n=0,o=-1,r=-1;const s=e=>{for(;n<e;){const e=this._regions.getEndLineNumber(n),t=this._regions.isCollapsed(n);e<=o&&i.changeDecorationOptions(this._editorDecorationIds[n],this._decorationProvider.getDecorationOption(t,e<=r)),t&&e>r&&(r=e),n++}};for(let i of e){let e=i.regionIndex,n=this._editorDecorationIds[e];if(n&&!t[n]){t[n]=!0,s(e);let i=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,i),o=Math.max(o,this._regions.getEndLineNumber(e))}}s(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let i=[],n=-1,o=(o,r)=>{const s=e.getStartLineNumber(o),a=e.getEndLineNumber(o);r||(r=e.isCollapsed(o)),r&&((e,i)=>{for(let n of t)if(e<n&&n<=i)return!0;return!1})(s,a)&&(r=!1),e.setCollapsed(o,r);const l=this._textModel.getLineMaxColumn(s),c={startLineNumber:s,startColumn:Math.max(l-1,1),endLineNumber:s,endColumn:l};i.push({range:c,options:this._decorationProvider.getDecorationOption(r,a<=n)}),r&&a>n&&(n=a)},r=0,s=()=>{for(;r<this._regions.length;){let e=this._regions.isCollapsed(r);if(r++,e)return r-1}return-1},a=0,l=s();for(;-1!==l&&a<e.length;){let t=this._textModel.getDecorationRange(this._editorDecorationIds[l]);if(t){let i=t.startLineNumber;if(t.startColumn===Math.max(t.endColumn-1,1)&&this._textModel.getLineMaxColumn(i)===t.endColumn)for(;a<e.length;){let t=e.getStartLineNumber(a);if(!(i>=t))break;o(a,i===t),a++}}l=s()}for(;a<e.length;)o(a,!1),a++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let i=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(i){let n=i.startLineNumber,o=i.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:n,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let i of e){let e=this.getRegionAtLine(i.startLineNumber);e&&!e.isCollapsed&&t.push(e)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let i=[];if(this._regions){let n=this._regions.findRange(e),o=1;for(;n>=0;){let e=this._regions.toRegion(n);t&&!t(e,o)||i.push(e),o++,n=e.parentIndex}}return i}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let i=[],n=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length){const e=[];for(let r=n,s=this._regions.length;r<s;r++){let n=this._regions.toRegion(r);if(!(this._regions.getStartLineNumber(r)<o))break;for(;e.length>0&&!n.containedBy(e[e.length-1]);)e.pop();e.push(n),t(n,e.length)&&i.push(n)}}else for(let e=n,r=this._regions.length;e<r;e++){let n=this._regions.toRegion(e);if(!(this._regions.getStartLineNumber(e)<o))break;t&&!t(n)||i.push(n)}return i}constructor(e,t){this._updateEventEmitter=new(0,Uu.Emitter),this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new bS(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}}function wS(e,t,i){let n=[];for(let o of i){let i=e.getRegionAtLine(o);if(i){const o=!i.isCollapsed;if(n.push(i),t>1){let r=e.getRegionsInside(i,((e,i)=>e.isCollapsed!==o&&i<t));n.push(...r)}}}e.toggleCollapseState(n)}function CS(e,t,i=Number.MAX_VALUE,n){let o=[];if(n&&n.length>0)for(let r of n){let n=e.getRegionAtLine(r);if(n&&(n.isCollapsed!==t&&o.push(n),i>1)){let r=e.getRegionsInside(n,((e,n)=>e.isCollapsed!==t&&n<i));o.push(...r)}}else{let n=e.getRegionsInside(null,((e,n)=>e.isCollapsed!==t&&n<i));o.push(...n)}e.toggleCollapseState(o)}function xS(e,t,i,n){let o=[];for(let r of n){let n=e.getAllRegionsAtLine(r,((e,n)=>e.isCollapsed!==t&&n<=i));o.push(...n)}e.toggleCollapseState(o)}function SS(e,t,i){let n=[];for(let o of i){let i=e.getAllRegionsAtLine(o,(e=>e.isCollapsed!==t));i.length>0&&n.push(i[0])}e.toggleCollapseState(n)}function kS(e,t,i,n){let o=e.getRegionsInside(null,((e,o)=>o===t&&e.isCollapsed!==i&&!n.some((t=>e.containsLine(t)))));e.toggleCollapseState(o)}function ES(e,t,i){let n=[];for(let t of i)n.push(e.getAllRegionsAtLine(t,void 0)[0]);let o=e.getRegionsInside(null,(e=>n.every((t=>!t.containedBy(e)&&!e.containedBy(t)))&&e.isCollapsed!==t));e.toggleCollapseState(o)}function DS(e,t,i){let n=e.textModel,o=e.regions,r=[];for(let e=o.length-1;e>=0;e--)if(i!==o.isCollapsed(e)){let i=o.getStartLineNumber(e);t.test(n.getLineContent(i))&&r.push(o.toRegion(e))}e.toggleCollapseState(r)}function AS(e,t,i){let n=e.regions,o=[];for(let e=n.length-1;e>=0;e--)i!==n.isCollapsed(e)&&t===n.getType(e)&&o.push(n.toRegion(e));e.toggleCollapseState(o)}function IS(e,t){let i=null,n=t.getRegionAtLine(e);if(null!==n&&(i=n.startLineNumber,e===i)){let e=n.parentIndex;i=-1!==e?t.regions.getStartLineNumber(e):null}return i}function RS(e,t){let i=t.getRegionAtLine(e);if(null!==i){if(e!==i.startLineNumber)return i.startLineNumber;{let e=i.parentIndex,n=0;for(-1!==e&&(n=t.regions.getStartLineNumber(i.parentIndex));null!==i;){if(!(i.regionIndex>0))return null;if(i=t.regions.toRegion(i.regionIndex-1),i.startLineNumber<=n)return null;if(i.parentIndex===e)return i.startLineNumber}}}else if(t.regions.length>0)for(i=t.regions.toRegion(t.regions.length-1);null!==i;){if(-1===i.parentIndex&&i.startLineNumber<e)return i.startLineNumber;i=i.regionIndex>0?t.regions.toRegion(i.regionIndex-1):null}return null}function TS(e,t){let i=t.getRegionAtLine(e);if(null!==i){let e=i.parentIndex,n=0;if(-1!==e)n=t.regions.getEndLineNumber(i.parentIndex);else{if(0===t.regions.length)return null;n=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==i;){if(!(i.regionIndex<t.regions.length))return null;if(i=t.regions.toRegion(i.regionIndex+1),i.startLineNumber>=n)return null;if(i.parentIndex===e)return i.startLineNumber}}else if(t.regions.length>0)for(i=t.regions.toRegion(0);null!==i;){if(-1===i.parentIndex&&i.startLineNumber>e)return i.startLineNumber;i=i.regionIndex<t.regions.length?t.regions.toRegion(i.regionIndex+1):null}return null}_d=r("gHDnG"),$u=r("kWoyS"),Vc=r("kMb12"),tf=r("lfDTl"),yd=r("fmM7j");const MS=(0,tf.registerIcon)("folding-expanded",$u.Codicon.chevronDown,(0,Vc.localize)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),LS=(0,tf.registerIcon)("folding-collapsed",$u.Codicon.chevronRight,(0,Vc.localize)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class NS{getDecorationOption(e,t){return t?NS.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?NS.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:NS.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?NS.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:NS.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}}NS.COLLAPSED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:yd.ThemeIcon.asClassName(LS)}),NS.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:yd.ThemeIcon.asClassName(LS)}),NS.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:yd.ThemeIcon.asClassName(MS)}),NS.EXPANDED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+yd.ThemeIcon.asClassName(MS)}),NS.HIDDEN_RANGE_DECORATION=_d.ModelDecorationOptions.register({description:"folding-hidden-range-decoration",stickiness:1});$c=r("jb8ay"),Uu=r("7bUGH"),fd=r("2KJrz"),Qd=r("dD6PO");class OS{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}updateHiddenRanges(){let e=!1,t=[],i=0,n=0,o=Number.MAX_VALUE,r=-1,s=this._foldingModel.regions;for(;i<s.length;i++){if(!s.isCollapsed(i))continue;let a=s.getStartLineNumber(i)+1,l=s.getEndLineNumber(i);o<=a&&l<=r||(!e&&n<this._hiddenRanges.length&&this._hiddenRanges[n].startLineNumber===a&&this._hiddenRanges[n].endLineNumber===l?(t.push(this._hiddenRanges[n]),n++):(e=!0,t.push(new(0,fd.Range)(a,1,l,1))),o=a,r=l)}(e||n<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||0===e.length)return!1;let t=[];for(let i of e){if(!i.startLineNumber||!i.endLineNumber)return!1;t.push(new(0,fd.Range)(i.startLineNumber+1,1,i.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map((e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber})))}applyHiddenRanges(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return null!==PS(this._hiddenRanges,e)}adjustSelections(e){let t=!1,i=this._foldingModel.textModel,n=null,o=e=>(n&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,n)||(n=PS(this._hiddenRanges,e)),n?n.startLineNumber-1:null);for(let n=0,r=e.length;n<r;n++){let r=e[n],s=o(r.startLineNumber);s&&(r=r.setStartPosition(s,i.getLineMaxColumn(s)),t=!0);let a=o(r.endLineNumber);a&&(r=r.setEndPosition(a,i.getLineMaxColumn(a)),t=!0),e[n]=r}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}constructor(e){this._updateEventEmitter=new(0,Uu.Emitter),this._foldingModel=e,this._foldingModelListener=e.onDidChange((e=>this.updateHiddenRanges())),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}}function PS(e,t){let i=(0,Qd.findFirstInSorted)(e,(e=>t<e.startLineNumber))-1;return i>=0&&e[i].endLineNumber>=t?e[i]:null}$m=r("gesUy"),_d=r("gHDnG"),$m=r("gesUy");class FS{dispose(){}compute(e){let t=$m.LanguageConfigurationRegistry.getFoldingRules(this.editorModel.getLanguageIdentifier().id),i=t&&!!t.offSide,n=t&&t.markers;return Promise.resolve(function(e,t,i,n=5e3){const o=e.getOptions().tabSize;let r,s=new BS(n);i&&(r=new RegExp(`(${i.start.source})|(?:${i.end.source})`));let a=[],l=e.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let i=e.getLineCount();i>0;i--){let n,l=e.getLineContent(i),c=_d.TextModel.computeIndentLevel(l,o),d=a[a.length-1];if(-1!==c){if(r&&(n=l.match(r))){if(!n[1]){a.push({indent:-2,endAbove:i,line:i});continue}{let e=a.length-1;for(;e>0&&-2!==a[e].indent;)e--;if(e>0){a.length=e+1,d=a[e],s.insertFirst(i,d.line,c),d.line=i,d.indent=c,d.endAbove=i;continue}}}if(d.indent>c){do{a.pop(),d=a[a.length-1]}while(d.indent>c);let e=d.endAbove-1;e-i>=1&&s.insertFirst(i,e,c)}d.indent===c?d.endAbove=i:a.push({indent:c,endAbove:i,line:i})}else t&&(d.endAbove=i)}return s.toIndentRanges(e)}(this.editorModel,i,n))}constructor(e){this.editorModel=e,this.id="indent"}}class BS{insertFirst(e,t,i){if(e>16777215||t>16777215)return;let n=this._length;this._startIndexes[n]=e,this._endIndexes[n]=t,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=this._length-1,n=0;i>=0;i--,n++)e[n]=this._startIndexes[i],t[n]=this._endIndexes[i];return new bS(e,t)}{let t=0,i=this._indentOccurrences.length;for(let e=0;e<this._indentOccurrences.length;e++){let n=this._indentOccurrences[e];if(n){if(n+t>this._foldingRangesLimit){i=e;break}t+=n}}const n=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit);for(let s=this._length-1,a=0;s>=0;s--){let l=this._startIndexes[s],c=e.getLineContent(l),d=_d.TextModel.computeIndentLevel(c,n);(d<i||d===i&&t++<this._foldingRangesLimit)&&(o[a]=l,r[a]=this._endIndexes[s],a++)}return new bS(o,r)}}constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}}iu=r("ldsR3"),Jc=r("8bVMi"),gd=r("ky1to");const jS={};class zS{compute(e){return function(e,t,i){let n=null,o=e.map(((e,o)=>Promise.resolve(e.provideFoldingRanges(t,jS,i)).then((e=>{if(!i.isCancellationRequested&&Array.isArray(e)){Array.isArray(n)||(n=[]);let i=t.getLineCount();for(let t of e)t.start>0&&t.end>t.start&&t.end<=i&&n.push({start:t.start,end:t.end,rank:o,kind:t.kind})}}),Jc.onUnexpectedExternalError)));return Promise.all(o).then((e=>n))}(this.providers,this.editorModel,e).then((e=>{if(e){return HS(e,this.limit)}return null}))}dispose(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}constructor(e,t,i,n=5e3){this.editorModel=e,this.providers=t,this.limit=n,this.id="syntax";for(const e of t)"function"==typeof e.onDidChange&&(this.disposables||(this.disposables=new(0,gd.DisposableStore)),this.disposables.add(e.onDidChange(i)))}}class WS{add(e,t,i,n){if(e>16777215||t>16777215)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=n,this._types[o]=i,this._length++,n<30&&(this._nestingLevelCounts[n]=(this._nestingLevelCounts[n]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let i=0;i<this._length;i++)e[i]=this._startIndexes[i],t[i]=this._endIndexes[i];return new bS(e,t,this._types)}{let e=0,t=this._nestingLevelCounts.length;for(let i=0;i<this._nestingLevelCounts.length;i++){let n=this._nestingLevelCounts[i];if(n){if(n+e>this._foldingRangesLimit){t=i;break}e+=n}}let i=new Uint32Array(this._foldingRangesLimit),n=new Uint32Array(this._foldingRangesLimit),o=[];for(let r=0,s=0;r<this._length;r++){let a=this._nestingLevels[r];(a<t||a===t&&e++<this._foldingRangesLimit)&&(i[s]=this._startIndexes[r],n[s]=this._endIndexes[r],o[s]=this._types[r],s++)}return new bS(i,n,o)}}constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}}function HS(e,t){let i,n=e.sort(((e,t)=>{let i=e.start-t.start;return 0===i&&(i=e.rank-t.rank),i})),o=new WS(t),r=[];for(let e of n)if(i){if(e.start>i.start)if(e.end<=i.end)r.push(i),i=e,o.add(e.start,e.end,e.kind&&e.kind.value,r.length);else{if(e.start>i.end){do{i=r.pop()}while(i&&e.start>i.end);i&&r.push(i),i=e}o.add(e.start,e.end,e.kind&&e.kind.value,r.length)}}else i=e,o.add(e.start,e.end,e.kind&&e.kind.value,r.length);return o.toIndentRanges()}class KS{dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"==typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let e of this.decorationIds){let i=this.editorModel.getDecorationRange(e);i&&t.push({start:i.startLineNumber,end:i.endLineNumber,rank:1})}return Promise.resolve(HS(t,Number.MAX_VALUE))}constructor(e,t,i,n){if(this.editorModel=e,this.id="init",t.length){let o=t=>({range:{startLineNumber:t.startLineNumber,startColumn:0,endLineNumber:t.endLineNumber,endColumn:e.getLineLength(t.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(i,n)}}}Jc=r("8bVMi"),Zc=r("c5sLr"),yd=r("fmM7j"),vd=r("02ibr"),tu=r("8hC5C");var US=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},VS=function(e,t){return function(i,n){t(i,n,e)}};const $S=new(0,Zc.RawContextKey)("foldingEnabled",!1);let qS=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)return;if(!e||e.lineCount!==t.getLineCount())return;if(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions)return;"syntax"!==e.provider&&"init"!==e.provider||(this.foldingStateMemento=e);const i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){const e=this.getFoldingModel();e&&e.then((e=>{if(e){this._restoringViewState=!0;try{e.applyMemento(i)}finally{this._restoringViewState=!1}}})).then(void 0,Jc.onUnexpectedError)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();this._isEnabled&&e&&!e.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new yS(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new OS(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((e=>this.onHiddenRangesChanges(e)))),this.updateScheduler=new(0,hd.Delayer)(200),this.cursorChangedScheduler=new(0,hd.RunOnceScheduler)((()=>this.revealCursor()),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(iu.FoldingRangeProviderRegistry.onDidChange((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((()=>this.onFoldingStrategyChanged()))),this.localToDispose.add(this.editor.onDidChangeModelContent((()=>this.onModelContentChanged()))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((()=>this.onCursorPositionChanged()))),this.localToDispose.add(this.editor.onMouseDown((e=>this.onEditorMouseDown(e)))),this.localToDispose.add(this.editor.onMouseUp((e=>this.onEditorMouseUp(e)))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.onModelContentChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new FS(e),this._useFoldingProviders&&this.foldingModel){let t=iu.FoldingRangeProviderRegistry.ordered(this.foldingModel.textModel);if(0===t.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions){return this.rangeProvider=new KS(e,this.foldingStateMemento.collapsedRegions,(()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()}),3e4)}t.length>0&&(this.rangeProvider=new zS(e,t,(()=>this.onModelContentChanged())))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onModelContentChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let i=this.foldingRegionPromise=(0,hd.createCancelablePromise)((e=>t.compute(e)));return i.then((t=>{if(t&&i===this.foldingRegionPromise){let i;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const e=t.setCollapsedAllOfType(iu.FoldingRangeKind.Imports.value,!0);e&&(i=tu.StableEditorScrollState.capture(this.editor),this._currentModelHasFoldedImports=e)}let n=this.editor.getSelections(),o=n?n.map((e=>e.startLineNumber)):[];e.update(t,o),i&&i.restore(this.editor)}return e}))})).then(void 0,(e=>((0,Jc.onUnexpectedError)(e),null))))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let e=this.editor.getSelections();e&&this.hiddenRangeModel.adjustSelections(e)&&this.editor.setSelections(e)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then((e=>{if(e){let t=this.editor.getSelections();if(t&&t.length>0){let i=[];for(let n of t){let t=n.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(t)&&i.push(...e.getAllRegionsAtLine(t,(e=>e.isCollapsed&&t>e.startLineNumber)))}i.length&&(e.toggleCollapseState(i),this.reveal(t[0].getPosition()))}}})).then(void 0,Jc.onUnexpectedError)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range)return;if(!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let i=!1;switch(e.target.type){case 4:const n=e.target.detail,o=e.target.element.offsetLeft;if(n.offsetX-o<5)return;i=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()){if(!e.target.detail.isAfterLines)break}return;case 6:if(this.hiddenRangeModel.hasRanges()){let e=this.editor.getModel();if(e&&t.startColumn===e.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:i}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let i=this.mouseDownInfo.lineNumber,n=this.mouseDownInfo.iconClicked,o=e.target.range;if(o&&o.startLineNumber===i){if(n){if(4!==e.target.type)return}else{let e=this.editor.getModel();if(!e||o.startColumn!==e.getLineMaxColumn(i))return}t.then((t=>{if(t){let o=t.getRegionAtLine(i);if(o&&o.startLineNumber===i){let r=o.isCollapsed;if(n||r){let n=[];if(e.event.altKey){let e=e=>!e.containedBy(o)&&!o.containedBy(e),i=t.getRegionsInside(null,e);for(const e of i)e.isCollapsed&&n.push(e);0===n.length&&(n=i)}else{let i=e.event.middleButton||e.event.shiftKey;if(i)for(const e of t.getRegionsInside(o))e.isCollapsed===r&&n.push(e);!r&&i&&0!==n.length||n.push(o)}t.toggleCollapseState(n),this.reveal({lineNumber:i,column:1})}}}})).then(void 0,Jc.onUnexpectedError)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new(0,gd.DisposableStore)),this.editor=e;const i=this.editor.getOptions();this._isEnabled=i.get(36),this._useFoldingProviders="indentation"!==i.get(37),this._unfoldOnClickAfterEndOfLine=i.get(40),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=i.get(39),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new NS(e),this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===i.get(99),this.foldingDecorationProvider.showFoldingHighlights=i.get(38),this.foldingEnabled=$S.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel((()=>this.onModelChanged()))),this._register(this.editor.onDidChangeConfiguration((e=>{if(e.hasChanged(36)&&(this._isEnabled=this.editor.getOptions().get(36),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),e.hasChanged(99)||e.hasChanged(38)){const e=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls="mouseover"===e.get(99),this.foldingDecorationProvider.showFoldingHighlights=e.get(38),this.onModelContentChanged()}e.hasChanged(37)&&(this._useFoldingProviders="indentation"!==this.editor.getOptions().get(37),this.onFoldingStrategyChanged()),e.hasChanged(40)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(40)),e.hasChanged(39)&&(this._foldingImportsByDefault=this.editor.getOptions().get(39))}))),this.onModelChanged()}};qS.ID="editor.contrib.folding",qS=US([VS(1,Zc.IContextKeyService)],qS);class GS extends Uc.EditorAction{runEditorCommand(e,t,i){let n=qS.get(t);if(!n)return;let o=n.getFoldingModel();return o?(this.reportTelemetry(e,t),o.then((e=>{if(e){this.invoke(n,e,t,i);const o=t.getSelection();o&&n.reveal(o.getStartPosition())}}))):void 0}getSelectedLines(e){let t=e.getSelections();return t?t.map((e=>e.startLineNumber)):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map((e=>e+1)):this.getSelectedLines(t)}run(e,t){}}function ZS(e){if(!Mh.isUndefined(e)){if(!Mh.isObject(e))return!1;const t=e;if(!Mh.isUndefined(t.levels)&&!Mh.isNumber(t.levels))return!1;if(!Mh.isUndefined(t.direction)&&!Mh.isString(t.direction))return!1;if(!(Mh.isUndefined(t.selectionLines)||Mh.isArray(t.selectionLines)&&t.selectionLines.every(Mh.isNumber)))return!1}return!0}class JS extends GS{getFoldingLevel(){return parseInt(this.id.substr(JS.ID_PREFIX.length))}invoke(e,t,i){kS(t,this.getFoldingLevel(),!0,this.getSelectedLines(i))}}JS.ID_PREFIX="editor.foldLevel",JS.ID=e=>JS.ID_PREFIX+e;(0,Uc.registerEditorContribution)(qS.ID,qS),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i,n){let o=n&&n.levels||1,r=this.getLineNumbers(n,i);n&&"up"===n.direction?xS(t,!1,o,r):CS(t,!1,o,r)}constructor(){super({id:"editor.unfold",label:Vc.localize("unfoldAction.label","Unfold"),alias:"Unfold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:ZS,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i,n){CS(t,!1,Number.MAX_VALUE,this.getSelectedLines(i))}constructor(){super({id:"editor.unfoldRecursively",label:Vc.localize("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2137),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i,n){let o=this.getLineNumbers(n,i);const r=n&&n.levels,s=n&&n.direction;"number"!=typeof r&&"string"!=typeof s?SS(t,!0,o):"up"===s?xS(t,!0,r||1,o):CS(t,!0,r||1,o)}constructor(){super({id:"editor.fold",label:Vc.localize("foldAction.label","Fold"),alias:"Fold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:ZS,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){let n=this.getSelectedLines(i);CS(t,!0,Number.MAX_VALUE,n)}constructor(){super({id:"editor.foldRecursively",label:Vc.localize("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2135),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){CS(t,!0)}constructor(){super({id:"editor.foldAll",label:Vc.localize("foldAllAction.label","Fold All"),alias:"Fold All",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2069),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){CS(t,!1)}constructor(){super({id:"editor.unfoldAll",label:Vc.localize("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2088),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){if(t.regions.hasTypes())AS(t,iu.FoldingRangeKind.Comment.value,!0);else{const e=i.getModel();if(!e)return;let n=$m.LanguageConfigurationRegistry.getComments(e.getLanguageIdentifier().id);if(n&&n.blockCommentStartToken){DS(t,new RegExp("^\\s*"+(0,Jd.escapeRegExpCharacters)(n.blockCommentStartToken)),!0)}}}constructor(){super({id:"editor.foldAllBlockComments",label:Vc.localize("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2133),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){if(t.regions.hasTypes())AS(t,iu.FoldingRangeKind.Region.value,!0);else{const e=i.getModel();if(!e)return;let n=$m.LanguageConfigurationRegistry.getFoldingRules(e.getLanguageIdentifier().id);if(n&&n.markers&&n.markers.start){DS(t,new RegExp(n.markers.start),!0)}}}constructor(){super({id:"editor.foldAllMarkerRegions",label:Vc.localize("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2077),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){if(t.regions.hasTypes())AS(t,iu.FoldingRangeKind.Region.value,!1);else{const e=i.getModel();if(!e)return;let n=$m.LanguageConfigurationRegistry.getFoldingRules(e.getLanguageIdentifier().id);if(n&&n.markers&&n.markers.start){DS(t,new RegExp(n.markers.start),!1)}}}constructor(){super({id:"editor.unfoldAllMarkerRegions",label:Vc.localize("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2078),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){ES(t,!0,this.getSelectedLines(i))}constructor(){super({id:"editor.foldAllExcept",label:Vc.localize("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2131),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){ES(t,!1,this.getSelectedLines(i))}constructor(){super({id:"editor.unfoldAllExcept",label:Vc.localize("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2129),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){wS(t,1,this.getSelectedLines(i))}constructor(){super({id:"editor.toggleFold",label:Vc.localize("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2090),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=IS(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}constructor(){super({id:"editor.gotoParentFold",label:Vc.localize("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=RS(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}constructor(){super({id:"editor.gotoPreviousFold",label:Vc.localize("gotoPreviousFold.label","Go to Previous Fold"),alias:"Go to Previous Fold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,weight:100}})}}),(0,Uc.registerEditorAction)(class extends GS{invoke(e,t,i){let n=this.getSelectedLines(i);if(n.length>0){let e=TS(n[0],t);null!==e&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}}constructor(){super({id:"editor.gotoNextFold",label:Vc.localize("gotoNextFold.label","Go to Next Fold"),alias:"Go to Next Fold",precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,weight:100}})}});for(let e=1;e<=7;e++)(0,Uc.registerInstantiatedEditorAction)(new JS({id:JS.ID(e),label:Vc.localize("foldLevelAction.label","Fold Level {0}",e),alias:`Fold Level ${e}`,precondition:$S,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2048|21+e),weight:100}}));const YS=(0,vd.registerColor)("editor.foldBackground",{light:(0,vd.transparent)(vd.editorSelectionBackground,.3),dark:(0,vd.transparent)(vd.editorSelectionBackground,.3),hc:null},Vc.localize("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),XS=(0,vd.registerColor)("editorGutter.foldingControlForeground",{dark:vd.iconForeground,light:vd.iconForeground,hc:vd.iconForeground},Vc.localize("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(YS);i&&t.addRule(`.monaco-editor .folded-background { background-color: ${i}; }`);const n=e.getColor(XS);n&&t.addRule(`\n\t\t.monaco-editor .cldr${yd.ThemeIcon.asCSSSelector(MS)},\n\t\t.monaco-editor .cldr${yd.ThemeIcon.asCSSSelector(LS)} {\n\t\t\tcolor: ${n} !important;\n\t\t}\n\t\t`)}));Vc=r("kMb12"),Uc=r("kO85n");var QS=r("a7YAl");class ek extends Uc.EditorAction{run(e,t){QS.EditorZoom.setZoomLevel(QS.EditorZoom.getZoomLevel()+1)}constructor(){super({id:"editor.action.fontZoomIn",label:Vc.localize("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}}class tk extends Uc.EditorAction{run(e,t){QS.EditorZoom.setZoomLevel(QS.EditorZoom.getZoomLevel()-1)}constructor(){super({id:"editor.action.fontZoomOut",label:Vc.localize("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}}class ik extends Uc.EditorAction{run(e,t){QS.EditorZoom.setZoomLevel(0)}constructor(){super({id:"editor.action.fontZoomReset",label:Vc.localize("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}}(0,Uc.registerEditorAction)(ek),(0,Uc.registerEditorAction)(tk),(0,Uc.registerEditorAction)(ik);Qd=r("dD6PO"),Gd=r("7G83E"),Gc=r("8NQur"),gd=r("ky1to"),Uc=r("kO85n"),Od=r("6AQ6e"),Nv=r("iQyRu"),fd=r("2KJrz"),$c=r("jb8ay"),iu=r("ldsR3"),G_=r("4eCHg");var nk=r("8SB11"),ok=r("i1udM"),rk=(Vc=r("kMb12"),du=r("cUien"),Zc=r("c5sLr"),Iu=r("cwJE1"),Jc=r("8bVMi"),cu=r("dkDYJ"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),sk=function(e,t){return function(i,n){t(i,n,e)}},ak=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let lk=class{dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(47))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=iu.OnTypeFormattingEditProviderRegistry.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let i=new(0,Nv.CharacterSet);for(let e of t.autoFormatTriggerCharacters)i.add(e.charCodeAt(0));this._callOnModel.add(this._editor.onDidType((e=>{let t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1)return;const t=this._editor.getModel(),i=this._editor.getPosition();let n=!1;const o=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return n=!0,void o.dispose();for(let t=0,r=e.changes.length;t<r;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return n=!0,void o.dispose()}}));(0,nk.getOnTypeFormattingEdits)(this._workerService,t,i,e,t.getFormattingOptions()).then((e=>{o.dispose(),n||(0,Qd.isNonEmptyArray)(e)&&(ok.FormattingEdit.execute(this._editor,e,!0),(0,nk.alertFormattingEdits)(e))}),(e=>{throw o.dispose(),e}))}constructor(e,t){this._workerService=t,this._callOnDispose=new(0,gd.DisposableStore),this._callOnModel=new(0,gd.DisposableStore),this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(iu.OnTypeFormattingEditProviderRegistry.onDidChange(this._update,this))}};lk.ID="editor.contrib.autoFormat",lk=rk([sk(1,G_.IEditorWorkerService)],lk);let ck=class{dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(46)&&this.editor.hasModel()&&iu.DocumentRangeFormattingEditProviderRegistry.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:e})=>this._trigger(e))))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(nk.formatDocumentRangesWithSelectedProvider,this.editor,e,2,cu.Progress.None,Gd.CancellationToken.None).catch(Jc.onUnexpectedError))}constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new(0,gd.DisposableStore),this._callOnModel=new(0,gd.DisposableStore),this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(iu.DocumentRangeFormattingEditProviderRegistry.onDidChange(this._update,this))}};ck.ID="editor.contrib.formatOnPaste",ck=rk([sk(1,Iu.IInstantiationService)],ck);class dk extends Uc.EditorAction{run(e,t){return ak(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(Iu.IInstantiationService),n=e.get(cu.IEditorProgressService);yield n.showWhile(i.invokeFunction(nk.formatDocumentWithSelectedProvider,t,1,cu.Progress.None,Gd.CancellationToken.None),250)}}))}constructor(){super({id:"editor.action.formatDocument",label:Vc.localize("formatDocument.label","Format Document"),alias:"Format Document",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.notInCompositeEditor,$c.EditorContextKeys.writable,$c.EditorContextKeys.hasDocumentFormattingProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}}class uk extends Uc.EditorAction{run(e,t){return ak(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(Iu.IInstantiationService),n=t.getModel(),o=t.getSelections().map((e=>e.isEmpty()?new(0,fd.Range)(e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e)),r=e.get(cu.IEditorProgressService);yield r.showWhile(i.invokeFunction(nk.formatDocumentRangesWithSelectedProvider,t,o,1,cu.Progress.None,Gd.CancellationToken.None),250)}))}constructor(){super({id:"editor.action.formatSelection",label:Vc.localize("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2084),weight:100},contextMenuOpts:{when:$c.EditorContextKeys.hasNonEmptySelection,group:"1_modification",order:1.31}})}}(0,Uc.registerEditorContribution)(lk.ID,lk),(0,Uc.registerEditorContribution)(ck.ID,ck),(0,Uc.registerEditorAction)(dk),(0,Uc.registerEditorAction)(uk),du.CommandsRegistry.registerCommand("editor.action.format",(e=>ak(void 0,void 0,void 0,(function*(){const t=e.get(Od.ICodeEditorService).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(du.ICommandService);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")}))));eu=r("avLBk"),nu=r("cDtHV"),Gd=r("7G83E"),p_=r("1JIvq"),Qd=r("dD6PO"),Gd=r("7G83E"),Jc=r("8bVMi"),Kh=r("9BG2T"),fd=r("2KJrz"),iu=r("ldsR3");var hk=r("9LoNV");Qh=r("c0UDr");class gk{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let i;"string"==typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let e=0;void 0!==t.children.get(n);e++)n=`${i}_${e}`;return n}static empty(e){return 0===e.children.size}}class pk extends gk{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class fk extends gk{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}}class mk extends gk{static create(e,t){let i=this._keys.for(e,!0),n=mk._requests.get(i);if(!n){let t=new(0,Gd.CancellationTokenSource);n={promiseCnt:0,source:t,promise:mk._create(e,t.token),model:void 0},mk._requests.set(i,n);const o=Date.now();n.promise.then((()=>{this._requestDurations.update(e,Date.now()-o)}))}return n.model?Promise.resolve(n.model):(n.promiseCnt+=1,t.onCancellationRequested((()=>{0==--n.promiseCnt&&(n.source.cancel(),mk._requests.delete(i))})),new Promise(((e,t)=>{n.promise.then((t=>{n.model=t,e(t)}),(e=>{mk._requests.delete(i),t(e)}))})))}static _create(e,t){const i=new(0,Gd.CancellationTokenSource)(t),n=new mk(e.uri),o=iu.DocumentSymbolProviderRegistry.ordered(e),r=o.map(((t,o)=>{var r;let s=gk.findId(`provider_${o}`,n),a=new fk(s,n,null!==(r=t.displayName)&&void 0!==r?r:"Unknown Outline Provider",o);return Promise.resolve(t.provideDocumentSymbols(e,i.token)).then((e=>{for(const t of e||[])mk._makeOutlineElement(t,a);return a}),(e=>((0,Jc.onUnexpectedExternalError)(e),a))).then((e=>{gk.empty(e)?e.remove():n._groups.set(s,e)}))})),s=iu.DocumentSymbolProviderRegistry.onDidChange((()=>{const t=iu.DocumentSymbolProviderRegistry.ordered(e);(0,Qd.equals)(t,o)||i.cancel()}));return Promise.all(r).then((()=>i.token.isCancellationRequested&&!t.isCancellationRequested?mk._create(e,t):n._compact())).finally((()=>{s.dispose()}))}static _makeOutlineElement(e,t){let i=gk.findId(e,t),n=new pk(i,t,e);if(e.children)for(const t of e.children)mk._makeOutlineElement(t,n);t.children.set(n.id,n)}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{let e=hk.Iterable.first(this._groups.values());for(let[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof pk?e.push(t.symbol):e.push(...hk.Iterable.map(t.children.values(),(e=>e.symbol)));return e.sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.range,t.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return mk._flattenDocumentSymbols(t,e,""),t.sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.range,t.range)))}static _flattenDocumentSymbols(e,t,i){for(const n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&mk._flattenDocumentSymbols(e,n.children,n.name)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}}mk._requestDurations=new(0,Qh.LanguageFeatureRequestDelays)(iu.DocumentSymbolProviderRegistry,350),mk._requests=new(0,Kh.LRUCache)(9,.75),mk._keys=new class{for(e,t){return`${e.id}/${t?e.getVersionId():""}/${this._hash(iu.DocumentSymbolProviderRegistry.all(e))}`}_hash(e){let t="";for(const i of e){let e=this._data.get(i);void 0===e&&(e=this._counter++,this._data.set(i,e)),t+=e}return t}constructor(){this._counter=1,this._data=new WeakMap}};du=r("cUien"),Mh=r("5jjji");var _k=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function bk(e,t,i){return _k(this,void 0,void 0,(function*(){const n=yield mk.create(e,i);return t?n.asListOfDocumentSymbols():n.getTopLevelSymbols()}))}du.CommandsRegistry.registerCommand("_executeDocumentSymbolProvider",(function(e,...t){return _k(this,void 0,void 0,(function*(){const[i]=t;(0,Mh.assertType)(eu.URI.isUri(i));const n=e.get(nu.IModelService).getModel(i);if(n)return bk(n,!1,Gd.CancellationToken.None);const o=yield e.get(p_.ITextModelService).createModelReference(i);try{return yield bk(o.object.textEditorModel,!1,Gd.CancellationToken.None)}finally{o.dispose()}}))}));Vc=r("kMb12"),gd=r("ky1to"),Jd=r("aAfu1"),Uc=r("kO85n");var vk=r("8qNkC");gm=r("8ScSA"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),_d=r("gHDnG"),$m=r("gesUy"),nu=r("cDtHV");function yk(e,t){let i=0;for(let n=0;n<e.length;n++)"\t"===e.charAt(n)?i+=t:i++;return i}function wk(e,t,i){e=e<0?0:e;let n="";if(!i){let i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)n+="\t"}for(let t=0;t<e;t++)n+=" ";return n}Xh=r("b1c9q");function Ck(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];let o=$m.LanguageConfigurationRegistry.getIndentationRules(e.getLanguageIdentifier().id);if(!o)return[];for(i=Math.min(i,e.getLineCount());t<=i&&o.unIndentedLinePattern;){let i=e.getLineContent(t);if(!o.unIndentedLinePattern.test(i))break;t++}if(t>i-1)return[];const{tabSize:r,indentSize:s,insertSpaces:a}=e.getOptions(),l=(e,t)=>(t=t||1,vk.ShiftCommand.shiftIndent(e,e.length+t,r,s,a)),c=(e,t)=>(t=t||1,vk.ShiftCommand.unshiftIndent(e,e.length+t,r,s,a));let d,u=[],h=e.getLineContent(t),g=h;if(null!=n){d=n;let e=Jd.getLeadingWhitespace(h);g=d+h.substring(e.length),o.decreaseIndentPattern&&o.decreaseIndentPattern.test(g)&&(d=c(d),g=d+h.substring(e.length)),h!==g&&u.push(gm.EditOperation.replaceMove(new(0,qc.Selection)(t,1,t,e.length+1),_d.TextModel.normalizeIndentation(d,s,a)))}else d=Jd.getLeadingWhitespace(h);let p=d;o.increaseIndentPattern&&o.increaseIndentPattern.test(g)?(p=l(p),d=l(d)):o.indentNextLinePattern&&o.indentNextLinePattern.test(g)&&(p=l(p));for(let n=++t;n<=i;n++){let t=e.getLineContent(n),i=Jd.getLeadingWhitespace(t),r=p+t.substring(i.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(r)&&(p=c(p),d=c(d)),i!==p&&u.push(gm.EditOperation.replaceMove(new(0,qc.Selection)(n,1,n,i.length+1),_d.TextModel.normalizeIndentation(p,s,a))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(t)||(o.increaseIndentPattern&&o.increaseIndentPattern.test(r)?(d=l(d),p=d):p=o.indentNextLinePattern&&o.indentNextLinePattern.test(r)?l(p):d)}return u}class xk extends Uc.EditorAction{run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new Nk(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}constructor(){super({id:xk.ID,label:Vc.localize("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:$c.EditorContextKeys.writable})}}xk.ID="editor.action.indentationToSpaces";class Sk extends Uc.EditorAction{run(e,t){let i=t.getModel();if(!i)return;let n=i.getOptions(),o=t.getSelection();if(!o)return;const r=new Ok(o,n.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}constructor(){super({id:Sk.ID,label:Vc.localize("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:$c.EditorContextKeys.writable})}}Sk.ID="editor.action.indentationToTabs";class kk extends Uc.EditorAction{run(e,t){const i=e.get(Xh.IQuickInputService),n=e.get(nu.IModelService);let o=t.getModel();if(!o)return;let r=n.getCreationOptions(o.getLanguageIdentifier().language,o.uri,o.isForSimpleWidget);const s=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===r.tabSize?Vc.localize("configuredTabSize","Configured Tab Size"):void 0}))),a=Math.min(o.getOptions().tabSize-1,7);setTimeout((()=>{i.pick(s,{placeHolder:Vc.localize({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:s[a]}).then((e=>{e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:this.insertSpaces})}))}),50)}constructor(e,t){super(t),this.insertSpaces=e}}class Ek extends kk{constructor(){super(!1,{id:Ek.ID,label:Vc.localize("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}Ek.ID="editor.action.indentUsingTabs";class Dk extends kk{constructor(){super(!0,{id:Dk.ID,label:Vc.localize("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}Dk.ID="editor.action.indentUsingSpaces";class Ak extends Uc.EditorAction{run(e,t){const i=e.get(nu.IModelService);let n=t.getModel();if(!n)return;let o=i.getCreationOptions(n.getLanguageIdentifier().language,n.uri,n.isForSimpleWidget);n.detectIndentation(o.insertSpaces,o.tabSize)}constructor(){super({id:Ak.ID,label:Vc.localize("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}}Ak.ID="editor.action.detectIndentation";class Ik extends Uc.EditorAction{run(e,t){let i=t.getModel();if(!i)return;let n=Ck(i,1,i.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}constructor(){super({id:"editor.action.reindentlines",label:Vc.localize("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:$c.EditorContextKeys.writable})}}class Rk extends Uc.EditorAction{run(e,t){let i=t.getModel();if(!i)return;let n=t.getSelections();if(null===n)return;let o=[];for(let e of n){let t=e.startLineNumber,n=e.endLineNumber;if(t!==n&&1===e.endColumn&&n--,1===t){if(t===n)continue}else t--;let r=Ck(i,t,n);o.push(...r)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}constructor(){super({id:"editor.action.reindentselectedlines",label:Vc.localize("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:$c.EditorContextKeys.writable})}}class Tk{getEditOperations(e,t){for(let e of this._edits)t.addEditOperation(fd.Range.lift(e.range),e.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let t of e)t.range&&"string"==typeof t.text&&this._edits.push(t)}}class Mk{update(){this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(46)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:e})=>{this.trigger(e)})))}trigger(e){let t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(!i.isCheapToTokenize(e.getStartPosition().lineNumber))return;const n=this.editor.getOption(9),{tabSize:o,indentSize:r,insertSpaces:s}=i.getOptions();let a=[],l={shiftIndent:e=>vk.ShiftCommand.shiftIndent(e,e.length+1,o,r,s),unshiftIndent:e=>vk.ShiftCommand.unshiftIndent(e,e.length+1,o,r,s)},c=e.startLineNumber;for(;c<=e.endLineNumber&&this.shouldIgnoreLine(i,c);)c++;if(c>e.endLineNumber)return;let d=i.getLineContent(c);if(!/\S/.test(d.substring(0,e.startColumn-1))){let e=$m.LanguageConfigurationRegistry.getGoodIndentForLine(n,i,i.getLanguageIdentifier().id,c,l);if(null!==e){let t=Jd.getLeadingWhitespace(d),n=yk(e,o);if(n!==yk(t,o)){let e=wk(n,o,s);a.push({range:new(0,fd.Range)(c,1,c,t.length+1),text:e}),d=e+d.substr(t.length)}else{let e=$m.LanguageConfigurationRegistry.getIndentMetadata(i,c);if(0===e||8===e)return}}}const u=c;for(;c<e.endLineNumber&&!/\S/.test(i.getLineContent(c+1));)c++;if(c!==e.endLineNumber){let t={getLineTokens:e=>i.getLineTokens(e),getLanguageIdentifier:()=>i.getLanguageIdentifier(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t),getLineContent:e=>e===u?d:i.getLineContent(e)},r=$m.LanguageConfigurationRegistry.getGoodIndentForLine(n,t,i.getLanguageIdentifier().id,c+1,l);if(null!==r){let t=yk(r,o),n=yk(Jd.getLeadingWhitespace(i.getLineContent(c+1)),o);if(t!==n){let r=t-n;for(let t=c+1;t<=e.endLineNumber;t++){let e=i.getLineContent(t),n=Jd.getLeadingWhitespace(e),l=wk(yk(n,o)+r,o,s);l!==n&&a.push({range:new(0,fd.Range)(t,1,t,n.length+1),text:l})}}}}if(a.length>0){this.editor.pushUndoStop();let e=new Tk(a,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;let n=e.getLineTokens(t);if(n.getCount()>0){let e=n.findTokenIndexAtOffset(i);if(e>=0&&1===n.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}constructor(e){this.callOnDispose=new(0,gd.DisposableStore),this.callOnModel=new(0,gd.DisposableStore),this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}}function Lk(e,t,i,n){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let e=0;e<i;e++)o+=" ";let r=new RegExp(o,"gi");for(let i=1,s=e.getLineCount();i<=s;i++){let s=e.getLineFirstNonWhitespaceColumn(i);if(0===s&&(s=e.getLineMaxColumn(i)),1===s)continue;const a=new(0,fd.Range)(i,1,i,s),l=e.getValueInRange(a),c=n?l.replace(/\t/gi,o):l.replace(r,"\t");t.addEditOperation(a,c)}}Mk.ID="editor.contrib.autoIndentOnPaste";class Nk{getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Lk(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}}class Ok{getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),Lk(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}}(0,Uc.registerEditorContribution)(Mk.ID,Mk),(0,Uc.registerEditorAction)(xk),(0,Uc.registerEditorAction)(Sk),(0,Uc.registerEditorAction)(Ek),(0,Uc.registerEditorAction)(Dk),(0,Uc.registerEditorAction)(Ak),(0,Uc.registerEditorAction)(Ik),(0,Uc.registerEditorAction)(Rk);hd=r("hsQau"),Jc=r("8bVMi"),Yh=r("lzUMG"),gd=r("ky1to"),Uc=r("kO85n"),Od=r("6AQ6e"),iu=r("ldsR3"),Qd=r("dD6PO"),vd=r("02ibr"),Gd=r("7G83E"),yd=r("fmM7j"),fd=r("2KJrz"),Qh=r("c0UDr"),du=r("cUien"),eu=r("avLBk"),Mh=r("5jjji"),p_=r("1JIvq"),pd=r("dLnDZ"),lg=r("7JMrK");var Pk=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Fk=function(e,t){return function(i,n){t(i,n,e)}},Bk=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function jk(e,t,i){return Bk(this,void 0,void 0,(function*(){const n=[],o=iu.InlayHintsProviderRegistry.ordered(e).reverse(),r=(0,Qd.flatten)(o.map((o=>t.map((t=>Promise.resolve(o.provideInlayHints(e,t,i)).then((e=>{const i=null==e?void 0:e.filter((e=>t.containsPosition(e.position)));(null==i?void 0:i.length)&&n.push({list:i,provider:o})}),(e=>{(0,Jc.onUnexpectedExternalError)(e)})))))));return yield Promise.all(r),n}))}let zk=class{dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(126).enabled)return void this._removeAllDecorations();const e=this._editor.getModel();if(!e||!iu.InlayHintsProviderRegistry.has(e))return void this._removeAllDecorations();const t=new(0,hd.RunOnceScheduler)((()=>Bk(this,void 0,void 0,(function*(){const i=Date.now(),n=new(0,Gd.CancellationTokenSource);this._sessionDisposables.add((0,gd.toDisposable)((()=>n.dispose(!0))));const o=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=yield jk(e,o,n.token),s=this._getInlayHintsDelays.update(e,Date.now()-i);t.delay=s,this._updateHintsDecorators(r)}))),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(t),this._sessionDisposables.add(this._editor.onDidChangeModelContent((()=>t.schedule()))),this._disposables.add(this._editor.onDidScrollChange((()=>t.schedule()))),t.schedule();const i=new(0,gd.DisposableStore);this._sessionDisposables.add(i);for(const n of iu.InlayHintsProviderRegistry.all(e))"function"==typeof n.onDidChangeInlayHints&&i.add(n.onDidChangeInlayHints((()=>t.schedule())))}_updateHintsDecorators(e){const{fontSize:t,fontFamily:i}=this._getLayoutInfo(),n=this._themeService.getColorTheme().getColor(vd.editorInlayHintBackground),o=this._themeService.getColorTheme().getColor(vd.editorInlayHintForeground),r=[],s=[],a="--inlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,i);const l=this._configurationService.getValue("editor.useInjectedText"),c=void 0===l||!!l;for(const{list:i}of e)for(let e=0;e<i.length&&s.length<500;e++){const{text:l,position:d,whitespaceBefore:u,whitespaceAfter:h}=i[e],g=u?t/3|0:0,p=h?t/3|0:0,f={contentText:Wk(l),backgroundColor:`${n}`,color:`${o}`,margin:`0px ${p}px 0px ${g}px`,fontSize:`${t}px`,fontFamily:`var(${a})`,padding:`0px ${t/4|0}px`,borderRadius:(t/4|0)+"px",verticalAlign:"middle"},m="inlayHints-"+(0,Yh.hash)(f).toString(16);this._codeEditorService.registerDecorationType("inlay-hints-controller",m,c?{beforeInjectedText:Object.assign(Object.assign({},f),{affectsLetterSpacing:!0})}:{before:f},void 0,this._editor),r.push(m);const _=this._codeEditorService.resolveDecorationOptions(m,!0);s.push({range:fd.Range.fromPositions(d),options:_})}this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=r,this._decorationIds=this._editor.deltaDecorations(this._decorationIds,s)}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(44);let i=e.fontSize;(!i||i<5||i>t)&&(i=.9*t|0);return{fontSize:i,fontFamily:e.fontFamily||this._editor.getOption(41)}}_removeAllDecorations(){this._decorationIds=this._editor.deltaDecorations(this._decorationIds,[]),this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=[]}constructor(e,t,i,n){this._editor=e,this._codeEditorService=t,this._themeService=i,this._configurationService=n,this._disposables=new(0,gd.DisposableStore),this._sessionDisposables=new(0,gd.DisposableStore),this._getInlayHintsDelays=new(0,Qh.LanguageFeatureRequestDelays)(iu.InlayHintsProviderRegistry,25,2500),this._decorationsTypeIds=[],this._decorationIds=[],this._disposables.add(iu.InlayHintsProviderRegistry.onDidChange((()=>this._update()))),this._disposables.add(i.onDidColorThemeChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(126)&&this._update()}))),this._update()}};function Wk(e){return e.replace(/[ \t]/g," ")}zk.ID="editor.contrib.InlayHints",zk=Pk([Fk(1,Od.ICodeEditorService),Fk(2,yd.IThemeService),Fk(3,lg.IConfigurationService)],zk),(0,Uc.registerEditorContribution)(zk.ID,zk),du.CommandsRegistry.registerCommand("_executeInlayHintProvider",((e,...t)=>Bk(void 0,void 0,void 0,(function*(){const[i,n]=t;(0,Mh.assertType)(eu.URI.isUri(i)),(0,Mh.assertType)(fd.Range.isIRange(n));const o=yield e.get(p_.ITextModelService).createModelReference(i);try{const e=yield jk(o.object.textEditorModel,[fd.Range.lift(n)],Gd.CancellationToken.None);return(0,Qd.flatten)(e.map((e=>e.list))).sort(((e,t)=>pd.Position.compare(e.position,t.position)))}finally{o.dispose()}}))));Vc=r("kMb12"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),Uc=r("kO85n"),G_=r("4eCHg"),qc=r("do14f");class Hk{getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new(0,qc.Selection)(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new(0,qc.Selection)(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}}tu=r("8hC5C"),yd=r("fmM7j"),bd=r("ewsQ6"),_d=r("gHDnG"),hd=r("hsQau"),Jc=r("8bVMi");var Kk=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Uk=function(e,t){return function(i,n){t(i,n,e)}};let Vk=class e{static get(t){return t.getContribution(e.ID)}dispose(){}run(t,i){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),o=this.editor.getModel();if(!o||!n)return;let r=n;if(r.startLineNumber!==r.endLineNumber)return;const s=new(0,tu.EditorState)(this.editor,5),a=o.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=(0,hd.createCancelablePromise)((e=>this.editorWorkerService.navigateValueSet(a,r,i))),this.currentRequest.then((i=>{if(!i||!i.range||!i.value)return;if(!s.validate(this.editor))return;let n=fd.Range.lift(i.range),o=i.range,a=i.value.length-(r.endColumn-r.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+i.value.length},a>1&&(r=new(0,qc.Selection)(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn+a-1));const l=new Hk(n,r,i.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,l),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:o,options:e.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,hd.timeout)(350),this.decorationRemover.then((()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[]))).catch(Jc.onUnexpectedError)})).catch(Jc.onUnexpectedError)):Promise.resolve(void 0)}constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}};Vk.ID="editor.contrib.inPlaceReplaceController",Vk.DECORATION=_d.ModelDecorationOptions.register({description:"in-place-replace",className:"valueSetReplacement"}),Vk=Kk([Uk(1,G_.IEditorWorkerService)],Vk);class $k extends Uc.EditorAction{run(e,t){const i=Vk.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}constructor(){super({id:"editor.action.inPlaceReplace.up",label:Vc.localize("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3154,weight:100}})}}class qk extends Uc.EditorAction{run(e,t){const i=Vk.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}constructor(){super({id:"editor.action.inPlaceReplace.down",label:Vc.localize("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3156,weight:100}})}}(0,Uc.registerEditorContribution)(Vk.ID,Vk),(0,Uc.registerEditorAction)($k),(0,Uc.registerEditorAction)(qk),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(bd.editorBracketMatchBorder);i&&t.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${i}; }`)}));Vc=r("kMb12"),Gc=r("8NQur"),pm=r("caAgA"),Uc=r("kO85n"),Id=r("jTJ7G"),Jd=r("aAfu1"),gm=r("8ScSA"),fd=r("2KJrz");class Gk{getEditOperations(e,t){let i=function(e,t){t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber));for(let e=t.length-2;e>=0;e--)t[e].lineNumber===t[e+1].lineNumber&&t.splice(e,1);let i=[],n=0,o=0,r=t.length;for(let s=1,a=e.getLineCount();s<=a;s++){let a=e.getLineContent(s),l=a.length+1,c=0;if(o<r&&t[o].lineNumber===s&&(c=t[o].column,o++,c===l))continue;if(0===a.length)continue;let d=Jd.lastNonWhitespaceIndex(a),u=0;if(-1===d)u=1;else{if(d===a.length-1)continue;u=d+2}u=Math.max(c,u),i[n++]=gm.EditOperation.delete(new(0,fd.Range)(s,u,s,l))}return i}(e,this._cursors);for(let e=0,n=i.length;e<n;e++){let n=i[e];t.addEditOperation(n.range,n.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}}var Zk=r("dVMOL");gm=r("8ScSA"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),fd=r("2KJrz"),qc=r("do14f");class Jk{getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));let n=[];for(let t=i.startLineNumber;t<=i.endLineNumber;t++)n.push(e.getLineContent(t));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new(0,fd.Range)(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new(0,fd.Range)(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new(0,fd.Range)(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=qc.Selection.createWithDirection(e,t,n,o,this._selectionDirection)}return i}constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}}Jd=r("aAfu1"),vk=r("8qNkC"),fd=r("2KJrz"),qc=r("do14f");var Yk=r("dhtcm");$m=r("gesUy");class Xk{getEditOperations(e,t){let i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:r,insertSpaces:s}=e.getOptions();let a=this.buildIndentConverter(o,r,s),l={getLineTokens:t=>e.getLineTokens(t),getLanguageIdentifier:()=>e.getLanguageIdentifier(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i),getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){let i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new(0,fd.Range)(1,1,1,1),null):(t.addEditOperation(new(0,fd.Range)(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new(0,fd.Range)(o,1,o,e.getLineMaxColumn(o)),null)),n=new(0,qc.Selection)(o,1,o,1)}else{let i,r;if(this._isMovingDown){i=n.endLineNumber+1,r=e.getLineContent(i),t.addEditOperation(new(0,fd.Range)(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let c=r;if(this.shouldAutoIndent(e,n)){let d=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==d){let t=wk(d+yk(Jd.getLeadingWhitespace(e.getLineContent(i)),o),o,s);c=t+this.trimLeft(r)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);let t=$m.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a);if(null!==t){let n=Jd.getLeadingWhitespace(e.getLineContent(i)),a=yk(t,o);if(a!==yk(n,o)){let e=wk(a,o,s);c=e+this.trimLeft(r)}}}t.addEditOperation(new(0,fd.Range)(n.startLineNumber,1,n.startLineNumber,1),c+"\n");let u=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,c);if(null!==u)0!==u&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,u);else{l.getLineContent=t=>t===n.startLineNumber?c:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);let r=$m.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a);if(null!==r){const i=Jd.getLeadingWhitespace(e.getLineContent(n.startLineNumber)),a=yk(r,o),l=yk(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,s,i)}}}}else t.addEditOperation(new(0,fd.Range)(n.startLineNumber,1,n.startLineNumber,1),c+"\n")}else if(i=n.startLineNumber-1,r=e.getLineContent(i),t.addEditOperation(new(0,fd.Range)(i,1,i+1,1),null),t.addEditOperation(new(0,fd.Range)(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+r),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);let r=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==r)0!==r&&this.getIndentEditsOfMovingBlock(e,t,n,o,s,r);else{let r=$m.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a);if(null!==r){let i=Jd.getLeadingWhitespace(e.getLineContent(n.startLineNumber)),a=yk(r,o),l=yk(i,o);if(a!==l){let i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,s,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>vk.ShiftCommand.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>vk.ShiftCommand.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let r=o.indentation;o.indentAction===Yk.IndentAction.None||o.indentAction===Yk.IndentAction.Indent?r=o.indentation+o.appendText:o.indentAction===Yk.IndentAction.IndentOutdent?r=o.indentation:o.indentAction===Yk.IndentAction.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);let s=e.getLineContent(n);if(this.trimLeft(s).indexOf(this.trimLeft(r))>=0){let o=Jd.getLeadingWhitespace(e.getLineContent(n)),s=Jd.getLeadingWhitespace(r),a=$m.LanguageConfigurationRegistry.getIndentMetadata(e,n);return null!==a&&2&a&&(s=t.unshiftIndent(s)),yk(s,i)-yk(o,i)}}return null}matchEnterRuleMovingDown(e,t,i,n,o,r){if(Jd.lastNonWhitespaceIndex(r)>=0){let r=e.getLineMaxColumn(o),s=$m.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,fd.Range)(o,r,o,r));return this.parseEnterResult(e,t,i,n,s)}{let o=n-1;for(;o>=1;){let t=e.getLineContent(o);if(Jd.lastNonWhitespaceIndex(t)>=0)break;o--}if(o<1||n>e.getLineCount())return null;let r=e.getLineMaxColumn(o),s=$m.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,fd.Range)(o,r,o,r));return this.parseEnterResult(e,t,i,n,s)}}matchEnterRule(e,t,i,n,o,r){let s=o;for(;s>=1;){let t;if(t=s===o&&void 0!==r?r:e.getLineContent(s),Jd.lastNonWhitespaceIndex(t)>=0)break;s--}if(s<1||n>e.getLineCount())return null;let a=e.getLineMaxColumn(s),l=$m.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,fd.Range)(s,a,s,a));return this.parseEnterResult(e,t,i,n,l)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(t.startLineNumber))return!1;let i=e.getLanguageIdAtPosition(t.startLineNumber,1);return i===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==$m.LanguageConfigurationRegistry.getIndentRulesSupport(i)}getIndentEditsOfMovingBlock(e,t,i,n,o,r){for(let s=i.startLineNumber;s<=i.endLineNumber;s++){let a=e.getLineContent(s),l=Jd.getLeadingWhitespace(a),c=wk(yk(l,n)+r,n,o);c!==l&&(t.addEditOperation(new(0,fd.Range)(s,1,s,l.length+1),c),s===i.endLineNumber&&i.endColumn<=l.length+1&&""===c&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}constructor(e,t,i){this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}}gm=r("8ScSA"),fd=r("2KJrz");class Qk{static getCollator(){return Qk._COLLATOR||(Qk._COLLATOR=new Intl.Collator),Qk._COLLATOR}getEditOperations(e,t){let i=function(e,t,i){let n=eE(e,t,i);return n?gm.EditOperation.replace(new(0,fd.Range)(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n")):null}(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;let n=eE(e,t,i);if(!n)return!1;for(let e=0,t=n.before.length;e<t;e++)if(n.before[e]!==n.after[e])return!0;return!1}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}}function eE(e,t,i){let n=t.startLineNumber,o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;let r=[];for(let t=n;t<=o;t++)r.push(e.getLineContent(t));let s=r.slice(0);return s.sort(Qk.getCollator().compare),!0===i&&(s=s.reverse()),{startLineNumber:n,endLineNumber:o,before:r,after:s}}Qk._COLLATOR=null;wd=r("4Nnjr");class tE extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));i.sort(((e,t)=>fd.Range.compareRangesUsingStarts(e.selection,t.selection)));let n=i[0];for(let e=1;e<i.length;e++){const t=i[e];n.selection.endLineNumber===t.selection.startLineNumber&&(n.index<t.index?t.ignore=!0:(n.ignore=!0,n=t))}const o=[];for(const e of i)o.push(new Jk(e.selection,this.down,e.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}constructor(e,t){super(t),this.down=e}}class iE extends Uc.EditorAction{run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),r=t.getModel();for(const e of o)if(e.isEmpty())n.push(new Jk(e,!0));else{const t=new(0,qc.Selection)(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn);n.push(new(0,Id.ReplaceCommandThatSelectsText)(t,r.getValueInRange(e)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}constructor(){super({id:"editor.action.duplicateSelection",label:Vc.localize("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:$c.EditorContextKeys.writable,menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"2_line",title:Vc.localize({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}}class nE extends Uc.EditorAction{run(e,t){let i=[],n=t.getSelections()||[];const o=t.getOption(9);for(const e of n)i.push(new Xk(e,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}constructor(e,t){super(t),this.down=e}}class oE extends Uc.EditorAction{run(e,t){const i=t.getSelections()||[];for(const e of i)if(!Qk.canRun(t.getModel(),e,this.descending))return;let n=[];for(let e=0,t=i.length;e<t;e++)n[e]=new Qk(i[e],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}constructor(e,t){super(t),this.descending=e}}class rE extends Uc.EditorAction{run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map((e=>new(0,pd.Position)(e.positionLineNumber,e.positionColumn))));let o=t.getSelection();if(null===o)return;let r=new Gk(o,n);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop()}constructor(){super({id:rE.ID,label:Vc.localize("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:(0,Gc.KeyChord)(2089,2102),weight:100}})}}rE.ID="editor.action.trimTrailingWhitespace";class sE extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;let i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0,r=[],s=[];for(let e=0,t=i.length;e<t;e++){const t=i[e];let a=t.startLineNumber,l=t.endLineNumber,c=1,d=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,d=1):a>1&&(a-=1,c=n.getLineMaxColumn(a)),r.push(gm.EditOperation.replace(new(0,qc.Selection)(a,c,l,d),"")),s.push(new(0,qc.Selection)(a-o,t.positionColumn,a-o,t.positionColumn)),o+=t.endLineNumber-t.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));let i=[],n=t[0];for(let e=1;e<t.length;e++)n.endLineNumber+1>=t[e].startLineNumber?n.endLineNumber=t[e].endLineNumber:(i.push(n),n=t[e]);return i.push(n),i}constructor(){super({id:"editor.action.deleteLines",label:Vc.localize("lines.delete","Delete Line"),alias:"Delete Line",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:3113,weight:100}})}}class aE extends Uc.EditorAction{run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Zk.TypeOperations.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}constructor(){super({id:"editor.action.indentLines",label:Vc.localize("lines.indent","Indent Line"),alias:"Indent Line",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2137,weight:100}})}}class lE extends Uc.EditorAction{run(e,t){pm.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}constructor(){super({id:"editor.action.outdentLines",label:Vc.localize("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2135,weight:100}})}}class cE extends Uc.EditorAction{run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Zk.TypeOperations.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}constructor(){super({id:"editor.action.insertLineBefore",label:Vc.localize("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3075,weight:100}})}}class dE extends Uc.EditorAction{run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,Zk.TypeOperations.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}constructor(){super({id:"editor.action.insertLineAfter",label:Vc.localize("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2051,weight:100}})}}class uE extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getSelection();let n=this._getRangesToDelete(t),o=[];for(let e=0,t=n.length-1;e<t;e++){let t=n[e],i=n[e+1];null===fd.Range.intersectRanges(t,i)?o.push(t):n[e+1]=fd.Range.plusRange(t,i)}o.push(n[n.length-1]);let r=this._getEndCursorState(i,o),s=o.map((e=>gm.EditOperation.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}}class hE extends Uc.EditorAction{run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(fd.Range.compareRangesUsingStarts);let o=[],r=i.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new(0,qc.Selection)(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new(0,qc.Selection)(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));o.push(r);let s=t.getModel();if(null===s)return;let a=[],l=[],c=n,d=0;for(let e=0,t=o.length;e<t;e++){let t,i,r=o[e],u=r.startLineNumber,h=1,g=0,p=s.getLineContent(r.endLineNumber).length-r.endColumn;if(r.isEmpty()||r.startLineNumber===r.endLineNumber){let e=r.getStartPosition();e.lineNumber<s.getLineCount()?(t=u+1,i=s.getLineMaxColumn(t)):(t=e.lineNumber,i=s.getLineMaxColumn(e.lineNumber))}else t=r.endLineNumber,i=s.getLineMaxColumn(t);let f=s.getLineContent(u);for(let e=u+1;e<=t;e++){let t=s.getLineContent(e),i=s.getLineFirstNonWhitespaceColumn(e);if(i>=1){let e=!0;""===f&&(e=!1),!e||" "!==f.charAt(f.length-1)&&"\t"!==f.charAt(f.length-1)||(e=!1,f=f.replace(/[\s\uFEFF\xA0]+$/g," "));let n=t.substr(i-1);f+=(e?" ":"")+n,g=e?n.length+1:n.length}else g=0}let m=new(0,fd.Range)(u,h,t,i);if(!m.isEmpty()){let e;r.isEmpty()?(a.push(gm.EditOperation.replace(m,f)),e=new(0,qc.Selection)(m.startLineNumber-d,f.length-g+1,u-d,f.length-g+1)):r.startLineNumber===r.endLineNumber?(a.push(gm.EditOperation.replace(m,f)),e=new(0,qc.Selection)(r.startLineNumber-d,r.startColumn,r.endLineNumber-d,r.endColumn)):(a.push(gm.EditOperation.replace(m,f)),e=new(0,qc.Selection)(r.startLineNumber-d,r.startColumn,r.startLineNumber-d,f.length-p)),null!==fd.Range.intersectRanges(m,n)?c=e:l.push(e)}d+=m.endLineNumber-m.startLineNumber}l.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}constructor(){super({id:"editor.action.joinLines",label:Vc.localize("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}}class gE extends Uc.EditorAction{run(e,t){let i=t.getSelections();if(null===i)return;let n=t.getModel();if(null===n)return;let o=[];for(let e=0,t=i.length;e<t;e++){let t=i[e];if(!t.isEmpty())continue;let r=t.getStartPosition(),s=n.getLineMaxColumn(r.lineNumber);if(r.column>=s){if(r.lineNumber===n.getLineCount())continue;let e=new(0,fd.Range)(r.lineNumber,Math.max(1,r.column-1),r.lineNumber+1,1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new(0,Id.ReplaceCommand)(new(0,qc.Selection)(r.lineNumber,Math.max(1,r.column-1),r.lineNumber+1,1),t))}else{let e=new(0,fd.Range)(r.lineNumber,Math.max(1,r.column-1),r.lineNumber,r.column+1),t=n.getValueInRange(e).split("").reverse().join("");o.push(new(0,Id.ReplaceCommandThatPreservesSelection)(e,t,new(0,qc.Selection)(r.lineNumber,r.column+1,r.lineNumber,r.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}constructor(){super({id:"editor.action.transpose",label:Vc.localize("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:$c.EditorContextKeys.writable})}}class pE extends Uc.EditorAction{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(116),r=[];for(const e of i)if(e.isEmpty()){const i=e.getStartPosition(),s=t.getConfiguredWordAtPosition(i);if(!s)continue;const a=new(0,fd.Range)(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn),l=n.getValueInRange(a);r.push(gm.EditOperation.replace(a,this._modifyText(l,o)))}else{const t=n.getValueInRange(e);r.push(gm.EditOperation.replace(e,this._modifyText(t,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class fE{get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}}class mE extends pE{_modifyText(e,t){const i=mE.regExp1.get(),n=mE.regExp2.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}constructor(){super({id:"editor.action.transformToSnakecase",label:Vc.localize("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:$c.EditorContextKeys.writable})}}mE.regExp1=new fE("(\\p{Ll})(\\p{Lu})","gmu"),mE.regExp2=new fE("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,Uc.registerEditorAction)(class extends tE{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:Vc.localize("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"2_line",title:Vc.localize({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}),(0,Uc.registerEditorAction)(class extends tE{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:Vc.localize("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"2_line",title:Vc.localize({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}),(0,Uc.registerEditorAction)(iE),(0,Uc.registerEditorAction)(class extends nE{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:Vc.localize("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"2_line",title:Vc.localize({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}),(0,Uc.registerEditorAction)(class extends nE{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:Vc.localize("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"2_line",title:Vc.localize({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}),(0,Uc.registerEditorAction)(class extends oE{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:Vc.localize("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorAction)(class extends oE{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:Vc.localize("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorAction)(rE),(0,Uc.registerEditorAction)(sE),(0,Uc.registerEditorAction)(aE),(0,Uc.registerEditorAction)(lE),(0,Uc.registerEditorAction)(cE),(0,Uc.registerEditorAction)(dE),(0,Uc.registerEditorAction)(class extends uE{_getEndCursorState(e,t){let i=null,n=[],o=0;return t.forEach((t=>{let r;if(1===t.endColumn&&o>0){let e=t.startLineNumber-o;r=new(0,qc.Selection)(e,t.startColumn,e,t.startColumn)}else r=new(0,qc.Selection)(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=r:n.push(r)})),i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getSelections();if(null===t)return[];let i=t,n=e.getModel();return null===n?[]:(i.sort(fd.Range.compareRangesUsingStarts),i=i.map((e=>{if(e.isEmpty()){if(1===e.startColumn){let t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineContent(t).length+1;return new(0,fd.Range)(t,i,e.startLineNumber,1)}return new(0,fd.Range)(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new(0,fd.Range)(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),i)}constructor(){super({id:"deleteAllLeft",label:Vc.localize("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}}),(0,Uc.registerEditorAction)(class extends uE{_getEndCursorState(e,t){let i=null,n=[];for(let o=0,r=t.length,s=0;o<r;o++){let r=t[o],a=new(0,qc.Selection)(r.startLineNumber-s,r.startColumn,r.startLineNumber-s,r.startColumn);r.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){let t=e.getModel();if(null===t)return[];let i=e.getSelections();if(null===i)return[];let n=i.map((e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new(0,fd.Range)(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new(0,fd.Range)(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e}));return n.sort(fd.Range.compareRangesUsingStarts),n}constructor(){super({id:"deleteAllRight",label:Vc.localize("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}}),(0,Uc.registerEditorAction)(hE),(0,Uc.registerEditorAction)(gE),(0,Uc.registerEditorAction)(class extends pE{_modifyText(e,t){return e.toLocaleUpperCase()}constructor(){super({id:"editor.action.transformToUppercase",label:Vc.localize("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorAction)(class extends pE{_modifyText(e,t){return e.toLocaleLowerCase()}constructor(){super({id:"editor.action.transformToLowercase",label:Vc.localize("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorAction)(class extends pE{_modifyText(e,t){const i=("\r\n\t "+t).split("");let n="",o=!0;for(let t=0;t<e.length;t++){let r=e[t];i.indexOf(r)>=0?(o=!0,n+=r):o?(o=!1,n+=r.toLocaleUpperCase()):n+=r.toLocaleLowerCase()}return n}constructor(){super({id:"editor.action.transformToTitlecase",label:Vc.localize("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:$c.EditorContextKeys.writable})}}),mE.regExp1.isSupported()&&mE.regExp2.isSupported()&&(0,Uc.registerEditorAction)(mE);Vc=r("kMb12"),Uc=r("kO85n"),Qd=r("dD6PO"),gd=r("ky1to"),pd=r("dLnDZ"),Gd=r("7G83E"),fd=r("2KJrz"),iu=r("ldsR3"),hd=r("hsQau"),_d=r("gHDnG"),Zc=r("c5sLr"),$c=r("jb8ay"),eu=r("avLBk"),Od=r("6AQ6e"),Jc=r("8bVMi"),Jd=r("aAfu1"),vd=r("02ibr"),yd=r("fmM7j"),rg=r("jyVY7"),$m=r("gesUy");var _E=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},bE=function(e,t){return function(i,n){t(i,n,e)}},vE=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const yE=new(0,Zc.RawContextKey)("LinkedEditingInputVisible",!1);let wE=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(61)||this._editor.getOption(81))&&iu.LinkedEditingRangeProviderRegistry.has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._languageWordPattern=$m.LanguageConfigurationRegistry.getWordDefinition(t.getLanguageIdentifier().id),this._localToDispose.add(t.onDidChangeLanguageConfiguration((()=>{this._languageWordPattern=$m.LanguageConfigurationRegistry.getWordDefinition(t.getLanguageIdentifier().id)})));const n=new(0,hd.Delayer)(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=n.trigger((()=>this.updateRanges()),this._debounceDuration)},r=new(0,hd.Delayer)(0),s=e=>{this._rangeSyncTriggerPromise=r.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const i=t.getDecorationRange(this._currentDecorations[0]);if(i&&e.changes.every((e=>i.intersectRanges(e.range))))return void s(this._currentDecorations)}o()}))),this._localToDispose.add({dispose:()=>{n.cancel(),r.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||0===e.length)return;const t=this._editor.getModel(),i=t.getDecorationRange(e[0]);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern);if((e?e[0].length:0)!==n.length)return this.clearRanges()}let o=[];for(let i=1,r=e.length;i<r;i++){const r=t.getDecorationRange(e[i]);if(r)if(r.startLineNumber!==r.endLineNumber)o.push({range:r,text:n});else{let e=t.getValueInRange(r),i=n,s=r.startColumn,a=r.endColumn;const l=Jd.commonPrefixLength(e,i);s+=l,e=e.substr(l),i=i.substr(l);const c=Jd.commonSuffixLength(e,i);a-=c,e=e.substr(0,e.length-c),i=i.substr(0,i.length-c),s===a&&0===i.length||o.push({range:new(0,fd.Range)(r.startLineNumber,s,r.endLineNumber,a),text:i})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(t=!1){return vE(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),o=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===o){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const e=n.getDecorationRange(this._currentDecorations[0]);if(e&&e.containsPosition(i))return}}this._currentRequestPosition=i,this._currentRequestModelVersion=o;const r=(0,hd.createCancelablePromise)((t=>vE(this,void 0,void 0,(function*(){try{const s=yield SE(n,i,t);if(r!==this._currentRequest)return;if(this._currentRequest=null,o!==n.getVersionId())return;let a=[];(null==s?void 0:s.ranges)&&(a=s.ranges),this._currentWordPattern=(null==s?void 0:s.wordPattern)||this._languageWordPattern;let l=!1;for(let e=0,t=a.length;e<t;e++)if(fd.Range.containsPosition(a[e],i)){if(l=!0,0!==e){const t=a[e];a.splice(e,1),a.unshift(t)}break}if(!l)return void this.clearRanges();const c=a.map((t=>({range:t,options:e.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,c)}catch(e){(0,Jc.isPromiseCanceledError)(e)||(0,Jc.onUnexpectedError)(e),this._currentRequest!==r&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=r,r}))}constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new(0,gd.DisposableStore)),this._editor=e,this._enabled=!1,this._visibleContextKey=yE.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new(0,gd.DisposableStore)),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(61)||e.hasChanged(81))&&this.reinitialize(!1)}))),this._register(iu.LinkedEditingRangeProviderRegistry.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}};wE.ID="editor.contrib.linkedEditing",wE.DECORATION=_d.ModelDecorationOptions.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),wE=_E([bE(1,Zc.IContextKeyService)],wE);class CE extends Uc.EditorAction{runCommand(e,t){const i=e.get(Od.ICodeEditorService),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return eu.URI.isUri(n)&&pd.Position.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),Jc.onUnexpectedError):super.runCommand(e,t)}run(e,t){const i=wE.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}constructor(){super({id:"editor.action.linkedEditing",label:Vc.localize("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3132,weight:100}})}}const xE=Uc.EditorCommand.bindToContribution(wE.get);function SE(e,t,i){const n=iu.LinkedEditingRangeProviderRegistry.ordered(e);return(0,hd.first)(n.map((n=>()=>vE(this,void 0,void 0,(function*(){try{return yield n.provideLinkedEditingRanges(e,t,i)}catch(e){return void(0,Jc.onUnexpectedExternalError)(e)}})))),(e=>!!e&&Qd.isNonEmptyArray(null==e?void 0:e.ranges)))}(0,Uc.registerEditorCommand)(new xE({id:"cancelLinkedEditingInput",precondition:yE,handler:e=>e.clearRanges(),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const kE=(0,vd.registerColor)("editor.linkedEditingBackground",{dark:rg.Color.fromHex("#f00").transparent(.3),light:rg.Color.fromHex("#f00").transparent(.3),hc:rg.Color.fromHex("#f00").transparent(.3)},Vc.localize("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(kE);i&&t.addRule(`.monaco-editor .linked-editing-decoration { background: ${i}; border-left-color: ${i}; }`)})),(0,Uc.registerModelAndPositionCommand)("_executeLinkedEditingProvider",((e,t)=>SE(e,t,Gd.CancellationToken.None))),(0,Uc.registerEditorContribution)(wE.ID,wE),(0,Uc.registerEditorAction)(CE);Vc=r("kMb12"),hd=r("hsQau"),Gd=r("7G83E"),Jc=r("8bVMi"),gd=r("ky1to"),Ld=r("drE9L"),Uc=r("kO85n"),_d=r("gHDnG"),iu=r("ldsR3");var EE={};e(EE,"getLinks",(function(){return RE}),(function(e){return RE=e}));Gd=r("7G83E"),Jc=r("8bVMi"),eu=r("avLBk"),fd=r("2KJrz"),iu=r("ldsR3"),nu=r("cDtHV"),du=r("cUien"),gd=r("ky1to"),Qd=r("dD6PO"),Mh=r("5jjji");var DE=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class AE{toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return DE(this,void 0,void 0,(function*(){return this._link.url?this._link.url:"function"==typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then((t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}))}constructor(e,t){this._link=e,this._provider=t}}class IE{dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let i,n,o,r,s=[];for(i=0,o=0,n=e.length,r=t.length;i<n&&o<r;){const n=e[i],r=t[o];if(fd.Range.areIntersectingOrTouching(n.range,r.range)){i++;continue}fd.Range.compareRangesUsingStarts(n.range,r.range)<0?(s.push(n),i++):(s.push(r),o++)}for(;i<n;i++)s.push(e[i]);for(;o<r;o++)s.push(t[o]);return s}constructor(e){this._disposables=new(0,gd.DisposableStore);let t=[];for(const[i,n]of e){const e=i.links.map((e=>new AE(e,n)));t=IE._union(t,e),(0,gd.isDisposable)(i)&&this._disposables.add(i)}this.links=t}}function RE(e,t){const i=[],n=iu.LinkProviderRegistry.ordered(e).reverse().map(((n,o)=>Promise.resolve(n.provideLinks(e,t)).then((e=>{e&&(i[o]=[e,n])}),Jc.onUnexpectedExternalError)));return Promise.all(n).then((()=>{const e=new IE((0,Qd.coalesce)(i));return t.isCancellationRequested?(e.dispose(),new IE([])):e}))}du.CommandsRegistry.registerCommand("_executeLinkProvider",((e,...t)=>DE(void 0,void 0,void 0,(function*(){let[i,n]=t;(0,Mh.assertType)(i instanceof eu.URI),"number"!=typeof n&&(n=0);const o=e.get(nu.IModelService).getModel(i);if(!o)return[];const r=yield RE(o,Gd.CancellationToken.None);if(!r)return[];for(let e=0;e<Math.min(n,r.links.length);e++)yield r.links[e].resolve(Gd.CancellationToken.None);const s=r.links.slice(0);return r.dispose(),s}))));oh=r("26YKj"),xg=r("kqjci"),vd=r("02ibr"),yd=r("fmM7j"),eu=r("avLBk"),Dg=r("gqnvK"),lh=r("liPtJ");var TE=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ME=function(e,t){return function(i,n){t(i,n,e)}},LE=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const NE={general:_d.ModelDecorationOptions.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:_d.ModelDecorationOptions.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class OE{static decoration(e,t){return{range:e.range,options:OE._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n=Object.assign({},i?NE.active:NE.general);return n.hoverMessage=function(e,t){const i=e.url&&/^command:/i.test(e.url.toString()),n=e.tooltip?e.tooltip:i?Vc.localize("links.navigate.executeCmd","Execute command"):Vc.localize("links.navigate.follow","Follow link"),o=t?Ld.isMacintosh?Vc.localize("links.navigate.kb.meta.mac","cmd + click"):Vc.localize("links.navigate.kb.meta","ctrl + click"):Ld.isMacintosh?Vc.localize("links.navigate.kb.alt.mac","option + click"):Vc.localize("links.navigate.kb.alt","alt + click");if(e.url){let t="";if(/^command:/i.test(e.url.toString())){const i=e.url.toString().match(/^command:([^?#]+)/);if(i){const e=i[1];t=` "${Vc.localize("tooltip.explanation","Execute command {0}",e)}"`}}return new Xc("",!0).appendMarkdown(`[${n}](${e.url.toString(!0)}${t}) (${o})`)}return(new Xc).appendText(`${n} (${o})`)}(e,t),n}activate(e,t){e.changeDecorationOptions(this.decorationId,OE._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,OE._getOptions(this.link,t,!1))}constructor(e,t){this.link=e,this.decorationId=t}}let PE=class e{static get(t){return t.getContribution(e.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet((()=>this.beginCompute()),e.RECOMPUTE_TIME)}beginCompute(){return LE(this,void 0,void 0,(function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(iu.LinkProviderRegistry.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=hd.createCancelablePromise((t=>(0,EE.getLinks)(e,t)));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(e){(0,Jc.onUnexpectedError)(e)}finally{this.computePromise=null}}}))}updateDecorations(e){const t="altKey"===this.editor.getOption(69);let i=[],n=Object.keys(this.currentOccurrences);for(let e=0,t=n.length;e<t;e++){let t=n[e],o=this.currentOccurrences[t];i.push(o.decorationId)}let o=[];if(e)for(const i of e)o.push(OE.decoration(i,t));let r=this.editor.deltaDecorations(i,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let t=0,i=r.length;t<i;t++){let i=new OE(e[t],r[t]);this.currentOccurrences[i.decorationId]=i}}_onEditorMouseMove(e,t){const i="altKey"===this.editor.getOption(69);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations((e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(69);if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((i=>{t.deactivate(i,e)})),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(Gd.CancellationToken.None).then((e=>{if("string"==typeof e&&this.editor.hasModel()){const t=this.editor.getModel().uri;if(t.scheme===Dg.Schemas.file&&e.startsWith(`${Dg.Schemas.file}:`)){const i=eu.URI.parse(e);if(i.scheme===Dg.Schemas.file){const n=lh.originalFSPath(i);let o=null;n.startsWith("/./")?o=`.${n.substr(1)}`:n.startsWith("//./")&&(o=`.${n.substr(2)}`),o&&(e=lh.joinPath(t,o))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0})}),(e=>{const t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(Vc.localize("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):"missing"===t?this.notificationService.warn(Vc.localize("missing.url","Failed to open this link because its target is missing.")):(0,Jc.onUnexpectedError)(e)}))}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const e of t){const t=this.currentOccurrences[e.id];if(t)return t}return null}isEnabled(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}constructor(e,t,i){this.listenersToRemove=new(0,gd.DisposableStore),this.editor=e,this.openerService=t,this.notificationService=i;let n=new hC(e);this.listenersToRemove.add(n),this.listenersToRemove.add(n.onMouseMoveOrRelevantKeyDown((([e,t])=>{this._onEditorMouseMove(e,t)}))),this.listenersToRemove.add(n.onExecute((e=>{this.onEditorMouseUp(e)}))),this.listenersToRemove.add(n.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration((t=>{const i=e.getOption(62);this.enabled!==i&&(this.enabled=i,this.updateDecorations([]),this.stop(),this.beginCompute())}))),this.listenersToRemove.add(e.onDidChangeModelContent((e=>this.onChange()))),this.listenersToRemove.add(e.onDidChangeModel((e=>this.onModelChanged()))),this.listenersToRemove.add(e.onDidChangeModelLanguage((e=>this.onModelModeChanged()))),this.listenersToRemove.add(iu.LinkProviderRegistry.onDidChange((e=>this.onModelModeChanged()))),this.timeout=new hd.TimeoutTimer,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}};PE.ID="editor.linkDetector",PE.RECOMPUTE_TIME=1e3,PE=TE([ME(1,xg.IOpenerService),ME(2,oh.INotificationService)],PE);class FE extends Uc.EditorAction{run(e,t){let i=PE.get(t);if(!i)return;if(!t.hasModel())return;let n=t.getSelections();for(let e of n){let t=i.getLinkOccurrence(e.getEndPosition());t&&i.openLinkOccurrence(t,!1)}}constructor(){super({id:"editor.action.openLink",label:Vc.localize("label","Open Link"),alias:"Open Link",precondition:void 0})}}(0,Uc.registerEditorContribution)(PE.ID,PE),(0,Uc.registerEditorAction)(FE),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorActiveLinkForeground);i&&t.addRule(`.monaco-editor .detected-link-active { color: ${i} !important; }`)}));Vc=r("kMb12"),hd=r("hsQau"),Gc=r("8NQur"),gd=r("ky1to"),id=r("gF77M"),Uc=r("kO85n");var BE=r("9LP05");fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),md=r("gSqSV"),_d=r("gHDnG"),iu=r("ldsR3"),wd=r("4Nnjr"),vd=r("02ibr"),yd=r("fmM7j"),Zc=r("c5sLr");function jE(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===i.length?Vc.localize("cursorAdded","Cursor added: {0}",e):Vc.localize("cursorsAdded","Cursors added: {0}",e);(0,id.status)(t)}}class zE extends Uc.EditorAction{run(e,t,i){if(!t.hasModel())return;const n=i&&!0===i.logicalLine,o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,BE.CursorMoveCommands.addCursorUp(o,r,n)),o.revealTopMostCursor(i.source),jE(r,o.getCursorStates())}constructor(){super({id:"editor.action.insertCursorAbove",label:Vc.localize("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}}class WE extends Uc.EditorAction{run(e,t,i){if(!t.hasModel())return;const n=i&&!0===i.logicalLine,o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const r=o.getCursorStates();o.setCursorStates(i.source,3,BE.CursorMoveCommands.addCursorDown(o,r,n)),o.revealBottomMostCursor(i.source),jE(r,o.getCursorStates())}constructor(){super({id:"editor.action.insertCursorBelow",label:Vc.localize("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}}class HE extends Uc.EditorAction{getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){let e=t.getLineMaxColumn(n);i.push(new(0,qc.Selection)(n,e,n,e))}e.endColumn>1&&i.push(new(0,qc.Selection)(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates();let s=[];n.forEach((e=>this.getCursorsForSelection(e,i,s))),s.length>0&&t.setSelections(s),jE(r,o.getCursorStates())}constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:Vc.localize("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}}class KE extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount();let o=[];for(let e=i[0].startLineNumber;e<=n;e++)o.push(new(0,qc.Selection)(e,i[0].startColumn,e,i[0].endColumn));const r=t._getViewModel(),s=r.getCursorStates();o.length>0&&t.setSelections(o),jE(s,r.getCursorStates())}constructor(){super({id:"editor.action.addCursorsToBottom",label:Vc.localize("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}}class UE extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getSelections();let n=[];for(let e=i[0].startLineNumber;e>=1;e--)n.push(new(0,qc.Selection)(e,i[0].startColumn,e,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();n.length>0&&t.setSelections(n),jE(r,o.getCursorStates())}constructor(){super({id:"editor.action.addCursorsToTop",label:Vc.localize("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}}class VE{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class $E{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new $E(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n,o,r=!1;const s=e.getSelections();1===s.length&&s[0].isEmpty()?(r=!0,n=!0,o=!0):(n=i.wholeWord,o=i.matchCase);const a=e.getSelection();let l,c=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;l=t.word,c=new(0,qc.Selection)(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else l=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new $E(e,t,r,l,n,o,c)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new VE(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new VE(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return i?new(0,qc.Selection)(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new VE(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new VE(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return i?new(0,qc.Selection)(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}constructor(e,t,i,n,o,r,s){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=r,this.currentMatch=s}}class qE extends gd.Disposable{static get(e){return e.getContribution(qE.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=$E.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new(0,qc.Selection)(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!YE(this._editor.getModel(),t,i)){const e=this._editor.getModel();let i=[];for(let n=0,o=t.length;n<o;n++)i[n]=this._expandEmptyToWord(e,t[n]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex)t=this._editor.getModel().findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(i.searchScope){const e=i.searchScope;let n=[];t.forEach((t=>{e.forEach((e=>{t.range.endLineNumber<=e.endLineNumber&&t.range.startLineNumber>=e.startLineNumber&&n.push(t)}))})),t=n}if(t.length>0){const e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){const n=t[i];if(n.range.intersectRanges(e)){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map((e=>new(0,qc.Selection)(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}constructor(e){super(),this._sessionDispose=this._register(new(0,gd.DisposableStore)),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}}qE.ID="editor.contrib.multiCursorController";class GE extends Uc.EditorAction{run(e,t){const i=qE.get(t);if(!i)return;const n=BC.CommonFindController.get(t);if(!n)return;const o=t._getViewModel();if(o){const e=o.getCursorStates();this._run(i,n),jE(e,o.getCursorStates())}}}class ZE{static softEquals(e,t){return!e&&!t||!(!e||!t)&&(e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId)}constructor(e,t,i,n){this.searchText=e,this.matchCase=t,this.wordSeparators=i,this.modelVersionId=n}}class JE extends gd.Disposable{_update(){this._setState(JE._createState(this._isEnabled,this.editor))}static _createState(e,t){if(!e)return null;if(!t.hasModel())return null;const i=t.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const n=qE.get(t);if(!n)return null;const o=BC.CommonFindController.get(t);if(!o)return null;let r=n.getSession(o);if(!r){const e=t.getSelections();if(e.length>1){const i=o.getState().matchCase;if(!YE(t.getModel(),e,i))return null}r=$E.create(t,o)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const s=o.getState(),a=s.matchCase;if(s.isRevealed){let e=s.searchString;a||(e=e.toLowerCase());let t=r.searchText;if(a||(t=t.toLowerCase()),e===t&&r.matchCase===s.matchCase&&r.wholeWord===s.wholeWord&&!s.isRegex)return null}return new ZE(r.searchText,r.matchCase,r.wholeWord?t.getOption(116):null,t.getModel().getVersionId())}_setState(e){if(ZE.softEquals(this.state,e))return void(this.state=e);if(this.state=e,!this.state)return void(this.decorations=this.editor.deltaDecorations(this.decorations,[]));if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=iu.DocumentHighlightProviderRegistry.has(t)&&this.editor.getOption(71);let n=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map((e=>e.range));n.sort(fd.Range.compareRangesUsingStarts);let o=this.editor.getSelections();o.sort(fd.Range.compareRangesUsingStarts);let r=[];for(let e=0,t=0,i=n.length,s=o.length;e<i;){const i=n[e];if(t>=s)r.push(i),e++;else{const n=fd.Range.compareRangesUsingStarts(i,o[t]);n<0?(!o[t].isEmpty()&&fd.Range.areIntersecting(i,o[t])||r.push(i),e++):(n>0||e++,t++)}}const s=r.map((e=>({range:e,options:i?JE._SELECTION_HIGHLIGHT:JE._SELECTION_HIGHLIGHT_OVERVIEW})));this.decorations=this.editor.deltaDecorations(this.decorations,s)}dispose(){this._setState(null),super.dispose()}constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(97),this.decorations=[],this.updateSoon=this._register(new(0,hd.RunOnceScheduler)((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(97)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()}))),this._register(BC.CommonFindController.get(e).getState().onFindReplaceStateChange((e=>{this._update()})))}}function YE(e,t,i){const n=XE(e,t[0],!i);for(let o=1,r=t.length;o<r;o++){const r=t[o];if(r.isEmpty())return!1;if(n!==XE(e,r,!i))return!1}return!0}function XE(e,t,i){const n=e.getValueInRange(t);return i?n.toLowerCase():n}JE.ID="editor.contrib.selectionHighlighter",JE._SELECTION_HIGHLIGHT_OVERVIEW=_d.ModelDecorationOptions.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,yd.themeColorFromId)(vd.overviewRulerSelectionHighlightForeground),position:md.OverviewRulerLane.Center}}),JE._SELECTION_HIGHLIGHT=_d.ModelDecorationOptions.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),(0,Uc.registerEditorContribution)(qE.ID,qE),(0,Uc.registerEditorContribution)(JE.ID,JE),(0,Uc.registerEditorAction)(zE),(0,Uc.registerEditorAction)(WE),(0,Uc.registerEditorAction)(HE),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.addSelectionToNextFindMatch(t)}constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:Vc.localize("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:2082,weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}}),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.addSelectionToPreviousFindMatch(t)}constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:Vc.localize("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}}),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.moveSelectionToNextFindMatch(t)}constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:Vc.localize("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:(0,Gc.KeyChord)(2089,2082),weight:100}})}}),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.moveSelectionToPreviousFindMatch(t)}constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:Vc.localize("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}}),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.selectAll(t)}constructor(){super({id:"editor.action.selectHighlights",label:Vc.localize("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:3114,weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Vc.localize({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}}),(0,Uc.registerEditorAction)(class extends GE{_run(e,t){e.selectAll(t)}constructor(){super({id:"editor.action.changeAll",label:Vc.localize("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.editorTextFocus),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}}),(0,Uc.registerEditorAction)(KE),(0,Uc.registerEditorAction)(UE);Vc=r("kMb12"),gd=r("ky1to"),Iu=r("cwJE1"),$c=r("jb8ay"),Zc=r("c5sLr"),Uc=r("kO85n");var QE={};e(QE,"ParameterHintsWidget",(function(){return pD}),(function(e){return pD=e}));Tu=r("2cxKt"),id=r("gF77M"),_g=r("2YDAi"),Uu=r("7bUGH"),gd=r("ky1to"),gg=r("apdYP");var eD={};e(eD,"Context",(function(){return iD}),(function(e){return iD=e})),e(eD,"provideSignatureHelp",(function(){return nD}),(function(e){return nD=e}));Jc=r("8bVMi"),pd=r("dLnDZ"),iu=r("ldsR3"),Zc=r("c5sLr"),Gd=r("7G83E"),du=r("cUien"),eu=r("avLBk"),Mh=r("5jjji"),p_=r("1JIvq");var tD=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const iD={Visible:new(0,Zc.RawContextKey)("parameterHintsVisible",!1),MultipleSignatures:new(0,Zc.RawContextKey)("parameterHintsMultipleSignatures",!1)};function nD(e,t,i,n){return tD(this,void 0,void 0,(function*(){const o=iu.SignatureHelpProviderRegistry.ordered(e);for(const r of o)try{const o=yield r.provideSignatureHelp(e,t,n,i);if(o)return o}catch(e){(0,Jc.onUnexpectedExternalError)(e)}}))}du.CommandsRegistry.registerCommand("_executeSignatureHelpProvider",((e,...t)=>tD(void 0,void 0,void 0,(function*(){const[i,n,o]=t;(0,Mh.assertType)(eu.URI.isUri(i)),(0,Mh.assertType)(pd.Position.isIPosition(n)),(0,Mh.assertType)("string"==typeof o||!o);const r=yield e.get(p_.ITextModelService).createModelReference(i);try{const e=yield nD(r.object.textEditorModel,pd.Position.lift(n),{triggerKind:iu.SignatureHelpTriggerKind.Invoke,isRetrigger:!1,triggerCharacter:o},Gd.CancellationToken.None);if(!e)return;return setTimeout((()=>e.dispose()),0),e.value}finally{r.dispose()}}))));Vc=r("kMb12"),Zc=r("c5sLr"),xg=r("kqjci"),vd=r("02ibr"),yd=r("fmM7j");var oD={};e(oD,"ParameterHintsModel",(function(){return aD}),(function(e){return aD=e}));hd=r("hsQau"),Jc=r("8bVMi"),Uu=r("7bUGH"),gd=r("ky1to"),Nv=r("iQyRu"),iu=r("ldsR3");var rD,sD=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.Default={type:0};e.Pending=class{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}};e.Active=class{constructor(e){this.hints=e,this.type=1}}}(rD||(rD={}));class aD extends gd.Disposable{get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=rD.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!iu.SignatureHelpProviderRegistry.has(i))return;const n=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((()=>this.doTrigger(n)),t).catch(Jc.onUnexpectedError)}next(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e==e-1,n=this.editor.getOption(75).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?0:t+1):this.cancel()}previous(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=0===t,n=this.editor.getOption(75).cycle;!(e<2||i)||n?this.updateActiveSignature(i&&n?e-1:t-1):this.cancel()}updateActiveSignature(e){1===this.state.type&&(this.state=new rD.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return sD(this,void 0,void 0,(function*(){const t=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const n=this._pendingTriggers.reduce(lD);this._pendingTriggers=[];const o={triggerKind:n.triggerKind,triggerCharacter:n.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),s=this.editor.getPosition();this.state=new rD.Pending((0,hd.createCancelablePromise)((e=>(0,eD.provideSignatureHelp)(r,s,o,e))),i);try{const t=yield this.state.request;return e!==this.triggerId?(null==t||t.dispose(),!1):t&&t.value.signatures&&0!==t.value.signatures.length?(this.state=new rD.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0):(null==t||t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(t){return e===this.triggerId&&(this.state=rD.Default),(0,Jc.onUnexpectedError)(t),!1}}))}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new(0,Nv.CharacterSet),this.retriggerChars=new(0,Nv.CharacterSet);const e=this.editor.getModel();if(e)for(const t of iu.SignatureHelpProviderRegistry.ordered(e)){for(const e of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(e.charCodeAt(0)),this.retriggerChars.add(e.charCodeAt(0));for(const e of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:iu.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:iu.SignatureHelpTriggerKind.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:iu.SignatureHelpTriggerKind.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}constructor(e,t=aD.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new(0,Uu.Emitter)),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=rD.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new(0,gd.MutableDisposable)),this.triggerChars=new(0,Nv.CharacterSet),this.retriggerChars=new(0,Nv.CharacterSet),this.triggerId=0,this.editor=e,this.throttledDelayer=new(0,hd.Delayer)(t),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(iu.SignatureHelpProviderRegistry.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((e=>this.onDidType(e)))),this.onEditorConfigurationChange(),this.onModelChanged()}}function lD(e,t){switch(t.triggerKind){case iu.SignatureHelpTriggerKind.Invoke:return t;case iu.SignatureHelpTriggerKind.ContentChange:return e;case iu.SignatureHelpTriggerKind.TriggerCharacter:default:return t}}aD.DEFAULT_DELAY=120;Jd=r("aAfu1"),$u=r("kWoyS"),Mh=r("5jjji"),xu=r("bSm4w"),tf=r("lfDTl");var cD=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},dD=function(e,t){return function(i,n){t(i,n,e)}};const uD=Tu.$,hD=(0,tf.registerIcon)("parameter-hints-next",$u.Codicon.chevronDown,Vc.localize("parameterHintsNextIcon","Icon for show next parameter hint.")),gD=(0,tf.registerIcon)("parameter-hints-previous",$u.Codicon.chevronUp,Vc.localize("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let pD=class e extends gd.Disposable{createParameterHintDOMNodes(){const e=uD(".editor-widget.parameter-hints-widget"),t=Tu.append(e,uD(".phwrapper"));t.tabIndex=-1;const i=Tu.append(t,uD(".controls")),n=Tu.append(i,uD(".button"+yd.ThemeIcon.asCSSSelector(gD))),o=Tu.append(i,uD(".overloads")),r=Tu.append(i,uD(".button"+yd.ThemeIcon.asCSSSelector(hD)));this._register(Tu.addDisposableListener(n,"click",(e=>{Tu.EventHelper.stop(e),this.previous()}))),this._register(Tu.addDisposableListener(r,"click",(e=>{Tu.EventHelper.stop(e),this.next()})));const s=uD(".body"),a=new(0,_g.DomScrollableElement)(s,{});this._register(a),t.appendChild(a.getDomNode());const l=Tu.append(s,uD(".signature")),c=Tu.append(s,uD(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:l,overloads:o,docs:c,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const d=()=>{if(!this.domNodes)return;const e=this.editor.getOption(42);this.domNodes.element.style.fontSize=`${e.fontSize}px`};d(),this._register(Uu.Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((e=>e.hasChanged(42))).on(d,null)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{this.domNodes&&this.domNodes.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const n=e.signatures[e.activeSignature];if(!n)return;const o=Tu.append(this.domNodes.signature,uD(".code")),r=this.editor.getOption(42);o.style.fontSize=`${r.fontSize}px`,o.style.fontFamily=r.fontFamily;const s=n.parameters.length>0,a=null!==(t=n.activeParameter)&&void 0!==t?t:e.activeParameter;if(s)this.renderParameters(o,n,a);else{Tu.append(o,uD("span")).textContent=n.label}const l=n.parameters[a];if(null==l?void 0:l.documentation){const e=uD("span.documentation");if("string"==typeof l.documentation)e.textContent=l.documentation;else{const t=this.renderMarkdownDocs(l.documentation);e.appendChild(t.element)}Tu.append(this.domNodes.docs,uD("p",{},e))}if(void 0===n.documentation);else if("string"==typeof n.documentation)Tu.append(this.domNodes.docs,uD("p",{},n.documentation));else{const e=this.renderMarkdownDocs(n.documentation);Tu.append(this.domNodes.docs,e.element)}const c=this.hasDocs(n,l);if(this.domNodes.signature.classList.toggle("has-docs",c),this.domNodes.docs.classList.toggle("empty",!c),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,l){let e="";const t=n.parameters[a];e=Array.isArray(t.label)?n.label.substring(t.label[0],t.label[1]):t.label,t.documentation&&(e+="string"==typeof t.documentation?`, ${t.documentation}`:`, ${t.documentation.value}`),n.documentation&&(e+="string"==typeof n.documentation?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==e&&(id.alert(Vc.localize("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&"string"==typeof t.documentation&&(0,Mh.assertIsDefined)(t.documentation).length>0)||(!!(t&&"object"==typeof t.documentation&&(0,Mh.assertIsDefined)(t.documentation).value.length>0)||(!!(e.documentation&&"string"==typeof e.documentation&&(0,Mh.assertIsDefined)(e.documentation).length>0)||!!(e.documentation&&"object"==typeof e.documentation&&(0,Mh.assertIsDefined)(e.documentation.value).length>0)))}renderParameters(e,t,i){const[n,o]=this.getParameterLabelOffsets(t,i),r=document.createElement("span");r.textContent=t.label.substring(0,n);const s=document.createElement("span");s.textContent=t.label.substring(n,o),s.className="parameter active";const a=document.createElement("span");a.textContent=t.label.substring(o),Tu.append(e,r,s,a)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const t=new RegExp(`(\\W|^)${(0,Jd.escapeRegExpCharacters)(i.label)}(?=\\W|$)`,"g");t.test(e.label);const n=t.lastIndex-i.label.length;return n>=0?[n,t.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return e.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const e=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=e;const t=this.domNodes.element.getElementsByClassName("phwrapper");t.length&&(t[0].style.maxHeight=e)}constructor(e,t,i,n){super(),this.editor=e,this.renderDisposeables=this._register(new(0,gd.DisposableStore)),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new(0,vf.MarkdownRenderer)({editor:e},n,i)),this.model=this._register(new(0,oD.ParameterHintsModel)(e)),this.keyVisible=eD.Context.Visible.bindTo(t),this.keyMultipleSignatures=eD.Context.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints((e=>{e?(this.show(),this.render(e)):this.hide()})))}};pD.ID="editor.widget.parameterHintsWidget",pD=cD([dD(1,Zc.IContextKeyService),dD(2,xg.IOpenerService),dD(3,gg.IModeService)],pD),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorHoverBorder);if(i){const n=e.type===xu.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(`.monaco-editor .parameter-hints-widget { border: ${n}px solid ${i}; }`),t.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${i.transparent(.5)}; }`)}const n=e.getColor(vd.editorHoverBackground);n&&t.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const o=e.getColor(vd.textLinkForeground);o&&t.addRule(`.monaco-editor .parameter-hints-widget a { color: ${o}; }`);const r=e.getColor(vd.textLinkActiveForeground);r&&t.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${r}; }`);const s=e.getColor(vd.editorHoverForeground);s&&t.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);const a=e.getColor(vd.textCodeBlockBackground);a&&t.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`)}));iu=r("ldsR3");var fD=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},mD=function(e,t){return function(i,n){t(i,n,e)}};let _D=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(QE.ParameterHintsWidget,this.editor))}};_D.ID="editor.controller.parameterHints",_D=fD([mD(1,Iu.IInstantiationService)],_D);class bD extends Uc.EditorAction{run(e,t){const i=_D.get(t);i&&i.trigger({triggerKind:iu.SignatureHelpTriggerKind.Invoke})}constructor(){super({id:"editor.action.triggerParameterHints",label:Vc.localize("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:$c.EditorContextKeys.hasSignatureHelpProvider,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:3082,weight:100}})}}(0,Uc.registerEditorContribution)(_D.ID,_D),(0,Uc.registerEditorAction)(bD);const vD=Uc.EditorCommand.bindToContribution(_D.get);(0,Uc.registerEditorCommand)(new vD({id:"closeParameterHints",precondition:eD.Context.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:$c.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,Uc.registerEditorCommand)(new vD({id:"showPrevParameterHint",precondition:Zc.ContextKeyExpr.and(eD.Context.Visible,eD.Context.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:$c.EditorContextKeys.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,Uc.registerEditorCommand)(new vD({id:"showNextParameterHint",precondition:Zc.ContextKeyExpr.and(eD.Context.Visible,eD.Context.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:$c.EditorContextKeys.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));Vc=r("kMb12"),Jc=r("8bVMi"),Zc=r("c5sLr"),cu=r("dkDYJ"),Uc=r("kO85n"),$c=r("jb8ay");var yD={};e(yD,"CONTEXT_RENAME_INPUT_VISIBLE",(function(){return xD}),(function(e){return xD=e})),e(yD,"RenameInputField",(function(){return SD}),(function(e){return SD=e}));gd=r("ky1to"),pd=r("dLnDZ"),Vc=r("kMb12"),Zc=r("c5sLr"),vd=r("02ibr"),yd=r("fmM7j"),Nu=r("5TiFM");var wD=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},CD=function(e,t){return function(i,n){t(i,n,e)}};const xD=new(0,Zc.RawContextKey)("renameInputVisible",!1,(0,Vc.localize)("renameInputVisible","Whether the rename input widget is visible"));let SD=class{dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,Vc.localize)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var e,t;const[i,n]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=(0,Vc.localize)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,n,o;if(!this._input||!this._domNode)return;const r=e.getColor(vd.widgetShadow);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(vd.editorWidgetBackground))&&void 0!==t?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String(null!==(i=e.getColor(vd.inputForeground))&&void 0!==i?i:""),this._input.style.backgroundColor=String(null!==(n=e.getColor(vd.inputBackground))&&void 0!==n?n:"");const s=e.getColor(vd.inputBorder);this._input.style.borderWidth=s?"1px":"0px",this._input.style.borderStyle=s?"solid":"none",this._input.style.borderColor=null!==(o=null==s?void 0:s.toString())&&void 0!==o?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(42);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=.8*e.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,i,n,o,r){this._domNode.classList.toggle("preview",o),this._position=new(0,pd.Position)(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);const s=new(0,gd.DisposableStore);return new Promise((e=>{this._currentCancelInput=t=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e(t),!0),this._currentAcceptInput=i=>{0!==this._input.value.trim().length&&this._input.value!==t?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e({newName:this._input.value,wantsPreview:o&&i})):this.cancelInput(!0)},r.onCancellationRequested((()=>this.cancelInput(!0))),s.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{s.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}constructor(e,t,i,n,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._disposables=new(0,gd.DisposableStore),this.allowEditorOverflow=!0,this._visibleContextKey=xD.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(42)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}};SD=wD([CD(2,yd.IThemeService),CD(3,Nu.IKeybindingService),CD(4,Zc.IContextKeyService)],SD);iu=r("ldsR3"),pd=r("dLnDZ"),id=r("gF77M"),fd=r("2KJrz"),tu=r("8hC5C"),oh=r("26YKj"),Yd=r("fj9mq"),eu=r("avLBk"),Od=r("6AQ6e"),Gd=r("7G83E"),gd=r("ky1to"),hd=r("hsQau"),A_=r("k0Rz2"),Iu=r("cwJE1");var kD=r("fyF5L"),ED=r("exJJk"),DD=r("9FRmy"),AD=(Mh=r("5jjji"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),ID=function(e,t){return function(i,n){t(i,n,e)}},RD=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class TD{hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return RD(this,void 0,void 0,(function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;let n=yield i.resolveRenameLocation(this.model,this.position,e);if(n){if(!n.rejectReason)return n;t.push(n.rejectReason)}}const i=this.model.getWordAtPosition(this.position);return i?{range:new(0,fd.Range)(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:fd.Range.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}))}provideRenameEdits(e,t){return RD(this,void 0,void 0,(function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}))}_provideRenameEdits(e,t,i,n){return RD(this,void 0,void 0,(function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join("\n")};const r=yield o.provideRenameEdits(this.model,this.position,e,n);return r?r.rejectReason?this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n):r:this._provideRenameEdits(e,t+1,i.concat(Vc.localize("no result","No result.")),n)}))}constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=iu.RenameProviderRegistry.ordered(e)}}let MD=class e{static get(t){return t.getContribution(e.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return RD(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new TD(this.editor.getModel(),e);if(!t.hasProvider())return;let i;this._cts=new(0,tu.EditorStateCancellationTokenSource)(this.editor,5);try{const e=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(e,250),i=yield e}catch(t){return void Cu.MessageController.get(this.editor).showMessage(t||Vc.localize("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e)}if(!i)return;if(i.rejectReason)return void Cu.MessageController.get(this.editor).showMessage(i.rejectReason,e);if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new(0,tu.EditorStateCancellationTokenSource)(this.editor,5,i.range);let n=this.editor.getSelection(),o=0,r=i.text.length;fd.Range.isEmpty(n)||fd.Range.spansMultipleLines(n)||!fd.Range.containsRange(i.range,n)||(o=Math.max(0,n.startColumn-i.range.startColumn),r=Math.min(i.range.endColumn,n.endColumn)-i.range.startColumn);const s=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),a=yield this._renameInputField.value.getInput(i.range,i.text,o,r,s,this._cts.token);if("boolean"==typeof a)return void(a&&this.editor.focus());this.editor.focus();const l=(0,hd.raceCancellation)(t.provideRenameEdits(a.newName,this._cts.token),this._cts.token).then((e=>RD(this,void 0,void 0,(function*(){e&&this.editor.hasModel()&&(e.rejectReason?this._notificationService.info(e.rejectReason):this._bulkEditService.apply(Yd.ResourceEdit.convert(e),{editor:this.editor,showPreview:a.wantsPreview,label:Vc.localize("label","Renaming '{0}'",null==i?void 0:i.text),quotableLabel:Vc.localize("quotableLabel","Renaming {0}",null==i?void 0:i.text)}).then((e=>{e.ariaSummary&&(0,id.alert)(Vc.localize("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",i.text,a.newName,e.ariaSummary))})).catch((e=>{this._notificationService.error(Vc.localize("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)})))}))),(e=>{this._notificationService.error(Vc.localize("rename.failed","Rename failed to compute edits")),this._logService.error(e)}));return this._progressService.showWhile(l,250),l}))}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}constructor(e,t,i,n,o,r,s){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=o,this._logService=r,this._configService=s,this._dispoableStore=new(0,gd.DisposableStore),this._cts=new(0,Gd.CancellationTokenSource),this._renameInputField=this._dispoableStore.add(new(0,hd.IdleValue)((()=>this._dispoableStore.add(this._instaService.createInstance(yD.RenameInputField,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}};MD.ID="editor.contrib.renameController",MD=AD([ID(1,Iu.IInstantiationService),ID(2,oh.INotificationService),ID(3,Yd.IBulkEditService),ID(4,cu.IEditorProgressService),ID(5,A_.ILogService),ID(6,DD.ITextResourceConfigurationService)],MD);class LD extends Uc.EditorAction{runCommand(e,t){const i=e.get(Od.ICodeEditorService),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return eu.URI.isUri(n)&&pd.Position.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),Jc.onUnexpectedError):super.runCommand(e,t)}run(e,t){const i=MD.get(t);return i?i.run():Promise.resolve()}constructor(){super({id:"editor.action.rename",label:Vc.localize("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:Zc.ContextKeyExpr.and($c.EditorContextKeys.writable,$c.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}}(0,Uc.registerEditorContribution)(MD.ID,MD),(0,Uc.registerEditorAction)(LD);const ND=Uc.EditorCommand.bindToContribution(MD.get);(0,Uc.registerEditorCommand)(new ND({id:"acceptRenameInput",precondition:yD.CONTEXT_RENAME_INPUT_VISIBLE,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:$c.EditorContextKeys.focus,primary:3}})),(0,Uc.registerEditorCommand)(new ND({id:"acceptRenameInputWithPreview",precondition:Zc.ContextKeyExpr.and(yD.CONTEXT_RENAME_INPUT_VISIBLE,Zc.ContextKeyExpr.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:$c.EditorContextKeys.focus,primary:1027}})),(0,Uc.registerEditorCommand)(new ND({id:"cancelRenameInput",precondition:yD.CONTEXT_RENAME_INPUT_VISIBLE,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:$c.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,Uc.registerModelAndPositionCommand)("_executeDocumentRenameProvider",(function(e,t,...i){const[n]=i;return(0,Mh.assertType)("string"==typeof n),function(e,t,i){return RD(this,void 0,void 0,(function*(){const n=new TD(e,t),o=yield n.resolveRenameLocation(Gd.CancellationToken.None);return(null==o?void 0:o.rejectReason)?{edits:[],rejectReason:o.rejectReason}:n.provideRenameEdits(i,Gd.CancellationToken.None)}))}(e,t,n)})),kD.Registry.as(ED.Extensions.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:Vc.localize("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});Qd=r("dD6PO"),Gd=r("7G83E"),Uc=r("kO85n"),pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),iu=r("ldsR3"),Vc=r("kMb12"),wd=r("4Nnjr"),fd=r("2KJrz"),Jd=r("aAfu1");du=r("cUien"),Jc=r("8bVMi");var OD=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class PD{mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new PD(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}constructor(e,t){this.index=e,this.ranges=t}}class FD{static get(e){return e.getContribution(FD.ID)}dispose(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}run(e){return OD(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(!iu.SelectionRangeRegistry.has(i))return;if(this._state||(yield jD(i,t.map((e=>e.getPosition())),this._editor.getOption(102),Gd.CancellationToken.None).then((e=>{var i;if(Qd.isNonEmptyArray(e)&&e.length===t.length&&this._editor.hasModel()&&Qd.equals(this._editor.getSelections(),t,((e,t)=>e.equalsSelection(t)))){for(let i=0;i<e.length;i++)e[i]=e[i].filter((e=>e.containsPosition(t[i].getStartPosition())&&e.containsPosition(t[i].getEndPosition()))),e[i].unshift(t[i]);this._state=e.map((e=>new PD(0,e))),null===(i=this._selectionListener)||void 0===i||i.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var e;this._ignoreSelection||(null===(e=this._selectionListener)||void 0===e||e.dispose(),this._state=void 0)}))}}))),!this._state)return;this._state=this._state.map((t=>t.mov(e)));const n=this._state.map((e=>qc.Selection.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(n)}finally{this._ignoreSelection=!1}}))}constructor(e){this._editor=e,this._ignoreSelection=!1}}FD.ID="editor.contrib.smartSelectController";class BD extends Uc.EditorAction{run(e,t){return OD(this,void 0,void 0,(function*(){let e=FD.get(t);e&&(yield e.run(this._forward))}))}constructor(e,t){super(t),this._forward=e}}du.CommandsRegistry.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");function jD(e,t,i,n){return OD(this,void 0,void 0,(function*(){const o=iu.SelectionRangeRegistry.all(e);1===o.length&&o.unshift(new(0,J_.BracketSelectionRangeProvider));let r=[],s=[];for(const i of o)r.push(Promise.resolve(i.provideSelectionRanges(e,t,n)).then((e=>{if(Qd.isNonEmptyArray(e)&&e.length===t.length)for(let i=0;i<t.length;i++){s[i]||(s[i]=[]);for(const n of e[i])fd.Range.isIRange(n.range)&&fd.Range.containsPosition(n.range,t[i])&&s[i].push(fd.Range.lift(n.range))}}),Jc.onUnexpectedExternalError));return yield Promise.all(r),s.map((t=>{if(0===t.length)return[];t.sort(((e,t)=>pd.Position.isBefore(e.getStartPosition(),t.getStartPosition())?1:pd.Position.isBefore(t.getStartPosition(),e.getStartPosition())||pd.Position.isBefore(e.getEndPosition(),t.getEndPosition())?-1:pd.Position.isBefore(t.getEndPosition(),e.getEndPosition())?1:0));let n,o=[];for(const e of t)(!n||fd.Range.containsRange(e,n)&&!fd.Range.equalsRange(e,n))&&(o.push(e),n=e);if(!i.selectLeadingAndTrailingWhitespace)return o;let r=[o[0]];for(let t=1;t<o.length;t++){const i=o[t-1],n=o[t];if(n.startLineNumber!==i.startLineNumber||n.endLineNumber!==i.endLineNumber){const t=new(0,fd.Range)(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineLastNonWhitespaceColumn(i.endLineNumber));t.containsRange(i)&&!t.equalsRange(i)&&n.containsRange(t)&&!n.equalsRange(t)&&r.push(t);const o=new(0,fd.Range)(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber));o.containsRange(i)&&!o.equalsRange(t)&&n.containsRange(o)&&!n.equalsRange(o)&&r.push(o)}r.push(n)}return r}))}))}(0,Uc.registerEditorContribution)(FD.ID,FD),(0,Uc.registerEditorAction)(class extends BD{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:Vc.localize("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"1_basic",title:Vc.localize({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}),(0,Uc.registerEditorAction)(class extends BD{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:Vc.localize("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:wd.MenuId.MenubarSelectionMenu,group:"1_basic",title:Vc.localize({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}),iu.SelectionRangeRegistry.register("*",new class{provideSelectionRanges(e,t){const i=[];for(const n of t){const t=[];i.push(t),this._addInWordRanges(t,e,n),this._addWordRanges(t,e,n),this._addWhitespaceLine(t,e,n),t.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const n=t.getWordAtPosition(i);if(!n)return;let{word:o,startColumn:r}=n,s=i.column-r,a=s,l=s,c=0;for(;a>=0;a--){let e=o.charCodeAt(a);if(a!==s&&(95===e||45===e))break;if((0,Jd.isLowerAsciiLetter)(e)&&(0,Jd.isUpperAsciiLetter)(c))break;c=e}for(a+=1;l<o.length;l++){let e=o.charCodeAt(l);if((0,Jd.isUpperAsciiLetter)(e)&&(0,Jd.isLowerAsciiLetter)(c))break;if(95===e||45===e)break;c=e}a<l&&e.push({range:new(0,fd.Range)(i.lineNumber,r+a,i.lineNumber,r+l)})}_addWordRanges(e,t,i){const n=t.getWordAtPosition(i);n&&e.push({range:new(0,fd.Range)(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(i.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(i.lineNumber)&&e.push({range:new(0,fd.Range)(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}),(0,Uc.registerModelCommand)("_executeSelectionRangeProvider",(function(e,...t){const[i]=t;return jD(e,i,{selectLeadingAndTrailingWhitespace:!0},Gd.CancellationToken.None)}));Vc=r("kMb12"),Uc=r("kO85n"),g_=r("6dNj6");class zD extends Uc.EditorAction{run(e,t){if(!t.hasModel())return;const i=t.getModel();i.resetTokenization();const n=new(0,g_.StopWatch)(!0);i.forceTokenization(i.getLineCount()),n.stop(),console.log(`tokenization took ${n.elapsed()}`)}constructor(){super({id:"editor.action.forceRetokenize",label:Vc.localize("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}}(0,Uc.registerEditorAction)(zD);Vc=r("kMb12"),id=r("gF77M"),Uc=r("kO85n");var WD=r("2gHUf");class HD extends Uc.EditorAction{run(e,t){const i=!WD.TabFocus.getTabFocusMode();WD.TabFocus.setTabFocusMode(i),i?(0,id.alert)(Vc.localize("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,id.alert)(Vc.localize("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}constructor(){super({id:HD.ID,label:Vc.localize({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}}HD.ID="editor.action.toggleTabFocusMode",(0,Uc.registerEditorAction)(HD);Vc=r("kMb12"),gd=r("ky1to"),Uc=r("kO85n"),Od=r("6AQ6e");var KD=r("6B8Ag"),UD=(lh=r("liPtJ"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),VD=function(e,t){return function(i,n){t(i,n,e)}},$D=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let qD=class extends gd.Disposable{_checkForUnusualLineTerminators(){return $D(this,void 0,void 0,(function*(){if("off"===this._config)return;if(!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators())return;const t=function(e,t){return e.getModelProperty(t.uri,"ignoreUnusualLineTerminators")}(this._codeEditorService,e);if(!0===t)return;if(this._editor.getOption(80))return;if("auto"===this._config)return void e.removeUnusualLineTerminators(this._editor.getSelections());(yield this._dialogService.confirm({title:Vc.localize("unusualLineTerminators.title","Unusual Line Terminators"),message:Vc.localize("unusualLineTerminators.message","Detected unusual line terminators"),detail:Vc.localize("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,lh.basename)(e.uri)),primaryButton:Vc.localize("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:Vc.localize("unusualLineTerminators.ignore","Ignore")})).confirmed?e.removeUnusualLineTerminators(this._editor.getSelections()):function(e,t,i){e.setModelProperty(t.uri,"ignoreUnusualLineTerminators",i)}(this._codeEditorService,e,!0)}))}constructor(e,t,i){super(),this._editor=e,this._dialogService=t,this._codeEditorService=i,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())}))),this._register(this._editor.onDidChangeModel((()=>{this._checkForUnusualLineTerminators()}))),this._register(this._editor.onDidChangeModelContent((e=>{e.isUndoing||this._checkForUnusualLineTerminators()})))}};qD.ID="editor.contrib.unusualLineTerminatorsDetector",qD=UD([VD(1,KD.IDialogService),VD(2,Od.ICodeEditorService)],qD),(0,Uc.registerEditorContribution)(qD.ID,qD);hd=r("hsQau"),gd=r("ky1to"),Uc=r("kO85n"),iu=r("ldsR3"),nu=r("cDtHV");var GD=r("b3VAG"),ZD=(yd=r("fmM7j"),lg=r("7JMrK"),r("8OOdX")),JD=r("dXG8C"),YD=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},XD=function(e,t){return function(i,n){t(i,n,e)}};let QD=class extends gd.Disposable{_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!(0,ZD.isSemanticColoringEnabled)(e,this._themeService,this._configurationService))return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));const t=(0,JD.getDocumentRangeSemanticTokensProvider)(e);if(!t)return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));const i=this._modelService.getSemanticTokensProviderStyling(t),n=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(n.map((n=>this._requestRange(e,n,t,i))))}_requestRange(e,t,i,n){const o=e.getVersionId(),r=(0,hd.createCancelablePromise)((n=>Promise.resolve(i.provideDocumentRangeSemanticTokens(e,t,n))));return r.then((i=>{i&&!e.isDisposed()&&e.getVersionId()===o&&e.setPartialSemanticTokens(t,(0,GD.toMultilineTokens2)(i,n,e.getLanguageIdentifier()))})).then((()=>this._removeOutstandingRequest(r)),(()=>this._removeOutstandingRequest(r))),r}constructor(e,t,i,n){super(),this._modelService=t,this._themeService=i,this._configurationService=n,this._editor=e,this._tokenizeViewport=new(0,hd.RunOnceScheduler)((()=>this._tokenizeViewportNow()),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange((()=>{this._tokenizeViewport.schedule()}))),this._register(this._editor.onDidChangeModel((()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(this._editor.onDidChangeModelContent((e=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(iu.DocumentRangeSemanticTokensProviderRegistry.onDidChange((()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(ZD.SEMANTIC_HIGHLIGHTING_SETTING_ID)&&(this._cancelAll(),this._tokenizeViewport.schedule())}))),this._register(this._themeService.onDidColorThemeChange((()=>{this._cancelAll(),this._tokenizeViewport.schedule()})))}};QD.ID="editor.contrib.viewportSemanticTokens",QD=YD([XD(1,nu.IModelService),XD(2,yd.IThemeService),XD(3,lg.IConfigurationService)],QD),(0,Uc.registerEditorContribution)(QD.ID,QD);Vc=r("kMb12"),Qd=r("dD6PO"),hd=r("hsQau"),Gd=r("7G83E"),Jc=r("8bVMi"),gd=r("ky1to"),Uc=r("kO85n"),fd=r("2KJrz"),$c=r("jb8ay"),md=r("gSqSV"),_d=r("gHDnG"),iu=r("ldsR3"),Zc=r("c5sLr"),vd=r("02ibr"),yd=r("fmM7j"),id=r("gF77M");var eA=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},tA=function(e,t){return function(i,n){t(i,n,e)}};const iA=(0,vd.registerColor)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},Vc.localize("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),nA=(0,vd.registerColor)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},Vc.localize("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),oA=(0,vd.registerColor)("editor.wordHighlightBorder",{light:null,dark:null,hc:vd.activeContrastBorder},Vc.localize("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),rA=(0,vd.registerColor)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:vd.activeContrastBorder},Vc.localize("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),sA=(0,vd.registerColor)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},Vc.localize("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),aA=(0,vd.registerColor)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},Vc.localize("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),lA=new(0,Zc.RawContextKey)("hasWordHighlights",!1);function cA(e,t,i){const n=iu.DocumentHighlightProviderRegistry.ordered(e);return(0,hd.first)(n.map((n=>()=>Promise.resolve(n.provideDocumentHighlights(e,t,i)).then(void 0,Jc.onUnexpectedExternalError))),Qd.isNonEmptyArray)}class dA{_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new(0,fd.Range)(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const n=t.startLineNumber,o=t.startColumn,r=t.endColumn,s=this._getCurrentWordRange(e,t);let a=Boolean(this._wordRange&&this._wordRange.equalsRange(s));for(let t=0,s=i.length;!a&&t<s;t++){let s=e.getDecorationRange(i[t]);s&&s.startLineNumber===n&&s.startColumn<=o&&s.endColumn>=r&&(a=!0)}return a}cancel(){this.result.cancel()}constructor(e,t,i){this._wordRange=this._getCurrentWordRange(e,t),this.result=(0,hd.createCancelablePromise)((n=>this._compute(e,t,i,n)))}}class uA extends dA{_compute(e,t,i,n){return cA(e,t.getPosition(),n).then((e=>e||[]))}}class hA extends dA{_compute(e,t,i,n){return(0,hd.timeout)(250,n).then((()=>{if(!t.isEmpty())return[];const n=e.getWordAtPosition(t.getPosition());if(!n||n.word.length>1e3)return[];return e.findMatches(n.word,!0,!1,!0,i,!1).map((e=>({range:e.range,kind:iu.DocumentHighlightKind.Text})))}))}isValid(e,t,i){const n=t.isEmpty();return this._selectionIsEmpty===n&&super.isValid(e,t,i)}constructor(e,t,i){super(e,t,i),this._selectionIsEmpty=t.isEmpty()}}(0,Uc.registerModelAndPositionCommand)("_executeDocumentHighlights",((e,t)=>cA(e,t,Gd.CancellationToken.None)));class gA{hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return Qd.coalesce(this._decorationIds.map((e=>this.model.getDecorationRange(e))).sort(fd.Range.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),t=(e.findIndex((e=>e.containsPosition(this.editor.getPosition())))+1)%e.length,i=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const n=this._getWord();if(n){const o=this.editor.getModel().getLineContent(i.startLineNumber);(0,id.alert)(`${o}, ${t+1} of ${e.length} for '${n.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),t=(e.findIndex((e=>e.containsPosition(this.editor.getPosition())))-1+e.length)%e.length,i=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const n=this._getWord();if(n){const o=this.editor.getModel().getLineContent(i.startLineNumber);(0,id.alert)(`${o}, ${t+1} of ${e.length} for '${n.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){this.occurrencesHighlight&&3===e.reason?this._run():this._stopAll()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:i})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber)return void this._stopAll();let t=e.startColumn,i=e.endColumn;const n=this._getWord();if(!n||n.startColumn>t||n.endColumn<i)return void this._stopAll();const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=(new Date).getTime(),o)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let e=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=(r=this.model,s=this.editor.getSelection(),a=this.editor.getOption(116),iu.DocumentHighlightProviderRegistry.has(r)?new uA(r,s,a):new hA(r,s,a)),this.workerRequest.result.then((t=>{e===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=t||[],this._beginRenderDecorations())}),Jc.onUnexpectedError)}var r,s,a}_beginRenderDecorations(){let e=(new Date).getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((()=>{this.renderDecorations()}),t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:gA._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===iu.DocumentHighlightKind.Write?this._WRITE_OPTIONS:e===iu.DocumentHighlightKind.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}constructor(e,t){this.toUnhook=new(0,gd.DisposableStore),this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=lA.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition((e=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(e)}))),this.toUnhook.add(e.onDidChangeModelContent((e=>{this._stopAll()}))),this.toUnhook.add(e.onDidChangeConfiguration((e=>{let t=this.editor.getOption(71);this.occurrencesHighlight!==t&&(this.occurrencesHighlight=t,this._stopAll())}))),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}}gA._WRITE_OPTIONS=_d.ModelDecorationOptions.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,yd.themeColorFromId)(aA),position:md.OverviewRulerLane.Center}}),gA._TEXT_OPTIONS=_d.ModelDecorationOptions.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,yd.themeColorFromId)(vd.overviewRulerSelectionHighlightForeground),position:md.OverviewRulerLane.Center}}),gA._REGULAR_OPTIONS=_d.ModelDecorationOptions.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,yd.themeColorFromId)(sA),position:md.OverviewRulerLane.Center}});let pA=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}saveViewState(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}constructor(e,t){super(),this.wordHighlighter=null;const i=()=>{e.hasModel()&&(this.wordHighlighter=new gA(e,t))};this._register(e.onDidChangeModel((e=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()}))),i()}};pA.ID="editor.contrib.wordHighlighter",pA=eA([tA(1,Zc.IContextKeyService)],pA);class fA extends Uc.EditorAction{run(e,t){const i=pA.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}constructor(e,t){super(t),this._isNext=e}}class mA extends Uc.EditorAction{run(e,t,i){const n=pA.get(t);n&&n.restoreViewState(!0)}constructor(){super({id:"editor.action.wordHighlight.trigger",label:Vc.localize("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:lA.toNegated(),kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:0,weight:100}})}}(0,Uc.registerEditorContribution)(pA.ID,pA),(0,Uc.registerEditorAction)(class extends fA{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:Vc.localize("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:lA,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:65,weight:100}})}}),(0,Uc.registerEditorAction)(class extends fA{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:Vc.localize("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:lA,kbOpts:{kbExpr:$c.EditorContextKeys.editorTextFocus,primary:1089,weight:100}})}}),(0,Uc.registerEditorAction)(mA),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorSelectionHighlight);i&&(t.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${i}; }`),t.addRule(`.monaco-editor .selectionHighlight { background-color: ${i.transparent(.5)}; }`));const n=e.getColor(iA);n&&t.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const o=e.getColor(nA);o&&t.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${o}; }`);const r=e.getColor(vd.editorSelectionHighlightBorder);r&&t.addRule(`.monaco-editor .selectionHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${r}; box-sizing: border-box; }`);const s=e.getColor(oA);s&&t.addRule(`.monaco-editor .wordHighlight { border: 1px ${"hc"===e.type?"dashed":"solid"} ${s}; box-sizing: border-box; }`);const a=e.getColor(rA);a&&t.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${"hc"===e.type?"dashed":"solid"} ${a}; box-sizing: border-box; }`)}));Vc=r("kMb12"),Uc=r("kO85n"),Id=r("jTJ7G"),em=r("44khe");var _A=r("aAgYW"),bA=r("3mvJj"),vA=(pd=r("dLnDZ"),fd=r("2KJrz"),qc=r("do14f"),$c=r("jb8ay"),Og=r("2RRIG"),Zc=r("c5sLr"),Jf=r("kNKTn"),$m=r("gesUy"),r("jFlVt"));class yA extends Uc.EditorCommand{runEditorCommand(e,t,i){if(!t.hasModel())return;const n=(0,bA.getMapForWordSeparators)(t.getOption(116)),o=t.getModel(),r=t.getSelections().map((e=>{const t=new(0,pd.Position)(e.positionLineNumber,e.positionColumn),i=this._move(n,o,t,this._wordNavigationType);return this._moveTo(e,i,this._inSelectionMode)}));if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,r.map((e=>em.CursorState.fromModelSelection(e)))),1===r.length){const e=new(0,pd.Position)(r[0].positionLineNumber,r[0].positionColumn);t.revealPosition(e,0)}}_moveTo(e,t,i){return i?new(0,qc.Selection)(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new(0,qc.Selection)(t.lineNumber,t.column,t.lineNumber,t.column)}constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}}class wA extends yA{_move(e,t,i,n){return _A.WordOperations.moveWordLeft(e,t,i,n)}}class CA extends yA{_move(e,t,i,n){return _A.WordOperations.moveWordRight(e,t,i,n)}}class xA extends Uc.EditorCommand{runEditorCommand(e,t,i){if(!t.hasModel())return;const n=(0,bA.getMapForWordSeparators)(t.getOption(116)),o=t.getModel(),r=t.getSelections(),s=t.getOption(5),a=t.getOption(8),l=$m.LanguageConfigurationRegistry.getAutoClosingPairs(o.getLanguageIdentifier().id),c=t._getViewModel(),d=r.map((e=>{const i=this._delete({wordSeparators:n,model:o,selection:e,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:s,autoClosingQuotes:a,autoClosingPairs:l,autoClosedCharacters:c.getCursorAutoClosedCharacters()},this._wordNavigationType);return new(0,Id.ReplaceCommand)(i,"")}));t.pushUndoStop(),t.executeCommands(this.id,d),t.pushUndoStop()}constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}}class SA extends xA{_delete(e,t){let i=_A.WordOperations.deleteWordLeft(e,t);return i||new(0,fd.Range)(1,1,1,1)}}class kA extends xA{_delete(e,t){let i=_A.WordOperations.deleteWordRight(e,t);if(i)return i;const n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new(0,fd.Range)(n,o,n,o)}}class EA extends Uc.EditorAction{run(e,t,i){if(!t.hasModel())return;const n=(0,bA.getMapForWordSeparators)(t.getOption(116)),o=t.getModel(),r=t.getSelections().map((e=>{const t=_A.WordOperations.deleteInsideWord(n,o,e);return new(0,Id.ReplaceCommand)(t,"")}));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}constructor(){super({id:"deleteInsideWord",precondition:$c.EditorContextKeys.writable,label:Vc.localize("deleteInsideWord","Delete Word"),alias:"Delete Word"})}}(0,Uc.registerEditorCommand)(new class extends wA{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,null===(e=Zc.ContextKeyExpr.and(Og.CONTEXT_ACCESSIBILITY_MODE_ENABLED,vA.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends wA{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,null===(e=Zc.ContextKeyExpr.and(Og.CONTEXT_ACCESSIBILITY_MODE_ENABLED,vA.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,null===(e=Zc.ContextKeyExpr.and(Og.CONTEXT_ACCESSIBILITY_MODE_ENABLED,vA.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Zc.ContextKeyExpr.and($c.EditorContextKeys.textInputFocus,null===(e=Zc.ContextKeyExpr.and(Og.CONTEXT_ACCESSIBILITY_MODE_ENABLED,vA.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends CA{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{_move(e,t,i,n){return super._move((0,bA.getMapForWordSeparators)(Jf.EditorOptions.wordSeparators.defaultValue),t,i,n)}constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends wA{_move(e,t,i,n){return super._move((0,bA.getMapForWordSeparators)(Jf.EditorOptions.wordSeparators.defaultValue),t,i,n)}constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends CA{_move(e,t,i,n){return super._move((0,bA.getMapForWordSeparators)(Jf.EditorOptions.wordSeparators.defaultValue),t,i,n)}constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends CA{_move(e,t,i,n){return super._move((0,bA.getMapForWordSeparators)(Jf.EditorOptions.wordSeparators.defaultValue),t,i,n)}constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}}),(0,Uc.registerEditorCommand)(new class extends SA{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorCommand)(new class extends SA{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorCommand)(new class extends SA{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends kA{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorCommand)(new class extends kA{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:$c.EditorContextKeys.writable})}}),(0,Uc.registerEditorCommand)(new class extends kA{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}),(0,Uc.registerEditorAction)(EA);Uc=r("kO85n"),_A=r("aAgYW"),fd=r("2KJrz"),$c=r("jb8ay"),du=r("cUien");class DA extends yA{_move(e,t,i,n){return _A.WordPartOperations.moveWordPartLeft(e,t,i)}}du.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");du.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class AA extends yA{_move(e,t,i,n){return _A.WordPartOperations.moveWordPartRight(e,t,i)}}(0,Uc.registerEditorCommand)(new class extends xA{_delete(e,t){let i=_A.WordPartOperations.deleteWordPartLeft(e);return i||new(0,fd.Range)(1,1,1,1)}constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:769},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends xA{_delete(e,t){let i=_A.WordPartOperations.deleteWordPartRight(e);if(i)return i;const n=e.model.getLineCount(),o=e.model.getLineMaxColumn(n);return new(0,fd.Range)(n,o,n,o)}constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:$c.EditorContextKeys.writable,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:788},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends DA{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends DA{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends AA{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}),(0,Uc.registerEditorCommand)(new class extends AA{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}),r("6YVHO"),r("hC6do");Tu=r("2cxKt");var IA=r("luuCg"),RA=(wf=r("4SWFB"),id=r("gF77M"),mg=r("lAQ7r"),gd=r("ky1to"),Ld=r("drE9L"),Jd=r("aAfu1"),eu=r("avLBk"),Uc=r("kO85n"),$c=r("jb8ay"),Zc=r("c5sLr"),Iu=r("cwJE1"),Nu=r("5TiFM"),xg=r("kqjci"),vd=r("02ibr"),yd=r("fmM7j"),r("6YVHO")),TA=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},MA=function(e,t){return function(i,n){t(i,n,e)}};const LA=new(0,Zc.RawContextKey)("accessibilityHelpWidgetVisible",!1);let NA=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}show(){this._widget.show()}hide(){this._widget.hide()}constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(OA,this._editor))}};NA.ID="editor.contrib.accessibilityHelpController",NA=TA([MA(1,Iu.IInstantiationService)],NA);let OA=class e extends mg.Widget{dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return e.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,i){let n=this._keybindingService.lookupKeybinding(e);return n?Jd.format(t,n.getAriaLabel()):Jd.format(i,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let i=0;if(t){const e=this._editor.getModel();e&&t.forEach((t=>{i+=e.getValueLengthInRange(t)}))}let n=function(e,t){return e&&0!==e.length?1===e.length?t?Jd.format(RA.AccessibilityHelpNLS.singleSelectionRange,e[0].positionLineNumber,e[0].positionColumn,t):Jd.format(RA.AccessibilityHelpNLS.singleSelection,e[0].positionLineNumber,e[0].positionColumn):t?Jd.format(RA.AccessibilityHelpNLS.multiSelectionRange,e.length,t):e.length>0?Jd.format(RA.AccessibilityHelpNLS.multiSelection,e.length):"":RA.AccessibilityHelpNLS.noSelection}(t,i);e.get(53)?e.get(80)?n+=RA.AccessibilityHelpNLS.readonlyDiffEditor:n+=RA.AccessibilityHelpNLS.editableDiffEditor:e.get(80)?n+=RA.AccessibilityHelpNLS.readonlyEditor:n+=RA.AccessibilityHelpNLS.editableEditor;const o=Ld.isMacintosh?RA.AccessibilityHelpNLS.changeConfigToOnMac:RA.AccessibilityHelpNLS.changeConfigToOnWinLinux;switch(e.get(2)){case 0:n+="\n\n - "+o;break;case 2:n+="\n\n - "+RA.AccessibilityHelpNLS.auto_on;break;case 1:n+="\n\n - "+RA.AccessibilityHelpNLS.auto_off,n+=" "+o}e.get(129)?n+="\n\n - "+this._descriptionForCommand(HD.ID,RA.AccessibilityHelpNLS.tabFocusModeOnMsg,RA.AccessibilityHelpNLS.tabFocusModeOnMsgNoKb):n+="\n\n - "+this._descriptionForCommand(HD.ID,RA.AccessibilityHelpNLS.tabFocusModeOffMsg,RA.AccessibilityHelpNLS.tabFocusModeOffMsgNoKb);n+="\n\n - "+(Ld.isMacintosh?RA.AccessibilityHelpNLS.openDocMac:RA.AccessibilityHelpNLS.openDocWinLinux),n+="\n\n"+RA.AccessibilityHelpNLS.outroMsg,this._contentDomNode.domNode.appendChild((0,wf.renderFormattedText)(n)),this._contentDomNode.domNode.setAttribute("aria-label",n)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Tu.clearNode(this._contentDomNode.domNode),this._editor.focus())}_layout(){let t=this._editor.getLayoutInfo(),i=Math.max(5,Math.min(e.WIDTH,t.width-40)),n=Math.max(5,Math.min(e.HEIGHT,t.height-40));this._domNode.setWidth(i),this._domNode.setHeight(n);let o=Math.round((t.height-n)/2);this._domNode.setTop(o);let r=Math.round((t.width-i)/2);this._domNode.setLeft(r)}constructor(e,t,i,n){super(),this._contextKeyService=t,this._keybindingService=i,this._openerService=n,this._editor=e,this._isVisibleKey=LA.bindTo(this._contextKeyService),this._domNode=(0,IA.createFastDomNode)(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=(0,IA.createFastDomNode)(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange((()=>{this._isVisible&&this._layout()}))),this._register(Tu.addStandardDisposableListener(this._contentDomNode.domNode,"keydown",(e=>{if(this._isVisible&&(e.equals(2083)&&((0,id.alert)(RA.AccessibilityHelpNLS.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),Tu.clearNode(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),e.preventDefault(),e.stopPropagation()),e.equals(2086))){(0,id.alert)(RA.AccessibilityHelpNLS.openingDocs);let t=this._editor.getRawOptions().accessibilityHelpUrl;void 0===t&&(t="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(eu.URI.parse(t)),e.preventDefault(),e.stopPropagation()}}))),this.onblur(this._contentDomNode.domNode,(()=>{this.hide()})),this._editor.addOverlayWidget(this)}};OA.ID="editor.contrib.accessibilityHelpWidget",OA.WIDTH=500,OA.HEIGHT=300,OA=TA([MA(1,Zc.IContextKeyService),MA(2,Nu.IKeybindingService),MA(3,xg.IOpenerService)],OA);class PA extends Uc.EditorAction{run(e,t){let i=NA.get(t);i&&i.show()}constructor(){super({id:"editor.action.showAccessibilityHelp",label:RA.AccessibilityHelpNLS.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}}(0,Uc.registerEditorContribution)(NA.ID,NA),(0,Uc.registerEditorAction)(PA);const FA=Uc.EditorCommand.bindToContribution(NA.get);(0,Uc.registerEditorCommand)(new FA({id:"closeAccessibilityHelp",precondition:LA,handler:e=>e.hide(),kbOpts:{weight:200,kbExpr:$c.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorWidgetBackground);i&&t.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${i}; }`);const n=e.getColor(vd.editorWidgetForeground);n&&t.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const o=e.getColor(vd.widgetShadow);o&&t.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${o}; }`);const r=e.getColor(vd.contrastBorder);r&&t.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${r}; }`)}));Tu=r("2cxKt"),gd=r("ky1to"),Uc=r("kO85n"),Ld=r("drE9L");class BA extends gd.Disposable{update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new jA(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}constructor(e){super(),this.editor=e,this.widget=null,Ld.isIOS&&(this._register(e.onDidChangeConfiguration((()=>this.update()))),this.update())}}BA.ID="editor.contrib.iPadShowKeyboard";class jA extends gd.Disposable{dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return jA.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(Tu.addDisposableListener(this._domNode,"touchstart",(e=>{this.editor.focus()}))),this._register(Tu.addDisposableListener(this._domNode,"focus",(e=>{this.editor.focus()}))),this.editor.addOverlayWidget(this)}}jA.ID="editor.contrib.ShowKeyboardWidget",(0,Uc.registerEditorContribution)(BA.ID,BA);Tu=r("2cxKt"),rg=r("jyVY7"),gd=r("ky1to"),Uc=r("kO85n"),iu=r("ldsR3");var zA=r("asbRr"),WA=(gg=r("apdYP"),r("igxAV")),HA=(vd=r("02ibr"),yd=r("fmM7j"),RA=r("6YVHO"),xu=r("bSm4w"),function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}),KA=function(e,t){return function(i,n){t(i,n,e)}};let UA=class e extends gd.Disposable{static get(t){return t.getContribution(e.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new $A(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}constructor(e,t,i){super(),this._editor=e,this._modeService=i,this._widget=null,this._register(this._editor.onDidChangeModel((e=>this.stop()))),this._register(this._editor.onDidChangeModelLanguage((e=>this.stop()))),this._register(iu.TokenizationRegistry.onDidChange((e=>this.stop()))),this._register(this._editor.onKeyUp((e=>9===e.keyCode&&this.stop())))}};UA.ID="editor.contrib.inspectTokens",UA=HA([KA(1,WA.IStandaloneThemeService),KA(2,gg.IModeService)],UA);class VA extends Uc.EditorAction{run(e,t){let i=UA.get(t);i&&i.launch()}constructor(){super({id:"editor.action.inspectTokens",label:RA.InspectTokensNLS.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}}class $A extends gd.Disposable{dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return $A._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),i=0;for(let n=t.tokens1.length-1;n>=0;n--){let o=t.tokens1[n];if(e.column-1>=o.offset){i=n;break}}let n=0;for(let i=t.tokens2.length>>>1;i>=0;i--)if(e.column-1>=t.tokens2[i<<1]){n=i;break}let o=this._model.getLineContent(e.lineNumber),r="";if(i<t.tokens1.length){let e=t.tokens1[i].offset,n=i+1<t.tokens1.length?t.tokens1[i+1].offset:o.length;r=o.substring(e,n)}(0,Tu.reset)(this._domNode,(0,Tu.$)("h2.tm-token",void 0,function(e){let t="";for(let i=0,n=e.length;i<n;i++){let n=e.charCodeAt(i);switch(n){case 9:t+="→";break;case 32:t+="·";break;default:t+=String.fromCharCode(n)}}return t}(r),(0,Tu.$)("span.tm-token-length",void 0,`${r.length} ${1===r.length?"char":"chars"}`))),(0,Tu.append)(this._domNode,(0,Tu.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const s=1+(n<<1)<t.tokens2.length?this._decodeMetadata(t.tokens2[1+(n<<1)]):null;(0,Tu.append)(this._domNode,(0,Tu.$)("table.tm-metadata-table",void 0,(0,Tu.$)("tbody",void 0,(0,Tu.$)("tr",void 0,(0,Tu.$)("td.tm-metadata-key",void 0,"language"),(0,Tu.$)("td.tm-metadata-value",void 0,`${s?s.languageIdentifier.language:"-?-"}`)),(0,Tu.$)("tr",void 0,(0,Tu.$)("td.tm-metadata-key",void 0,"token type"),(0,Tu.$)("td.tm-metadata-value",void 0,`${s?this._tokenTypeToString(s.tokenType):"-?-"}`)),(0,Tu.$)("tr",void 0,(0,Tu.$)("td.tm-metadata-key",void 0,"font style"),(0,Tu.$)("td.tm-metadata-value",void 0,`${s?this._fontStyleToString(s.fontStyle):"-?-"}`)),(0,Tu.$)("tr",void 0,(0,Tu.$)("td.tm-metadata-key",void 0,"foreground"),(0,Tu.$)("td.tm-metadata-value",void 0,`${s?rg.Color.Format.CSS.formatHex(s.foreground):"-?-"}`)),(0,Tu.$)("tr",void 0,(0,Tu.$)("td.tm-metadata-key",void 0,"background"),(0,Tu.$)("td.tm-metadata-value",void 0,`${s?rg.Color.Format.CSS.formatHex(s.background):"-?-"}`))))),(0,Tu.append)(this._domNode,(0,Tu.$)("hr.tokens-inspect-separator")),i<t.tokens1.length&&(0,Tu.append)(this._domNode,(0,Tu.$)("span.tm-token-type",void 0,t.tokens1[i].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=iu.TokenizationRegistry.getColorMap(),i=iu.TokenMetadata.getLanguageId(e),n=iu.TokenMetadata.getTokenType(e),o=iu.TokenMetadata.getFontStyle(e),r=iu.TokenMetadata.getForeground(e),s=iu.TokenMetadata.getBackground(e);return{languageIdentifier:this._modeService.getLanguageIdentifier(i),tokenType:n,fontStyle:o,foreground:t[r],background:t[s]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),0===t.length&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),i=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),n=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:i.tokens,tokens2:n.tokens,endState:i.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let i=1;i<e;i++){t=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,t,0).endState}return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}constructor(e,t){var i;super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=(i=this._model.getLanguageIdentifier(),iu.TokenizationRegistry.get(i.language)||{getInitialState:()=>zA.NULL_STATE,tokenize:(e,t,n,o)=>(0,zA.nullTokenize)(i.language,e,n,o),tokenize2:(e,t,n,o)=>(0,zA.nullTokenize2)(i.id,e,n,o)}),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition((e=>this._compute(this._editor.getPosition())))),this._editor.addContentWidget(this)}}$A._ID="editor.contrib.inspectTokensWidget",(0,Uc.registerEditorContribution)(UA.ID,UA),(0,Uc.registerEditorAction)(VA),(0,yd.registerThemingParticipant)(((e,t)=>{const i=e.getColor(vd.editorHoverBorder);if(i){let n=e.type===xu.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(`.monaco-editor .tokens-inspect-widget { border: ${n}px solid ${i}; }`),t.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${i}; }`)}const n=e.getColor(vd.editorHoverBackground);n&&t.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const o=e.getColor(vd.editorHoverForeground);o&&t.addRule(`.monaco-editor .tokens-inspect-widget { color: ${o}; }`)}));kD=r("fyF5L");var qA=r("35KYa"),GA=(RA=r("6YVHO"),{});e(GA,"HelpQuickAccessProvider",(function(){return YA}),(function(e){return YA=e}));gd=r("ky1to"),Vc=r("kMb12"),qA=r("35KYa"),Xh=r("b1c9q"),kD=r("fyF5L");var ZA=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},JA=function(e,t){return function(i,n){t(i,n,e)}};let YA=class e{provide(t){const i=new(0,gd.DisposableStore);i.add(t.onDidAccept((()=>{const[e]=t.selectedItems;e&&this.quickInputService.quickAccess.show(e.prefix,{preserveValue:!0})}))),i.add(t.onDidChangeValue((t=>{const i=this.registry.getQuickAccessProvider(t.substr(e.PREFIX.length));i&&i.prefix&&i.prefix!==e.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})));const{editorProviders:n,globalProviders:o}=this.getQuickAccessProviders();return t.items=0===n.length||0===o.length?[...0===n.length?o:n]:[{label:(0,Vc.localize)("globalCommands","global commands"),type:"separator"},...o,{label:(0,Vc.localize)("editorCommands","editor commands"),type:"separator"},...n],i}getQuickAccessProviders(){const t=[],i=[];for(const n of this.registry.getQuickAccessProviders().sort(((e,t)=>e.prefix.localeCompare(t.prefix))))if(n.prefix!==e.PREFIX)for(const e of n.helpEntries){const o=e.prefix||n.prefix,r=o||"…";(e.needsEditor?i:t).push({prefix:o,label:r,ariaLabel:(0,Vc.localize)("helpPickAriaLabel","{0}, {1}",r,e.description),description:e.description})}return{editorProviders:i,globalProviders:t}}constructor(e){this.quickInputService=e,this.registry=kD.Registry.as(qA.Extensions.Quickaccess)}};YA.PREFIX="?",YA=ZA([JA(0,Xh.IQuickInputService)],YA),kD.Registry.as(qA.Extensions.Quickaccess).registerQuickAccessProvider({ctor:GA.HelpQuickAccessProvider,prefix:"",helpEntries:[{description:RA.QuickHelpNLS.helpQuickAccessActionLabel,needsEditor:!0}]});Vc=r("kMb12"),gd=r("ky1to"),md=r("gSqSV"),yd=r("fmM7j"),bd=r("ewsQ6"),gd=r("ky1to"),iw=r("fXLrS"),Mh=r("5jjji"),Vh=r("cOD9b");class XA{provide(e,t){var i;const n=new(0,gd.DisposableStore);e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=n.add(new(0,gd.MutableDisposable));return o.value=this.doProvide(e,t),n.add(this.onDidActiveTextEditorControlChange((()=>{o.value=void 0,o.value=this.doProvide(e,t)}))),n}doProvide(e,t){const i=new(0,gd.DisposableStore),n=this.activeTextEditorControl;if(n&&this.canProvideWithTextEditor(n)){const o={editor:n},r=(0,iw.getCodeEditor)(n);if(r){let e=(0,Mh.withNullAsUndefined)(n.saveViewState());i.add(r.onDidChangeCursorPosition((()=>{e=(0,Mh.withNullAsUndefined)(n.saveViewState())}))),o.restoreViewState=()=>{e&&n===this.activeTextEditorControl&&n.restoreViewState(e)},i.add((0,Vh.once)(t.onCancellationRequested)((()=>{var e;return null===(e=o.restoreViewState)||void 0===e?void 0:e.call(o)})))}i.add((0,gd.toDisposable)((()=>this.clearDecorations(n)))),i.add(this.provideWithTextEditor(o,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return(0,iw.isDiffEditor)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations((e=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const n=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,yd.themeColorFromId)(bd.overviewRulerRangeHighlight),position:md.OverviewRulerLane.Full}}}],[o,r]=e.deltaDecorations(i,n);this.rangeHighlightDecorationId={rangeHighlightId:o,overviewRulerDecorationId:r}}))}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}}iw=r("fXLrS");class QA extends XA{provideWithoutTextEditor(e){const t=(0,Vc.localize)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,gd.Disposable.None}provideWithTextEditor(e,t,i){const n=e.editor,o=new(0,gd.DisposableStore);o.add(t.onDidAccept((i=>{const[o]=t.selectedItems;if(o){if(!this.isValidLineNumber(n,o.lineNumber))return;this.gotoLocation(e,{range:this.toRange(o.lineNumber,o.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}})));const r=()=>{const e=this.parsePosition(n,t.value.trim().substr(QA.PREFIX.length)),i=this.getPickLabel(n,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(n,e.lineNumber))return void this.clearDecorations(n);const o=this.toRange(e.lineNumber,e.column);n.revealRangeInCenter(o,0),this.addDecorations(n,o)};r(),o.add(t.onDidChangeValue((()=>r())));const s=(0,iw.getCodeEditor)(n);if(s){2===s.getOptions().get(59).renderType&&(s.updateOptions({lineNumbers:"on"}),o.add((0,gd.toDisposable)((()=>s.updateOptions({lineNumbers:"relative"})))))}return o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),n=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:n+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,Vc.localize)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,Vc.localize)("gotoLineLabel","Go to line {0}.",t);const n=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?(0,Vc.localize)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,o):(0,Vc.localize)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(e,t){return!(!t||"number"!=typeof t)&&(t>0&&t<=this.lineCount(e))}isValidColumn(e,t,i){if(!i||"number"!=typeof i)return!1;const n=this.getModel(e);if(!n)return!1;const o={lineNumber:t,column:i};return n.validatePosition(o).equals(o)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}constructor(){super({canAcceptInBackground:!0})}}QA.PREFIX=":";kD=r("fyF5L"),qA=r("35KYa"),Od=r("6AQ6e"),Mh=r("5jjji"),RA=r("6YVHO"),Uu=r("7bUGH"),Uc=r("kO85n"),$c=r("jb8ay"),Xh=r("b1c9q");var eI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},tI=function(e,t){return function(i,n){t(i,n,e)}};let iI=class extends QA{get activeTextEditorControl(){return(0,Mh.withNullAsUndefined)(this.editorService.getFocusedCodeEditor())}constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Uu.Event.None}};iI=eI([tI(0,Od.ICodeEditorService)],iI),kD.Registry.as(qA.Extensions.Quickaccess).registerQuickAccessProvider({ctor:iI,prefix:iI.PREFIX,helpEntries:[{description:RA.GoToLineNLS.gotoLineActionLabel,needsEditor:!0}]});class nI extends Uc.EditorAction{run(e){e.get(Xh.IQuickInputService).quickAccess.show(iI.PREFIX)}constructor(){super({id:"editor.action.gotoLine",label:RA.GoToLineNLS.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:2085,mac:{primary:293},weight:100}})}}(0,Uc.registerEditorAction)(nI),r("hC6do");var oI={};e(oI,"AbstractGotoSymbolQuickAccessProvider",(function(){return fI}),(function(e){return fI=e}));Vc=r("kMb12"),Gd=r("7G83E"),gd=r("ky1to"),fd=r("2KJrz"),iu=r("ldsR3"),Jd=r("aAfu1"),h_=r("7DFs7"),Vm=r("9d4PW"),Ld=r("drE9L"),Jd=r("aAfu1");const rI=[void 0,[]];function sI(e,t,i=0,n=0){const o=t;return o.values&&o.values.length>1?function(e,t,i,n){let o=0;const r=[];for(const s of t){const[t,a]=aI(e,s,i,n);if("number"!=typeof t)return rI;o+=t,r.push(...a)}return[o,lI(r)]}(e,o.values,i,n):aI(e,t,i,n)}function aI(e,t,i,n){const o=(0,h_.fuzzyScore)(t.original,t.originalLowercase,i,e,e.toLowerCase(),n,!0);return o?[o[0],(0,h_.createMatches)(o)]:rI}function lI(e){const t=e.sort(((e,t)=>e.start-t.start)),i=[];let n;for(const e of t)n&&cI(n,e)?(n.start=Math.min(n.start,e.start),n.end=Math.max(n.end,e.end)):(n=e,i.push(e));return i}function cI(e,t){return!(e.end<t.start)&&!(t.end<e.start)}function dI(e){return e.startsWith('"')&&e.endsWith('"')}function uI(e){"string"!=typeof e&&(e="");const t=e.toLowerCase(),{pathNormalized:i,normalized:n,normalizedLowercase:o}=hI(e),r=i.indexOf(Vm.sep)>=0,s=dI(e);let a;const l=e.split(" ");if(l.length>1)for(const e of l){const t=dI(e),{pathNormalized:i,normalized:n,normalizedLowercase:o}=hI(e);n&&(a||(a=[]),a.push({original:e,originalLowercase:e.toLowerCase(),pathNormalized:i,normalized:n,normalizedLowercase:o,expectContiguousMatch:t}))}return{original:e,originalLowercase:t,pathNormalized:i,normalized:n,normalizedLowercase:o,values:a,containsPathSeparator:r,expectContiguousMatch:s}}function hI(e){let t;t=Ld.isWindows?e.replace(/\//g,Vm.sep):e.replace(/\\/g,Vm.sep);const i=(0,Jd.stripWildcards)(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:i,normalizedLowercase:i.toLowerCase()}}function gI(e){return Array.isArray(e)?uI(e.map((e=>e.original)).join(" ")):uI(e.original)}$u=r("kWoyS");var pI=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class fI extends XA{provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,Vc.localize)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),gd.Disposable.None}provideWithTextEditor(e,t,i){const n=e.editor,o=this.getModel(n);return o?iu.DocumentSymbolProviderRegistry.has(o)?this.doProvideWithEditorSymbols(e,o,t,i):this.doProvideWithoutEditorSymbols(e,o,t,i):gd.Disposable.None}doProvideWithoutEditorSymbols(e,t,i,n){const o=new(0,gd.DisposableStore);return this.provideLabelPick(i,(0,Vc.localize)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(()=>{pI(this,void 0,void 0,(function*(){(yield this.waitForLanguageSymbolRegistry(t,o))&&!n.isCancellationRequested&&o.add(this.doProvideWithEditorSymbols(e,t,i,n))}))})(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return pI(this,void 0,void 0,(function*(){if(iu.DocumentSymbolProviderRegistry.has(e))return!0;let i;const n=new Promise((e=>i=e)),o=t.add(iu.DocumentSymbolProviderRegistry.onDidChange((()=>{iu.DocumentSymbolProviderRegistry.has(e)&&(o.dispose(),i(!0))})));return t.add((0,gd.toDisposable)((()=>i(!1)))),n}))}doProvideWithEditorSymbols(e,t,i,n){const o=e.editor,r=new(0,gd.DisposableStore);r.add(i.onDidAccept((t=>{const[n]=i.selectedItems;n&&n.range&&(this.gotoLocation(e,{range:n.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())}))),r.add(i.onDidTriggerItemButton((({item:t})=>{t&&t.range&&(this.gotoLocation(e,{range:t.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));const s=this.getDocumentSymbols(t,n);let a;const l=()=>pI(this,void 0,void 0,(function*(){null==a||a.dispose(!0),i.busy=!1,a=new(0,Gd.CancellationTokenSource)(n),i.busy=!0;try{const e=uI(i.value.substr(fI.PREFIX.length).trim()),t=yield this.doGetSymbolPicks(s,e,void 0,a.token);if(n.isCancellationRequested)return;t.length>0?i.items=t:e.original.length>0?this.provideLabelPick(i,(0,Vc.localize)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,Vc.localize)("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}}));r.add(i.onDidChangeValue((()=>l()))),l();let c=!0;return r.add(i.onDidChangeActive((()=>{const[e]=i.activeItems;if(e&&e.range){if(c)return void(c=!1);o.revealRangeInCenter(e.range.selection,0),this.addDecorations(o,e.range.decoration)}}))),r}doGetSymbolPicks(e,t,i,n){return pI(this,void 0,void 0,(function*(){const o=yield e;if(n.isCancellationRequested)return[];const r=0===t.original.indexOf(fI.SCOPE_PREFIX),s=r?1:0;let a,l;t.values&&t.values.length>1?(a=gI(t.values[0]),l=gI(t.values.slice(1))):a=t;const c=[];for(let h=0;h<o.length;h++){const g=o[h],p=(0,Jd.trim)(g.name),f=`$(symbol-${iu.SymbolKinds.toString(g.kind)||"property"}) ${p}`,m=f.length-p.length;let _,b,v,y,w=g.containerName;if((null==i?void 0:i.extraContainerLabel)&&(w=w?`${i.extraContainerLabel} • ${w}`:i.extraContainerLabel),t.original.length>s){let x=!1;if(a!==t&&([_,b]=sI(f,Object.assign(Object.assign({},t),{values:void 0}),s,m),"number"==typeof _&&(x=!0)),"number"!=typeof _&&([_,b]=sI(f,a,s,m),"number"!=typeof _))continue;if(!x&&l){if(w&&l.original.length>0&&([v,y]=sI(w,l)),"number"!=typeof v)continue;"number"==typeof _&&(_+=v)}}const C=g.tags&&g.tags.indexOf(1)>=0;c.push({index:h,kind:g.kind,score:_,label:f,ariaLabel:p,description:w,highlights:C?void 0:{label:b,description:y},range:{selection:fd.Range.collapseToStart(g.selectionRange),decoration:g.range},strikethrough:C,buttons:(()=>{var e,t;const i=(null===(e=this.options)||void 0===e?void 0:e.openSideBySideDirection)?null===(t=this.options)||void 0===t?void 0:t.openSideBySideDirection():void 0;if(i)return[{iconClass:"right"===i?$u.Codicon.splitHorizontal.classNames:$u.Codicon.splitVertical.classNames,tooltip:"right"===i?(0,Vc.localize)("openToSide","Open to the Side"):(0,Vc.localize)("openToBottom","Open to the Bottom")}]})()})}const d=c.sort(((e,t)=>r?this.compareByKindAndScore(e,t):this.compareByScore(e,t)));let u=[];if(r){let S,k,E=0;function D(){k&&"number"==typeof S&&E>0&&(k.label=(0,Jd.format)(_I[S]||mI,E))}for(const A of d)S!==A.kind?(D(),S=A.kind,E=1,k={type:"separator"},u.push(k)):E++,u.push(A);D()}else d.length>0&&(u=[{label:(0,Vc.localize)("symbols","symbols ({0})",c.length),type:"separator"},...d]);return u}))}compareByScore(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return-1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=_I[e.kind]||mI,n=_I[t.kind]||mI,o=i.localeCompare(n);return 0===o?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return pI(this,void 0,void 0,(function*(){const i=yield mk.create(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}))}constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}}fI.PREFIX="@",fI.SCOPE_PREFIX=":",fI.PREFIX_BY_CATEGORY=`${fI.PREFIX}${fI.SCOPE_PREFIX}`;const mI=(0,Vc.localize)("property","properties ({0})"),_I={5:(0,Vc.localize)("method","methods ({0})"),11:(0,Vc.localize)("function","functions ({0})"),8:(0,Vc.localize)("_constructor","constructors ({0})"),12:(0,Vc.localize)("variable","variables ({0})"),4:(0,Vc.localize)("class","classes ({0})"),22:(0,Vc.localize)("struct","structs ({0})"),23:(0,Vc.localize)("event","events ({0})"),24:(0,Vc.localize)("operator","operators ({0})"),10:(0,Vc.localize)("interface","interfaces ({0})"),2:(0,Vc.localize)("namespace","namespaces ({0})"),3:(0,Vc.localize)("package","packages ({0})"),25:(0,Vc.localize)("typeParameter","type parameters ({0})"),1:(0,Vc.localize)("modules","modules ({0})"),6:(0,Vc.localize)("property","properties ({0})"),9:(0,Vc.localize)("enum","enumerations ({0})"),21:(0,Vc.localize)("enumMember","enumeration members ({0})"),14:(0,Vc.localize)("string","strings ({0})"),0:(0,Vc.localize)("file","files ({0})"),17:(0,Vc.localize)("array","arrays ({0})"),15:(0,Vc.localize)("number","numbers ({0})"),16:(0,Vc.localize)("boolean","booleans ({0})"),18:(0,Vc.localize)("object","objects ({0})"),19:(0,Vc.localize)("key","keys ({0})"),7:(0,Vc.localize)("field","fields ({0})"),13:(0,Vc.localize)("constant","constants ({0})")};kD=r("fyF5L"),qA=r("35KYa"),Od=r("6AQ6e"),Mh=r("5jjji"),RA=r("6YVHO"),Uu=r("7bUGH"),Uc=r("kO85n"),$c=r("jb8ay"),Xh=r("b1c9q");var bI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},vI=function(e,t){return function(i,n){t(i,n,e)}};let yI=class extends oI.AbstractGotoSymbolQuickAccessProvider{get activeTextEditorControl(){return(0,Mh.withNullAsUndefined)(this.editorService.getFocusedCodeEditor())}constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Uu.Event.None}};yI=bI([vI(0,Od.ICodeEditorService)],yI),kD.Registry.as(qA.Extensions.Quickaccess).registerQuickAccessProvider({ctor:yI,prefix:oI.AbstractGotoSymbolQuickAccessProvider.PREFIX,helpEntries:[{description:RA.QuickOutlineNLS.quickOutlineActionLabel,prefix:oI.AbstractGotoSymbolQuickAccessProvider.PREFIX,needsEditor:!0},{description:RA.QuickOutlineNLS.quickOutlineByCategoryActionLabel,prefix:oI.AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY,needsEditor:!0}]});class wI extends Uc.EditorAction{run(e){e.get(Xh.IQuickInputService).quickAccess.show(oI.AbstractGotoSymbolQuickAccessProvider.PREFIX)}constructor(){super({id:"editor.action.quickOutline",label:RA.QuickOutlineNLS.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:$c.EditorContextKeys.hasDocumentSymbolProvider,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}}(0,Uc.registerEditorAction)(wI);kD=r("fyF5L"),qA=r("35KYa"),RA=r("6YVHO"),Od=r("6AQ6e");var CI={};e(CI,"AbstractCommandsQuickAccessProvider",(function(){return PI}),(function(e){return PI=e}));Qd=r("dD6PO"),Mh=r("5jjji"),Vc=r("kMb12");function xI(e,t){return t&&(e.stack||e.stacktrace)?Vc.localize("stackTrace.format","{0}: {1}",kI(e),SI(e.stack)||SI(e.stacktrace)):kI(e)}function SI(e){return Array.isArray(e)?e.join("\n"):e}function kI(e){return"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?Vc.localize("nodeExceptionMessage","A system error occurred ({0})",e.message):e.message||Vc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function EI(e=null,t=!1){if(!e)return Vc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){const i=Qd.coalesce(e),n=EI(i[0],t);return i.length>1?Vc.localize("error.moreErrors","{0} ({1} errors in total)",n,i.length):n}if(Mh.isString(e))return e;if(e.detail){const i=e.detail;if(i.error)return xI(i.error,t);if(i.exception)return xI(i.exception,t)}return e.stack?xI(e,t):e.message?e.message:Vc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}Jc=r("8bVMi"),h_=r("7DFs7"),gd=r("ky1to"),Kh=r("9BG2T"),Tp=r("eVLa5"),Mh=r("5jjji"),Vc=r("kMb12"),du=r("cUien"),lg=r("7JMrK"),KD=r("6B8Ag"),Iu=r("cwJE1"),Nu=r("5TiFM");var DI={};e(DI,"PickerQuickAccessProvider",(function(){return MI}),(function(e){return MI=e}));hd=r("hsQau"),Gd=r("7G83E"),gd=r("ky1to");var AI,II,RI=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function TI(e){const t=e;return Array.isArray(t.items)}(II=AI||(AI={}))[II.NO_ACTION=0]="NO_ACTION",II[II.CLOSE_PICKER=1]="CLOSE_PICKER",II[II.REFRESH_PICKER=2]="REFRESH_PICKER",II[II.REMOVE_ITEM=3]="REMOVE_ITEM";class MI extends gd.Disposable{provide(e,t){var i;const n=new(0,gd.DisposableStore);let o;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const r=n.add(new(0,gd.MutableDisposable)),s=()=>RI(this,void 0,void 0,(function*(){const i=r.value=new(0,gd.DisposableStore);null==o||o.dispose(!0),e.busy=!1,o=new(0,Gd.CancellationTokenSource)(t);const n=o.token,s=e.value.substr(this.prefix.length).trim(),a=this._getPicks(s,i,n),l=(t,i)=>{var n;let o,r;if(TI(t)?(o=t.items,r=t.active):o=t,0===o.length){if(i)return!1;s.length>0&&(null===(n=this.options)||void 0===n?void 0:n.noResultsPick)&&(o=[this.options.noResultsPick])}return e.items=o,r&&(e.activeItems=[r]),!0};if(null===a);else if(function(e){const t=e;return!!t.picks&&t.additionalPicks instanceof Promise}(a)){let t=!1,i=!1;yield Promise.all([(()=>RI(this,void 0,void 0,(function*(){yield(0,hd.timeout)(MI.FAST_PICKS_RACE_DELAY),n.isCancellationRequested||i||(t=l(a.picks,!0))})))(),(()=>RI(this,void 0,void 0,(function*(){e.busy=!0;try{const o=yield a.additionalPicks;if(n.isCancellationRequested)return;let r,s,c,d;if(TI(a.picks)?(r=a.picks.items,s=a.picks.active):r=a.picks,TI(o)?(c=o.items,d=o.active):c=o,c.length>0||!t){let t;if(!s&&!d){const i=e.activeItems[0];i&&-1!==r.indexOf(i)&&(t=i)}l({items:[...r,...c],active:s||d||t})}}finally{n.isCancellationRequested||(e.busy=!1),i=!0}})))()])}else if(a instanceof Promise){e.busy=!0;try{const t=yield a;if(n.isCancellationRequested)return;l(t)}finally{n.isCancellationRequested||(e.busy=!1)}}else l(a)}));return n.add(e.onDidChangeValue((()=>s()))),s(),n.add(e.onDidAccept((t=>{const[i]=e.selectedItems;"function"==typeof(null==i?void 0:i.accept)&&(t.inBackground||e.hide(),i.accept(e.keyMods,t))}))),n.add(e.onDidTriggerItemButton((({button:i,item:n})=>RI(this,void 0,void 0,(function*(){var o,r;if("function"==typeof n.trigger){const a=null!==(r=null===(o=n.buttons)||void 0===o?void 0:o.indexOf(i))&&void 0!==r?r:-1;if(a>=0){const i=n.trigger(a,e.keyMods),o="number"==typeof i?i:yield i;if(t.isCancellationRequested)return;switch(o){case AI.NO_ACTION:break;case AI.CLOSE_PICKER:e.hide();break;case AI.REFRESH_PICKER:s();break;case AI.REMOVE_ITEM:const t=e.items.indexOf(n);if(-1!==t){const i=e.items.slice();i.splice(t,1),e.items=i}}}}}))))),n}constructor(e,t){super(),this.prefix=e,this.options=t}}MI.FAST_PICKS_RACE_DELAY=200;Uh=r("6Jk2H"),rh=r("2HQ2L");var LI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},NI=function(e,t){return function(i,n){t(i,n,e)}},OI=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let PI=class e extends DI.PickerQuickAccessProvider{_getPicks(t,i,n){return OI(this,void 0,void 0,(function*(){const o=yield this.getCommandPicks(i,n);if(n.isCancellationRequested)return[];const r=[];for(const i of o){const n=(0,Mh.withNullAsUndefined)(e.WORD_FILTER(t,i.label)),o=i.commandAlias?(0,Mh.withNullAsUndefined)(e.WORD_FILTER(t,i.commandAlias)):void 0;n||o?(i.highlights={label:n,detail:this.options.showAlias?o:void 0},r.push(i)):t===i.commandId&&r.push(i)}const s=new Map;for(const e of r){const t=s.get(e.label);t?(e.description=e.commandId,t.description=t.commandId):s.set(e.label,e)}r.sort(((e,t)=>{const i=this.commandsHistory.peek(e.commandId),n=this.commandsHistory.peek(t.commandId);return i&&n?i>n?-1:1:i?-1:n?1:e.label.localeCompare(t.label)}));const a=[];let l=!1;for(let e=0;e<r.length;e++){const t=r[e],i=this.keybindingService.lookupKeybinding(t.commandId),n=i?(0,Vc.localize)("commandPickAriaLabelWithKeybinding","{0}, {1}",t.label,i.getAriaLabel()):t.label;0===e&&this.commandsHistory.peek(t.commandId)&&(a.push({type:"separator",label:(0,Vc.localize)("recentlyUsed","recently used")}),l=!0),0!==e&&l&&!this.commandsHistory.peek(t.commandId)&&(a.push({type:"separator",label:(0,Vc.localize)("morecCommands","other commands")}),l=!1),a.push(Object.assign(Object.assign({},t),{ariaLabel:n,detail:this.options.showAlias&&t.commandAlias!==t.label?t.commandAlias:void 0,keybinding:i,accept:()=>OI(this,void 0,void 0,(function*(){this.commandsHistory.push(t.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.commandId,from:"quick open"});try{yield this.commandService.executeCommand(t.commandId)}catch(e){(0,Jc.isPromiseCanceledError)(e)||this.dialogService.show(Tp.default.Error,(0,Vc.localize)("canNotRun","Command '{0}' resulted in an error ({1})",t.label,EI(e)))}}))}))}return a}))}constructor(t,i,n,o,r,s){super(e.PREFIX,t),this.instantiationService=i,this.keybindingService=n,this.commandService=o,this.telemetryService=r,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(FI)),this.options=t}};PI.PREFIX=">",PI.WORD_FILTER=(0,h_.or)(h_.matchesPrefix,h_.matchesWords,h_.matchesContiguousSubString),PI=LI([NI(1,Iu.IInstantiationService),NI(2,Nu.IKeybindingService),NI(3,du.ICommandService),NI(4,rh.ITelemetryService),NI(5,KD.IDialogService)],PI);let FI=class e extends gd.Disposable{registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((()=>this.updateConfiguration())))}updateConfiguration(){this.configuredCommandsHistoryLength=e.getConfiguredCommandHistoryLength(this.configurationService),e.cache&&e.cache.limit!==this.configuredCommandsHistoryLength&&(e.cache.limit=this.configuredCommandsHistoryLength,e.saveState(this.storageService))}load(){const t=this.storageService.get(e.PREF_KEY_CACHE,0);let i;if(t)try{i=JSON.parse(t)}catch(e){}const n=e.cache=new(0,Kh.LRUCache)(this.configuredCommandsHistoryLength,1);if(i){let e;e=i.usesLRU?i.entries:i.entries.sort(((e,t)=>e.value-t.value)),e.forEach((e=>n.set(e.key,e.value)))}e.counter=this.storageService.getNumber(e.PREF_KEY_COUNTER,0,e.counter)}push(t){e.cache&&(e.cache.set(t,e.counter++),e.saveState(this.storageService))}peek(t){var i;return null===(i=e.cache)||void 0===i?void 0:i.peek(t)}static saveState(t){if(!e.cache)return;const i={usesLRU:!0,entries:[]};e.cache.forEach(((e,t)=>i.entries.push({key:t,value:e}))),t.store(e.PREF_KEY_CACHE,JSON.stringify(i),0,0),t.store(e.PREF_KEY_COUNTER,e.counter,0,0)}static getConfiguredCommandHistoryLength(t){var i,n;const o=null===(n=null===(i=t.getValue().workbench)||void 0===i?void 0:i.commandPalette)||void 0===n?void 0:n.history;return"number"==typeof o?o:e.DEFAULT_COMMANDS_HISTORY_LENGTH}constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}};FI.DEFAULT_COMMANDS_HISTORY_LENGTH=50,FI.PREF_KEY_CACHE="commandPalette.mru.cache",FI.PREF_KEY_COUNTER="commandPalette.mru.counter",FI.counter=1,FI=LI([NI(0,Uh.IStorageService),NI(1,lg.IConfigurationService)],FI);Yc=r("eCoyX");class BI extends CI.AbstractCommandsQuickAccessProvider{getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:(0,Yc.stripIcons)(i.label)||i.id});return t}constructor(e,t,i,n,o,r){super(e,t,i,n,o,r)}}Mh=r("5jjji"),Iu=r("cwJE1"),Nu=r("5TiFM"),du=r("cUien"),rh=r("2HQ2L"),KD=r("6B8Ag"),Uc=r("kO85n"),$c=r("jb8ay"),Xh=r("b1c9q");var jI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},zI=function(e,t){return function(i,n){t(i,n,e)}},WI=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};let HI=class extends BI{get activeTextEditorControl(){return(0,Mh.withNullAsUndefined)(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return WI(this,void 0,void 0,(function*(){return this.getCodeEditorCommandPicks()}))}constructor(e,t,i,n,o,r){super({showAlias:!1},e,i,n,o,r),this.codeEditorService=t}};HI=jI([zI(0,Iu.IInstantiationService),zI(1,Od.ICodeEditorService),zI(2,Nu.IKeybindingService),zI(3,du.ICommandService),zI(4,rh.ITelemetryService),zI(5,KD.IDialogService)],HI),kD.Registry.as(qA.Extensions.Quickaccess).registerQuickAccessProvider({ctor:HI,prefix:HI.PREFIX,helpEntries:[{description:RA.QuickCommandNLS.quickCommandHelp,needsEditor:!0}]});class KI extends Uc.EditorAction{run(e){e.get(Xh.IQuickInputService).quickAccess.show(HI.PREFIX)}constructor(){super({id:"editor.action.quickCommand",label:RA.QuickCommandNLS.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:$c.EditorContextKeys.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}}(0,Uc.registerEditorAction)(KI);Uc=r("kO85n"),Od=r("6AQ6e"),lg=r("7JMrK"),Zc=r("c5sLr"),Iu=r("cwJE1"),oh=r("26YKj"),Uh=r("6Jk2H");var UI=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},VI=function(e,t){return function(i,n){t(i,n,e)}};let $I=class extends nw.ReferencesController{constructor(e,t,i,n,o,r,s){super(!0,e,t,i,n,o,r,s)}};$I=UI([VI(1,Zc.IContextKeyService),VI(2,Od.ICodeEditorService),VI(3,oh.INotificationService),VI(4,Iu.IInstantiationService),VI(5,Uh.IStorageService),VI(6,lg.IConfigurationService)],$I),(0,Uc.registerEditorContribution)(nw.ReferencesController.ID,$I);Uc=r("kO85n"),WA=r("igxAV"),RA=r("6YVHO");class qI extends Uc.EditorAction{run(e,t){const i=e.get(WA.IStandaloneThemeService);this._originalThemeName?(i.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=i.getColorTheme().themeName,i.setTheme("hc-black"))}constructor(){super({id:"editor.action.toggleHighContrast",label:RA.ToggleHighContrastNLS.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}}(0,Uc.registerEditorAction)(qI),r("LrwN4");bc=r("LrwN4");class GI{constructor(e,t,i){this.start=e,this.end=t,this.direction=i}}class ZI{destroy(){this._monacoChangeHandler.dispose(),this.ytext.unobserve(this._ytextObserver),this.doc.off("beforeAllTransactions",this._beforeTransaction),this.awareness&&this.awareness.off("change",this._rerenderDecorations)}constructor(e,t,i=new Set,n=null){this.doc=e.doc,this.ytext=e,this.monacoModel=t,this.editors=i,this.mux=Ll(),this._savedSelections=new Map,this._beforeTransaction=()=>{this.mux((()=>{this._savedSelections=new Map,i.forEach((i=>{if(i.getModel()===t){const n=((e,t,i)=>{const n=e.getSelection();if(null!==n){const e=n.getStartPosition(),o=n.getEndPosition(),r=vs(i,t.getOffsetAt(e)),s=vs(i,t.getOffsetAt(o));return new GI(r,s,n.getDirection())}return null})(i,t,e);null!==n&&this._savedSelections.set(i,n)}}))}))},this.doc.on("beforeAllTransactions",this._beforeTransaction),this._decorations=new Map,this._rerenderDecorations=()=>{i.forEach((i=>{if(n&&i.getModel()===t){const o=this._decorations.get(i)||[],r=[];n.getStates().forEach(((i,n)=>{if(n!==this.doc.clientID&&null!=i.selection&&null!=i.selection.anchor&&null!=i.selection.head){const o=ys(i.selection.anchor,this.doc),s=ys(i.selection.head,this.doc);if(null!==o&&null!==s&&o.type===e&&s.type===e){let e,i,a,l;o.index<s.index?(e=t.getPositionAt(o.index),i=t.getPositionAt(s.index),a="yRemoteSelectionHead yRemoteSelectionHead-"+n,l=null):(e=t.getPositionAt(s.index),i=t.getPositionAt(o.index),a=null,l="yRemoteSelectionHead yRemoteSelectionHead-"+n),r.push({range:new bc.Range(e.lineNumber,e.column,i.lineNumber,i.column),options:{className:"yRemoteSelection yRemoteSelection-"+n,afterContentClassName:a,beforeContentClassName:l}})}}})),this._decorations.set(i,i.deltaDecorations(o,r))}else this._decorations.delete(i)}))},this._ytextObserver=i=>{this.mux((()=>{let n=0;i.delta.forEach((e=>{if(void 0!==e.retain)n+=e.retain;else if(void 0!==e.insert){const i=t.getPositionAt(n),o=new bc.Selection(i.lineNumber,i.column,i.lineNumber,i.column),r=e.insert;t.applyEdits([{range:o,text:r}]),n+=r.length}else{if(void 0===e.delete)throw Jo();{const i=t.getPositionAt(n),o=t.getPositionAt(n+e.delete),r=new bc.Selection(i.lineNumber,i.column,o.lineNumber,o.column);t.applyEdits([{range:r,text:""}])}}})),this._savedSelections.forEach(((t,i)=>{const n=((e,t,i,n)=>{const o=ys(i.start,n),r=ys(i.end,n);if(null!==o&&null!==r&&o.type===t&&r.type===t){const t=e.getModel(),n=t.getPositionAt(o.index),s=t.getPositionAt(r.index);return bc.Selection.createWithDirection(n.lineNumber,n.column,s.lineNumber,s.column,i.direction)}return null})(i,e,t,this.doc);null!==n&&i.setSelection(n)}))})),this._rerenderDecorations()},e.observe(this._ytextObserver);{const i=e.toString();t.getValue()!==i&&t.setValue(i)}this._monacoChangeHandler=t.onDidChangeContent((t=>{this.mux((()=>{this.doc.transact((()=>{t.changes.sort(((e,t)=>t.rangeOffset-e.rangeOffset)).forEach((t=>{e.delete(t.rangeOffset,t.rangeLength),e.insert(t.rangeOffset,t.text)}))}),this)}))})),t.onWillDispose((()=>{this.destroy()})),n&&(i.forEach((i=>{i.onDidChangeCursorSelection((()=>{if(i.getModel()===t){const o=i.getSelection();if(null===o)return;let r=t.getOffsetAt(o.getStartPosition()),s=t.getOffsetAt(o.getEndPosition());if(o.getDirection()===bc.SelectionDirection.RTL){const e=r;r=s,s=e}n.setLocalStateField("selection",{anchor:vs(e,r),head:vs(e,s)})}})),n.on("change",this._rerenderDecorations)})),this.awareness=n)}}var JI;bc=r("LrwN4");JI=new URL(r("1XW5B").resolve("g87fF"),import.meta.url).toString();var YI;YI=new URL(r("1XW5B").resolve("gOoED"),import.meta.url).toString();var XI;XI=new URL(r("1XW5B").resolve("w0UBV"),import.meta.url).toString();var QI;QI=new URL(r("1XW5B").resolve("3OEga"),import.meta.url).toString();var eR;eR=new URL(r("1XW5B").resolve("02Z1g"),import.meta.url).toString();const tR=[{documentation:"Add ASCII art drawings, sketches, or what ever you want, simply\nby enclosing it with at least four back tics (````).\n\nExamples:\n\n  `````````````````````````````````\n                           .---\x3e  F\n  A       B     C   D     /\n  *-------*-----*---*----*-----\x3e  E\n                       ^ v          /   '---\x3e  G\n             B --\x3e C -'\n  `````````````````````````````````",insertText:"``````````````````````````````````````````````````\n${1:                             .---\x3e  F\n    A       B     C   D     /\n    *-------*-----*---*----*-----\x3e  E\n                         ^ v          /   '---\x3e  G\n               B --\x3e C -'}\n``````````````````````````````````````````````````",label:"lia-ascii-example"},{documentation:"Add styling to your ASCII art drawings, sketches. Set the maximum\nsize or center it.\n\nExamples:\n\n  \x3c!-- style=\"display: block;\n              margin-left: auto;\n              margin-right: auto;\n              max-width: 315px;\" --\x3e\n  ``````````````````````````````````````````````````\n  ${1:                             .---\x3e  F\n      A       B     C   D     /\n      *-------*-----*---*----*-----\x3e  E\n                           ^ v          /   '---\x3e  G\n                 B --\x3e C -'}\n  ``````````````````````````````````````````````````",insertText:"\x3c!-- style=\"display: block; margin-left: auto; margin-right: auto; max-width: 315px;\" --\x3e\n``````````````````````````````````````````````````\n${1:                             .---\x3e  F\n    A       B     C   D     /\n    *-------*-----*---*----*-----\x3e  E\n                         ^ v          /   '---\x3e  G\n               B --\x3e C -'}\n``````````````````````````````````````````````````",label:"lia-ascii-example-css"},{documentation:"Inline `code` has `back-ticks around` it.",insertText:"`${1:code}`",label:"lia-code-inline"},{documentation:'To insert a code block with syntax highlight, enclose your code snippet with three back-ticks (```) that is followed by a language code. To search all language codes, visit the link below, but in most cases you can simply add either the name of the language or the typical file-ending.\n\nExamples:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  s;\n  ```\n\n  ```python\n  s = "Python syntax highlighting"\n  print s\n  ```\n\n  ```\n  No language indicated, so no syntax highlighting.\n  But let\'s throw in a <b>tag</b>.\n  ```',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);}\n```',label:"lia-code-block"},{documentation:'To insert an executable and editable code block with syntax highlight, insert a common Markdown code block with a succeeding <script> tag. The macro @input is replaced with the current user input and gets evaluated in a try and catch block. Using JavaScript you can also insert interpreters to other languages or access them. In these cases you will have to change the content of the script tag. To get an impression about the possibilities, click on the link below.\nThe result of the script or the error are passed to a command-line like output beneath the code-block.\n\nExample:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  ```\n  <script>@input<\/script>',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);\ns;}\n```\n<script>${3:@input}<\/script>',label:"lia-code-block-js"},{documentation:'You can name your snippets by adding just after the language code. At default, it will be visible, but by adding a plus (+) in front of your filename you can make this more expressible, whereby a minus (-) will hide it at first. In this way you can also group multiple files into a (executable) project.\n\nExamples:\n\n  ```javascript    Visible.js\n  alert("Visble JavaScript file";);\n  ```\n\n  ```javascript   +Visible.js\n  alert("Also visible JavaScript file");\n  ```\n\n  ```javascript   -Hidden.js\n  alert("Hidden JavaScript file on init");\n  ```',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|} ${2:title.js}\n${3:var s = "Named JavaScript syntax highlighting";\nalert(s);}\n```',label:"lia-code-block-name"},{documentation:'To insert a named and executable and code snippet. The macro @input is replaced with the current user input and gets evaluated in a try and catch block. Using JavaScript you can also insert interpreters to other languages or access them. In these cases you will have to change the content of the <script> tag. To get an impression about the possibilities, click on the link below.\nThe result of the script or the error are passed to a command-line like output beneath the code-block.\n\nExample:\n\n  ```javascript   +Tile.js\n  var s = "Visible JavaScript syntax highlighting";\n  ```\n  <script>@input<\/script>\n\n  ```javascript   +Title.js\n  var s = "Hidden JavaScript syntax highlighting";\n  ```\n  <script>@input<\/script>',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}   ${2:Filename.js}\n${3:var s = "Named JavaScript syntax highlighting";\nalert(s);\ns;}\n```\n<script>${4:@input}<\/script>',label:"lia-code-block-name-js"},{documentation:'This is an extended executable version of a code block, it shows how errors can be extracted and fed back by using LiaError to show inline errors, warnings, or information.\nIf you are using a project and want to integrate more than one file into your execution, you will have to use the parameterized @input(int) macro, the integer is defined by the file order (@input defaults to 0).\n\nExample:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  ```\n  <script>\n    try{\n      eval(`@input`);  // <== code to evaluate\n    } catch (e) {\n      var log = e.stack.match(/((.*?):(.*))\\n.*?(:(\\d+):(\\d+)\\)\\n)/);\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n      throw err_msg;\n    }\n  <\/script>',insertText:'```${1:javascript}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);}\n```\n<script>\n  try{\n    eval(`@input`);\n  } catch (e) {\n    var log = e.stack.match(/((.*?):(.*))\\\\n.*?(:(\\\\d+):(\\\\d+)\\\\)\\\\n)/);\n    var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n    err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n    throw err_msg;\n  }\n<\/script>',label:"lia-code-block-jsx"},{documentation:'This is an extended executable version of a code block, it shows how errors can be extracted and fed back by using LiaError to show inline errors, warnings, or information.\nIf you are using a project and want to integrate more than one file into your execution, you will have to use the parameterized @input(int) macro, the integer is defined by the file order (@input defaults to 0).\n\nExample:\n\n  <script>\n    try{\n      eval(`@input`); // code to be evaluated\n    } catch (e) {\n      // do some pattern matching to get the error string, the line number and column\n      var log = e.stack.match(/((.*?):(.*))\\n.*?(:(\\d+):(\\d+)\\)\\n)/);\n\n      // create a new LiaError object with\n      // param1: an error message string\n      // param2: add the number of files involved as int\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n\n      // add as many information to your error message\n      // param1: file id\n      // param2: additional information string\n      // param3: type, either "error", "info", or "warning"\n      // param4: line number\n      // param5: column number\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n\n      throw err_msg;   // finally just throw it away\n    }\n  <\/script>',insertText:'<script>\n  try{\n    eval(`@input`);\n  } catch (e) {\n    var log = e.stack.match(/((.*?):(.*))\\\\n.*?(:(\\\\d+):(\\\\d+)\\\\)\\\\n)/);\n    var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n    err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n    throw err_msg;\n  }\n<\/script>',label:"lia-code-js"},{documentation:'In contrast to the @input macro, there is also an @output macro, which can be used to define the initial output of and executable code-block. This block has to be the last and you can use a plus (+) or a minus (-) in front to indicate, whether this output is interpreted as normal stdout or stderr.\n\nExample:\n\n  ``` js     -EvalScript.js\n  let str = "hello world";\n\n  consolelog(str)\n  ```\n  ``` json    -@ouput\n  There is a error in line 3...\n  ```\n  <script>@input<\/script>',insertText:"``` ${1:text}     ${2:+@output}\n${3:Enter your default output}\n```",label:"lia-code-output"},{documentation:'If you want to create a project and thus separate data and code into multiple files, simply write multiple code blocks in a sequence. To make them executable as a whole, simply add a script tag to the end and use the parameterized @input(id) macro to compose your project properly. The file id is defined by the order of code blocks.\nSee the link below to see more examples.\n\nExample:\n\n  ``` js     -EvalScript.js\n  let who = data.first_name + " " + data.last_name;\n\n  if(data.online) { who + " is online"; }\n  else            { who + " is NOT online"; }\n  ```\n  ``` json    +Data.json\n  { "first_name" :  "Sammy",\n    "last_name"  :  "Shark",\n    "online"     :  true   }\n  ```\n  <script>\n    // insert the JSON dataset into the local variable data\n    let data = @input(1);\n\n    // eval the script that uses this dataset\n    eval(`@input(0)`);\n  <\/script>',insertText:'``` ${1:js}     ${2:-EvalScript.js}\n${3:let who = data.first_name + " " + data.last_name;\n\nif(data.online) {\n  who + " is online"; \\}\nelse {\n  who + " is NOT online"; \\}}\n```\n``` ${4:json}    ${5:+Data.json}\n${6:{\n  "first_name" :  "Sammy",\n  "last_name"  :  "Shark",\n  "online"     :  true\n\\}}\n```\n<script>\n  ${7:// insert the JSON dataset into the local variable data\n  let data = @input(1);\n\n  // eval the script that uses this dataset\n  eval(`@input(0)`);}\n<\/script>',label:"lia-code-project"},{documentation:'Comments are those elements that get read out aloud in slide and presentation mode and a printed out at the placed position in textbook mode. Only paragraphs are allowed as comments and Markdown can be applied for styling different elements.\nThe default voice is defined within the main header, if not english will be used. This main voice can be changed per section by adding a section comment.\n\nExample:\n  \x3c!--\n  author:   ...\n  email:    ...\n  ...\n  narrator: UK English Female\n  --\x3e\n\n  # Title\n\n               --{{0}}--\n  I will speak with a female *UK* accent.\n\n  ## Section\n  \x3c!-- narrator: US English Male --\x3e\n\n               --{{0}}--\n  This entire section will be spoken aloud american man.\n\n               --{{1}}--\n  But only this section...\n\nTo simplify the voice-search, simply start typing "voice" and fuzzy search all responsive voice or click on the link below.',insertText:"              --{{${1:number}}}--\n${2:Enter some **text** that gets read out aloud.\nOnly paragraphs are allowed!}'",label:"lia-comment"},{documentation:'You can change the voice also per comment by adding it directly after the number of appearance.\nType "voice" for fuzzy searching all responsive voices or click on the link below.\n\nExample:\n        --{{0 Australian Female}}--\n  I will speak with a female Australian accent,\n  no matter what the default language is.\n\n        --{{0 Deutsch Male}}--\n  Und hier äußert sich gerade ein deutscher Mann.',insertText:"              --{{${1:number} ${2|UK English Female,UK English Male,US English Female,US English Male,Afrikaans Male,Albanian Male,Arabic Female,Arabic Male,Armenian Male,Australian Female,Australian Male,Bangla Bangladesh Female,Bangla Bangladesh Male,Bangla India Female,Bangla India Male,Bosnian Male,Brazilian Portuguese Female,Brazilian Portuguese Male,Catalan Male,Chinese Female,Chinese Male,Chinese (Hong Kong) Female,Chinese (Hong Kong) Male,Chinese Taiwan Female,Chinese Taiwan Male,Croatian Male,Czech Female,Czech Male,Danish Female,Danish Male,Deutsch Female,Deutsch Male,Dutch Female,Dutch Male,Esperanto Male,Estonian Male,Filipino Female,Finnish Female,Finnish Male,French Canadian Female,French Canadian Male,French Female,French Male,Greek Female,Greek Male,Hindi Female,Hindi Male,Hungarian Female,Hungarian Male,Icelandic Male,Indonesian Female,Indonesian Male,Italian Female,Italian Male,Japanese Female,Japanese Male,Korean Female,Korean Male,Latin Female,Latin Male,Latvian Male,Macedonian Male,Moldavian Female,Moldavian Male,Montenegrin Male,Nepali,Nepali,Norwegian Female,Norwegian Male,Polish Female,Polish Male,Portuguese Female,Portuguese Male,Romanian Female,Romanian Male,Russian Female,Russian Male,Serbian Male,Serbo-Croatian Male,Sinhala,Sinhala,Slovak Female,Slovak Male,Spanish Female,Spanish Male,Spanish Latin American Female,Spanish Latin American Male,Swahili Male,Swedish Female,Swedish Male,Tamil Female,Tamil Male,Thai Female,Thai Male,Turkish Female,Turkish Male,Ukrainian Female,Vietnamese Female,Vietnamese Male,Welsh Male|}}}--\n${3:Enter some **text** that gets read out aloud with another voice.\nOnly paragraphs are allowed!}'",label:"lia-comment-voice"},{documentation:"If you want to speak out some additional text that shall not appear in the textbook mode, then simply put your comment into a HTML comment tag.\n\nExample:\n  \x3c!-- --{{2}}--\n  I will speak with the default voice, but not appear\n  elsewhere within the document.\n  --\x3e",insertText:"\x3c!-- --{{${1:number}}}-- ${2:Enter some **text** that gets read out aloud!} --\x3e",label:"lia-comment-hidden"},{documentation:'If you want to speak out some additional text that shall not appear in the textbook mode and speak with another voice, then simply put your comment with a voice definition into a HTML comment tag.\n\nExample:\n  \x3c!-- --{{2 Deutsch Female}}--\n  I will speak with a German voice, but not appear\n  elsewhere within the document.\n  --\x3e\n\nType "voice" for fuzzy searching or click on the link below for more information.',insertText:"\x3c!-- --{{${1:number} ${2|UK English Female,UK English Male,US English Female,US English Male,Afrikaans Male,Albanian Male,Arabic Female,Arabic Male,Armenian Male,Australian Female,Australian Male,Bangla Bangladesh Female,Bangla Bangladesh Male,Bangla India Female,Bangla India Male,Bosnian Male,Brazilian Portuguese Female,Brazilian Portuguese Male,Catalan Male,Chinese Female,Chinese Male,Chinese (Hong Kong) Female,Chinese (Hong Kong) Male,Chinese Taiwan Female,Chinese Taiwan Male,Croatian Male,Czech Female,Czech Male,Danish Female,Danish Male,Deutsch Female,Deutsch Male,Dutch Female,Dutch Male,Esperanto Male,Estonian Male,Filipino Female,Finnish Female,Finnish Male,French Canadian Female,French Canadian Male,French Female,French Male,Greek Female,Greek Male,Hindi Female,Hindi Male,Hungarian Female,Hungarian Male,Icelandic Male,Indonesian Female,Indonesian Male,Italian Female,Italian Male,Japanese Female,Japanese Male,Korean Female,Korean Male,Latin Female,Latin Male,Latvian Male,Macedonian Male,Moldavian Female,Moldavian Male,Montenegrin Male,Nepali,Nepali,Norwegian Female,Norwegian Male,Polish Female,Polish Male,Portuguese Female,Portuguese Male,Romanian Female,Romanian Male,Russian Female,Russian Male,Serbian Male,Serbo-Croatian Male,Sinhala,Sinhala,Slovak Female,Slovak Male,Spanish Female,Spanish Male,Spanish Latin American Female,Spanish Latin American Male,Swahili Male,Swedish Female,Swedish Male,Tamil Female,Tamil Male,Thai Female,Thai Male,Turkish Female,Turkish Male,Ukrainian Female,Vietnamese Female,Vietnamese Male,Welsh Male|}}}-- ${3:Enter some **text** that gets read out aloud!} --\x3e",label:"lia-comment-voice-hidden"},{documentation:"The character is used as a color code, such as r stands for red, w for white, etc. Uppercase and lowercase characters define the size of the plotted dots. And if there is only one character, then it is plotted as a single dot only.\n\nExample:\n                  Colored - Dots\n     6 | A a B b C c\n       | D d E e F f G g H h I i\ny-axis | J j K k L l M m N n o O\n       | P p Q q R r S s T t U u\n       | V v W w X x Y y Z Z   *\n     1 +------------------------\n       0        x-axis        24\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"               Title - dots\n6 | A a B b C c\n  | D d E e F f G g H h I i\n  | J j K k L l M m N n o O\n  | P p Q q R r S s T t U u\n  | V v W w X x Y y Z Z   *\n1 +------------------------\n  0                      24",label:"lia-diagram-dots"},{documentation:"The character is used as a color code, such as r stands for red, B for blue, etc. Uppercase and lowercase characters define the size of the plotted dots. A sequence of equal characters gets interpreted as a poly-line, there are more than two characters and if there are no two characters at the same x position.\n\nExample:\n                                  Multiline\n  1.9 |\n      |                 ***\n    y |               *     *\n    - | r r r r r r r*r r r r*r r r r r r r\n    a |             *         *\n    x |            *           *\n    i | B B B B B * B B B B B B * B B B B B\n    s |         *                 *\n      | *  * *                       * *  *\n   -1 +------------------------------------\n      0            x-axis                 1\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"                                Multiline\n1.9 |\n    |                 ***\n  y |               *     *\n  - | r r r r r r r*r r r r*r r r r r r r\n  a |             *         *\n  x |            *           *\n  i | B B B B B * B B B B B B * B B B B B\n  s |         *                 *\n    | *  * *                       * *  *\n -1 +------------------------------------\n    0              x-axis               1",label:"lia-diagram-multiline"},{documentation:"Simple dots and poly-line representations can be applied together in one diagram, if they use different characters.\n\nExample:\n              Combining dots and poly-lines\n  1.9 |\n      |     DOTS\n    y |                                *\n    - |\n    a |                         *\n    x |                  *\n    i |         *\n    s |\n      | *\n   -1 +------------------------------------\n      0            x-axis                 1\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"             Combining dots and polylines\n1.9 |\n    |     DOTS\n  y |                                *\n  - |\n  a |                         *\n  x |                  *\n  i |         *\n  s |\n    | *\n -1 +------------------------------------\n    0            x-axis                 1",label:"lia-diagram-simple"},{documentation:'Use simple inline effects to highlight specific elements within a Markdown block. Simply enclose your elements within two subsequent braces ({}{}), whereby the first one is used to hold the number of appearance, while the will contain your text, image, video, what so ever ...\nYou can tweak your effects with additional animations and styling. Animate.css is included at default.\n\nExamples:\n  This block contains some {1}{inline __effects__} that will appear {2}{subsequently}.\n\n  Inline effects can also contain more effects {1}{I will appear first {2}{and I as a second}}.\n\n  With styling ++ {3}{bouncing red and delayed}\x3c!--\n        class = "animated infinite bounce"\n        style = "animation-delay: 3s; color: red;"\n      --\x3e',insertText:"{${1:number}}{${2:__element__}}",label:"lia-effect-inline"},{documentation:'Use simple inline effects to highlight specific elements within a Markdown block. Simply enclose your elements within two subsequent braces ({}{}), whereby the first one contains two numbers separated by (-) the first number defines the time of appearance and the second one the time of disappearance. The element contains the Markdown elements for highlighting (text, videos, images, etc.)\nYou can tweak your effects with additional animations and styling. Animate.css is included at default.\n\nExamples:\n  This block contains some {1-2}{I appear at fragment 1 and disapper at 2}.\n\n  Nesting is allowed but has to make sense {1-3}{I will rest from 1 to 3 {4}{I will not be visible}}.\n\n  With styling ++ {1-3}{bouncing red and delayed}\x3c!--\n        class = "animated infinite bounce"\n        style = "animation-delay: 3s; color: red;"\n      --\x3e',insertText:"{${1:from}-${2:to}}{${3:__element__}}",label:"lia-effect-inline2"},{documentation:'Use block effects to let entire Markdown blocks appear or disappear. It works exactly as simple inline effects. But the number of appearance has to be put in double braces.\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1}}\n  This entire block will appear with the first\n  fragment. And remain till the end of this slide.\n\n                    {{2}}\n  ```js\n  // this works with any markdown block\n  ```\n\n  \x3c!-- class = "animated rollIn" --\x3e\n       {{3}}\n  | Also | with  |\n  |------|-------|\n  | any  | table |',insertText:"    {${1:number}}\n$2",label:"lia-effect-block"},{documentation:'Use block effects to let entire Markdown blocks appear or disappear. It works exactly as simple inline effects. But the number of appearance has to be put in double braces, followed by a hyphen (-) and the number of disappearance.\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                   {{1-4}}\n  This entire block will appear with the first fragment.\n  And remain untill the fourth fragment of this slide.\n\n                   {{0-1}}\n  ```js\n  // I will be present emeadiately and disapper on the\n  // 1st fragment.\n  ```\n\n  \x3c!-- class = "animated rollIn" --\x3e\n       {{3-4}}\n  | Also | with  |\n  |------|-------|\n  | any  | table |',insertText:"    {${1:from}-${2:to}}\n$3",label:"lia-effect-block"},{documentation:"You can bundle multiple blocks to one effect block by enclosing them into two lines of stars (*). The rest works exactly as block effects...\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1}}\n  *************************************************\n\n  Both blocks will appear at once. Nesting of other\n  {2}{inline} and block effects is also allowed.\n\n\n  | Also | with  |\n  |------|-------|\n  | any  | table |\n\n  **************************************************",insertText:"                 {{${1:number}}}\n************************************************\n\n${2:Insert your Markdown blocks in here ...}\n\n************************************************",label:"lia-effect-multiblock"},{documentation:"You can bundle multiple blocks to one effect block by enclosing them into two lines of stars (*). The rest works exactly as block effects...\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1-3}}\n  *************************************************\n\n  Both blocks will appear at once and disappear at\n  the third fragment. Nesting of other {2}{inline}\n  and block effects is also allowed.\n\n\n  | Also | with  |\n  |------|-------|\n  | any  | table |\n\n  **************************************************",insertText:"                 {{${1:from}-${2:to}}}\n************************************************\n\n${3:Insert your Markdown blocks in here ...}\n\n************************************************",label:"lia-effect-multiblock2"},{documentation:'This is only an example of how Animate.css can be used to tweak your effects. Additional CSS magic can be applied onto single elements or blocks by adding a comment tag either in front of the block or directly after the element.\n\nExample:\n\n  \x3c!-- class = "animated rollIn" style = "animation-delay: 3s; color: purple" --\x3e\n  The whole text-block should appear in purple color and with a wobbling effect.\n  Which is a **bad** example, please use it with caution ...\n  ~~ Jumping red ~~ \x3c!-- class = "animated infinite bounce" style = "color: red;" --\x3e\n\nFor more information how to change the animation styles, click on the link below.',insertText:'\x3c!-- class="animated rollIn" style="animation-delay: 3s;" --\x3e',label:"lia-effect-animate-example"},{documentation:"With this triangle notation it is possible to add a playback button, which will read out loud the text within the second braces. It is possible to add additional animation definitions and also to change the voice.\n\nStart typing voice, if you want to change the narrator and the language.\n\nExamples:\n  Within this block {|>}{this text will be spoken out loud}.\n\n  Nesting is allowed but has to make sense {1-3 |>}{I speak from 1 to 3 {4}{and nesting is also possible}}.\n\n  If you want to {|> Australian Female}{it is also possible to change the voice}.",insertText:"{|>}{${1:text to read}}",label:"lia-effect-inline-playback"},{documentation:'Use the `|>` or `!>` to indicate, that the entire block below should be read out loud in the default language. It is also possible to add effect-numbers to indicate the appearance and also to add another language. Start typing "voice" to select another narrator and language.\n\nExample:\n\n     {{|>}}\n  Read this block after the user has clicked the play button.\n\n     {{3 |>}}\n  This block will only appear at the 3rd animation step.\n\n     {{1-2 |> Australian Female}}\n  This will appear at step 1 and disappear at animation step 2, when the\n  users clicks on it, an Australian female voice is used as a narrator.',insertText:"{{|>}}",label:"lia-effect-block-playback"},{documentation:'Links can be added in many ways to a document (relative or absolute), either in common Markdown style by enclosed brackets ([]) and parentheses (()), or directly if it starts with http or www and matches the common url pattern.\nIf you want to navigate within the current document, use hash tag and the number of the slide.\nAnd you can add additional html and css options by adding a trailing comment.\n\nExamples:\n  [LiaScript](https://liascript.github.io)\n\n  Also an accepted link: https://liascript.github.io\n\n  Local navigation by slide number: [top](#1)\n\n  Local navigation by slide title: [top](#some-title)\n\n  With styling [LiaScript](https://liascript.github.io)\x3c!--\n    title = "click me"\n    style = "color: red;"\n  --\x3e',insertText:"[${1:name}](${2:url})",label:"lia-link"},{documentation:'An optional information can be attached to every link by adding double quotes after the link in the parentheses.\n\nExamples:\n  [LiaScript](https://liascript.github.io "click Me")\n\n  Local navigation:\n    [top](#1 "by slide number")\n    [top](#and-the-title-is "by slide title")',insertText:'[${1:name}](${2:url} "${3:info}")',label:"lia-link-info"},{documentation:'Include images via the common Markdown notation as depicted below, by using absolute or relative paths. In contrast to common Markdown you can add also styles, classes, or any other allowed image tag to it simply by appending a comment tag.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg)\n\n  ![relative](./img/puppy.jpg)\n\n  ![with styling](./img/puppy.jpg)\x3c!--\n      title = "a gray puppy"\n      width = "300px"\n      style = "border: 10px solid; filter: grayscale(100%);"\n    --\x3e',insertText:"![${1:alt-text}](${2:image-url})",label:"lia-image"},{documentation:'Optional information can be attached to every image by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg "This image is free __CC0__")\n\n  ![relative](./img/puppy.jpg "A cute image of a __puppy__")',insertText:'![${1:alt-text}](${2:image-url} "${3:info}")',label:"lia-image-info"},{documentation:"Including audio is done with a starting question mark (?) that is followed a common Markdown link. If you want to include soundcloud, then you only have to refer to the link and the player gets embedded into your course.\n\nExample:\n\n  ?[singing birds](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3)\n\n  ?[soundcloud](https://soundcloud.com/glennmorrison/beethoven-moonlight-sonata)",insertText:"?[${1:alt-text}](${2:audio-url})",label:"lia-audio"},{documentation:'An optional information can be attached to every audio file by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  ?[singing birds](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3 "optional infos")',insertText:'?[${1:alt-text}](${2:audio-url} "${3:info}")',label:"lia-audio-info"},{documentation:'Include movies is like combining images and sound by a starting exclamation mark followed by a question mark (!?) as depicted below. Paths can either be absolute or relative. You can add also styles, classes, or any other allowed options to it simply by appending a comment tag.\n\nTo simplify the usage, you can directly use the YouTube link, or Vimeo, or TeacherTube. Those resources are atomatically parsed and included appropriately into the document, without searching for an embed-code.\n\nExample:\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE)\n\n  !?[relative](./mov/video.mp4)\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE)\x3c!--\n      title = "the elab in gray"\n      width = "90%"\n      style = "border: 10px solid; filter: grayscale(100%);"\n    --\x3e\n\nBut it is still possible to use HTML to include Videos and other stuff ...\n\n  <iframe width="560" height="315" src="https://www.youtube.com/embed/bICfKRyKTwE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',insertText:"!?[${1:alt-text}](${2:movie-url})",label:"lia-movie"},{documentation:'Optional information can be attached to every video by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE "Some information about the previous __eLab__ project.")',insertText:'!?[${1:alt-text}](${2:movie-url} "${3:info}")',label:"lia-movie-info"},{documentation:"Embed anything by using two question marks. LiaScript will try to determine if it is possible to use oEmbed for this site, if not, the content will be embedded as an `<iframe>`.\n\nExample:\n\n  ??[circuit simulator](https://falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcDoBYDsAmdA2dBOdMMADhzEnxASQusmoFMBaYgKACcQBmTB7yKh58eCTFHCQ2Ac2H8xcniSEMpAJRCYEOTSRKbI+zHokNUDTNCSqoVtgHdF2cbwuYVDp+5CowOzN5Sjq7gxj5+ofrqimBhISQ2Zgx0iXYAxjFxIgEqtvCC+IVFxSU6+ND43CRiejjcOJUkEDBwYJzhOrH6vv6BkvCeIV2aWJFQg9nezpqBbADOI+LD0zkSEAAuHACujGwAZprauvohxlHgVnmYbAD2IPrDSfgPqrBw6E1aEuInbEA)\n\n  ??[Pottery Jar 3D model](https://sketchfab.com/3d-models/pottery-jar-0576d43d28924c948ed3bbae02e4e0cb)",insertText:"??[${1:alt-text}](${2:url})",label:"lia-embed"},{documentation:"If you group multimedia links within one line or within one block, they will appear as a gallery within LiaScript.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg)\n  ??[circuit simulator](https://falstad.com/circuit/circuitjs.html)\n  ??[Pottery Jar 3D model](https://sketchfab.com/3d-models/pottery-jar-0576d43d28924c948ed3bbae02e4e0cb)",insertText:"![${1:alt-text}](${2:url}) ![${3:alt-text}](${4:url})",label:"lia-gallery"},{documentation:"Inline Footnotes are composed of a reference in brackets with a starting caret. The following text has to be put into parentheses, only one line is allowed.\n\n   Example with [^1](inline _footnote_) and some more text.",insertText:"[^${1:ref}](${2:explanation})",label:"lia-footnote-inline"},{documentation:"Multiline footnotes have to be split into a reference and into a comment. Footnote references are defined by brackets with a starting caret and can appear everywhere within the text. Footnote texts have to be put into the end of each section.\n\nExample:\n\nHere is a footnote reference, [^1] and another.[^longnote]\n\n...\n\n[^1]: Here is the footnote text.\n\n[^longnote]: Here's one with multiple blocks.\n\n               Subsequent paragraphs are indented to show that they\n               belong to the previous footnote.",insertText:"[^${1:ref}]",label:"lia-footnote-reference"},{documentation:'Multiline footnotes have to be split into a reference and into a comment. Footnote texts start with a reference "tag", which is followed by a colon. They have to be put into the end of each section otherwise they are not interpreted as footnote texts and multi-block footnotes have to follow the previous indentation.\nExample:\n...\n\n[^1]: Here is the footnote text.\n\n[^longnote]: Here\'s one with multiple blocks.\n\n               Subsequent paragraphs are indented to show that they\n               belong to the previous footnote.',insertText:"[^${1:ref}]: ${2:some comments}",label:"lia-footnote-text"},{documentation:"Insert a mathematical formula (inline) within your text. It has to be enclosed with two single dollar signs, as shown in the example.\n\nExample: $ f(a,b,c) = (a^2+b^2+c^2)^3 $\n\nFormulas are rendered with KaTex, so click on the link below to get more information and examples on the applied notation.",insertText:"$ ${1:f(a,b,c) = (a^2+b^2+c^2)^3} $",label:"lia-formula-inline"},{documentation:"Insert a more multiline mathematical formula as a block, which is automatically centered within your document. It has to be enclosed with two dollar signs, as shown in the example.\n\nExample:\n\n$$\n   \\sum_{i=1}^\\infty\\frac{1}{n^2}\n        =\\frac{\\pi^2}{6}\n$$\n\nFormulas are rendered with KaTex, so click on the link below to get more information and examples on the applied notation.",insertText:"$$\n   ${1:\\\\sum_\\{i=1\\}^\\\\infty\\\\frac\\{1\\}\\{n^2\\}\n        =\\\\frac\\{\\\\pi^2\\}\\{6\\}}\n$$",label:"lia-formula-block"},{documentation:"  The main header is a comment of the following format. You can use it to define defaults, such as authors, emails, where to find translations, what JavaScript and styles should be loaded additionally, as well as the language of your course.\n  You can change some of these settings within a sub-header for each section individually.\n\n  Default:\n      language: (en) | de | ua | fa | hy | bg\n      narrator: US English Male\n\n  Example:\n\n      \x3c!--\n      author:   Your Name\n      email:    your@email.com\n      version:  0.1.0\n      language: en\n      narrator: US English Female\n\n      comment:  This simple description of your course.\n                Multiline is also okay.\n\n      link:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n                https://...\n\n      script:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n                https://...\n\n      translation: Français translations/French.md\n      translation: 日本語    translations/Japanese.md\n      --\x3e\n\n      # Course ...\n\nAnd you can refer to these values via the system macros:\n\n    @author\n    @email\n    @version",insertText:"\x3c!--\nauthor:   ${1:Your Name}\nemail:    ${2:your@email.com}\nversion:  ${3:0.1.0}\nlanguage: ${4:en}\nnarrator: ${5:US English Female}\n\ncomment:  ${6:This simple description of your course.\n          Multiline is also okay.}\n\nlink:     ${7:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css}\n\nscript:   ${8:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js}\n\n${9:translation: Français translations/French.md}\n--\x3e",label:"lia-header-main"},{documentation:"You can overwrite some main header settings as it is listed below. Just attach a comment to the section title and overwrite only those settings, that are relevant to you.\n\nExample:\n\n    ...\n    # Course\n    ...\n    ## Section\n    \x3c!--\n    narrator: Australian Female\n    --\x3e\n    ...\n    ### Sub Section\n    \x3c!--\n    author:   Section Author\n    email:    section.author@email.com\n    version:  0.1.0\n    narrator: Australian Female\n\n    link:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n    script:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n    --\x3e",insertText:"\x3c!--\nauthor:   ${1:Section Author}\nemail:    ${2:section.author@email.com}\nversion:  ${3:0.1.0}\nnarrator: ${4:UK English Female}\n\nlink:     ${5:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css}\n\nscript:   ${6:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js}\n--\x3e",label:"lia-header-section"},{documentation:"",insertText:"actionscript",label:"hili-actionscript"},{documentation:"",insertText:"as",label:"hili-as"},{documentation:"",insertText:"apache",label:"hili-apache"},{documentation:"",insertText:"apacheconf",label:"hili-apacheconf"},{documentation:"",insertText:"asciidoc",label:"hili-asciidoc"},{documentation:"",insertText:"adoc",label:"hili-adoc"},{documentation:"",insertText:"x86asm",label:"hili-x86asm"},{documentation:"",insertText:"armasm",label:"hili-armasm"},{documentation:"",insertText:"arm",label:"hili-arm"},{documentation:"",insertText:"avrasm",label:"hili-avrasm"},{documentation:"",insertText:"asm",label:"hili-asm"},{documentation:"",insertText:"bash",label:"hili-bash"},{documentation:"",insertText:"sh",label:"hili-sh"},{documentation:"",insertText:"zsh",label:"hili-zsh"},{documentation:"",insertText:"c",label:"hili-c"},{documentation:"",insertText:"cc",label:"hili-cc"},{documentation:"",insertText:"cpp",label:"hili-cpp"},{documentation:"",insertText:"c++",label:"hili-c++"},{documentation:"",insertText:"h",label:"hili-h"},{documentation:"",insertText:"hpp",label:"hili-hpp"},{documentation:"",insertText:"h++",label:"hili-h++"},{documentation:"",insertText:"clojure",label:"hili-clojure"},{documentation:"",insertText:"clj",label:"hili-clj"},{documentation:"",insertText:"coffeescript",label:"hili-coffeescript"},{documentation:"",insertText:"coffee",label:"hili-coffee"},{documentation:"",insertText:"cson",label:"hili-cson"},{documentation:"",insertText:"iced",label:"hili-iced"},{documentation:"",insertText:"csharp",label:"hili-csharp"},{documentation:"",insertText:"cs",label:"hili-cs"},{documentation:"",insertText:"c#",label:"hili-c#"},{documentation:"",insertText:"diff",label:"hili-diff"},{documentation:"",insertText:"patch",label:"hili-patch"},{documentation:"",insertText:"django",label:"hili-django"},{documentation:"",insertText:"jinja",label:"hili-jinja"},{documentation:"",insertText:"dockerfile",label:"hili-dockerfile"},{documentation:"",insertText:"docker",label:"hili-docker"},{documentation:"",insertText:"elixir",label:"hili-elixir"},{documentation:"",insertText:"ex",label:"hili-ex"},{documentation:"",insertText:"exs",label:"hili-exs"},{documentation:"",insertText:"erlang",label:"hili-erlang"},{documentation:"",insertText:"erl",label:"hili-erl"},{documentation:"",insertText:"fsharp",label:"hili-fsharp"},{documentation:"",insertText:"fs",label:"hili-fs"},{documentation:"",insertText:"f#",label:"hili-f#"},{documentation:"",insertText:"fortran",label:"hili-fortran"},{documentation:"",insertText:"f90",label:"hili-f90"},{documentation:"",insertText:"f95",label:"hili-f95"},{documentation:"",insertText:"gcode",label:"hili-gcode"},{documentation:"",insertText:"nc",label:"hili-nc"},{documentation:"",insertText:"golang",label:"hili-golang"},{documentation:"",insertText:"go",label:"hili-go"},{documentation:"",insertText:"handlebars",label:"hili-handlebars"},{documentation:"",insertText:"hbs",label:"hili-hbs"},{documentation:"",insertText:"html.hbs",label:"hili-html.hbs"},{documentation:"",insertText:"html.handlebars",label:"hili-html.handlebars"},{documentation:"",insertText:"haskell",label:"hili-haskell"},{documentation:"",insertText:"hs",label:"hili-hs"},{documentation:"",insertText:"haxe",label:"hili-haxe"},{documentation:"",insertText:"hx",label:"hili-hx"},{documentation:"",insertText:"html",label:"hili-html"},{documentation:"",insertText:"xhtml",label:"hili-xhtml"},{documentation:"",insertText:"rss",label:"hili-rss"},{documentation:"",insertText:"atom",label:"hili-atom"},{documentation:"",insertText:"xjb",label:"hili-xjb"},{documentation:"",insertText:"xsd",label:"hili-xsd"},{documentation:"",insertText:"xsl",label:"hili-xsl"},{documentation:"",insertText:"plist",label:"hili-plist"},{documentation:"",insertText:"javascript",label:"hili-javascript"},{documentation:"",insertText:"js",label:"hili-js"},{documentation:"",insertText:"livescript",label:"hili-livescript"},{documentation:"",insertText:"ls",label:"hili-ls"},{documentation:"",insertText:"makefile",label:"hili-makefile"},{documentation:"",insertText:"mk",label:"hili-mk"},{documentation:"",insertText:"mak",label:"hili-mak"},{documentation:"",insertText:"markdown",label:"hili-markdown"},{documentation:"",insertText:"md",label:"hili-md"},{documentation:"",insertText:"mkdown",label:"hili-mkdown"},{documentation:"",insertText:"mkd",label:"hili-mkd"},{documentation:"",insertText:"ocaml",label:"hili-ocaml"},{documentation:"",insertText:"ml",label:"hili-ml"},{documentation:"",insertText:"objectivec",label:"hili-objectivec"},{documentation:"",insertText:"mm",label:"hili-mm"},{documentation:"",insertText:"objc",label:"hili-objc"},{documentation:"",insertText:"obj-c",label:"hili-obj-c"},{documentation:"",insertText:"delphi",label:"hili-delphi"},{documentation:"",insertText:"dpr",label:"hili-dpr"},{documentation:"",insertText:"dfm",label:"hili-dfm"},{documentation:"",insertText:"pas",label:"hili-pas"},{documentation:"",insertText:"pascal",label:"hili-pascal"},{documentation:"",insertText:"freepascal",label:"hili-freepascal"},{documentation:"",insertText:"lazarus",label:"hili-lazarus"},{documentation:"",insertText:"lpr",label:"hili-lpr"},{documentation:"",insertText:"lfm",label:"hili-lfm"},{documentation:"",insertText:"php",label:"hili-php"},{documentation:"",insertText:"php3",label:"hili-php3"},{documentation:"",insertText:"php4",label:"hili-php4"},{documentation:"",insertText:"php5",label:"hili-php5"},{documentation:"",insertText:"php6",label:"hili-php6"},{documentation:"",insertText:"perl",label:"hili-perl"},{documentation:"",insertText:"pl",label:"hili-pl"},{documentation:"",insertText:"pm",label:"hili-pm"},{documentation:"",insertText:"powershell",label:"hili-powershell"},{documentation:"",insertText:"ps",label:"hili-ps"},{documentation:"",insertText:"puppet",label:"hili-puppet"},{documentation:"",insertText:"pp",label:"hili-pp"},{documentation:"",insertText:"python",label:"hili-python"},{documentation:"",insertText:"py",label:"hili-py"},{documentation:"",insertText:"gyp",label:"hili-gyp"},{documentation:"",insertText:"ruby",label:"hili-ruby"},{documentation:"",insertText:"rb",label:"hili-rb"},{documentation:"",insertText:"gemspec",label:"hili-gemspec"},{documentation:"",insertText:"podspec",label:"hili-podspec"},{documentation:"",insertText:"thor",label:"hili-thor"},{documentation:"",insertText:"irb",label:"hili-irb"},{documentation:"",insertText:"rust",label:"hili-rust"},{documentation:"",insertText:"rs",label:"hili-rs"},{documentation:"",insertText:"scad",label:"hili-scad"},{documentation:"",insertText:"openscad",label:"hili-openscad"},{documentation:"",insertText:"shell",label:"hili-shell"},{documentation:"",insertText:"console",label:"hili-console"},{documentation:"",insertText:"stylus",label:"hili-stylus"},{documentation:"",insertText:"styl",label:"hili-styl"},{documentation:"",insertText:"tcl",label:"hili-tcl"},{documentation:"",insertText:"tk",label:"hili-tk"},{documentation:"",insertText:"twig",label:"hili-twig"},{documentation:"",insertText:"craftcms",label:"hili-craftcms"},{documentation:"",insertText:"typescript",label:"hili-typescript"},{documentation:"",insertText:"ts",label:"hili-ts"},{documentation:"",insertText:"vbscript",label:"hili-vbscript"},{documentation:"",insertText:"vbs",label:"hili-vbs"},{documentation:"",insertText:"verilog",label:"hili-verilog"},{documentation:"",insertText:"v",label:"hili-v"},{documentation:"",insertText:"xpath",label:"hili-xpath"},{documentation:"",insertText:"xq",label:"hili-xq"},{documentation:"Initialize your file with a complete dummy course with a header and body, which can be used as a bootstrap for your course.\n\nExample:\n\n    \x3c!--\n    author:   Your Name\n\n    email:    your@mail.org\n\n    version:  0.0.1\n\n    language: en\n\n    narrator: US English Female\n\n    ...\n    --\x3e\n\n    # Course Main Title\n\n    This is your **course** initialization stub...",insertText:'\x3c!--\nauthor:   Your Name\n\nemail:    your@mail.org\n\nversion:  0.0.1\n\nlanguage: en\n\nnarrator: US English Female\n\ncomment:  Try to write a short comment about\n          your course, multiline is also okay.\n\nlink:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n\nscript:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n\n--\x3e\n\n# Course Main Title\n\nThis is your **course** initialization stub.\n\nPlease see the [Docs](https://liascript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md)\nto find out what is possible in [LiaScript](https://liascript.github.io).\n\nIf you want to use instant help in your Atom IDE, please type **lia** to see all available shortcuts.\n\n## Markdown\n\nYou can use common [Markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) syntax to create your course, such as:\n\n1. Lists\n2. ordered or\n\n   * unordered\n   * ones ...\n\n\n| Header 1   | Header 2   |\n| :--------- | :--------- |\n| Item 1     | Item 2     |\n\n\nImages:\n\n![images](https://farm2.static.flickr.com/1618/26701766821_7bea494826.jpg)\n\n\n### Extensions\n\n     --{{0}}--\nBut you can also include other features such as spoken text.\n\n      --{{1}}--\nInsert any kind of audio file:\n\n       {{1}}\n?[audio](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3)\n\n\n     --{{2}}--\nEven videos or change the language completely.\n\n       {{2-3}}\n!?[video](https://www.youtube.com/watch?v=bICfKRyKTwE)\n\n\n      --{{3 Russian Female}}--\n«Для торжества зла достаточно бездействия хороших людей».\n\n\n    {{3}}\nType "voice" to see a list of all available languages.\n\n\n### Styling\n\n\x3c!-- class = "animated rollIn" style = "animation-delay: 2s; color: purple" --\x3e\nThe whole text-block should appear in purple color and with a wobbling effect.\nWhich is a **bad** example, please use it with caution ...\n~~ only this is red ;-) ~~ \x3c!-- class = "animated infinite bounce" style = "color: red;" --\x3e\n\n## Charts\n\nUse ASCII-Art to draw diagrams:\n\n                                    Multiline\n    1.9 |    DOTS\n        |                 ***\n      y |               *     *\n      - | r r r r r r r*r r r r*r r r r r r r\n      a |             *         *\n      x |            *           *\n      i | B B B B B * B B B B B B * B B B B B\n      s |         *                 *\n        | *  * *                       * *  *\n     -1 +------------------------------------\n        0              x-axis               1\n\n## Quizzes\n\n### A Textquiz\n\nWhat did the **fish** say when he hit a **concrete wall**?\n\n    [[dam]]\n\n### Multiple Choice\n\nJust add as many points as you wish:\n\n    [[X]] Only the **X** marks the correct point.\n    [[ ]] Empty ones are wrong.\n    [[X]] ...\n\n### Single Choice\n\nJust add as many points as you wish:\n\n    [( )] ...\n    [(X)] <-- Only the **X** is allowed.\n    [( )] ...\n\n## Executable Code\n\nA drawing example, for demonstrating that any JavaScript library can be used, also for drawing.\n\n```javascript\n// Initialize a Line chart in the container with the ID chart1\nnew Chartist.Line(\'#chart1\', {\n  labels: [1, 2, 3, 4],\n  series: [[100, 120, 180, 200]]\n});\n\n// Initialize a Line chart in the container with the ID chart2\nnew Chartist.Bar(\'#chart2\', {\n  labels: [1, 2, 3, 4],\n  series: [[5, 2, 8, 3]]\n});\n```\n<script>@input<\/script>\n\n<div class="ct-chart ct-golden-section" id="chart1"></div>\n<div class="ct-chart ct-golden-section" id="chart2"></div>\n\n\n### Projects\n\nYou can make your code executable and define projects:\n\n``` js     -EvalScript.js\nlet who = data.first_name + " " + data.last_name;\n\nif(data.online) {\n  who + " is online"; }\nelse {\n  who + " is NOT online"; }\n```\n``` json    +Data.json\n{\n  "first_name" :  "Sammy",\n  "last_name"  :  "Shark",\n  "online"     :  true\n}\n```\n<script>\n  // insert the JSON dataset into the local variable data\n  let data = @input(1);\n\n  // eval the script that uses this dataset\n  eval(`@input(0)`);\n<\/script>\n\n## More\n\nFind out what you can even do more with quizzes:\n\nhttps://liascript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md',label:"lia-init"},{documentation:"Insert a Markdown ordered list, as depicted below. Indentation is important in this case.\n\nExample:\n  1. first point\n  2. second point\n  3. some text\n\n     and some image ![image](img/point.jpg)",insertText:"1. ${1:block}\n2. ${2:block}\n3. ${3:block}",label:"lia-list-ordered"},{documentation:"Insert a Markdown unordered list, as depicted below. You can use (*+-) to begin every point. Indentation is important in this case.\n\nExample:\n  * first point\n  + second point\n  - some text\n\n    and some image ![image](img/point.jpg)",insertText:"+ ${1:block}\n+ ${2:block}\n+ ${3:block}",label:"lia-list-unordered"},{documentation:"Gets replaced by the author defined in the header.",insertText:"@author",label:"lia-macro-author"},{documentation:"Gets replaced by the date defined in the header.",insertText:"@date",label:"lia-macro-date"},{documentation:"Gets replaced by the email defined in the header.",insertText:"@email",label:"lia-macro-email"},{documentation:"Use this only in conjunction with executable code and projects or with quizzes. This macro can only be used in a script tag and gets replaced by the current user input.\nTo refer to the inputs in a project, use the parameterized macro:\n\n  @input(0)   <== equal to @input\n  @input(1)",insertText:"@input",label:"lia-macro-input"},{documentation:"Gets replaced by the current section number.",insertText:"@section",label:"lia-macro-section"},{documentation:"Generates a UID that can be used to name tags uniquely.",insertText:"@uid",label:"lia-macro-uid"},{documentation:"Gets replaced by the version defined in the header.",insertText:"@version",label:"lia-macro-version"},{documentation:"If you do not want to store the course state wihin indexeddb and also not within the local course index, you can use this macro within the header, which means that no trace of this course will be stored locally.\n\nExample:\n  \x3c!--\n  persistent: false\n  --\x3e",insertText:"persistent: ${1|false,true|}",label:"lia-macro-persistent"},{documentation:'You can import the main macros of other courses, simply by using the import command, which is followed by the raw url of the foreign course.\n\nExample:\n\n  ## section\n  \x3c!--\n  import: https://raw.githubusercontent.com/liaTemplates/rextester_template/master/README.md\n  --\x3e\n\n  ``` python\n  print("Hello World")\n  ```\n  @Rextester.eval(@Python)',insertText:"import: ${1:url}",label:"lia-macro-import"},{documentation:"Attribution is an important issue. With the attribute command, you can define the attribution that is showed within the info field within the navigation pannel. These elements get also imported if you import the functionality from another course.\n\nA good attribution might look like the follwing ones...\n\nExample:\n  \x3c!--\n  attribute: [AlaSQL](https://alasql.org)\n             by [Andrey Gershun](agershun@gmail.com)\n             & [Mathias Rangel Wulff](m@rawu.dk)\n             is licensed under [MIT](https://opensource.org/licenses/MIT)\n\n  attribute: [PapaParse](https://www.papaparse.com)\n             by [Matthew Holt](https://twitter.com/mholt6)\n             is licensed under [MIT](https://opensource.org/licenses/MIT)\n  --\x3e\n",insertText:"attribute: ${1:thx}",label:"lia-macro-attribute"},{documentation:"You can change the default appearance of your document, either if you prefer dark mode or light mode. This will not change the user preferences. The default mode is defined by the user settings.\n\nExample:\n  \x3c!--\n  dark: true\n\n  dark: false\n  --\x3e\n",insertText:"dark: ${1|true,false|}",label:"lia-macro-dark"},{documentation:"You can change the default style of your document, either if you do not have any effects you can set mode to Textbook or start with and interactive Presentation. The three modes a the same as defined within the document at the upper right button. The default mode is defined by the user settings.\n\nExample:\n  \x3c!--\n  mode: Presentation\n\n  mode: Slides\n\n  mode: Textbook\n  --\x3e\n",insertText:"mode: ${1|Presentation,Slides,Textbook|}",label:"lia-macro-mode"},{documentation:"Disable or enable the classroom feature for your course, by using this macro within the header of your course. You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  classroom: false\n  --\x3e\n",insertText:"classroom: ${1|disable,enable|}",label:"lia-macro-classroom"},{documentation:"Disable or enable the experimental google translation for your course, by using this macro within the header of your course. You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  translateWithGoogle: false\n  --\x3e\n",insertText:"translateWithGoogle: ${1|disable,enable|}",label:"lia-macro-translateWithGoogle"},{documentation:"Disable or enable sharing for your course, by using this macro within the header (no share-icon and button will be displayed). You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  sharing: false\n  --\x3e\n",insertText:"sharing: ${1|disable,enable|}",label:"lia-macro-sharing"},{documentation:"Use this macro to redefine the respository information of your project, by default the course will display the GitHub, GitLab, or Dropbox origin. By adding this information to the head, you can define a static root for your project, which will also be visible on all exports.\n\nExample:\n  \x3c!--\n  repository: https://github.com/andre-dietrich/liascript-snippets\n  --\x3e\n",insertText:"repository: ${1:url}",label:"lia-macro-repository"},{documentation:'Use macros to deal with repetitive task and to make the document more readable. You can define your own macros within the main and section headers. Start your macro with an (@) sign and give it a name. Separate the name from the body with a colon (:). If you want to parameterize your macro, use @0, @1, ... for the parameter id. It is a simple string substitution mechanism, and the parameters are separated by a comma (,). If you have commas in your parameters, then use back-tics (`) to enclose this parameter. And triple back-tics (```) to enclose multi-line parameters.\n\nExample:\n\n  ## section\n  \x3c!--\n  @red: \x3c!-- style="color: red;" --\x3e\n\n  @bold_italic: __@0__ _@1_\n  --\x3e\n\n  @red\n  This whole paragraph will be read and this will be:\n  @bold_italic(I am Bold,`I am Italic,, I am too`).',insertText:"@${1:name}: ${2:line}",label:"lia-macro-definition-line"},{documentation:'Use macros to deal with repetitive task and to make the document more readable. Multi-line macros start with an (@your_name) and end with (@end). Parameters can also be passed as to single line macros.\n\nExample:\n\n  ## section\n  \x3c!--\n  @evalJS\n  <script>\n    try{\n      eval(`@input`);\n    } catch (e) {\n      var log = e.stack.match(/((.*?):(.*))\n.*?(:(d+):(d+))\n)/);\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n      throw err_msg;\n    }\n  <\/script>\n  @end\n  --\x3e\n\n  eval this code with erros:\n\n  ```js\n  let x = 12;\n  x * c;\n  ```\n  @evalJS',insertText:"@${1:name}\n${2:param1 -> __@0__}\n@end",label:"lia-macro-definition-block"},{documentation:'This type of macro-call comes handy, if you want to refere to a certain URL and want other Markdown readers to show this information as a link. It is also possible to add additional parameters within parentheses, whereby the URL is always used as the last parameter.\n\nExample:\n\n  @[doSomethingWith](URL)\n\n  @[doSomethingWith(1,2,3)](URL "this will be ignored by now")',insertText:"@[${1:macro}](${2:url-param})",label:"lia-macro-call-link"},{documentation:'If you have a more complex multi-line macro definition, you can also use the following style so that it gets rendered at least in a readable manner by Github for example. Thus, you can place your macro call into into the code-block header, the first (optional) language parameter gets ignored and, whereby the following elements within the block are passed as the last multi-line parameter to that call.\n\nExample:\n\n    ## Macro\n    \x3c!--\n    link:   https://pannellum.org/css/style.css\n            https://cdn.pannellum.org/2.4/pannellum.css\n\n    script: https://cdn.pannellum.org/2.4/pannellum.js\n\n    @panorama\n    <div id="panorama_@0" style="width: 100%; height: 400px;"></div>\n    <script>\n    pannellum.viewer(\'panorama_@0\', {\n        "type": "equirectangular",\n        "panorama": "@1",\n        "autoLoad": false,\n        "hotSpots": [@2]\n    });\n    <\/script>\n    @end\n    --\x3e\n\n    ```json @panorama("0",https://pannellum.org/images/cerro-toco-0.jpg)\n    {\n        "pitch": 14.1,\n        "yaw": 1.5,\n        "type": "info",\n        "text": "Baltimore Museum of Art",\n        "URL": "https://artbma.org/"\n    },\n    {\n        "pitch": -0.9,\n        "yaw": 144.4,\n        "type": "info",\n        "text": "North Charles Street"\n    }\n    ```',insertText:"```${1:lang} @${2:macro}\n${3:a multiline\nparameter}\n```",label:"lia-macro-call-block"},{documentation:"Horizontal lines are realized by adding at least 3 hyphens in a row (---), but more hyphens look a little bit nicer ;)\n\nExample:\n  This is a horizontal line:\n\n    ---\n\n  And this also:\n\n  ---------------------------------------------",insertText:"----------------------\n",label:"lia-horizontal-line"},{documentation:"Insert single line quotes or quote blocks just with the help of a starting (>).\n\nExample:\n  > Block-quotes are very handy in email to emulate reply text.\n  > This line is part of the same quote.\n\n  Quote break.\n\n  > This is a very long line that will still be quoted properly when it wraps. Oh boy let's keep writing to make sure this is long enough to actually wrap for everyone. Oh, you can *put* **Markdown** into a block-quote.",insertText:"> ${1:your quote}",label:"lia-quote"},{documentation:"Insert single line quotes or quote blocks just with the help of a starting (>) and let the final paragraph start with -- to indicate an blockquote citation.\n\nExample:\n  > “Live as if you were to die tomorrow.\n  > Learn as if you were to live forever.”\n  >\n  > -- Mahatma Gandhi",insertText:"> ${1:your quote}\n>\n> -- ${2:your citation}",label:"lia-quote-citation"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"# ${1:Main Title}\n",label:"lia-title-1"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"## ${1:Chapter Title}\n",label:"lia-title-2"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"### ${1:Section Title}\n",label:"lia-title-3"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"#### ${1:SubSection Title}\n",label:"lia-title-4"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"##### ${1:Paragraph Title}\n",label:"lia-title-5"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"##### ${1:SubParagraph Title}\n",label:"lia-title-6"},{documentation:"The details and summary tags are standard HTML tags and GitHub also supports their usage with Markdown. These tags offer a neat way to define something what is nowadays called accordion. Thus, your user can click on the summary text to make the body of the details-tag appear.\n\nExample:\n  <details>\n\n  <summary>**Honest Textbook ads (click to enlarge)**</summary>\n\n  !?[If High School and College Textbooks Were Honest - Honest Ads](https://www.youtube.com/watch?v=lhSjYT7pWkw)\n\n  </details>",insertText:"<details>\n\n<summary>${1:title}</summary>\n\n${2:body}\n\n</details>",label:"lia-details"},{documentation:"",insertText:"UK English Female",label:"voice-uk-english-female"},{documentation:"",insertText:"UK English Male",label:"voice-uk-english-male"},{documentation:"",insertText:"US English Female",label:"voice-us-english-female"},{documentation:"",insertText:"US English Male",label:"voice-us-english-male"},{documentation:"",insertText:"Arabic Female",label:"voice-arabic-female"},{documentation:"",insertText:"Arabic Male",label:"voice-arabic-male"},{documentation:"",insertText:"Armenian Male",label:"voice-armenian-male"},{documentation:"",insertText:"Australian Female",label:"voice-australian-english-female"},{documentation:"",insertText:"Australian Male",label:"voice-australian-english-male"},{documentation:"",insertText:"Bangla Bangladesh Female",label:"voice-bangla-bangladesh-female"},{documentation:"",insertText:"Bangla Bangladesh Male",label:"voice-bangla-bangladesh-male"},{documentation:"",insertText:"Bangla India Female",label:"voice-bangla-india-female"},{documentation:"",insertText:"Bangla India Male",label:"voice-bangla-india-male"},{documentation:"",insertText:"Brazilian Portuguese Female",label:"voice-brazilian-portuguese-female"},{documentation:"",insertText:"Brazilian Portuguese Male",label:"voice-brazilian-portuguese-male"},{documentation:"",insertText:"Chinese Female",label:"voice-chinese-female"},{documentation:"",insertText:"Chinese Male",label:"voice-chinese-male"},{documentation:"",insertText:"Chinese (Hong Kong) Female",label:"voice-chinese-hong-kong-female"},{documentation:"",insertText:"Chinese (Hong Kong) Male",label:"voice-chinese-hong-kong-male"},{documentation:"",insertText:"Chinese Taiwan Female",label:"voice-chinese-taiwan-female"},{documentation:"",insertText:"Chinese Taiwan Male",label:"voice-chinese-taiwan-male"},{documentation:"",insertText:"Czech Female",label:"voice-czech-female"},{documentation:"",insertText:"Czech Male",label:"voice-czech-male"},{documentation:"",insertText:"Danish Female",label:"voice-danish-female"},{documentation:"",insertText:"Danish Male",label:"voice-danish-male"},{documentation:"",insertText:"Deutsch Female",label:"voice-deutsch-female"},{documentation:"",insertText:"Deutsch Male",label:"voice-deutsch-male"},{documentation:"",insertText:"Deutsch Female",label:"voice-german-female"},{documentation:"",insertText:"Deutsch Male",label:"voice-german-male"},{documentation:"",insertText:"Dutch Female",label:"voice-dutch-female"},{documentation:"",insertText:"Dutch Male",label:"voice-dutch-male"},{documentation:"",insertText:"Filipino Female",label:"voice-filipino-female"},{documentation:"",insertText:"Filipino Male",label:"voice-filipino-male"},{documentation:"",insertText:"Finnish Female",label:"voice-finnish-female"},{documentation:"",insertText:"Finnish Male",label:"voice-finnisch-male"},{documentation:"",insertText:"French Canadian Female",label:"voice-french-vanadian-female"},{documentation:"",insertText:"French Male",label:"voice-french-canadian-male"},{documentation:"",insertText:"French Female",label:"voice-french-female"},{documentation:"",insertText:"French Male",label:"voice-french-male"},{documentation:"",insertText:"Greek Female",label:"voice-greek-female"},{documentation:"",insertText:"Greek Male",label:"voice-greek-male"},{documentation:"",insertText:"Hindi Female",label:"voice-hindi-female"},{documentation:"",insertText:"Hindi Male",label:"voice-hindi-male"},{documentation:"",insertText:"Hungarian Female",label:"voice-hungarian-female"},{documentation:"",insertText:"Hungarian Male",label:"voice-hungarian-male"},{documentation:"",insertText:"Indonesian Female",label:"voice-indonesian-female"},{documentation:"",insertText:"Indonesian Male",label:"voice-indonesian-male"},{documentation:"",insertText:"Italian Female",label:"voice-italian-female"},{documentation:"",insertText:"Italian Male",label:"voice-italian-male"},{documentation:"",insertText:"Japanese Female",label:"voice-japanese-female"},{documentation:"",insertText:"Japanese Male",label:"voice-japanese-male"},{documentation:"",insertText:"Korean Female",label:"voice-korean-female"},{documentation:"",insertText:"Korean Male",label:"voice-korean-male"},{documentation:"",insertText:"Latin Female",label:"voice-latin-female"},{documentation:"",insertText:"Latin Male",label:"voice-latin-male"},{documentation:"",insertText:"Norwegian Female",label:"voice-norwegian-female"},{documentation:"",insertText:"Norwegian Male",label:"voice-norwegian-male"},{documentation:"",insertText:"Polish Female",label:"voice-polish-female"},{documentation:"",insertText:"Polish Male",label:"voice-polish-male"},{documentation:"",insertText:"Portuguese Female",label:"voice-portuguese-female"},{documentation:"",insertText:"Portuguese Male",label:"voice-portuguese-male"},{documentation:"",insertText:"Romanian Female",label:"voice-romanian-female"},{documentation:"",insertText:"Romanian Male",label:"voice-romanian-male"},{documentation:"",insertText:"Russian Female",label:"voice-russian-female"},{documentation:"",insertText:"Russian Male",label:"voice-russian-male"},{documentation:"",insertText:"Slovak Female",label:"voice-slovak-female"},{documentation:"",insertText:"Slovak Male",label:"voice-slovak-male"},{documentation:"",insertText:"Spanish Female",label:"voice-spanish-female"},{documentation:"",insertText:"Spanish Male",label:"voice-spanish-male"},{documentation:"",insertText:"Spanish Latin American Female",label:"voice-spanish-latin-america-female"},{documentation:"",insertText:"Spanish Latin American Male",label:"voice-spanish-latin-america-male"},{documentation:"",insertText:"Swedish Female",label:"voice-swedish-female"},{documentation:"",insertText:"Swedish Male",label:"voice-swedish-male"},{documentation:"",insertText:"Tamil Male",label:"voice-tamil-male"},{documentation:"",insertText:"Thai Female",label:"voice-tamil-female"},{documentation:"",insertText:"Thai Male",label:"voice-thai-male"},{documentation:"",insertText:"Turkish Female",label:"voice-turkish-female"},{documentation:"",insertText:"Turkish Male",label:"voice-turkish-male"},{documentation:"",insertText:"Vietnamese Female",label:"voice-vietnamese-female"},{documentation:"",insertText:"Vietnamese Male",label:"voice-vietnamese-male"},{documentation:"",insertText:"Afrikaans Male",label:"voice-afrikaans-male"},{documentation:"",insertText:"Albanian Male",label:"voice-albanian-male"},{documentation:"",insertText:"Bosnian Male",label:"voice-bosnian-male"},{documentation:"",insertText:"Catalan Male",label:"voice-catalan-male"},{documentation:"",insertText:"Croatian Male",label:"voice-croatian-male"},{documentation:"",insertText:"Esperanto Male",label:"voice-esperanto-male"},{documentation:"",insertText:"Estonian Male",label:"voice-estonian-male"},{documentation:"",insertText:"Icelandic Male",label:"voice-icelandic-male"},{documentation:"",insertText:"Latvian Male",label:"voice-latvian-male"},{documentation:"",insertText:"Macedonian Male",label:"voice-macedonian-male"},{documentation:"",insertText:"Moldavian Female",label:"voice-moldavian-female"},{documentation:"",insertText:"Moldavian Male",label:"voice-moldavian-male"},{documentation:"",insertText:"Montenegrin Male",label:"voice-montenegrin-male"},{documentation:"",insertText:"Nepali",label:"voice-nepali"},{documentation:"",insertText:"Sinhala",label:"voice-sinhala"},{documentation:"",insertText:"Serbian Male",label:"voice-serbian-male"},{documentation:"",insertText:"Serbo-Croatian Male",label:"voice-serbo-croatian-male"},{documentation:"",insertText:"Swahili Male",label:"voice-swahili-male"},{documentation:"",insertText:"Ukrainian Female",label:"voice-ukrainian-female"},{documentation:"",insertText:"Welsh Male",label:"voice-welsh-male"},{documentation:"Surveys are defined similarly to quizzes by using brackets ([]). A text survey is defined by a multiple number three subsequent underscores (___) that are enclosed by double brackets. The number of underscores defines the number of lines a user has to fill out.\n\nExample:\n\n  A single line text survey:\n\n    [[___]]\n\n  A two line text survey:\n\n    [[___ ___]]\n\n  And a six liner:\n\n    [[___ ___ ___ ___ ___ ___ ]]",insertText:"[[___ ___]]",label:"lia-survey-text"},{documentation:"The definition is similar to a single choice quiz, but instead of an X, either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Choose between different options:\n\n    [(1)] option 1\n    [(2)] option 2\n    [(0)] option 3\n\n  What is your favorite color:\n\n    [(red)]   red?\n    [(blue)]  blue?\n    [(green)] green?",insertText:"[(${1:1})] ${2:option 1}\n[(${3:2})] ${4:option 2}\n[(${5:3})] ${6:option 3}",label:"lia-survey-single-choice"},{documentation:"The definition is similar to a multiple choice quiz, but instead of an X, either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Choose as many options as your want:\n\n    [[1]] option 1\n    [[2]] option 2\n    [[0]] option 0\n\n  Mark all colors you like:\n\n    [[red]]   red?\n    [[blue]]  blue?\n    [[green]] green?\n    [[none]]  None of these ...",insertText:"[[${1:1}]] ${2:option 1}\n[[${3:2}]] ${4:option 2}\n[[${5:3}]] ${6:option 3}",label:"lia-survey-multiple-choice"},{documentation:"A list of single choice surveys can be defined as depicted below. Either numbers have to be put into parentheses or variable. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Give marks:\n\n      [(-1)(0)(1)]\n      [          ] LiaScript is great?\n      [          ] I would use it to make online **courses**?\n      [          ] I would use it for online **surveys**?\n\n  What is your opinion:\n\n      [(agree)(unsure)(maybe not so)]\n      [                             ] LiaScript is great?\n      [                             ] I would use it to make online **courses**?\n      [                             ] I would use it for online **surveys**?",insertText:"[(${1:0})(${2:1})(${3:2})]\n[         ] ${4:text}\n[         ] ${5:text}\n[         ] ${6:text}",label:"lia-survey-single-choice-matrix"},{documentation:"A list of multiple choice surveys can be defined as depicted below. Either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Give marks:\n\n      [[-1][0][1]]\n      [          ] LiaScript is great?\n      [          ] I would use it to make online **courses**?\n      [          ] I would use it for online **surveys**?\n\n  What is your opinion:\n\n      [[agree][unsure][maybe not so]]\n      [                             ] LiaScript is great?\n      [                             ] I would use it to make online **courses**?\n      [                             ] I would use it for online **surveys**?",insertText:"[[${1:0}][${2:1}][${3:2}]]\n[         ] ${4:text}\n[         ] ${5:text}\n[         ] ${6:text}",label:"lia-survey-multiple-choice-matrix"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| ${1:Header}     |\n| :--------- |\n| ${2:Item}       |",label:"lia-table-1"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   |\n| :--------- | :--------- |\n| Item 1     | Item 2     |",label:"lia-table-2"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   |\n| :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     |",label:"lia-table-3"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   |\n| :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     |",label:"lia-table-4"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   |\n| :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     |",label:"lia-table-5"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     |",label:"lia-table-6"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     |",label:"lia-table-7"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   | Header 8   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     | Item 8     |",label:"lia-table-8"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   | Header 8   | Header 9   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     | Item 8     | Item 9     |",label:"lia-table-9"},{documentation:'You can set the diagram title for your plotted document via the data-title parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-title="${1:title}" --\x3e',label:"lia-table-diagram-title"},{documentation:'You can overwrite the diagram x-label for your plotted document via the data-xlabel parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-xlabel="${1:title}" --\x3e',label:"lia-table-diagram-xlabel"},{documentation:'You can overwrite the diagram y-label for your plotted document via the data-ylabel parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-ylabel="${1:title}" --\x3e',label:"lia-table-diagram-ylabel"},{documentation:'You can enforce the visualization of a certain type, even if the sturcture of your table might look different.\nCurrently available data-types are: lineplot, scatterplot, boxplot, barchart, radar, piechart, map, heatmap, parallel, graph, sankey, and none\nIf you do not want to show tables as diagrams, you can also use data-type="None" and only the table will be visible.\n\nExample:\n  \x3c!-- data-type="pie" --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-type="${1:type}" --\x3e',label:"lia-table-diagram-type"},{documentation:"If the first column contains (not repeating) numbers as well as the other columns, lineplots are used as the default representation, a special tag is not required. If this isn't the case, then you can apply this tag to enforce the visualization as a scatterplot.\n\nExample:\n  \x3c!-- data-type=\"lineplot\" --\x3e\n  | x's |  some y's  |    dist |\n  | --- |:----------:| -------:|\n  | 1   |    1 $    | 16 $km$ |\n  | 2.2 |    2 $    | 12 $km$ |\n  | 3.3 |    5 $    |  1 $km$ |\n  | 4   | -12.333 $ |         |",insertText:'\x3c!-- data-type="lineplot" --\x3e',label:"lia-table-diagram-lineplot"},{documentation:"If the first column contains repetitive numbers, scatterplots are used as the default representation if further numbers are determine, a special tag is not required.\n\nExample:\n  \x3c!-- data-type=\"scatterplot\" --\x3e\n  | x's |  some y's  |                              dist |\n  | --- |:----------:| ---------------------------------:|\n  | 1   |    1 $    |                           16 $km$ |\n  | 2.2 |    2 $    |                           12 $km$ |\n  | 3.3 |    5 $    |                            1 $km$ |\n  | 4   | -12.333 $ | -555$km$ <-- this will be ignored |\n  | 4   |            |                                 1 |",insertText:'\x3c!-- data-type="scatterplot" --\x3e',label:"lia-table-diagram-scatterplot"},{documentation:'In contrast to a line or a scatter plot, if the first colum contains at least one entry thant cannot be parsed as a number, this might be represented also as BarChart. Which works perfectly with the following example. If the maximum values of the columns do not differ to much, then this dataset it represented as a BarChart, otherwise you might end up seeing only one huge bar, while the other bars are indistiguishable from each other. In this case other visualization are chosen.\n\nExample:\n  \x3c!-- data-type="barchart" --\x3e\n  | Animal          | weight in kg | Lifespan years | Mitogen |\n  | --------------- | ------------:| --------------:| -------:|\n  | Mouse           |        0.028 |              2 |      95 |\n  | Flying squirrel |        0.085 |             15 |      50 |\n  | Brown bat       |        0.020 |             30 |      10 |\n  | Sheep           |           90 |             12 |      95 |\n  | Human           |           68 |             70 |      10 |',insertText:'\x3c!-- data-type="barchart" --\x3e',label:"lia-table-diagram-barchart"},{documentation:'If you have a ScatterPlot like representation, but actually want to use this data as primary data for your BoxPlot, you can manually change the type of visualization to BoxPlot, simply by adding the follwing attribute to the head of your table, as it is shown in the snippet below. Columns are then treated as datasets and get visualized accordingly.\n\nExample:\n  \x3c!-- data-type="boxplot" --\x3e\n  | Random |    I |  II |\n  | ------:| ----:| ---:|\n  |    5.0 |  1.0 |   5 |\n  |    6.0 |  1.0 |   4 |\n  |    7.0 |  1.0 |   5 |\n  |    8.0 |  1.0 |   5 |\n  |    9.0 |  1.0 |   4 |\n  |   10.0 |  1.0 |   5 |\n  |    5.0 | 10.0 |   7 |\n  |    6.0 | 10.0 |   8 |\n  |    7.0 | 10.0 |   7 |\n  |    8.0 | 10.0 |   7 |\n  |    9.0 | 10.0 |   8 |',insertText:'\x3c!-- data-type="boxplot" --\x3e',label:"lia-table-diagram-boxplot"},{documentation:'If for example humans and sheeps are removed from the dataset, then wheight in kg would not be visible in a BarChart at all. In this case a Radar is selected, that allows to analyze data visually with different "y"-axis.\n\nExample:\n  \x3c!-- data-type="radar" --\x3e\n  | Animal          | weight in kg | Lifespan years | Mitogen |\n  | --------------- | ------------:| --------------:| -------:|\n  | Mouse           |        0.028 |             02 |      95 |\n  | Flying squirrel |        0.085 |             15 |      50 |\n  | Brown bat       |        0.020 |             30 |      10 |',insertText:'\x3c!-- data-type="radar" --\x3e',label:"lia-table-diagram-radar"},{documentation:'If you have a table with only one row full of numbers, this will be automatically presented as an pie chart. The head represents the categories and the body the quatities.\n\nExample:\n  | Classic | Country | Reggae | Hip-Hop | Hard-Rock | Samba |\n  | -------:| -------:| ------:| -------:| ---------:| -----:|\n  |      50 |      50 |    100 |     200 |       350 |   250 |\n\n  \x3c!-- data-type="PieChart" --\x3e\n  | Music-Style | Classic | Country | Reggae | Hip-Hop | Hard-Rock | Samba |\n  |:----------- | -------:| -------:| ------:| -------:| ---------:| -----:|\n  | 1994        |      50 |      50 |    100 |     200 |       350 |   250 |\n  | 2014        |      20 |      30 |    100 |     220 |       400 |   230 |\n  | demo 2034   |       5 |      12 |     98 |     293 |       345 |    32 |',insertText:'\x3c!-- data-type="piechart" --\x3e',label:"lia-table-diagram-piechart"},{documentation:'A map is similar to a BarChart from the table structure, but if you want to depict your data on a real map, you will have to add a geojson-file, that contains all relevant data about the form of your countries, states, cities, etc. The first column has to match the names of your objects in your geojson data, that is attached to your table in the following way:\n\nExample:\n  \x3c!-- data-type="map" data-src="https://code.highcharts.com/mapdata/custom/europe.geo.json" --\x3e\n  | Country                | percent |\n  | ---------------------- | ------- |\n  | Albania                | 73.5    |\n  | Andorra                | 98.9    |\n  | Armenia                | 72.4    |\n  | ...                    |         |',insertText:'\x3c!-- data-type="map" --\x3e',label:"lia-table-diagram-map"},{documentation:'Another type of visualization is a HeatMap, which is used, if the table head and the first column do only contain numbers, in other words coordinates. If you want to use categories instead of coordinate numbers, you can enforce the usage of a heatmap, with the comment shown below:\n\nExample:\n  \x3c!--\n  data-type="heatmap"\n  data-title="Seattle mean temperature in Fahrenheit"\n  data-show\n  --\x3e\n    | Seattle |  Jan |  Feb |  Mar |  Apr |  May |  ... |\n    | -------:| ----:| ----:| ----:| ----:| ----:| ----:|\n    |       0 | 40.7 | 41.5 | 43.6 | 46.6 | 51.4 |  ... |\n    |       2 |  ... |  ... |  ... |  ... |  ... |  ... |',insertText:'\x3c!-- data-type="heatmap" --\x3e',label:"lia-table-diagram-heatmap"},{documentation:'A Parallel representation jumps in, if there are simply too many categories, so that your BarChart would contain only thin lines.\n\nExample:\n  \x3c!-- data-type="parallel" --\x3e\n  | Country                | GDP growth (%) | Births per woman | Life expectancy ...\n  | ---------------------- | --------------:| ----------------:| -------------------\n  | Albania                |            7.5 |            1.858 |               76.63\n  | Andorra                |          3.570 |            1.260 |                 NaN\n  | Austria                |          2.178 |            1.414 |               80.44\n  | ...                    |            ... |              ... |                 ...',insertText:'\x3c!-- data-type="parallel" --\x3e',label:"lia-table-diagram-parallel"},{documentation:'If the first column and the head of the table are equal, then the interpreter tries to interpret the content of the table as an adjacency matrix, which defines a graph. If those values are symetrical according to the diagonal, then the matrix defines an "undirected graph".\nIn contrast to this, if those values differ, then the result is simply an an "directed graph", whereby the values define the strength of the line.\n\nExample:\n  \x3c!-- data-title="Undirected Graph" --\x3e\n  | Graph |  A  |  B  |  C  |  D  |  E  |\n  |:----- |:---:|:---:|:---:|:---:|:---:|\n  | A     |  0  |  1  |  0  |  1  |  0  |\n  | B     |  1  |  0  |  0  |  1  |  0  |\n  | C     |  0  |  0  |  0  |  0  |  0  |\n  | D     |  1  |  1  |  0  |  0  |  1  |\n  | E     |  0  |  0  |  0  |  1  |  0  |\n\n  \x3c!-- data-title="Directed Graph" --\x3e\n  | Graph |  A  |  B  |  C  |  D  |  E  |\n  |:----- |:---:|:---:|:---:|:---:|:---:|\n  | A     |  0  | 12  |  0  |  1  |  0  |\n  | B     | -22 |  0  |  0  | 0.4 |  0  |\n  | C     |  0  |  0  |  0  |  0  |  0  |\n  | D     |  2  | 12  |  0  |  0  |  1  |\n  | E     |  0  |  0  |  0  |  2  |  0  |',insertText:'\x3c!-- data-type="graph" --\x3e',label:"lia-table-diagram-graph"},{documentation:'A Sankey diagram is a special type of directed graph that can be used to streams or the flow of something, such as engergy, money, etc.\n\nExample:\n  \x3c!-- data-type="sankey" --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:'\x3c!-- data-type="sankey" --\x3e',label:"lia-table-diagram-sankey"},{documentation:'Simply data-type="none" to prevent any kind of visualization.\n\nExample:\n  \x3c!-- data-type="none" --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:'\x3c!-- data-type="none" --\x3e',label:"lia-table-diagram-none"},{documentation:'Simply add this attribute or set it to true (data-show="true"), if you want to visualize your data immediately, without the need to click in the switch-button. It is still possible for your users to switch to the table representation.\n\nExample:\n  \x3c!-- data-show --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:"\x3c!-- data-show --\x3e",label:"lia-table-diagram-show"},{documentation:'Like in the mathematical sense, set this attribute or set it to true (data-transpose="true"), if you want to switch rows and columns. One benefit is, that you can for example use PieChart and let your table grow vertically instead of using a horizontal monster.\n\nExample:\n  \x3c!-- data-transpose --\x3e\n  | Music-Style {0-1}{1994} {1}{2014} |      Student rating |\n  |:--------------------------------- | -------------------:|\n  | Classic                           |   {0-1}{50} {1}{20} |\n  | Country                           |   {0-1}{50} {1}{30} |\n  | Reggae                            |                 100 |\n  | Hip-Hop                           | {0-1}{200} {1}{220} |\n  | Hard-Rock                         | {0-1}{350} {1}{400} |\n  | Samba                             | {0-1}{250} {1}{230} |',insertText:"\x3c!-- data-transpose --\x3e",label:"lia-table-diagram-transpose"},{documentation:'Currently this attribute is used to refere to your geojson data, if you use the `data-type="Map"` representation, but this might change in the future to load and visualize data directly, such as csv.\nIf you are using geojson files from external websites such as: https://code.highcharts.com/mapdata/\nIt can be usefull to use anycors, if the data cannot be visualized due to CORS restrictions:\n\ndata-src="https://cors-anywhere.herokuapp.com/https://code.highcharts.com/mapdata/custom/europe.geo.json"\n\nExample:\n  \x3c!-- data-type="map" data-src="https://code.highcharts.com/mapdata/custom/europe.geo.json" --\x3e\n  | Country                | percent |\n  | ---------------------- | ------- |\n  | Albania                | 73.5    |\n  | Andorra                | 98.9    |\n  | Armenia                | 72.4    |\n  | ...                    |         |',insertText:'\x3c!-- data-src="${1:url}" --\x3e',label:"lia-table-diagram-source"},{documentation:"Use the GitHub-flavoured Markdown syntax for tasks. If the version of the course is larger than 1, the task-states will be stored persistently.\n\nYou can define as much tasks as you want\n\nExample:\n\n  -[ ] This is not checked by default\n  -[X] This one is checked by default",insertText:"-[${1:X}] ${2:line with Markdown}",label:"lia-task"},{documentation:'Use the GitHub-flavoured Markdown syntax for tasks in association with JavaScript-code that is executed on every input.\n\nYou can define as much tasks as you want.\n\nExample:\n\n  - [X] Biology\n  - [ ] Chemistry\n  <script output="tasks">"@input"<\/script>\n\n  <script style="width: 100%">\n  try {\n    let task = @input(`tasks`) // interpret the output="tasks"\n\n    if(task[0]) {\n      send.liascript(`## Biology\n\n  Hey, great, you want to learn something about Biology.\n\n  * resource 1\n  * resource 2\n\n  The input from the tasks above was: `[${task}]``)\n    } else send.clear()\n  } catch(e) { }\n  <\/script>',insertText:"-[${1:X}] ${2:task-definition}\n-[${3:X}] ${4:task-definition}\n<script>\n  ${5:js-code}\n<\/script>",label:"lia-task-js"},{documentation:"",insertText:"_${1:italic}_",label:"lia-text-italic"},{documentation:"",insertText:"*${1:italic}*",label:"lia-text-italic2"},{documentation:"",insertText:"__${1:bold}__",label:"lia-text-bold"},{documentation:"",insertText:"**${1:bold}**",label:"lia-text-bold2"},{documentation:"",insertText:"___${1:italic bold}___",label:"lia-text-italic-bold"},{documentation:"",insertText:"***${1:italic bold}***",label:"lia-text-italic-bold2"},{documentation:"",insertText:"~${1:strike}~",label:"lia-text-strike"},{documentation:"",insertText:"~~${1:underline}~~",label:"lia-text-underline"},{documentation:"",insertText:"~~~${1:strike underline}~~~",label:"lia-text-strike-underline"},{documentation:"",insertText:"^${1:superscript}^",label:"lia-text-superscript"},{documentation:"Simply encompass your solution word into double brackets and you will get a nicely rendered text quiz.\n\nExample:\n  What is the color of the sky?\n\n  [[blue]]",insertText:"[[${1:solution}]]",label:"lia-quiz-text"},{documentation:'If different inputs are possible, you can add a script tag to your quiz-field. The reference @input will be replaced by the current user input string, and the result of the script has to be true or false.\n\nExample:\n  What is the color of the sky?\n\n  [[blue]]\n  <script>\n    let input_string = "@input";\n    "BLUE" == input_string.trim().toUpperCase();\n  <\/script>',insertText:'[[${1:solution}]]\n<script>\n  ${2:// @input will be replace by the user input\n  let input_string = "@input";\n  "solution" == input_string.trim().toLowerCase();}\n<\/script>',label:"lia-quiz-text-js"},{documentation:"Create a selection field, that contains various different solutions, separated by `|`. Images, formulas everything is allowed, only the correct solution has to be put into parentheses and there can be multiple correct solutions.\n\nExample:\n  What is the color of the sky?\n\n  [[ red | (__blue__) | green | (black at night)]]",insertText:"[[${1:option}|${2:option}]]",label:"lia-quiz-select"},{documentation:"Compose your single choice quizzes out of many lines in the following format:\n\nExample:\n  This is a single choice quiz with three options:\n\n    [( )] Add as many lines as you want?\n    [(X)] The X marks the only correct answer!\n    [( )] ... And only one X is allowed.\n\n(If you want, you can also have multiple correct options.)",insertText:"[(${1: })] ${2:enter your text}",label:"lia-quiz-single-choice"},{documentation:"Compose your multiple choice quizzes out of many lines in the following format:\n\nExample:\n  This is a multiple choice quiz with four options:\n\n    [[ ]] Add as many lines as you want?\n    [[X]] The X marks the correct lines that have to be selected!\n    [[X]] This can offer multiple options that have to be clicked.\n    [[ ]] But it can also consist of empty brackets either.",insertText:"[[${1: }]] ${2:enter your text}",label:"lia-quiz-multiple-choice"},{documentation:"Compose a matrix of quizzes with multiple SingleChoice and MultipleChoice quizzes per row. The column headers have to be put into brackets or parentheses, depending on your passed Markdown content. It is allowed to have different numbers of options per row.\n\nExample:\n  This is a multiple choice quiz with four options:\n    [[:-)] (:-]) (_bold_)]\n    [ [ ]   [ ]     [X]  ] Only the X marks the correct solution!\n    [ [X]   [ ]     [ ]  ] Multiple- and SingleChoice quizzes in a matrix,\n    [ ( )   ( )     (X)  ] but you have to be consitent per row.\n    [ ( )   ( )     ( )   ( ) ] More or less options than defined in the header are also allowed.",insertText:"[[${1: }] [${2: }] [${3: }]]\n[[${4: }] [${5: }] [${6: }]] ${7: add a line}\n[(${8: }) (${9: }) (${10: })] ${11: add a line}",label:"lia-quiz-matrix-choice"},{documentation:"If a quiz might be a bit tricky, you can add hints directly after any type of quiz and as many hints as you want. The user can decide whether he or she wants to use it, simply by clicking on the additional question mark, that appears after the check button.\n\nExample:\n  This is a text quiz with two hints:\n\n    [[solution]]\n    [[?]] This is the first hint\n    [[?]] This is a second hint\n\n  And a multiple choice quiz with one hint:\n\n    [[X]] This is correct!\n    [[ ]] This is wrong!\n    [[?]] Click on the first option!",insertText:"[[?]] ${1:enter your hint}",label:"lia-quiz-hint"},{documentation:"If the user solved a quiz or clicked onto resolve, the correct answer gets automatically revealed, but you can add additional information to your solution by adding two lines to the end of your quiz that can contain multiple Markdown blocks as explanation.\n\nExample:\n  What is the color of the sky?\n\n    [[blue]]\n    [[?]] Enter blue!\n    *************************************\n\n    During the day the color is blue, if\n    it is not cloudy. See the following\n    picture ...\n\n    ![blue sky](./img/sunny.jpg)\n\n    *************************************",insertText:"****************************************\n\n${1:Add a solution explanation __Markdown__!}\n\n****************************************",label:"lia-quiz-solution"},{documentation:"In some rare cases you might want to change the correct solution, or add a counter, that reveals the correct answer after some predefined number of trials. Then simply add a script tag to the quiz. The @input string gets replaced by an integer representing the current user input:\n\n-1 -> no selection\n0  -> the first\n1  -> the second\n\nExample:\n\n    [( )] Check this ...\n    [(X)] ... and not this\n    <script>\n      // @input gets replaced by a single number\n      // -1 if no selection otherwise it starts\n      // with 0.\n      let input_number = @input;\n\n      ${7:if(input_number == 0)\n        true;\n      else\n        false;}\n    <\/script>",insertText:"<script>\n  // @input gets replaced by a single number\n  // -1 if no selection otherwise it starts\n  // with 0.\n  let input_number = @input;\n\n  ${1:if(input_number == 1)\n    true;\n  else\n    false;}\n<\/script>",label:"lia-quiz-single-js"},{documentation:'In some rare cases you might want to change the correct solution, add a counter, or let some correct answers pass. Then simply add a script tag to the quiz. The @input string here gets replaced by an by an array of integers ([0,1,1,0]) that represent the current user input:\n\n0 -> stands for checked\n1 -> represents an unchecked field\n\nExample:\n\n  Get at least one right ...\n\n  [[ ]] Wrong.\n  [[X]] Right.\n  [[ ]] Wrong.\n  [[X]] Right.\n  <script>\n    // @input gets replaced by an array in the\n    // form of [0,0,0,1], whereby 0 and 1\n    // define whether a checkbox is checked\n    // or not...\n    let input_array = @input;\n    input_array = JSON.stringify(input_array);\n\n    if      (input_array == "[0,1,0,1]")  true;\n    else if (input_array == "[0,1,0,0]")  true;\n    else if (input_array == "[0,0,0,1]")  true;\n    else                                 false;\n  <\/script>',insertText:'<script>\n  // @input gets replaced by an array in the\n  // form of [0,0,0,1], whereby 0 and 1\n  // define whether a checkbox is checked\n  // or not...\n  let input_array = @input;\n  ${1:input_array = JSON.stringify(input_array);\n\n  if      (input_array == "[0,1,0,1]")  true;\n  else if (input_array == "[0,1,0,0]")  true;\n  else if (input_array == "[0,0,0,1]")  true;\n  else                                 false;}\n<\/script>',label:"lia-quiz-multiple-js"},{documentation:'This will insert a generic script tag in the following form, the @input will be replaced according the current context:\n\n<script>\n  // @input gets replaced by the current quiz input.\n  // In case of a:\n  // * text input -> string, that has to be encapsulated with (")\n  // * single choice -> int (-1, if nothing is selected)\n  // * multiple choice -> array int (0 unchecked, 1 checked)\n  let input = @input;\n\n  true; // if solved otherwise return false\n<\/script>',insertText:'<script>\n  ${1:// @input gets replaced by the current quiz input.\n  // In case of a:\n  // * text input -> string, that has to be encapsulated with (")\n  // * single choice -> int (-1, if nothing is selected)\n  // * multiple choice -> array int (0 unchecked, 1 checked)\n  let input = @input;\n\n  true; // if solved otherwise return false}\n<\/script>',label:"lia-quiz-js"},{documentation:"Insert a the following quiz dummy:\n\n  [( )] This is wrong.\n  [(X)] The only correct option.\n  [( )] Still not right.",insertText:"[(${1: })] ${2:This is wrong.}\n[(${3:X})] ${4:The only correct option.}\n[(${5: })] ${6:Still not right.}",label:"lia-quiz-single-choice-3"},{documentation:"Insert a the following quiz dummy:\n\n[[ ]] Add as many elements as you want?\n[[X]] The X marks the correct answer!\n[[ ]] ... this is wrong ...\n[[X]] ... this has to be selected too ...",insertText:"[[${1: }]] ${2:Add as many elements as you want?}\n[[${3:X}]] ${4:The X marks the correct answer!}\n[[${5: }]] ${6:... this is wrong ...}\n[[${7:X}]] ${8:... this has to be selected too ...}",label:"lia-quiz-multiple-choice-4"},{documentation:"In some rarely rarely rare cases, you might want to have something completely different and analyze some other HTML or code inputs (unit testing). In this case you can apply this generic tag and do in JavaScript whatever you want. The this quiz is solved if the script gets evaluated to true, not solved by resulting in false (everything else is ignored).\n\n*Click Me!*\x3c!-- onclick=\"window['rand'] = Math.random();\" --\x3e\n\n[[!]]\n<script>\n  alert(\"your value random value is:\", window['rand']);\n  if(window['rand'] > 0.8)\n    true;\n  else\n    false\n<\/script>",insertText:"[[!]]\n<script>\n  ${1:// you are free to check anything you want\n  true;}\n<\/script>",label:"lia-quiz-generic-js"}];var iR,nR,oR={},rR=(ic=r("aLykv"),r("1UCgw").Buffer);nR=aR;var sR=r("5B4aj").EventEmitter;function aR(){sR.call(this)}r("1mlyy")(aR,sR),aR.Readable=r("kWQRP"),aR.Writable=r("5Cf3m"),aR.Duplex=r("do3oY"),aR.Transform=r("iAWx9"),aR.PassThrough=r("awteF"),aR.finished=r("iowWU"),aR.pipeline=r("4Uzx8"),aR.Stream=aR,aR.prototype.pipe=function(e,t){var i=this;function n(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",n),e.on("drain",o),e._isStdio||t&&!1===t.end||(i.on("end",s),i.on("close",a));var r=!1;function s(){r||(r=!0,e.end())}function a(){r||(r=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===sR.listenerCount(this,"error"))throw e}function c(){i.removeListener("data",n),e.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",a),i.removeListener("error",l),e.removeListener("error",l),i.removeListener("end",c),i.removeListener("close",c),e.removeListener("close",c)}return i.on("error",l),e.on("error",l),i.on("end",c),i.on("close",c),e.on("close",c),e.emit("pipe",i),e};var lR,cR,dR,uR,hR,gR=nR.Transform,pR={},fR=(ic=r("aLykv"),r("1UCgw").Buffer),mR=r("l0jKv"),_R={};_R=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};var bR={},vR="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function yR(e,t){return Object.prototype.hasOwnProperty.call(e,t)}bR.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)yR(i,n)&&(e[n]=i[n])}}return e},bR.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var wR,CR,xR,SR,kR,ER={arraySet:function(e,t,i,n,o){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),o);else for(var r=0;r<n;r++)e[o+r]=t[i+r]},flattenChunks:function(e){var t,i,n,o,r,s;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(s=new Uint8Array(n),o=0,t=0,i=e.length;t<i;t++)r=e[t],s.set(r,o),o+=r.length;return s}},DR={arraySet:function(e,t,i,n,o){for(var r=0;r<n;r++)e[o+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};bR.setTyped=function(e){e?(bR.Buf8=Uint8Array,bR.Buf16=Uint16Array,bR.Buf32=Int32Array,bR.assign(bR,ER)):(bR.Buf8=Array,bR.Buf16=Array,bR.Buf32=Array,bR.assign(bR,DR))},bR.setTyped(vR);function AR(e){for(var t=e.length;--t>=0;)e[t]=0}var IR=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],RR=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],TR=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],MR=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],LR=new Array(576);AR(LR);var NR=new Array(60);AR(NR);var OR=new Array(512);AR(OR);var PR=new Array(256);AR(PR);var FR=new Array(29);AR(FR);var BR,jR,zR,WR=new Array(30);function HR(e,t,i,n,o){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=e&&e.length}function KR(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function UR(e){return e<256?OR[e]:OR[256+(e>>>7)]}function VR(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function $R(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,VR(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function qR(e,t,i){$R(e,i[2*t],i[2*t+1])}function GR(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function ZR(e,t,i){var n,o,r=new Array(16),s=0;for(n=1;n<=15;n++)r[n]=s=s+i[n-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=GR(r[a]++,a))}}function JR(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function YR(e){e.bi_valid>8?VR(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function XR(e,t,i,n){var o=2*t,r=2*i;return e[o]<e[r]||e[o]===e[r]&&n[t]<=n[i]}function QR(e,t,i){for(var n=e.heap[i],o=i<<1;o<=e.heap_len&&(o<e.heap_len&&XR(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!XR(t,n,e.heap[o],e.depth));)e.heap[i]=e.heap[o],i=o,o<<=1;e.heap[i]=n}function eT(e,t,i){var n,o,r,s,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],o=e.pending_buf[e.l_buf+a],a++,0===n?qR(e,o,t):(qR(e,(r=PR[o])+256+1,t),0!==(s=IR[r])&&$R(e,o-=FR[r],s),qR(e,r=UR(--n),i),0!==(s=RR[r])&&$R(e,n-=WR[r],s))}while(a<e.last_lit);qR(e,256,t)}function tT(e,t){var i,n,o,r=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<l;i++)0!==r[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)r[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,a&&(e.static_len-=s[2*o+1]);for(t.max_code=c,i=e.heap_len>>1;i>=1;i--)QR(e,r,i);o=l;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],QR(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,r[2*o]=r[2*i]+r[2*n],e.depth[o]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,r[2*i+1]=r[2*n+1]=o,e.heap[1]=o++,QR(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,n,o,r,s,a,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,p=t.stat_desc.max_length,f=0;for(r=0;r<=15;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)(r=l[2*l[2*(n=e.heap[i])+1]+1]+1)>p&&(r=p,f++),l[2*n+1]=r,n>c||(e.bl_count[r]++,s=0,n>=g&&(s=h[n-g]),a=l[2*n],e.opt_len+=a*(r+s),u&&(e.static_len+=a*(d[2*n+1]+s)));if(0!==f){do{for(r=p-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[p]--,f-=2}while(f>0);for(r=p;0!==r;r--)for(n=e.bl_count[r];0!==n;)(o=e.heap[--i])>c||(l[2*o+1]!==r&&(e.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),n--)}}(e,t),ZR(r,c,e.bl_count)}function iT(e,t,i){var n,o,r=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)o=s,s=t[2*(n+1)+1],++a<l&&o===s||(a<c?e.bl_tree[2*o]+=a:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,r=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function nT(e,t,i){var n,o,r=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(o=s,s=t[2*(n+1)+1],!(++a<l&&o===s)){if(a<c)do{qR(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==r&&(qR(e,o,e.bl_tree),a--),qR(e,16,e.bl_tree),$R(e,a-3,2)):a<=10?(qR(e,17,e.bl_tree),$R(e,a-3,3)):(qR(e,18,e.bl_tree),$R(e,a-11,7));a=0,r=o,0===s?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}}AR(WR);var oT=!1;function rT(e,t,i,n){$R(e,0+(n?1:0),3),function(e,t,i,n){YR(e),n&&(VR(e,i),VR(e,~i)),bR.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i,!0)}wR=function(e){oT||(!function(){var e,t,i,n,o,r=new Array(16);for(i=0,n=0;n<28;n++)for(FR[n]=i,e=0;e<1<<IR[n];e++)PR[i++]=n;for(PR[i-1]=n,o=0,n=0;n<16;n++)for(WR[n]=o,e=0;e<1<<RR[n];e++)OR[o++]=n;for(o>>=7;n<30;n++)for(WR[n]=o<<7,e=0;e<1<<RR[n]-7;e++)OR[256+o++]=n;for(t=0;t<=15;t++)r[t]=0;for(e=0;e<=143;)LR[2*e+1]=8,e++,r[8]++;for(;e<=255;)LR[2*e+1]=9,e++,r[9]++;for(;e<=279;)LR[2*e+1]=7,e++,r[7]++;for(;e<=287;)LR[2*e+1]=8,e++,r[8]++;for(ZR(LR,287,r),e=0;e<30;e++)NR[2*e+1]=5,NR[2*e]=GR(e,5);BR=new HR(LR,IR,257,286,15),jR=new HR(NR,RR,0,30,15),zR=new HR(new Array(0),TR,0,19,7)}(),oT=!0),e.l_desc=new KR(e.dyn_ltree,BR),e.d_desc=new KR(e.dyn_dtree,jR),e.bl_desc=new KR(e.bl_tree,zR),e.bi_buf=0,e.bi_valid=0,JR(e)},CR=rT,xR=function(e,t,i,n){var o,r,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),tT(e,e.l_desc),tT(e,e.d_desc),s=function(e){var t;for(iT(e,e.dyn_ltree,e.l_desc.max_code),iT(e,e.dyn_dtree,e.d_desc.max_code),tT(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*MR[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=o&&(o=r)):o=r=i+5,i+4<=o&&-1!==t?rT(e,t,i,n):4===e.strategy||r===o?($R(e,2+(n?1:0),3),eT(e,LR,NR)):($R(e,4+(n?1:0),3),function(e,t,i,n){var o;for($R(e,t-257,5),$R(e,i-1,5),$R(e,n-4,4),o=0;o<n;o++)$R(e,e.bl_tree[2*MR[o]+1],3);nT(e,e.dyn_ltree,t-1),nT(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),eT(e,e.dyn_ltree,e.dyn_dtree)),JR(e),n&&YR(e)},SR=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(PR[i]+256+1)]++,e.dyn_dtree[2*UR(t)]++),e.last_lit===e.lit_bufsize-1},kR=function(e){$R(e,2,3),qR(e,256,LR),function(e){16===e.bi_valid?(VR(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var sT={};sT=function(e,t,i,n){for(var o=65535&e|0,r=e>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{r=r+(o=o+t[n++]|0)|0}while(--s);o%=65521,r%=65521}return o|r<<16|0};var aT={};var lT=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();aT=function(e,t,i,n){var o=lT,r=n+i;e^=-1;for(var s=n;s<r;s++)e=e>>>8^o[255&(e^t[s])];return-1^e};var cT;cT={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var dT,uT,hT,gT,pT,fT;function mT(e,t){return e.msg=cT[t],t}function _T(e){return(e<<1)-(e>4?9:0)}function bT(e){for(var t=e.length;--t>=0;)e[t]=0}function vT(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(bR.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function yT(e,t){xR(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,vT(e.strm)}function wT(e,t){e.pending_buf[e.pending++]=t}function CT(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function xT(e,t){var i,n,o=e.max_chain_length,r=e.strstart,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+258,g=c[r+s-1],p=c[r+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(i=t)+s]===p&&c[i+s-1]===g&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<h);if(n=258-(h-r),r=h-258,n>s){if(e.match_start=t,s=n,n>=a)break;g=c[r+s-1],p=c[r+s]}}}while((t=u[t&d])>l&&0!=--o);return s<=e.lookahead?s:e.lookahead}function ST(e){var t,i,n,o,r,s,a,l,c,d,u=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-262)){bR.arraySet(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=i=e.hash_size;do{n=e.head[--t],e.head[t]=n>=u?n-u:0}while(--i);t=i=u;do{n=e.prev[--t],e.prev[t]=n>=u?n-u:0}while(--i);o+=u}if(0===e.strm.avail_in)break;if(s=e.strm,a=e.window,l=e.strstart+e.lookahead,c=o,d=void 0,(d=s.avail_in)>c&&(d=c),i=0===d?0:(s.avail_in-=d,bR.arraySet(a,s.input,s.next_in,d,l),1===s.state.wrap?s.adler=sT(s.adler,a,d,l):2===s.state.wrap&&(s.adler=aT(s.adler,a,d,l)),s.next_in+=d,s.total_in+=d,d),e.lookahead+=i,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+3-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function kT(e,t){for(var i,n;;){if(e.lookahead<262){if(ST(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-262&&(e.match_length=xT(e,i)),e.match_length>=3)if(n=SR(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=SR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(yT(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(yT(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(yT(e,!1),0===e.strm.avail_out)?1:2}function ET(e,t){for(var i,n,o;;){if(e.lookahead<262){if(ST(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-262&&(e.match_length=xT(e,i),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,n=SR(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(yT(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=SR(e,0,e.window[e.strstart-1]))&&yT(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=SR(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(yT(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(yT(e,!1),0===e.strm.avail_out)?1:2}function DT(e,t,i,n,o){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=o}function AT(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new bR.Buf16(1146),this.dyn_dtree=new bR.Buf16(122),this.bl_tree=new bR.Buf16(78),bT(this.dyn_ltree),bT(this.dyn_dtree),bT(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new bR.Buf16(16),this.heap=new bR.Buf16(573),bT(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new bR.Buf16(573),bT(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function IT(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,wR(t),0):mT(e,-2)}function RT(e){var t,i=IT(e);return 0===i&&((t=e.state).window_size=2*t.w_size,bT(t.head),t.max_lazy_match=dT[t.level].max_lazy,t.good_match=dT[t.level].good_length,t.nice_match=dT[t.level].nice_length,t.max_chain_length=dT[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),i}function TT(e,t,i,n,o,r){if(!e)return-2;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==i||n<8||n>15||t<0||t>9||r<0||r>4)return mT(e,-2);8===n&&(n=9);var a=new AT;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new bR.Buf8(2*a.w_size),a.head=new bR.Buf16(a.hash_size),a.prev=new bR.Buf16(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new bR.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=r,a.method=i,RT(e)}dT=[new DT(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ST(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,yT(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(yT(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(yT(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(yT(e,!1),e.strm.avail_out),1)})),new DT(4,4,8,4,kT),new DT(4,5,16,8,kT),new DT(4,6,32,32,kT),new DT(4,4,16,16,ET),new DT(8,16,32,32,ET),new DT(8,16,128,128,ET),new DT(8,32,128,256,ET),new DT(32,128,258,1024,ET),new DT(32,258,258,4096,ET)],lR=TT,cR=RT,dR=function(e,t){var i,n,o,r;if(!e||!e.state||t>5||t<0)return e?mT(e,-2):-2;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return mT(e,0===e.avail_out?-5:-2);if(n.strm=e,i=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,wT(n,31),wT(n,139),wT(n,8),n.gzhead?(wT(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),wT(n,255&n.gzhead.time),wT(n,n.gzhead.time>>8&255),wT(n,n.gzhead.time>>16&255),wT(n,n.gzhead.time>>24&255),wT(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),wT(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(wT(n,255&n.gzhead.extra.length),wT(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=aT(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(wT(n,0),wT(n,0),wT(n,0),wT(n,0),wT(n,0),wT(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),wT(n,3),n.status=113);else{var s=8+(n.w_bits-8<<4)<<8;s|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(s|=32),s+=31-s%31,n.status=113,CT(n,s),0!==n.strstart&&(CT(n,e.adler>>>16),CT(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(o=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),vT(e),o=n.pending,n.pending!==n.pending_buf_size));)wT(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),vT(e),o=n.pending,n.pending===n.pending_buf_size)){r=1;break}r=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,wT(n,r)}while(0!==r);n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),0===r&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){o=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),vT(e),o=n.pending,n.pending===n.pending_buf_size)){r=1;break}r=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,wT(n,r)}while(0!==r);n.gzhead.hcrc&&n.pending>o&&(e.adler=aT(e.adler,n.pending_buf,n.pending-o,o)),0===r&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&vT(e),n.pending+2<=n.pending_buf_size&&(wT(n,255&e.adler),wT(n,e.adler>>8&255),e.adler=0,n.status=113)):n.status=113),0!==n.pending){if(vT(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&_T(t)<=_T(i)&&4!==t)return mT(e,-5);if(666===n.status&&0!==e.avail_in)return mT(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var a=2===n.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(ST(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,i=SR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(yT(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(yT(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(yT(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var i,n,o,r,s=e.window;;){if(e.lookahead<=258){if(ST(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[o=e.strstart-1])===s[++o]&&n===s[++o]&&n===s[++o]){r=e.strstart+258;do{}while(n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&n===s[++o]&&o<r);e.match_length=258-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=SR(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=SR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(yT(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(yT(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(yT(e,!1),0===e.strm.avail_out)?1:2}(n,t):dT[n.level].func(n,t);if(3!==a&&4!==a||(n.status=666),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===a&&(1===t?kR(n):5!==t&&(CR(n,0,0,!1),3===t&&(bT(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),vT(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(wT(n,255&e.adler),wT(n,e.adler>>8&255),wT(n,e.adler>>16&255),wT(n,e.adler>>24&255),wT(n,255&e.total_in),wT(n,e.total_in>>8&255),wT(n,e.total_in>>16&255),wT(n,e.total_in>>24&255)):(CT(n,e.adler>>>16),CT(n,65535&e.adler)),vT(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},uR=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?mT(e,-2):(e.state=null,113===t?mT(e,-3):0):-2},hR=function(e,t){var i,n,o,r,s,a,l,c,d=t.length;if(!e||!e.state)return-2;if(2===(r=(i=e.state).wrap)||1===r&&42!==i.status||i.lookahead)return-2;for(1===r&&(e.adler=sT(e.adler,t,d,0)),i.wrap=0,d>=i.w_size&&(0===r&&(bT(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new bR.Buf8(i.w_size),bR.arraySet(c,t,d-i.w_size,i.w_size,0),t=c,d=i.w_size),s=e.avail_in,a=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,ST(i);i.lookahead>=3;){n=i.strstart,o=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--o);i.strstart=n,i.lookahead=2,ST(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=a,e.input=l,e.avail_in=s,i.wrap=r,0};var MT;MT=function(e,t){var i,n,o,r,s,a,l,c,d,u,h,g,p,f,m,_,b,v,y,w,C,x,S,k,E;i=e.state,n=e.next_in,k=e.input,o=n+(e.avail_in-5),r=e.next_out,E=e.output,s=r-(t-e.avail_out),a=r+(e.avail_out-257),l=i.dmax,c=i.wsize,d=i.whave,u=i.wnext,h=i.window,g=i.hold,p=i.bits,f=i.lencode,m=i.distcode,_=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{p<15&&(g+=k[n++]<<p,p+=8,g+=k[n++]<<p,p+=8),v=f[g&_];t:for(;;){if(g>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))E[r++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=f[(65535&v)+(g&(1<<y)-1)];continue t}if(32&y){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}w=65535&v,(y&=15)&&(p<y&&(g+=k[n++]<<p,p+=8),w+=g&(1<<y)-1,g>>>=y,p-=y),p<15&&(g+=k[n++]<<p,p+=8,g+=k[n++]<<p,p+=8),v=m[g&b];i:for(;;){if(g>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=m[(65535&v)+(g&(1<<y)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(C=65535&v,p<(y&=15)&&(g+=k[n++]<<p,(p+=8)<y&&(g+=k[n++]<<p,p+=8)),(C+=g&(1<<y)-1)>l){e.msg="invalid distance too far back",i.mode=30;break e}if(g>>>=y,p-=y,C>(y=r-s)){if((y=C-y)>d&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(x=0,S=h,0===u){if(x+=c-y,y<w){w-=y;do{E[r++]=h[x++]}while(--y);x=r-C,S=E}}else if(u<y){if(x+=c+u-y,(y-=u)<w){w-=y;do{E[r++]=h[x++]}while(--y);if(x=0,u<w){w-=y=u;do{E[r++]=h[x++]}while(--y);x=r-C,S=E}}}else if(x+=u-y,y<w){w-=y;do{E[r++]=h[x++]}while(--y);x=r-C,S=E}for(;w>2;)E[r++]=S[x++],E[r++]=S[x++],E[r++]=S[x++],w-=3;w&&(E[r++]=S[x++],w>1&&(E[r++]=S[x++]))}else{x=r-C;do{E[r++]=E[x++],E[r++]=E[x++],E[r++]=E[x++],w-=3}while(w>2);w&&(E[r++]=E[x++],w>1&&(E[r++]=E[x++]))}break}}break}}while(n<o&&r<a);n-=w=p>>3,g&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<o?o-n+5:5-(n-o),e.avail_out=r<a?a-r+257:257-(r-a),i.hold=g,i.bits=p};var LT,NT=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],OT=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],PT=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],FT=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];LT=function(e,t,i,n,o,r,s,a){var l,c,d,u,h,g,p,f,m,_=a.bits,b=0,v=0,y=0,w=0,C=0,x=0,S=0,k=0,E=0,D=0,A=null,I=0,R=new bR.Buf16(16),T=new bR.Buf16(16),M=null,L=0;for(b=0;b<=15;b++)R[b]=0;for(v=0;v<n;v++)R[t[i+v]]++;for(C=_,w=15;w>=1&&0===R[w];w--);if(C>w&&(C=w),0===w)return o[r++]=20971520,o[r++]=20971520,a.bits=1,0;for(y=1;y<w&&0===R[y];y++);for(C<y&&(C=y),k=1,b=1;b<=15;b++)if(k<<=1,(k-=R[b])<0)return-1;if(k>0&&(0===e||1!==w))return-1;for(T[1]=0,b=1;b<15;b++)T[b+1]=T[b]+R[b];for(v=0;v<n;v++)0!==t[i+v]&&(s[T[t[i+v]]++]=v);if(0===e?(A=M=s,g=19):1===e?(A=NT,I-=257,M=OT,L-=257,g=256):(A=PT,M=FT,g=-1),D=0,v=0,b=y,h=r,x=C,S=0,d=-1,u=(E=1<<C)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){p=b-S,s[v]<g?(f=0,m=s[v]):s[v]>g?(f=M[L+s[v]],m=A[I+s[v]]):(f=96,m=0),l=1<<b-S,y=c=1<<x;do{o[h+(D>>S)+(c-=l)]=p<<24|f<<16|m|0}while(0!==c);for(l=1<<b-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,v++,0==--R[b]){if(b===w)break;b=t[i+s[v]]}if(b>C&&(D&u)!==d){for(0===S&&(S=C),h+=y,k=1<<(x=b-S);x+S<w&&!((k-=R[x+S])<=0);)x++,k<<=1;if(E+=1<<x,1===e&&E>852||2===e&&E>592)return 1;o[d=D&u]=C<<24|x<<16|h-r|0}}return 0!==D&&(o[h+D]=b-S<<24|4194304),a.bits=C,0};function BT(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function jT(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new bR.Buf16(320),this.work=new bR.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function zT(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new bR.Buf32(852),t.distcode=t.distdyn=new bR.Buf32(592),t.sane=1,t.back=-1,0):-2}function WT(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,zT(e)):-2}function HT(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,WT(e))):-2}function KT(e,t){var i,n;return e?(n=new jT,e.state=n,n.window=null,0!==(i=HT(e,t))&&(e.state=null),i):-2}var UT,VT,$T=!0;function qT(e){if($T){var t;for(UT=new bR.Buf32(512),VT=new bR.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(LT(1,e.lens,0,288,UT,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;LT(2,e.lens,0,32,VT,0,e.work,{bits:5}),$T=!1}e.lencode=UT,e.lenbits=9,e.distcode=VT,e.distbits=5}function GT(e,t,i,n){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new bR.Buf8(r.wsize)),n>=r.wsize?(bR.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((o=r.wsize-r.wnext)>n&&(o=n),bR.arraySet(r.window,t,i-n,o,r.wnext),(n-=o)?(bR.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}uT=WT,hT=KT,gT=function(e,t){var i,n,o,r,s,a,l,c,d,u,h,g,p,f,m,_,b,v,y,w,C,x,S,k,E=0,D=new bR.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(i=e.state).mode&&(i.mode=13),s=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,n=e.input,a=e.avail_in,c=i.hold,d=i.bits,u=a,h=l,x=0;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;d<16;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(2&i.wrap&&35615===c){i.check=0,D[0]=255&c,D[1]=c>>>8&255,i.check=aT(i.check,D,2,0),c=0,d=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&c)){e.msg="unknown compression method",i.mode=30;break}if(d-=4,C=8+(15&(c>>>=4)),0===i.wbits)i.wbits=C;else if(C>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<C,e.adler=i.check=1,i.mode=512&c?10:12,c=0,d=0;break;case 2:for(;d<16;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(i.flags=c,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&(D[0]=255&c,D[1]=c>>>8&255,i.check=aT(i.check,D,2,0)),c=0,d=0,i.mode=3;case 3:for(;d<32;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.head&&(i.head.time=c),512&i.flags&&(D[0]=255&c,D[1]=c>>>8&255,D[2]=c>>>16&255,D[3]=c>>>24&255,i.check=aT(i.check,D,4,0)),c=0,d=0,i.mode=4;case 4:for(;d<16;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&(D[0]=255&c,D[1]=c>>>8&255,i.check=aT(i.check,D,2,0)),c=0,d=0,i.mode=5;case 5:if(1024&i.flags){for(;d<16;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&(D[0]=255&c,D[1]=c>>>8&255,i.check=aT(i.check,D,2,0)),c=0,d=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((g=i.length)>a&&(g=a),g&&(i.head&&(C=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),bR.arraySet(i.head.extra,n,r,g,C)),512&i.flags&&(i.check=aT(i.check,n,g,r)),a-=g,r+=g,i.length-=g),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===a)break e;g=0;do{C=n[r+g++],i.head&&C&&i.length<65536&&(i.head.name+=String.fromCharCode(C))}while(C&&g<a);if(512&i.flags&&(i.check=aT(i.check,n,g,r)),a-=g,r+=g,C)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===a)break e;g=0;do{C=n[r+g++],i.head&&C&&i.length<65536&&(i.head.comment+=String.fromCharCode(C))}while(C&&g<a);if(512&i.flags&&(i.check=aT(i.check,n,g,r)),a-=g,r+=g,C)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;d<16;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(c!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}c=0,d=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;d<32;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}e.adler=i.check=BT(c),c=0,d=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=d,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){c>>>=7&d,d-=7&d,i.mode=27;break}for(;d<3;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}switch(i.last=1&c,d-=1,3&(c>>>=1)){case 0:i.mode=14;break;case 1:if(qT(i),i.mode=20,6===t){c>>>=2,d-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}c>>>=2,d-=2;break;case 14:for(c>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&c,c=0,d=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(g=i.length){if(g>a&&(g=a),g>l&&(g=l),0===g)break e;bR.arraySet(o,n,r,g,s),a-=g,r+=g,l-=g,s+=g,i.length-=g;break}i.mode=12;break;case 17:for(;d<14;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(i.nlen=257+(31&c),c>>>=5,d-=5,i.ndist=1+(31&c),c>>>=5,d-=5,i.ncode=4+(15&c),c>>>=4,d-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;d<3;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.lens[A[i.have++]]=7&c,c>>>=3,d-=3}for(;i.have<19;)i.lens[A[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,S={bits:i.lenbits},x=LT(0,i.lens,0,19,i.lencode,0,i.work,S),i.lenbits=S.bits,x){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;_=(E=i.lencode[c&(1<<i.lenbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(b<16)c>>>=m,d-=m,i.lens[i.have++]=b;else{if(16===b){for(k=m+2;d<k;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(c>>>=m,d-=m,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}C=i.lens[i.have-1],g=3+(3&c),c>>>=2,d-=2}else if(17===b){for(k=m+3;d<k;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}d-=m,C=0,g=3+(7&(c>>>=m)),c>>>=3,d-=3}else{for(k=m+7;d<k;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}d-=m,C=0,g=11+(127&(c>>>=m)),c>>>=7,d-=7}if(i.have+g>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;g--;)i.lens[i.have++]=C}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,S={bits:i.lenbits},x=LT(1,i.lens,0,i.nlen,i.lencode,0,i.work,S),i.lenbits=S.bits,x){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,S={bits:i.distbits},x=LT(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,S),i.distbits=S.bits,x){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=d,MT(e,h),s=e.next_out,o=e.output,l=e.avail_out,r=e.next_in,n=e.input,a=e.avail_in,c=i.hold,d=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;_=(E=i.lencode[c&(1<<i.lenbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(_&&0==(240&_)){for(v=m,y=_,w=b;_=(E=i.lencode[w+((c&(1<<v+y)-1)>>v)])>>>16&255,b=65535&E,!(v+(m=E>>>24)<=d);){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}c>>>=v,d-=v,i.back+=v}if(c>>>=m,d-=m,i.back+=m,i.length=b,0===_){i.mode=26;break}if(32&_){i.back=-1,i.mode=12;break}if(64&_){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&_,i.mode=22;case 22:if(i.extra){for(k=i.extra;d<k;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;_=(E=i.distcode[c&(1<<i.distbits)-1])>>>16&255,b=65535&E,!((m=E>>>24)<=d);){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(0==(240&_)){for(v=m,y=_,w=b;_=(E=i.distcode[w+((c&(1<<v+y)-1)>>v)])>>>16&255,b=65535&E,!(v+(m=E>>>24)<=d);){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}c>>>=v,d-=v,i.back+=v}if(c>>>=m,d-=m,i.back+=m,64&_){e.msg="invalid distance code",i.mode=30;break}i.offset=b,i.extra=15&_,i.mode=24;case 24:if(i.extra){for(k=i.extra;d<k;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,d-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===l)break e;if(g=h-l,i.offset>g){if((g=i.offset-g)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}g>i.wnext?(g-=i.wnext,p=i.wsize-g):p=i.wnext-g,g>i.length&&(g=i.length),f=i.window}else f=o,p=s-i.offset,g=i.length;g>l&&(g=l),l-=g,i.length-=g;do{o[s++]=f[p++]}while(--g);0===i.length&&(i.mode=21);break;case 26:if(0===l)break e;o[s++]=i.length,l--,i.mode=21;break;case 27:if(i.wrap){for(;d<32;){if(0===a)break e;a--,c|=n[r++]<<d,d+=8}if(h-=l,e.total_out+=h,i.total+=h,h&&(e.adler=i.check=i.flags?aT(i.check,o,h,s-h):sT(i.check,o,h,s-h)),h=l,(i.flags?c:BT(c))!==i.check){e.msg="incorrect data check",i.mode=30;break}c=0,d=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;d<32;){if(0===a)break e;a--,c+=n[r++]<<d,d+=8}if(c!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}c=0,d=0}i.mode=29;case 29:x=1;break e;case 30:x=-3;break e;case 31:return-4;default:return-2}return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=a,i.hold=c,i.bits=d,(i.wsize||h!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&GT(e,e.output,e.next_out,h-e.avail_out)?(i.mode=31,-4):(u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,i.total+=h,i.wrap&&h&&(e.adler=i.check=i.flags?aT(i.check,o,h,e.next_out-h):sT(i.check,o,h,e.next_out-h)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0===u&&0===h||4===t)&&0===x&&(x=-5),x)},pT=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},fT=function(e,t){var i,n=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?-2:11===i.mode&&sT(1,t,n,0)!==i.check?-3:GT(e,t,n,n)?(i.mode=31,-4):(i.havedict=1,0):-2};var ZT;for(var JT in ZT={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8})pR[JT]=ZT[JT];pR.NONE=0,pR.DEFLATE=1,pR.INFLATE=2,pR.GZIP=3,pR.GUNZIP=4,pR.DEFLATERAW=5,pR.INFLATERAW=6,pR.UNZIP=7;function YT(e){if("number"!=typeof e||e<pR.DEFLATE||e>pR.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}YT.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,mR(this.init_done,"close before init"),mR(this.mode<=pR.UNZIP),this.mode===pR.DEFLATE||this.mode===pR.GZIP||this.mode===pR.DEFLATERAW?uR(this.strm):this.mode!==pR.INFLATE&&this.mode!==pR.GUNZIP&&this.mode!==pR.INFLATERAW&&this.mode!==pR.UNZIP||pT(this.strm),this.mode=pR.NONE,this.dictionary=null)},YT.prototype.write=function(e,t,i,n,o,r,s){return this._write(!0,e,t,i,n,o,r,s)},YT.prototype.writeSync=function(e,t,i,n,o,r,s){return this._write(!1,e,t,i,n,o,r,s)},YT.prototype._write=function(e,t,i,n,o,r,s,a){if(mR.equal(arguments.length,8),mR(this.init_done,"write before init"),mR(this.mode!==pR.NONE,"already finalized"),mR.equal(!1,this.write_in_progress,"write already in progress"),mR.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,mR.equal(!1,void 0===t,"must provide flush value"),this.write_in_progress=!0,t!==pR.Z_NO_FLUSH&&t!==pR.Z_PARTIAL_FLUSH&&t!==pR.Z_SYNC_FLUSH&&t!==pR.Z_FULL_FLUSH&&t!==pR.Z_FINISH&&t!==pR.Z_BLOCK)throw new Error("Invalid flush value");if(null==i&&(i=fR.alloc(0),o=0,n=0),this.strm.avail_in=o,this.strm.input=i,this.strm.next_in=n,this.strm.avail_out=a,this.strm.output=r,this.strm.next_out=s,this.flush=t,!e)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return ic.nextTick((function(){l._process(),l._after()})),this},YT.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},YT.prototype._process=function(){var e=null;switch(this.mode){case pR.DEFLATE:case pR.GZIP:case pR.DEFLATERAW:this.err=dR(this.strm,this.flush);break;case pR.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=pR.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=pR.GUNZIP):this.mode=pR.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case pR.INFLATE:case pR.GUNZIP:case pR.INFLATERAW:for(this.err=gT(this.strm,this.flush),this.err===pR.Z_NEED_DICT&&this.dictionary&&(this.err=fT(this.strm,this.dictionary),this.err===pR.Z_OK?this.err=gT(this.strm,this.flush):this.err===pR.Z_DATA_ERROR&&(this.err=pR.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===pR.GUNZIP&&this.err===pR.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=gT(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},YT.prototype._checkError=function(){switch(this.err){case pR.Z_OK:case pR.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===pR.Z_FINISH)return this._error("unexpected end of file"),!1;break;case pR.Z_STREAM_END:break;case pR.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},YT.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},YT.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},YT.prototype.init=function(e,t,i,n,o){mR(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),mR(e>=8&&e<=15,"invalid windowBits"),mR(t>=-1&&t<=9,"invalid compression level"),mR(i>=1&&i<=9,"invalid memlevel"),mR(n===pR.Z_FILTERED||n===pR.Z_HUFFMAN_ONLY||n===pR.Z_RLE||n===pR.Z_FIXED||n===pR.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,i,n,o),this._setDictionary()},YT.prototype.params=function(){throw new Error("deflateParams Not supported")},YT.prototype.reset=function(){this._reset(),this._setDictionary()},YT.prototype._init=function(e,t,i,n,o){switch(this.level=e,this.windowBits=t,this.memLevel=i,this.strategy=n,this.flush=pR.Z_NO_FLUSH,this.err=pR.Z_OK,this.mode!==pR.GZIP&&this.mode!==pR.GUNZIP||(this.windowBits+=16),this.mode===pR.UNZIP&&(this.windowBits+=32),this.mode!==pR.DEFLATERAW&&this.mode!==pR.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new _R,this.mode){case pR.DEFLATE:case pR.GZIP:case pR.DEFLATERAW:this.err=lR(this.strm,this.level,pR.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case pR.INFLATE:case pR.GUNZIP:case pR.INFLATERAW:case pR.UNZIP:this.err=hT(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==pR.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},YT.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=pR.Z_OK,this.mode){case pR.DEFLATE:case pR.DEFLATERAW:this.err=hR(this.strm,this.dictionary)}this.err!==pR.Z_OK&&this._error("Failed to set dictionary")}},YT.prototype._reset=function(){switch(this.err=pR.Z_OK,this.mode){case pR.DEFLATE:case pR.DEFLATERAW:case pR.GZIP:this.err=cR(this.strm);break;case pR.INFLATE:case pR.INFLATERAW:case pR.GUNZIP:this.err=uT(this.strm)}this.err!==pR.Z_OK&&this._error("Failed to reset stream")},pR.Zlib=YT;var XT=r("lquaG"),QT=(mR=r("l0jKv")).ok,eM=r("1UCgw").kMaxLength,tM="Cannot create final Buffer. It would be larger than 0x"+eM.toString(16)+" bytes";pR.Z_MIN_WINDOWBITS=8,pR.Z_MAX_WINDOWBITS=15,pR.Z_DEFAULT_WINDOWBITS=15,pR.Z_MIN_CHUNK=64,pR.Z_MAX_CHUNK=1/0,pR.Z_DEFAULT_CHUNK=16384,pR.Z_MIN_MEMLEVEL=1,pR.Z_MAX_MEMLEVEL=9,pR.Z_DEFAULT_MEMLEVEL=8,pR.Z_MIN_LEVEL=-1,pR.Z_MAX_LEVEL=9,pR.Z_DEFAULT_LEVEL=pR.Z_DEFAULT_COMPRESSION;for(var iM=Object.keys(pR),nM=0;nM<iM.length;nM++){var oM=iM[nM];oM.match(/^Z/)&&Object.defineProperty(oR,oM,{enumerable:!0,value:pR[oM],writable:!1})}for(var rM={Z_OK:pR.Z_OK,Z_STREAM_END:pR.Z_STREAM_END,Z_NEED_DICT:pR.Z_NEED_DICT,Z_ERRNO:pR.Z_ERRNO,Z_STREAM_ERROR:pR.Z_STREAM_ERROR,Z_DATA_ERROR:pR.Z_DATA_ERROR,Z_MEM_ERROR:pR.Z_MEM_ERROR,Z_BUF_ERROR:pR.Z_BUF_ERROR,Z_VERSION_ERROR:pR.Z_VERSION_ERROR},sM=Object.keys(rM),aM=0;aM<sM.length;aM++){var lM=sM[aM];rM[rM[lM]]=lM}function cM(e,t,i){var n=[],o=0;function r(){for(var t;null!==(t=e.read());)n.push(t),o+=t.length;e.once("readable",r)}function s(){var t,r=null;o>=eM?r=new RangeError(tM):t=rR.concat(n,o),n=[],e.close(),i(r,t)}e.on("error",(function(t){e.removeListener("end",s),e.removeListener("readable",r),i(t)})),e.on("end",s),e.end(t),r()}function dM(e,t){if("string"==typeof t&&(t=rR.from(t)),!rR.isBuffer(t))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk(t,i)}function uM(e){if(!(this instanceof uM))return new uM(e);vM.call(this,e,pR.DEFLATE)}function hM(e){if(!(this instanceof hM))return new hM(e);vM.call(this,e,pR.INFLATE)}function gM(e){if(!(this instanceof gM))return new gM(e);vM.call(this,e,pR.GZIP)}function pM(e){if(!(this instanceof pM))return new pM(e);vM.call(this,e,pR.GUNZIP)}function fM(e){if(!(this instanceof fM))return new fM(e);vM.call(this,e,pR.DEFLATERAW)}function mM(e){if(!(this instanceof mM))return new mM(e);vM.call(this,e,pR.INFLATERAW)}function _M(e){if(!(this instanceof _M))return new _M(e);vM.call(this,e,pR.UNZIP)}function bM(e){return e===pR.Z_NO_FLUSH||e===pR.Z_PARTIAL_FLUSH||e===pR.Z_SYNC_FLUSH||e===pR.Z_FULL_FLUSH||e===pR.Z_FINISH||e===pR.Z_BLOCK}function vM(e,t){var i=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||oR.Z_DEFAULT_CHUNK,gR.call(this,e),e.flush&&!bM(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!bM(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||pR.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:pR.Z_FINISH,e.chunkSize&&(e.chunkSize<oR.Z_MIN_CHUNK||e.chunkSize>oR.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<oR.Z_MIN_WINDOWBITS||e.windowBits>oR.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<oR.Z_MIN_LEVEL||e.level>oR.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<oR.Z_MIN_MEMLEVEL||e.memLevel>oR.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=oR.Z_FILTERED&&e.strategy!=oR.Z_HUFFMAN_ONLY&&e.strategy!=oR.Z_RLE&&e.strategy!=oR.Z_FIXED&&e.strategy!=oR.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!rR.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new pR.Zlib(t);var n=this;this._hadError=!1,this._handle.onerror=function(e,t){yM(n),n._hadError=!0;var i=new Error(e);i.errno=t,i.code=oR.codes[t],n.emit("error",i)};var o=oR.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var r=oR.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._handle.init(e.windowBits||oR.Z_DEFAULT_WINDOWBITS,o,e.memLevel||oR.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=rR.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=r,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!i._handle},configurable:!0,enumerable:!0})}function yM(e,t){t&&ic.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function wM(e){e.emit("close")}Object.defineProperty(oR,"codes",{enumerable:!0,value:Object.freeze(rM),writable:!1}),oR.Deflate=uM,oR.Inflate=hM,oR.Gzip=gM,oR.Gunzip=pM,oR.DeflateRaw=fM,oR.InflateRaw=mM,oR.Unzip=_M,oR.createDeflate=function(e){return new uM(e)},oR.createInflate=function(e){return new hM(e)},oR.createDeflateRaw=function(e){return new fM(e)},oR.createInflateRaw=function(e){return new mM(e)},oR.createGzip=function(e){return new gM(e)},oR.createGunzip=function(e){return new pM(e)},oR.createUnzip=function(e){return new _M(e)},oR.deflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new uM(t),e,i)},oR.deflateSync=function(e,t){return dM(new uM(t),e)},oR.gzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new gM(t),e,i)},oR.gzipSync=function(e,t){return dM(new gM(t),e)},oR.deflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new fM(t),e,i)},oR.deflateRawSync=function(e,t){return dM(new fM(t),e)},oR.unzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new _M(t),e,i)},oR.unzipSync=function(e,t){return dM(new _M(t),e)},oR.inflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new hM(t),e,i)},oR.inflateSync=function(e,t){return dM(new hM(t),e)},oR.gunzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new pM(t),e,i)},oR.gunzipSync=function(e,t){return dM(new pM(t),e)},oR.inflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),cM(new mM(t),e,i)},oR.inflateRawSync=function(e,t){return dM(new mM(t),e)},XT.inherits(vM,gR),vM.prototype.params=function(e,t,i){if(e<oR.Z_MIN_LEVEL||e>oR.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=oR.Z_FILTERED&&t!=oR.Z_HUFFMAN_ONLY&&t!=oR.Z_RLE&&t!=oR.Z_FIXED&&t!=oR.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(pR.Z_SYNC_FLUSH,(function(){QT(n._handle,"zlib binding closed"),n._handle.params(e,t),n._hadError||(n._level=e,n._strategy=t,i&&i())}))}else ic.nextTick(i)},vM.prototype.reset=function(){return QT(this._handle,"zlib binding closed"),this._handle.reset()},vM.prototype._flush=function(e){this._transform(rR.alloc(0),"",e)},vM.prototype.flush=function(e,t){var i=this,n=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=pR.Z_FULL_FLUSH),n.ended?t&&ic.nextTick(t):n.ending?t&&this.once("end",t):n.needDrain?t&&this.once("drain",(function(){return i.flush(e,t)})):(this._flushFlag=e,this.write(rR.alloc(0),"",t))},vM.prototype.close=function(e){yM(this,e),ic.nextTick(wM,this)},vM.prototype._transform=function(e,t,i){var n,o=this._writableState,r=(o.ending||o.ended)&&(!e||o.length===e.length);return null===e||rR.isBuffer(e)?this._handle?(r?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||pR.Z_NO_FLUSH)),void this._processChunk(e,n,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},vM.prototype._processChunk=function(e,t,i){var n=e&&e.length,o=this._chunkSize-this._offset,r=0,s=this,a="function"==typeof i;if(!a){var l,c=[],d=0;this.on("error",(function(e){l=e})),QT(this._handle,"zlib binding closed");do{var u=this._handle.writeSync(t,e,r,n,this._buffer,this._offset,o)}while(!this._hadError&&p(u[0],u[1]));if(this._hadError)throw l;if(d>=eM)throw yM(this),new RangeError(tM);var h=rR.concat(c,d);return yM(this),h}QT(this._handle,"zlib binding closed");var g=this._handle.write(t,e,r,n,this._buffer,this._offset,o);function p(l,u){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var h=o-u;if(QT(h>=0,"have should not go down"),h>0){var g=s._buffer.slice(s._offset,s._offset+h);s._offset+=h,a?s.push(g):(c.push(g),d+=g.length)}if((0===u||s._offset>=s._chunkSize)&&(o=s._chunkSize,s._offset=0,s._buffer=rR.allocUnsafe(s._chunkSize)),0===u){if(r+=n-l,n=l,!a)return!0;var f=s._handle.write(t,e,r,n,s._buffer,s._offset,s._chunkSize);return f.callback=p,void(f.buffer=e)}if(!a)return!1;i()}}g.buffer=e,g.callback=p},XT.inherits(uM,vM),XT.inherits(hM,vM),XT.inherits(gM,vM),XT.inherits(pM,vM),XT.inherits(fM,vM),XT.inherits(mM,vM),XT.inherits(_M,vM);var CM=oR.gzip,xM=oR.gunzip,SM=(XT=r("lquaG")).promisify,kM=r("1UCgw").Buffer;const EM=SM(CM),DM=SM(xM);iR={compress:async(e="")=>{const t=await EM(e);return kM.from(t).toString("base64")},decompress:async(e="")=>(await DM(kM.from(kM.from(e,"base64")))).toString()};const AM=(e,t)=>{const i="modal-container";let n=document.getElementById(i);n||(n=document.createElement("div"),n.id=i,document.body.append(n)),n.innerHTML=`\x3c!-- Modal --\x3e\n    <div class="modal fade" id="modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">\n      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalLabel">${e}</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n          </div>\n          <div class="modal-body">\n            ${t}\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            \x3c!--button type="button" class="btn btn-primary">Save changes</button--\x3e\n          </div>\n        </div>\n      </div>\n    </div>`;new bootstrap.Modal(document.getElementById("modal"),{"data-bs-toggle":"modal"}).show()};async function IM(e){switch(e){case"url":AM("Collaboration link",`\n        If you share the link below, the editor will be in collaborative mode.\n        Working should also be possible offline, but all connected users will work on the same course.\n        If you did receive this via a collaboration link and want to make a complete new course by yourself, then you will have to click onto the "Fork" button, which will create a complete new version.\n        \n        <hr>\n\n        <a href="${window.location.toString()}">\n          ${window.location.toString()}\n        </a>`);break;case"zip":{const e=await iR.compress(window.LIA.editor.getValue());AM("Snapshot url",`\n        Snapshots are URLs that contain the entire course defintion.\n        However, this works only for short courses, the longer the course the longer the URL.\n        Sharing your editor via a messenger for example, you will have to check first if no parts are truncated!\n        Additionally different browser support different lengths of URLs...\n                    \n        <hr>\n        \n        <a style="word-break: break-all" href="${dn(["show","code",e])}">\n          ${dn(["show","code",e])}\n        </a>`);break}case"file":{const e=prompt("please insert the URL of a Markdown file you want to share","");if(!e)return;AM("External resource",`\n        Use this URL to predefine the content for your share link.\n        In this case the editor will at first try to load the Markdown file and insert its content into the editor.\n        This link will only work if your Markdown file is accessible via the internet.\n                    \n        <hr>\n        \n        <a style="word-break: break-all" href="${dn(["show","file",e])}">\n          ${dn(["show","file",e])}\n        </a>`)}}}function RM(e){const t=document.getElementById("liascript-editor-container"),i=document.getElementById("liascript-preview-container");if(t&&i)switch(e){case 0:t.hidden=!1,i.hidden=!0,t.classList.replace("w-50","w-100");break;case 1:t.hidden=!0,i.hidden=!1,i.classList.replace("w-50","w-100");break;case 2:t.hidden=!1,i.hidden=!1,t.classList.replace("w-100","w-50"),i.classList.replace("w-100","w-50")}}function TM(e){!e&&window.LIA.editor&&(e=window.LIA.editor.getValue()),window.LIA.init(e||"")}function MM(){if(!window.LIA.editor)return void console.warn("No editor defined ...");const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(window.LIA.editor.getValue())),e.setAttribute("download","README.md"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function LM(e){setTimeout((()=>{const e=document.getElementById("preview-overlay");e&&e.remove()}),e)}function NM(){window.LIA.preview.lineGoto=function(e){var t,i,n;null===(t=window.LIA.editor)||void 0===t||t.setPosition({lineNumber:e+1,column:0}),null===(i=window.LIA.editor)||void 0===i||i.revealLineNearTop(e+1),null===(n=window.LIA.editor)||void 0===n||n.focus()},LM(1e3)}self.MonacoEnvironment={getWorkerUrl:function(e,t){return i("json"===t?JI:"css"===t||"scss"===t||"less"===t?YI:"html"===t||"handlebars"===t||"razor"===t?XI:"typescript"===t||"javascript"===t?QI:eR)}},window.LIA||(window.LIA={isCtrlPressed:!1,preview:void 0,editor:void 0,isReady:!1,onReady:e=>{console.warn("You need to overwrite window.LIA.onReady")},init:(e,t)=>{if(window.LIA.preview&&window.LIA.preview.jit)window.LIA.preview.focusOnMain=!1,window.LIA.preview.scrollUpOnMain=!1,t&&t(),e&&e.trim()?window.LIA.preview.jit(e):(console.warn("Empty Document, generating help"),window.LIA.preview.jit('\x3c!--\nauthor: André Dietrich\nemail:  LiaScript@web.de\ncomment: This is a short introduction to the LiaScript live editor.\n\nclassroom: disable\n--\x3e\n\n# Welcome to LiaScript\n\nIf you are new to LiaScript and this editor then please read this short introduction ...\notherwise we are sorry for interrupting, please go on and create a beautiful course ;-)\n\n> __Note:__\n> \n> This is a new editor based on [Yjs](https://docs.yjs.dev) for collaborative.\n> We are still in the development phase and some feature like directly sharing courses from this editor and uploading multimedia content does will not work.\n> This editor is entirely browser-based, thus there is no backend involved which stores your content.\n> Everything will be stored within your local browser and you should also be able to edit content offline.\n\n\n<article>\n\n---\n\n### 1. Editing\n\nIf you are new to\n[Markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet),\ncheck out some or our [resources](#resources), otherwise start typing ...\n__WAIT__ ... the preview does not update, right?\nThis is not a bug!\nThe live update is deactivated to minimize computational costs and to stop errors from being show, when HTML, JavaScript is not fully written down.\nYou have to update the preview by your own, simply by clicking onto the compilation button at the top or, to speed up things, by pressing <kbd>Ctrl</kbd> + <kbd>S</kbd> on your keyboard.\n\n\n| Shortcut                       | Action                   |\n|--------------------------------|--------------------------|\n| <kbd>Ctrl</kbd> + <kbd>S</kbd> | Update the preview       |\n| <kbd>Ctrl</kbd> + <kbd>F</kbd> | Open document search     |\n| <kbd>Ctrl</kbd> + <kbd>A</kbd> | Select all               |\n| <kbd>F1</kbd>                  | Open command line pallet |\n\n---\n\n### 2. Snippets\n\nWe added 3 types of snippets, that are indicated by `lia`, `hili`, and `voice`.\nThis way you do not have to remember all details but can simply search through the different options.\nOne way to start a document is by typing `liainit` and then hitting <kbd>Enter</kbd>.\nThis will generate a document stub for you, which you can use as a starting point.\n_When you update the preview, this help will be gone._\n\nYou have to extend the snippets-view by clicking onto the arrow on the right.\nThis way, more information will be presented and you can start your experiments.\n\n1. Start typing `lia` in your markdown document to see the extended help, that can be explored via fuzzy-searching.\n   Hit <kbd>Tab</kbd> or <kbd>Enter</kbd> for inserting your selected snippet.\n\n2. To ease the `voice` selection for different narrators, start typing voice and search through all possible voice settings.\n\n3. Syntax highlighting help is offered if you start typing `hili` followed by your language of choice.\n   Since LiaScript applies the ace-editor, there is a matching done between highlight.js and ace.\n   You can select your language from highlight.js, but it will be translated into the text in parentheses.\n\n---\n\n### 3. Navigating\n\nYou can use the mouse to navigate between the editor and the preview.\n\n1. __Preview --\x3e Editor__:\n   If you double-click on an element within the preview pane the cursor within the editor will automatically jump to the corresponding line.  \n\n2. __Editor --\x3e Preview__:\n   Press <kbd>Ctrl</kbd> and double-click on a word with the editor, which will open the corresponding page within the preview.\n\n</article>\n\n## Collaborative editing\n\nWhen you create a new document and share its URL this "shall" enable collaborative editing with all users that that have opened this URL are online at the same time.\nYou can also edit your content when you are offline, all states will be stored in your browser and all synchronizing will happen between the browsers (using [WebRTC](https://en.wikipedia.org/wiki/WebRTC)).\nThus, if you want a course where no external user can change the content, you will have to keep the URL private or you can create a new private copy by clicking on "Fork" at the menu.\nA "fork" will create a new starting point for your document that begins with the last state of your current doc.\n\n## Sharing\n\n### Snapshots\n\nWithin the "Menu" you have to possibility to share a "Snapshot-URL" of your document.\nThis means, the content of your current document will be zipped, encoded as [base64](https://en.wikipedia.org/wiki/Base64), and the resulting code will be attached to the URL.\nThe longer your document, the longer the resulting URL.\nHowever, this is intended to share short examples, thus, you should check at first if the course can be displayed properly and if your messenger does not truncate some of the content.\n\nThe resulting document can be opened, edited, and also the new content can be shared, but it will not be stored permanently within your browser nor is collaborative editing possible.\nYou will have to fork the document at first, then your changes will be stored persistently and you can work on it with other creators. \n\n### Files\n\nYou can predefine an external resource as a starting point for sharing.\nInsert the URL of the raw Markdown as if you would share a course and this file will be added as a URL-parameter to your share link.\n\n\n## Multimedia\n\nCurrently it is not possible to store multimedia-content within this editor, we are working on it ;-)\n\nThus your will have to relay on external resources (URLs) and link to them.\nBut, if you need for example simple diagrams, you can use also the LiaScript ASCII-art features.\n\nYou can copy and paste the following example into your document:\n\n``` markdown\n                                    Multiline\n      1.9 |\n          |                 ***\n        y |               *     *\n        - | r r r r r r r*r r r r*r r r r r r r\n        a |             *         *\n        x |            *           *\n        i | B B B B B * B B B B B B * B B B B B\n        s |         *                 *\n          | *  * *                       * *  *\n       -1 +------------------------------------\n          0              x-axis               1\n```\n\n\nor ...\n\n````\n``` ascii\n+------+   +-----+   +-----+   +-----+\n|      |   |     |   |     |   |     |\n| Foo  +--\x3e| Bar +---+ Baz |<--+ Moo |\n|      |   |     |   |     |   |     |\n+------+   +-----+   +--+--+   +-----+\n              ^         |\n              |         V\n.-------------+-----------------------.\n| Hello here and there and everywhere |\n\'-------------------------------------\'\n```\n````\n\n## Resources\n\n\n* Project-Website: https://LiaScript.github.io\n\n* Open-Source: https://github.com/liascript\n\n* YouTube: https://www.youtube.com/channel/UCyiTe2GkW_u05HSdvUblGYg\n\n* Additional resources:\n  \n  - Documentation: https://github.com/LiaScript/docs\n  - Free books: https://github.com/LiaBooks\n  - Templates: https://github.com/topics/liascript-template\n  - Courses & ...: https://github.com/topics/liascript-course\n  - Blog: https://aizac.herokuapp.com\n\n* Editor:\n\n  - VSCode: https://code.visualstudio.com/Download\n\n    - HowTo: https://aizac.herokuapp.com/install-visual-studio-code-with-liascript/\n    - Liascript-Preview: https://marketplace.visualstudio.com/items?itemName=LiaScript.liascript-preview\n    - Liascript-Snippets: https://marketplace.visualstudio.com/items?itemName=LiaScript.liascript-snippets\n\n  - Atom: https://aizac.herokuapp.com/install-atom-with-liascript/\n\n* Development-Server: https://www.npmjs.com/package/@liascript/devserver\n\n* Exporter: https://www.npmjs.com/package/@liascript/exporter\n\n\n## Get Help\n\nHow to contact us:\n\n* by eMail: LiaScript@web.de\n* via Twitter: https://twitter.com/LiaScript\n* or via chat: https://gitter.im/LiaScript/community\n'));else{var i;const n=document.getElementById("liascript-preview");n&&(window.LIA.preview=null===(i=n.contentWindow)||void 0===i?void 0:i.LIA),setTimeout((function(){window.LIA.init(e,t)}),100)}},compile:TM,showMode:RM,share:IM,download:MM,delete:async e=>{console.warn("todo")},fork:async e=>{console.warn("todo")}}),window.liaReady=function(e){var t;const i=document.getElementById("liascript-preview");if(i&&(null===(t=i.contentWindow)||void 0===t?void 0:t.LIA)&&(i.contentWindow.LIA.onReady=window.LIA.onReady,mn.responsiveVoiceKey&&i.contentWindow.LIA.injectResposivevoice(mn.responsiveVoiceKey)),!window.LIA.isReady){var n;window.LIA.isReady=!0;var o=null===(n=window.LIA.editor)||void 0===n?void 0:n.getValue();window.LIA.init(o,NM),LM(1e3)}},window.LIA.fork=function(){const e=cn(24),t=new Hr;t.getText(e).insert(0,window.LIA.editor.getValue());new Pl(e,t);setTimeout((()=>{window.location.search="/edit/"+e}),500)};class OM extends un{initPreview(){var e;const t=(null===(e=this.params.id)||void 0===e?void 0:e.length)>8?this.params.id:null,i=this.index;window.LIA.onReady=e=>{if(t){var n;const o=null===(n=window.LIA.editor)||void 0===n?void 0:n.getValue().match(/^# (.+)/m);o&&(e.title=o[1]),i.put(t,e)}}}initEditor(e){var t,i;window.LIA.editor=bc.editor.create(document.getElementById("liascript-editor"),{value:e,language:"markdown",theme:this.config.lights?"vs-light":"vs-dark",automaticLayout:!0}),window.LIA.editor.addAction({id:"compile",label:"LiaScript compile",keybindings:[bc.KeyMod.CtrlCmd|bc.KeyCode.KEY_S],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){window.LIA.compile()}}),bc.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:function(e,t,i){const n=e.getWordAtPosition(t),o=e.getValueInRange({startLineNumber:t.lineNumber,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}),r={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn},s=[];if(o.match(/(lia|hili|voice).*$/m))for(const e of tR)s.push({label:e.label,kind:bc.languages.CompletionItemKind.Text,documentation:e.documentation,insertText:e.insertText,range:r,command:{id:"editor.action.insertLineAfter"}});return{suggestions:s}}}),bc.languages.registerCodeActionProvider("markdown",{provideCodeActions(e,t,i){var n,o;window.LIA.isCtrlPressed&&(window.LIA.isCtrlPressed=!1,null===(n=window.LIA)||void 0===n||null===(o=n.preview)||void 0===o||o.gotoLine(t.startLineNumber-1))}}),null===(t=window.LIA.editor)||void 0===t||t.onKeyDown((e=>{5==e.keyCode&&(window.LIA.isCtrlPressed=!0)})),null===(i=window.LIA.editor)||void 0===i||i.onKeyUp((e=>{5==e.keyCode&&(window.LIA.isCtrlPressed=!1)}))}init(){this.initEditor("");const e=new Hr;this.provider=new _c(this.params.id,e,{url:"https//signaling.simplewebrtc.com:443/"}),this.indexeddbProvider=new Pl(this.params.id,e);const t=this.provider.awareness;let i;t.setLocalStateField("user",this.config.user),this.provider.on("status",(e=>{console.log("-----------------------------",e.status),i=e.status,e.status})),t.on("change",(e=>{const i=document.getElementById("number_of_users");i&&(i.innerText=""+Array.from(t.getStates().values()).length)}));new ZI(e.getText(this.params.id),window.LIA.editor.getModel(),new Set([window.LIA.editor]),t)}navigation(){const e=this.params.id;return this.index.get(e).then((e=>{if(e){const i=document.getElementById("gist-share-course");var t;if(i)(null===(t=e.meta)||void 0===t?void 0:t.gist_url)?i.href="https://LiaScript.github.io/course/?"+e.meta.gist_url:i.classList.add("disabled")}})),`\n      <nav class="navbar navbar-expand-lg bg-light">\n        <div class="container-fluid">\n          <a class="navbar-brand" href="./">${this.title}</a>\n\n          <div class="btn-toolbar btn-group-sm" role="toolbar" aria-label="Toolbar with button groups">\n            <div class="btn-group btn-outline-secondary me-2" role="group" aria-label="Basic radio toggle button group">\n              <input \n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio1"\n                autocomplete="off"\n            \n                onclick="window.LIA.showMode(0)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio1"\n                title="Editor only"\n              >\n                <i class="bi bi-pencil"></i>\n              </label>\n      \n              <input\n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio2"\n                autocomplete="off"\n                checked\n            \n                onclick="window.LIA.showMode(2)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio2"\n                title="Split view"\n              >\n                <i class="bi bi-layout-split"></i>\n              </label>\n      \n              <input\n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio3"\n                autocomplete="off"\n                onclick="window.LIA.showMode(1)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio3"\n                title="Preview only"\n              >\n                <i class="bi bi-eye"></i>\n              </label>\n            </div>\n\n            <button\n              type="button"\n              class="btn btn-outline-secondary me-2 px-3"\n              onclick="window.LIA.compile()"\n\n              title="Compile (Ctrl+S)"\n            >\n              <i class="bi bi-arrow-counterclockwise"></i>\n            </button>\n\n            \x3c!--button \n              type="button" \n              class="btn btn-outline-secondary px-3"\n              onclick="compile()"\n\n              title="Show help"\n            >\n              <i class="bi bi-question-circle"></i>\n            </button--\x3e\n          </div>\n\n          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">\n            <span class="navbar-toggler-icon"></span>\n          </button>\n          \n          <div class="collapse navbar-collapse" id="navbarSupportedContent">\n            <ul class="navbar-nav me-auto mb-lg-0">\n              \n            </ul>\n            \n            \x3c!--div class="container-fluid"--\x3e\n              \n                <div class="navbar-nav mb-2 mb-lg-0">\n\n                  <div class="nav-item nav-item-sm ml-4 me-4">\n                    <a class="nav-link" aria-current="page" href="./?/edit" title="Create a new and empty document">\n                      <i class="bi bi-plus"></i>\n                      New\n                    </a>\n                  </div>\n\n                <div class="nav-item me-4">\n                  <button type="button" class="btn nav-link btn-link" onclick="window.LIA.fork()" title="Create a copy of this document">\n                    <i class="bi bi-bezier2"></i> Fork\n                  </button>\n                </div>\n\n                  <div class="nav-item dropdown me-4" >\n                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n                      Menu\n                    </a>\n              \n                    <ul class="dropdown-menu">\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Share editor ...\n                        </h6>\n                      </li>\n                      <li>\n                        <button id="collaboration-link" class="btn dropdown-item btn-link" onclick="window.LIA.share('url')">\n                          collaboration link\n                        </button>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.share('zip')">\n                          snapshot url\n                        </button>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.share('file')">\n                          external resource\n                        </button>\n                      </li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Share course via ...\n                        </h6>\n                      </li>\n                      <li><a id="gist-share-course" class="dropdown-item" href="" target="_blank">Gist link</a></li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Download ...\n                        </h6>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.download()">\n                          README.md\n                        </button>\n                      </li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Export to...\n                        </h6>\n                      </li>\n                      <li>\n                        <a id="gist-export" class="btn dropdown-item btn-link" aria-current="page" target="_blank" href="${dn(["export","github"])}/${this.params.id}" title="Store the document on github">\n                          GitHub gist\n                        </a>\n                      </li>\n                    </ul>\n                  </div>\n                \n                \n                  \n                    <span class="btn btn-primary" id="online-users-overview">\n                      <i class="bi bi-people-fill"></i>\n                      <span id="number_of_users">1</span>\n                        ONLINE\n                      </span>\n                    </span>\n                  \n                </div>    \n        \n              \n\n\n            \x3c!--/div--\x3e\n          </div>\n        </nav>`}body(){return'\n    <div class="container p-0" style="max-width:100%">\n      <div id="liascript-ide" class="row align-items-start p-0 m-0 flex-nowrap" style="height: calc(100vh - 56px);">\n        <div class="col-6 w-50 p-0 h-100" id="liascript-editor-container">\n          <div class="col w-100 p-0 h-100" id="liascript-editor"></div>\n        </div>\n\n        <div class="col-6 w-50 h-100 p-0" id="liascript-preview-container">\n          <div id="preview-overlay" style="position: absolute; background-color: white; width:50%; height: 100%">\n            <div class="spinner-grow" style="width: 5rem; height: 5rem; margin-top: 50%; margin-left: 45%; margin-right: 45%;" role="status">\n              <span class="visually-hidden">Loading...</span>\n            </div>\n          </div>\n          <iframe style="height: 100%; width:100%" id="liascript-preview" src="./liascript/index.html?"></iframe>\n        </div>\n      </div>\n    </div>\n    '}async getHtml(e){e.innerHTML=this.navigation()+this.body(),this.init()}constructor(e,t){super(e),s(this,"title","Lia[Edit]"),this.setTitle("Lia[Edit]"),e.id?(this.index.maybeInit(e.id),this.loadConfig(),this.initPreview()):window.location.search="/edit/"+cn(24)}}function PM(e){const t=document.getElementById(e);t&&(t.disabled=!0,t.classList.add("disabled"))}class FM extends OM{init(){let e=this;if(this.params.code)iR.decompress(this.params.code).then((t=>{e.showEditor(t)}));else if(this.params.file){const t=this.params.file.replace(/\/[^\/]*$/,"/");fetch(this.params.file).then((e=>e.text())).then((i=>{var n;e.showEditor((n=t,i.replace(/(\[[^\]]*\]\()(?!(http:|https:|ipfs:|#|\/\/))\.?\/?([^\)]+)/g,`$1${n}$3`))),window.LIA.compile()}))}}showEditor(e){this.initEditor(e),PM("collaboration-link"),PM("gist-export");const t=document.getElementById("online-users-overview");t&&t.classList.replace("btn-primary","btn-secondary")}constructor(e){e.id="1",super(e),this.setTitle("Show"),this.title="Lia[Share]"}}function BM(e,t){if(t.length>0){e+="?"+t[0][0]+"="+t[0][1];for(let i=1;i<t.length;i++)e+="&"+t[i][0]+"="+t[i][1]}return e}async function jM(e){const t=await fetch((i=BM("https://github.com/login/oauth/access_token",[["client_id",mn.github.clientId],["client_secret",mn.github.clientSecret],["code",e]]),mn.proxy?mn.proxy+encodeURIComponent(i):i),{method:"post"});var i;const n=await t.json();var o;return o=n.contents,Object.fromEntries(o.split("&").map((e=>e.split("="))))}async function zM(e,t,i,n,o){const r={description:i,public:!0,files:{}},s=t+".md";r.files[s]={content:n},o=o?"/"+o:"";const a=await fetch("https://api.github.com/gists"+o,{headers:{"User-Agent":"LiaScript",Authorization:e.token_type+" "+e.access_token,Accept:"application/vnd.github+json"},method:"post",body:JSON.stringify(r)}),l=await a.json();return"Not Found"==l.message?await zM(e,t,i,n):"Bad credentials"==l.message?{error:"Bad credentials"}:{url:l.html_url,id:l.id,raw_url:l.files[s].raw_url}}class WM extends un{async getHtml(e){const t=this.type,i=this.params,n=new Hr,o=new Pl(i.id,n),r=this.index.get(i.id),s=this.index;o.on("synced",(async e=>{const o=await r,a=n.getText(i.id).toJSON();switch(console.warn("--------------------------"),t){case"github":{var l,c;(null===(l=this.config.credentials)||void 0===l?void 0:l.github)||(this.config.credentials.github=await jM(i.code),this.storeConfig());const e=await zM(this.config.credentials.github,o.meta.title,(null===(c=o.meta.macro)||void 0===c?void 0:c.comment)||"",a,o.meta.gist_id);"Bad credentials"==e.error&&(this.config.credentials.github=void 0,this.storeConfig(),window.location.reload()),o.meta.gist_id!=e.id&&await s.put(i.id,{gist_id:e.id,gist_url:e.raw_url}),window.location.href=e.url;break}default:console.warn("unknown service: ",t)}}))}constructor(e,t){var i,n;super(e),this.type=t,this.loadConfig(),this.params.id=this.params.exportid||this.params.state,"github"==t&&!(null===(i=this.config.credentials)||void 0===i?void 0:i.github)&&this.params.exportid&&(n=this.params.exportid,window.location.href=BM("https://github.com/login/oauth/authorize/",[["client_id",mn.github.clientId],["scope","gist"],["redirect_uri",dn(["export","github"])+"/"],["state",n]]))}}const HM=async()=>{if(location.pathname.startsWith("liascript"))return;const e=[{path:"/",view:fn},{path:"/edit",view:OM},{path:"/edit/:id",view:OM},{path:"/show/code/:code",view:FM},{path:"/show/file/:file",view:FM},{path:"/export/github/&code=:code&state=:state",view:WM,init:"github"},{path:"/export/github/:exportid",view:WM,init:"github"}];let t=e.map((e=>{return{route:e,result:location.search.slice(1).match((t=e.path,new RegExp("^"+t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var t})).find((e=>null!==e.result));t||(t={route:e[0],result:[location.search]});const i=new t.route.view((e=>{const t=e.result.slice(1),i=Array.from(e.route.path.matchAll(/:(\w+)/g)).map((e=>e[1]));return Object.fromEntries(i.map(((e,i)=>[e,t[i]])))})(t),t.route.init);i.getHtml(document.body)};window.addEventListener("popstate",HM),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(e=>{var t;e.target.matches("[data-link]")&&(e.preventDefault(),t=e.target.href,history.pushState(null,null,t),HM())})),HM()}));