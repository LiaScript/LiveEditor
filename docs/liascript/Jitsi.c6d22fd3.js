var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirea18f;e.register("bk8IY",(function(n,o){var i,t,s,c;i=n.exports,t="Sync",s=()=>d,Object.defineProperty(i,t,{get:s,set:c,enumerable:!0,configurable:!0});var r=e("bQEo7");class d extends r.Sync{users={};destroy(){this.connection?.disconnect(),super.destroy()}async connect(e){super.connect(e),this.domain=e.config||"meet.jit.si",window.JitsiMeetJS?this.init(!0):this.load(["https://meet.jit.si/libs/lib-jitsi-meet.min.js"],this)}init(e,n){const o=this.uniqueID();if(e&&window.JitsiMeetJS&&o){window.LIA.debug||window.JitsiMeetJS.setLogLevel(window.JitsiMeetJS.logLevels.ERROR),this.connection=new window.JitsiMeetJS.JitsiConnection(null,null,{hosts:{domain:this.domain,muc:`conference.${this.domain}`,focus:`focus.${this.domain}`},configOverwrite:{openBridgeChannel:!1},serviceUrl:`https://${this.domain}/http-bind?room=${btoa(o)}`,clientNode:"http://jitsi.org/jitsimeet"});const e=this;this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_ESTABLISHED,(function(){e.conferenceRoom=e.connection.initJitsiConference(btoa(o).toLowerCase(),{configOverwrite:{openBridgeChannel:!1},enableLayerSuspension:!0,p2p:{enabled:!0}}),e.conferenceRoom.setDisplayName(e.token),e.conferenceRoom.on(window.JitsiMeetJS.events.conference.CONFERENCE_JOINED,(()=>{e.sendConnect()})),e.conferenceRoom.on(window.JitsiMeetJS.errors.conference.PASSWORD_REQUIRED,(()=>{e.sendDisconnectError("password required")})),e.conferenceRoom.on(window.JitsiMeetJS.events.conference.USER_JOINED,(n=>{e.users[n]||(e.users[n]=null)})),e.conferenceRoom.on(window.JitsiMeetJS.events.conference.USER_LEFT,(n=>{const o=e.users[n];o&&e.db.removePeer(o),delete e.users[n]})),e.conferenceRoom.on(window.JitsiMeetJS.events.conference.MESSAGE_RECEIVED,((n,o)=>{const i=e.conferenceRoom.getParticipants();for(let o=0;o<i.length;o++)if(n===i[o].getId()){e.users[n]=i[o].getDisplayName();break}const t=r.base64_to_unit8(o.slice(1));"1"===o[0]?e.applyUpdate(o):"0"===o[0]&&e.pubsubReceive(t)})),e.conferenceRoom.join()})),this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_FAILED,(n=>{e.sendDisconnectError("Connection failed"+n)})),this.connection.addEventListener(window.JitsiMeetJS.events.connection.CONNECTION_DISCONNECTED,(n=>{e.disconnect()})),this.connection.connect()}else{let e="Jitsi unknown error";n?e="Could not load resource: "+n:void 0===window.JitsiMeetJS&&(e="Could not load Jitsi interface"),this.sendDisconnectError(e)}}broadcast(e,n){try{this.conferenceRoom?.sendTextMessage((e?"1":"0")+r.uint8_to_base64(n))}catch(e){console.warn("Jitsi: broadcast =>",e.message)}}}}));